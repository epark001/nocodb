import{a6 as t,h as H,ae as D,r as g,b as _,aG as N,aH as U,S as A,$ as B,i as E,cq as F,aq as q,fp as G,o as L,C as z,w as K,E as r,H as W,I as Z}from"./entry.13466615.js";import{f as J,h as Q,E as X,C as ee}from"./index.5263eb1d.js";import{a as ne}from"./useMetas.223da623.js";import{u as ae}from"./index.a6329415.js";import{g as oe,c as S,d as te,r as re,a as ie}from"./index.93e75123.js";import{u as j}from"./FormItemContext.27b2e5db.js";import{_ as le}from"./_plugin-vue_export-helper.c27b6911.js";import"./createForOfIteratorHelper.37be2624.js";import"./index.a1080274.js";import"./useMergedState.1cc2a884.js";import"./useMemo.4991ab9d.js";import"./useState.a6853ebd.js";var R=function(){return{format:String,showNow:{type:Boolean,default:void 0},showHour:{type:Boolean,default:void 0},showMinute:{type:Boolean,default:void 0},showSecond:{type:Boolean,default:void 0},use12Hours:{type:Boolean,default:void 0},hourStep:Number,minuteStep:Number,secondStep:Number,hideDisabledOptions:{type:Boolean,default:void 0},popupClassName:String}};function se(c){var m=oe(c,t(t({},R()),{},{order:{type:Boolean,default:!0}})),$=m.TimePicker,y=m.RangePicker,x=H({name:"ATimePicker",inheritAttrs:!1,props:t(t(t(t({},S()),te()),R()),{},{addon:{type:Function}}),slot:["addon","renderExtraFooter","suffixIcon","clearIcon"],setup:function(l,s){var v=s.slots,p=s.expose,e=s.emit,P=s.attrs,f=j();D(!(v.addon||l.addon),"TimePicker","`addon` is deprecated. Please use `v-slot:renderExtraFooter` instead.");var n=g();p({focus:function(){var o;(o=n.value)===null||o===void 0||o.focus()},blur:function(){var o;(o=n.value)===null||o===void 0||o.blur()}});var u=function(o,i){e("update:value",o),e("change",o,i),f.onFieldChange()},k=function(o){e("update:open",o),e("openChange",o)},C=function(o){e("focus",o)},w=function(o){e("blur",o),f.onFieldBlur()},O=function(o){e("ok",o)};return function(){var d=l.id,o=d===void 0?f.id.value:d;return _($,t(t(t({},P),N(l,["onUpdate:value","onUpdate:open"])),{},{id:o,dropdownClassName:l.popupClassName,mode:void 0,ref:n,renderExtraFooter:l.addon||v.addon||l.renderExtraFooter||v.renderExtraFooter,onChange:u,onOpenChange:k,onFocus:C,onBlur:w,onOk:O}),v)}}}),h=H({name:"ATimeRangePicker",inheritAttrs:!1,props:t(t(t(t({},S()),re()),R()),{},{order:{type:Boolean,default:!0}}),slot:["renderExtraFooter","suffixIcon","clearIcon"],setup:function(l,s){var v=s.slots,p=s.expose,e=s.emit,P=s.attrs,f=g(),n=j();p({focus:function(){var a;(a=f.value)===null||a===void 0||a.focus()},blur:function(){var a;(a=f.value)===null||a===void 0||a.blur()}});var u=function(a,b){e("update:value",a),e("change",a,b),n.onFieldChange()},k=function(a){e("update:open",a),e("openChange",a)},C=function(a){e("focus",a)},w=function(a){e("blur",a),n.onFieldBlur()},O=function(a,b){e("panelChange",a,b)},d=function(a){e("ok",a)},o=function(a,b,Y){e("calendarChange",a,b,Y)};return function(){var i=l.id,a=i===void 0?n.id.value:i;return _(y,t(t(t({},P),N(l,["onUpdate:open","onUpdate:value"])),{},{id:a,dropdownClassName:l.popupClassName,picker:"time",mode:void 0,ref:f,onChange:u,onOpenChange:k,onFocus:C,onBlur:w,onPanelChange:O,onOk:d,onCalendarChange:o}),v)}}});return{TimePicker:x,TimeRangePicker:h}}var M=se(ie),I=M.TimePicker,V=M.TimeRangePicker;const ue=U(I,{TimePicker:I,TimeRangePicker:V,install:function(m){return m.component(I.name,I),m.component(V.name,V),m}}),de=H({__name:"TimePicker",props:{modelValue:{},isPk:{type:Boolean}},emits:["update:modelValue"],setup(c,{emit:m}){const{isMysql:$}=ne(),{showNull:y}=A(),x=B(J,g(!1)),h=B(Q,g(!1)),T=B(X,g(!1)),l=B(ee),s=g(!1),v=$(l.value.base_id)?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm:ssZ",p=E({get(){if(!c.modelValue)return;let n=F(c.modelValue);if(n.isValid()||(n=F(c.modelValue,"HH:mm:ss")),n.isValid()||(n=F(`1999-01-01 ${c.modelValue}`)),!n.isValid()){s.value=!0;return}return n},set(n){if(!n){m("update:modelValue",null);return}if(n.isValid()){const u=n.format("HH:mm"),k=F(`1999-01-01 ${u}:00`);m("update:modelValue",k.format(v))}}}),e=g(!1),P=`picker_${Math.floor(Math.random()*99999)}`;q(e,n=>{n?G(document.querySelector(`.${P}`),()=>e.value=!1):T.value=!1},{flush:"post"});const f=E(()=>c.modelValue===null&&y.value?"NULL":s.value?"Invalid time":"");return ae(h,n=>{switch(n.key){case"Enter":n.stopPropagation(),e.value=!0;break;case"Escape":e.value&&(n.stopPropagation(),e.value=!1);break}}),(n,u)=>{const k=ue;return L(),z(k,{value:r(p),"onUpdate:value":u[0]||(u[0]=C=>W(p)?p.value=C:null),"show-time":!0,bordered:!1,"use12-hours":"",format:"HH:mm",class:Z(["!w-full !px-0 !border-none",{"nc-null":n.modelValue===null&&r(y)}]),placeholder:r(f),"allow-clear":!r(x)&&!r(p)&&!n.isPk,"input-read-only":!0,open:(r(x)||r(p)&&n.isPk)&&!r(h)&&!r(T)?!1:r(e),"popup-class-name":`${P} nc-picker-time ${r(e)?"active":""}`,onClick:u[1]||(u[1]=C=>e.value=(r(h)||r(T))&&!r(e)),onOk:u[2]||(u[2]=C=>e.value=!r(e))},{suffixIcon:K(()=>[]),_:1},8,["value","class","placeholder","allow-clear","open","popup-class-name"])}}});const ye=le(de,[["__scopeId","data-v-d12c1088"]]);export{ye as default};

import{cd as O,f4 as y,fa as j}from"./entry.13466615.js";const b=(e,t)=>e&&(t==null?void 0:t.filter(i=>i.pk).map(i=>e==null?void 0:e[i.title]).join("___")),h=(e,t)=>{const i={},a=t==null?void 0:t.filter(s=>s.pk);if(e&&a&&a.length)for(const s of a)s.title&&(i[s.title]=e[s.title]);return i},R=(e,t)=>{for(const[i,a]of Object.entries(t))if(Object.keys(e).every(s=>e[s]===a.row[s]))return parseInt(i);return-1};async function T({getMeta:e,row:t,meta:i,ltarState:a,throwError:s,undo:u=!1}){var p;const r=new Set,_=await((p=i.columns)==null?void 0:p.reduce(async(k,n)=>{const f=await k;if(a&&n.uidt===O.LinkToAnotherRecord&&n.colOptions.type===y.BELONGS_TO&&a[n.title]){const d=n.colOptions,l=i.columns.find(o=>d.fk_child_column_id===o.id),c=await e(d.fk_related_model_id);c&&l&&(f[l.title]=a[n.title][c.columns.find(o=>o.id===d.fk_parent_column_id).title],r.delete(l.title))}return j(n,t)&&r.add(n.title),(!n.ai||u)&&(t==null?void 0:t[n.title])!==null&&(f[n.title]=t==null?void 0:t[n.title]),f},Promise.resolve({})));if(s&&r.size)throw new Error(`Missing required columns: ${[...r].join(", ")}`);return{missingRequiredColumns:r,insertObj:_}}export{b as e,R as f,T as p,h as r};

import{h as ee,A as te,al as R,r as y,Z as oe,$ as S,i as d,fJ as le,o as c,c as x,E as l,C as M,W as C,b as B,w as I,d as ne,t as j,a as V,I as z,fK as ie,aj as ae,H as L,cF as g,Q as K,R as W,_ as se,p as re,e as ue}from"./entry.51f4e399.js";import{_ as me}from"./EditOrAddProvider.vue.09b12d8b.js";import{C as pe,M as de,c as ce}from"./index.5263eb1d.js";import{a as N,i as P,b as H,c as U,d as q,e as _e}from"./virtualCell.4dce1393.js";import{u as ve}from"./useMetas.ba7abae7.js";import{u as fe}from"./index.9e760c64.js";import{D as ye}from"./index.252dc7b4.js";import{_ as Ce}from"./_plugin-vue_export-helper.c27b6911.js";import"./Icon.vue.1162f18b.js";import"./Button.vue.793bcd1d.js";import"./index.0db47614.js";import"./debounce.7d32c110.js";import"./toNumber.9dc54e53.js";import"./isSymbol.b53bd26f.js";import"./useBetaFeatureToggle.5dbba600.js";import"./index.e5ddde08.js";import"./validation.6db726f3.js";import"./index.de92142d.js";import"./FormItem.cda40628.js";import"./identity.dd5da9ba.js";import"./_getPrototype.ec1165af.js";import"./Col.88cfabc0.js";import"./responsiveObserve.501a6cf9.js";import"./toArray.06afb623.js";import"./FormItemContext.e001cd7c.js";import"./useSize.3b3f469f.js";import"./_flatRest.ff2d3d5c.js";import"./isPlainObject.ecf52d25.js";import"./index.e760d172.js";import"./Input.7cb175ff.js";import"./antInputDirective.8ac36ea7.js";import"./SearchOutlined.dec109ce.js";import"./TextArea.442a25cb.js";import"./Password.d493e47a.js";import"./index.0d6d8ba8.js";import"./Checkbox.a529f1e6.js";import"./createForOfIteratorHelper.12419aa5.js";import"./index.5e746f62.js";import"./isMobile.e2e89480.js";import"./useMemo.b13a9257.js";import"./useMergedState.5e6500b1.js";import"./useState.6010d8b6.js";import"./DownOutlined.db6f6406.js";import"./CheckOutlined.ef30fafc.js";import"./Dropdown.dc69c0a4.js";import"./RightOutlined.90e8180f.js";const be=K(()=>W(()=>import("./VirtualCellIcon.f17eeb0a.js"),["./VirtualCellIcon.f17eeb0a.js","./index.5263eb1d.js","./entry.51f4e399.js","./entry.0f786d51.css","./virtualCell.4dce1393.js"],import.meta.url).then(i=>i.default||i)),$e=K(()=>W(()=>import("./Menu.5c9df096.js"),["./Menu.5c9df096.js","./Icon.vue.1162f18b.js","./entry.51f4e399.js","./entry.0f786d51.css","./CellIcon.8a6080fd.js","./index.5263eb1d.js","./cell.1732684e.js","./useMetas.ba7abae7.js","./DeleteModal.vue.909e0964.js","./Button.vue.793bcd1d.js","./index.0db47614.js","./debounce.7d32c110.js","./toNumber.9dc54e53.js","./isSymbol.b53bd26f.js","./_plugin-vue_export-helper.c27b6911.js","./Button.95d2a5ed.css","./Modal.vue.b59a28af.js","./DeleteModal.7ab6f524.css","./useViewSorts.b2d2a7e1.js","./useSharedView.0db5f32b.js","./useSmartsheetStore.1784ce8b.js","./views.28a76d89.js","./index.b9981e09.js","./index.9e760c64.js","./index.252dc7b4.js","./Dropdown.dc69c0a4.js","./RightOutlined.90e8180f.js","./index.2b3cfde3.js","./Menu.57d81e36.css"],import.meta.url).then(i=>i.default||i)),J=i=>(re("data-v-66efba1c"),i=i(),ue(),i),ke=["title"],we={key:1,class:"text-red-500"},Ie=J(()=>V("div",{class:"flex-1"},null,-1)),he=J(()=>V("div",null,null,-1)),Oe=ee({__name:"VirtualCell",props:{column:{},hideMenu:{type:Boolean},required:{type:[Boolean,Number]}},setup(i){const A=i,{t:h}=te(),e=R(A,"column"),Q=R(A,"hideMenu"),u=y(!1),_=y(!1);oe(pe,e);const{metas:Z}=ve(),{isUIAllowed:G}=fe(),s=S(de,y()),O=S(ce,y(!1)),D=d(()=>{var t;return(t=e.value)==null?void 0:t.colOptions}),T=d(()=>{var t;return(t=s==null?void 0:s.value)==null?void 0:t.title}),E=d(()=>{var t,o,n,a,m,p;return N(e.value)||P(e.value)||H(e.value)?(t=e.value)==null?void 0:t.colOptions:(n=(o=e==null?void 0:e.value)==null?void 0:o.colOptions)!=null&&n.fk_relation_column_id?(p=(m=(a=s==null?void 0:s.value)==null?void 0:a.columns)==null?void 0:m.find(w=>{var f,r;return w.id===((r=(f=e==null?void 0:e.value)==null?void 0:f.colOptions)==null?void 0:r.fk_relation_column_id)}))==null?void 0:p.colOptions:null}),b=d(()=>{var t,o,n;return((t=E.value)==null?void 0:t.fk_related_model_id)&&((n=Z.value)==null?void 0:n[(o=E.value)==null?void 0:o.fk_related_model_id])}),v=d(()=>{var t;return(t=b.value)==null?void 0:t.title}),$=d(()=>{var t,o,n;if((t=b.value)!=null&&t.columns){if(U(e.value))return(o=b.value)==null?void 0:o.columns.find(a=>a.id===D.value.fk_rollup_column_id);if(q(e.value))return(n=b.value)==null?void 0:n.columns.find(a=>a.id===D.value.fk_lookup_column_id)}return""}),X=d(()=>{var t,o,n,a,m,p;return e.value?P(e.value)?`'${T.value}' ${h("labels.hasMany")} '${v.value}'`:N(e.value)?`'${T.value}' & '${v.value}' ${h("labels.manyToMany")}`:H(e.value)?`'${(t=e==null?void 0:e.value)==null?void 0:t.title}' ${h("labels.belongsTo")} '${v.value}'`:q(e.value)?`'${$.value.title}' from '${v.value}' (${$.value.uidt})`:_e(e.value)?`Formula - ${le((n=(o=e.value)==null?void 0:o.colOptions)==null?void 0:n.formula,(a=s==null?void 0:s.value)==null?void 0:a.columns,(p=(m=e.value)==null?void 0:m.colOptions)==null?void 0:p.formula_raw)}`:U(e.value)?`'${$.value.title}' of '${v.value}' (${$.value.uidt})`:"":""}),k=y(null),Y=async t=>{k.value=t,u.value=!0},F=()=>{k.value=null,u.value=!1};return(t,o)=>{var f;const n=be,a=se,m=$e,p=me,w=ye;return c(),x("div",{class:z(["flex items-center w-full text-xs text-gray-500 font-weight-medium",{"h-full":l(e)}]),onContextmenu:o[5]||(o[5]=g(r=>_.value=!l(_),["right"]))},[l(e)?(c(),M(n,{key:0})):C("",!0),B(a,{placement:"bottom"},{title:I(()=>[ne(j(l(X)),1)]),default:I(()=>[V("span",{class:z(["name pl-1",{truncate:!l(O),"whitespace-pre-line":l(O)}]),title:l(e).title},j(l(e).title),11,ke)]),_:1}),l(ie)(l(e),((f=l(s))==null?void 0:f.columns)||[])||t.required?(c(),x("span",we,"Â *")):C("",!0),l(Q)?C("",!0):(c(),x(ae,{key:2},[Ie,!l(O)&&l(G)("edit-column")?(c(),M(m,{key:0,"is-open":l(_),"onUpdate:isOpen":o[0]||(o[0]=r=>L(_)?_.value=r:null),virtual:!0,onAddColumn:Y,onEdit:o[1]||(o[1]=r=>u.value=!0)},null,8,["is-open"])):C("",!0)],64)),B(w,{visible:l(u),"onUpdate:visible":o[4]||(o[4]=r=>L(u)?u.value=r:null),class:"h-full",trigger:["click"],placement:"bottomRight","overlay-class-name":"nc-dropdown-edit-column"},{overlay:I(()=>[l(u)?(c(),M(p,{key:0,column:l(k)?null:l(e),"column-position":l(k),class:"w-full",onSubmit:F,onCancel:F,onClick:o[2]||(o[2]=g(()=>{},["stop"])),onKeydown:o[3]||(o[3]=g(()=>{},["stop"]))},null,8,["column","column-position"])):C("",!0)]),default:I(()=>[he]),_:1},8,["visible"])],34)}}});const Ct=Ce(Oe,[["__scopeId","data-v-66efba1c"]]);export{Ct as default};

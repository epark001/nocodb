import{_ as T}from"./ViewIcon.vue.9fe867dc.js";import{_ as B}from"./nuxt-link.b37e7c69.js";import{o as i,c,a as l,h as G,A as O,r as R,k as F,b as s,w as a,E as n,G as g,d as C,t as _,aj as j,C as f,D as y,W as v,F as V,fb as u,J as h,K}from"./entry.51f4e399.js";import{p as Z}from"./useMetas.ba7abae7.js";import{u as z}from"./useCopy.3e897b55.js";import{u as J}from"./useDashboard.fc1e1c09.js";import{a as W}from"./useSmartsheetStore.1784ce8b.js";import{_ as q,a as H}from"./index.714e2a51.js";import{_ as Q}from"./_plugin-vue_export-helper.c27b6911.js";import"./views.28a76d89.js";import"./useSharedView.0db5f32b.js";import"./index.5263eb1d.js";import"./index.b9981e09.js";import"./eagerComputed.6062ac13.js";import"./useState.6010d8b6.js";import"./index.0db47614.js";import"./debounce.7d32c110.js";import"./toNumber.9dc54e53.js";import"./isSymbol.b53bd26f.js";import"./index.09b19c06.js";import"./LeftOutlined.3bb8aa17.js";import"./RightOutlined.90e8180f.js";import"./index.5e746f62.js";import"./toArray.06afb623.js";import"./antInputDirective.8ac36ea7.js";import"./isMobile.e2e89480.js";import"./useMemo.b13a9257.js";import"./useMergedState.5e6500b1.js";import"./DownOutlined.db6f6406.js";import"./CheckOutlined.ef30fafc.js";import"./SearchOutlined.dec109ce.js";import"./FormItemContext.e001cd7c.js";import"./useBreakpoint.a91853f1.js";import"./responsiveObserve.501a6cf9.js";import"./index.a3117839.js";import"./index.0d6d8ba8.js";import"./Checkbox.a529f1e6.js";import"./createForOfIteratorHelper.12419aa5.js";import"./index.252dc7b4.js";import"./Dropdown.dc69c0a4.js";import"./index.2a1a64ce.js";import"./index.e760d172.js";import"./Input.7cb175ff.js";import"./isPlainObject.ecf52d25.js";import"./_getPrototype.ec1165af.js";import"./TextArea.442a25cb.js";import"./Password.d493e47a.js";const U={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},X=l("path",{fill:"currentColor",d:"M12 9a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5a5 5 0 0 1 5-5a5 5 0 0 1 5 5a5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"},null,-1),Y=[X];function tt(k,m){return i(),c("svg",U,Y)}const et={name:"mdi-visibility",render:tt},ot={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},st=l("path",{fill:"currentColor",d:"M11.83 9L15 12.16V12a3 3 0 0 0-3-3h-.17m-4.3.8l1.55 1.55c-.05.21-.08.42-.08.65a3 3 0 0 0 3 3c.22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53a5 5 0 0 1-5-5c0-.79.2-1.53.53-2.2M2 4.27l2.28 2.28l.45.45C3.08 8.3 1.78 10 1 12c1.73 4.39 6 7.5 11 7.5c1.55 0 3.03-.3 4.38-.84l.43.42L19.73 22L21 20.73L3.27 3M12 7a5 5 0 0 1 5 5c0 .64-.13 1.26-.36 1.82l2.93 2.93c1.5-1.25 2.7-2.89 3.43-4.75c-1.73-4.39-6-7.5-11-7.5c-1.4 0-2.74.25-4 .7l2.17 2.15C10.74 7.13 11.35 7 12 7Z"},null,-1),at=[st];function it(k,m){return i(),c("svg",ot,at)}const nt={name:"mdi-visibility-off",render:it},lt={class:"w-full"},rt=["title"],ct={class:"flex items-center items-center gap-1"},mt={class:"h-min max-w-[250px]"},pt={key:0,class:"text-center"},dt=["title"],_t=G({__name:"SharedViewList",setup(k){const{t:m}=O(),{$api:b,meta:S}=W(),{copy:L}=z(),{dashboardUrl:p}=J(),$=R(),x=async()=>{var t;$.value=(await b.dbViewShare.list((t=S.value)==null?void 0:t.id)).list};F(x);const w=t=>{let o;switch(t.type){case u.FORM:o="form";break;case u.MAP:o="map";break;case u.KANBAN:o="kanban";break;default:o="view"}return`/nc/${o}/${t.uuid}`},M=t=>{var o;return t.type===u.GRID?(t.meta=t.meta&&Z(t.meta),(o=t.meta)!=null&&o.allowCSVDownload?"✔️":"❌"):"N/A"},D=t=>{try{L(`${p==null?void 0:p.value}#${w(t)}`),h.success(m("msg.info.copiedToClipboard"))}catch(o){h.error(o.message)}},A=async t=>{try{await b.dbViewShare.delete(t),h.success(m("msg.success.sharedViewDeleted")),await x()}catch(o){h.error(await K(o))}};return(t,o)=>{const E=g,N=T,r=q,I=B,P=H;return i(),c("div",lt,[s(P,{size:"small","data-source":n($),pagination:{position:["bottomCenter"]},locale:{emptyText:t.$t("labels.noData")}},{emptyText:a(()=>[s(E,{image:n(g).PRESENTED_IMAGE_SIMPLE,description:t.$t("labels.noData")},null,8,["image","description"])]),default:a(()=>[s(r,{key:"title",title:t.$t("labels.viewName"),"data-index":"title"},{default:a(({text:e,record:d})=>[l("div",{class:"text-xs flex items-center gap-1",title:e},[s(N,{class:"w-5",meta:d},null,8,["meta"]),C(" "+_(e),1)],8,rt)]),_:1},8,["title"]),s(r,{key:"title",title:t.$t("labels.viewLink"),"data-index":"title"},{default:a(({record:e})=>[s(I,{to:w(e),class:"text-xs"},{default:a(()=>[C(_(`${n(p)}#${w(e)}`),1)]),_:2},1032,["to"])]),_:1},8,["title"]),s(r,{key:"password",title:t.$t("labels.password"),"data-index":"title"},{default:a(({record:e})=>[l("div",ct,[e.password?(i(),c(j,{key:0},[l("span",mt,_(e.showPassword?e.password:Array(e.password.length+1).join("*")),1),(i(),f(y(e.showPassword?n(nt):n(et)),{onClick:d=>e.showPassword=!e.showPassword},null,8,["onClick"]))],64)):v("",!0)])]),_:1},8,["title"]),s(r,{key:"meta",title:t.$t("labels.downloadAllowed"),"data-index":"title"},{default:a(({record:e})=>["meta"in e?(i(),c("div",pt,_(M(e)),1)):v("",!0)]),_:1},8,["title"]),s(r,{key:"id",title:t.$t("labels.actions"),"data-index":"title"},{default:a(({record:e})=>[l("div",{class:"text-sm flex gap-2",title:t.text},[(i(),f(y(n(V).copy),{class:"cursor-pointer",onClick:d=>D(e)},null,8,["onClick"])),(i(),f(y(n(V).delete),{class:"cursor-pointer",onClick:d=>A(e.id)},null,8,["onClick"]))],8,dt)]),_:1},8,["title"])]),_:1},8,["data-source","locale"])])}}});const le=Q(_t,[["__scopeId","data-v-6dbf8091"]]);export{le as default};

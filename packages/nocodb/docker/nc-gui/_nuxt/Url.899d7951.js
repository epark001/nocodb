import{g as A,i as V,E as l,o as u,c,a as C,h as H,A as P,S as J,$ as v,r as g,aq as K,J as W,aV as G,eD as Q,H as X,b6 as m,cF as a,C as N,w as _,b as w,d as Y,t as Z,W as ee,Q as te,R as le,_ as oe}from"./entry.13466615.js";import{_ as ne}from"./nuxt-link.d273ea3b.js";import{C as ae,E as se,t as re,v as ue,I as ie,x as de}from"./index.5263eb1d.js";import{i as b}from"./urlUtils.f6dc4ebc.js";import{p as B}from"./useMetas.223da623.js";const me=t=>{if(t)try{return Object.entries(JSON.parse(t)).map(([i,s])=>[new RegExp(i),s])}catch(i){console.error(i);return}};function ve(t){const s=A().currentRoute,n=V(()=>({behavior:s.value.query.url_behavior,overlay:s.value.query.url_overlay,rules:me(s.value.query.url_rules)})),f=V(()=>{var h;const r={behavior:n.value.behavior,overlay:n.value.overlay};if(n.value.rules&&(!n.value.behavior||!n.value.overlay)){for(const[d,p]of n.value.rules)if((h=l(t))!=null&&h.match(d))return Object.assign(r,p)}return r});return{cellUrlConfig:n.value,cellUrlOptions:f}}const ce={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},fe=C("g",{fill:"currentColor"},[C("path",{d:"M12 4a8 8 0 1 0 0 16a8 8 0 0 0 0-16zM2 12C2 6.477 6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12z"}),C("path",{d:"M12 14a1 1 0 0 1-1-1V7a1 1 0 1 1 2 0v6a1 1 0 0 1-1 1zm-1.5 2.5a1.5 1.5 0 1 1 3 0a1.5 1.5 0 0 1-3 0z"})],-1),pe=[fe];function ye(t,i){return u(),c("svg",ce,pe)}const ge={name:"mi-circle-warning",render:ye},we=te(()=>le(()=>import("./ClampedText.1faf8afc.js"),["./ClampedText.1faf8afc.js","./entry.13466615.js","./entry.0f786d51.css"],import.meta.url).then(t=>t.default||t)),Ve={class:"flex flex-row items-center justify-between w-full h-full"},he={key:1,class:"nc-null"},xe={key:4,class:"w-9/10 overflow-ellipsis overflow-hidden"},_e={key:5,class:"mr-1 w-1/10"},be={class:"flex flex-row items-center"},je=H({__name:"Url",props:{modelValue:{}},emits:["update:modelValue"],setup(t,{emit:i}){const{t:s}=P(),{showNull:n}=J(),f=v(ae),r=v(se),h=v(re,g(!1)),d=g(t.modelValue),p=v(ue,g(void 0)),$=v(ie,g(!1)),x=V({get:()=>t.modelValue,set:o=>{var e;d.value=o,(!((e=B(f.value.meta))!=null&&e.validate)||o&&b(o)||!o||$.value)&&i("update:modelValue",o)}}),k=V(()=>t.modelValue&&b(t.modelValue)),U=V(()=>!t.modelValue||!b(t.modelValue)?"":/^https?:\/\//.test(t.modelValue)?t.modelValue:`https://${t.modelValue}`),{cellUrlOptions:y}=ve(U),D=v(de,g(!1)),F=o=>!D.value&&(o==null?void 0:o.focus());return K(()=>r.value,()=>{var o;if((o=B(f.value.meta))!=null&&o.validate&&!r.value&&d.value&&!b(d.value)){W.error(s("msg.error.invalidURL")),d.value=void 0;return}d.value=t.modelValue}),(o,e)=>{var j,E,O,z,M,S;const I=we,R=ne,q=ge,T=oe;return u(),c("div",Ve,[l(r)?G((u(),c("input",{key:0,ref:F,"onUpdate:modelValue":e[0]||(e[0]=L=>X(x)?x.value=L:null),class:"outline-none text-sm w-full px-2 bg-transparent h-full",onBlur:e[1]||(e[1]=L=>r.value=!1),onKeydown:[e[2]||(e[2]=m(a(()=>{},["stop"]),["down"])),e[3]||(e[3]=m(a(()=>{},["stop"]),["left"])),e[4]||(e[4]=m(a(()=>{},["stop"]),["right"])),e[5]||(e[5]=m(a(()=>{},["stop"]),["up"])),e[6]||(e[6]=m(a(()=>{},["stop"]),["delete"])),e[7]||(e[7]=m(a(()=>{},["ctrl","stop"]),["z"])),e[8]||(e[8]=m(a(()=>{},["meta","stop"]),["z"]))],onSelectstartCapture:e[9]||(e[9]=a(()=>{},["stop"])),onMousedown:e[10]||(e[10]=a(()=>{},["stop"]))},null,544)),[[Q,l(x)]]):l(x)===null&&l(n)?(u(),c("span",he,"NULL")):l(k)&&!((j=l(y))!=null&&j.overlay)?(u(),N(R,{key:2,"no-prefetch":"","no-rel":"",class:"z-3 text-sm underline hover:opacity-75",to:l(U),target:((E=l(y))==null?void 0:E.behavior)==="replace"?void 0:"_blank"},{default:_(()=>[w(I,{value:t.modelValue,lines:l(p)},null,8,["value","lines"])]),_:1},8,["to","target"])):l(k)&&!l(h)&&((O=l(y))!=null&&O.overlay)?(u(),N(R,{key:3,"no-prefetch":"","no-rel":"",class:"z-3 w-full h-full text-center !no-underline hover:opacity-75",to:l(U),target:((z=l(y))==null?void 0:z.behavior)==="replace"?void 0:"_blank"},{default:_(()=>[w(I,{value:l(y).overlay,lines:l(p)},null,8,["value","lines"])]),_:1},8,["to","target"])):(u(),c("span",xe,[w(I,{value:t.modelValue,lines:l(p)},null,8,["value","lines"])])),(M=l(f).meta)!=null&&M.validate&&!l(k)&&((S=t.modelValue)!=null&&S.length)&&!l(r)?(u(),c("div",_e,[w(T,{placement:"top"},{title:_(()=>[Y(Z(l(s)("msg.error.invalidURL")),1)]),default:_(()=>[C("div",be,[w(q,{class:"text-red-400 h-4"})])]),_:1})])):ee("",!0)])}}});export{je as default};

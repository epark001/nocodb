import{cd as V,ce as Le,c0 as Ae,g as ne,i as x,r as N,b4 as Ce,cf as Ne,J as $,cg as xe,ch as se,ci as ke,S as ge,c1 as Ie,c2 as pe,cj as ie,aq as re,K as ae,y as te,f as ee,z as fe,k as De,ck as ve,cl as ce,cb as Me,cm as Te}from"./entry.51f4e399.js";const le=["int","smallint","mediumint","bigint","bit","boolean","float","decimal","double","serial","tinyint","date","datetime","timestamp","time","year","char","varchar","nchar","text","tinytext","mediumtext","longtext","binary","varbinary","blob","tinyblob","mediumblob","longblob","enum","set","geometry","point","linestring","polygon","multipoint","multilinestring","multipolygon","json"];class Se{static getNewTableColumns(){return[{column_name:"id",title:"Id",dt:"int",dtx:"integer",ct:"int(11)",nrqd:!1,rqd:!0,ck:!1,pk:!0,un:!0,ai:!0,cdf:null,clen:null,np:11,ns:0,dtxp:"11",dtxs:"",altered:1,uidt:"ID",uip:"",uicn:""},{column_name:"title",title:"Title",dt:"varchar",dtx:"specificType",ct:"varchar(45)",nrqd:!0,rqd:!1,ck:!1,pk:!1,un:!1,ai:!1,cdf:null,clen:45,np:null,ns:null,dtxp:"45",dtxs:"",altered:1,uidt:"SingleLineText",uip:"",uicn:""},{column_name:"created_at",title:"CreatedAt",dt:"timestamp",dtx:"specificType",ct:"varchar(45)",nrqd:!0,rqd:!1,ck:!1,pk:!1,un:!1,ai:!1,cdf:"CURRENT_TIMESTAMP",clen:45,np:null,ns:null,dtxp:"",dtxs:"",altered:1,uidt:V.DateTime,uip:"",uicn:""},{column_name:"updated_at",title:"UpdatedAt",dt:"timestamp",dtx:"specificType",ct:"varchar(45)",nrqd:!0,rqd:!1,ck:!1,pk:!1,un:!1,ai:!1,cdf:"CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP",clen:45,np:null,ns:null,dtxp:"",dtxs:"",altered:1,uidt:V.DateTime,uip:"",uicn:""}]}static getNewColumn(e){return{column_name:"title"+e,dt:"varchar",dtx:"specificType",ct:"varchar(45)",nrqd:!0,rqd:!1,ck:!1,pk:!1,un:!1,ai:!1,cdf:null,clen:45,np:null,ns:null,dtxp:"45",dtxs:"",altered:1,uidt:"SingleLineText",uip:"",uicn:""}}static getDefaultLengthForDatatype(e){switch(e){case"int":return 11;case"tinyint":return 1;case"smallint":return 5;case"mediumint":return 9;case"bigint":return 20;case"bit":return 64;case"boolean":return"";case"float":return 12;case"decimal":return 10;case"double":return 22;case"serial":return 20;case"date":return"";case"datetime":case"timestamp":return"";case"time":return"";case"year":return"";case"char":return 255;case"varchar":return 255;case"nchar":return 255;case"text":return"";case"tinytext":return"";case"mediumtext":return"";case"longtext":return"";case"binary":return 255;case"varbinary":return 65500;case"blob":return"";case"tinyblob":return"";case"mediumblob":return"";case"longblob":return"";case"enum":return"";case"set":return"";case"geometry":return"";case"point":return"";case"linestring":return"";case"polygon":return"";case"multipoint":return"";case"multilinestring":return"";case"multipolygon":return"";case"json":return""}}static getDefaultLengthIsDisabled(e){switch(e){case"int":case"tinyint":case"smallint":case"mediumint":case"bigint":case"float":case"decimal":case"double":case"serial":case"datetime":case"timestamp":case"char":case"varchar":case"nchar":case"binary":case"varbinary":case"enum":case"set":case"geometry":case"point":case"linestring":case"polygon":case"multipoint":case"multilinestring":case"multipolygon":case"json":case"bit":return!1;case"boolean":case"date":case"time":case"year":case"text":case"tinytext":case"mediumtext":case"longtext":case"blob":case"tinyblob":case"mediumblob":case"longblob":return!0}}static getDefaultValueForDatatype(e){switch(e){case"int":return"eg : 10";case"tinyint":return"eg : 1";case"smallint":return"eg : 10";case"mediumint":return"eg : 10";case"bigint":return"eg : 100";case"bit":return"eg : 1";case"boolean":return"eg : 1";case"float":return"eg : 10";case"decimal":return"eg : 10";case"double":return"eg : 10";case"serial":return"eg : 100";case"date":return"eg : 2020-09-09";case"datetime":return`eg : now()

CURRENT_TIMESTAMP

CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP

1992-10-12 00:00:00`;case"timestamp":return`eg : now()

CURRENT_TIMESTAMP

CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP

1992-10-12 00:00:00`;case"time":return"eg : 00:00:00";case"year":return"eg : 2020";case"char":return"eg : a";case"varchar":return"eg : hey";case"nchar":return"eg : hey";case"text":return"eg : hey";case"tinytext":return"eg : hey";case"mediumtext":return"eg : hey";case"longtext":return"eg : hey";case"binary":return"eg : 1";case"varbinary":return"eg : hey";case"blob":return"eg : hey";case"tinyblob":return"eg : hey";case"mediumblob":return"eg : hey";case"longblob":return"eg : hey";case"enum":return"eg : a";case"set":return"eg : a";case"geometry":return"geometry can't have default value";case"point":return"point can't have default value";case"linestring":return"linestring can't have default value";case"polygon":return"polygon can't have default value";case"multipoint":return"multipoint can't have default value";case"multilinestring":return"multilinestring can't have default value";case"multipolygon":return"multipolygon can't have default value";case"json":return"JSON can't have default value"}}static getDefaultScaleForDatatype(e){switch(e){case"int":return" ";case"tinyint":return" ";case"smallint":return" ";case"mediumint":return" ";case"bigint":return" ";case"bit":return" ";case"boolean":return" ";case"float":return"2";case"decimal":return"2";case"double":return"2";case"serial":return" ";case"date":case"datetime":case"timestamp":return" ";case"time":return" ";case"year":return" ";case"char":return" ";case"varchar":return" ";case"nchar":return" ";case"text":return" ";case"tinytext":return" ";case"mediumtext":return" ";case"longtext":return" ";case"binary":return" ";case"varbinary":return" ";case"blob":return" ";case"tinyblob":return" ";case"mediumblob":return" ";case"longblob":return" ";case"enum":return" ";case"set":return" ";case"geometry":return" ";case"point":return" ";case"linestring":return" ";case"polygon":return" ";case"multipoint":return" ";case"multilinestring":return" ";case"multipolygon":return" ";case"json":return" "}}static colPropAIDisabled(e,a){if(e.dt==="int"||e.dt==="tinyint"||e.dt==="bigint"||e.dt==="smallint"){for(let t=0;t<a.length;++t)if(a[t].cn!==e.cn&&a[t].ai)return!0;return!1}else return!0}static colPropUNDisabled(e){return!(e.dt==="int"||e.dt==="tinyint"||e.dt==="smallint"||e.dt==="mediumint"||e.dt==="bigint")}static onCheckboxChangeAI(e){(e.dt==="int"||e.dt==="bigint"||e.dt==="smallint"||e.dt==="tinyint")&&(e.altered=e.altered||2)}static onCheckboxChangeAU(e){console.log(e),e.altered=e.altered||2}static showScale(e){return e.dt==="float"||e.dt==="decimal"||e.dt==="double"||e.dt==="real"}static removeUnsigned(e){for(let a=0;a<e.length;++a)e[a].altered===1&&!(e[a].dt==="int"||e[a].dt==="bigint"||e[a].dt==="tinyint"||e[a].dt==="smallint"||e[a].dt==="mediumint")&&(e[a].un=!1,console.log(">> resetting unsigned value",e[a].cn)),console.log(e[a].cn)}static columnEditable(e){return e.tn!=="_evolutions"||e.tn!=="nc_evolutions"}static colPropAuDisabled(e){return!0}static getUIType(e){switch(this.getAbstractType(e)){case"integer":return"Number";case"boolean":return"Checkbox";case"float":return"Decimal";case"date":return"Date";case"datetime":return"DateTime";case"time":return"Time";case"year":return"Year";case"string":return"SingleLineText";case"text":return"LongText";case"blob":return"Attachment";case"enum":return"SingleSelect";case"set":return"MultiSelect";case"json":return"LongText"}}static getAbstractType(e){var a;switch((a=e.dt)===null||a===void 0?void 0:a.toLowerCase()){case"int":case"smallint":case"mediumint":case"bigint":case"bit":return"integer";case"boolean":return"boolean";case"float":case"decimal":case"double":case"serial":return"float";case"tinyint":return e.dtxp=="1"?"boolean":"integer";case"date":return"date";case"datetime":case"timestamp":return"datetime";case"time":return"time";case"year":return"year";case"char":case"varchar":case"nchar":return"string";case"text":case"tinytext":case"mediumtext":case"longtext":return"text";case"binary":return"string";case"varbinary":return"text";case"blob":case"tinyblob":case"mediumblob":case"longblob":return"blob";case"enum":return"enum";case"set":return"set";case"geometry":case"point":case"linestring":case"polygon":case"multipoint":case"multilinestring":case"multipolygon":return"string";case"json":return"json"}}static getDataTypeForUiType(e,a){var t,n;const r={};switch(e.uidt){case"ID":{const i=a==="AI",l=a==="AG";r.dt=l?"varchar":"int",r.pk=!0,r.un=i,r.ai=i,r.rqd=!0,r.meta=l?{ag:"nc"}:void 0}break;case"ForeignKey":r.dt="varchar";break;case"SingleLineText":r.dt="varchar";break;case"LongText":r.dt="text";break;case"Attachment":r.dt="text";break;case"GeoData":r.dt="text";break;case"Checkbox":r.dt="tinyint",r.dtxp=1,r.cdf="0";break;case"MultiSelect":r.dt="set",(((t=e.colOptions)===null||t===void 0?void 0:t.options.length)>64||((n=e.dtxp)===null||n===void 0?void 0:n.split(",").length)>64)&&(r.dt="text");break;case"SingleSelect":r.dt="enum";break;case"Collaborator":r.dt="varchar";break;case"Date":r.dt="varchar";break;case"Year":r.dt="year";break;case"Time":r.dt="time";break;case"PhoneNumber":r.dt="varchar",r.validate={func:["isMobilePhone"],args:[""],msg:["Validation failed : isMobilePhone ({cn})"]};break;case"Email":r.dt="varchar",r.validate={func:["isEmail"],args:[""],msg:["Validation failed : isEmail ({cn})"]};break;case"URL":r.dt="varchar",r.validate={func:["isURL"],args:[""],msg:["Validation failed : isURL ({cn})"]};break;case"Number":r.dt="bigint";break;case"Decimal":r.dt="decimal";break;case"Currency":r.dt="decimal",r.validate={func:["isCurrency"],args:[""],msg:["Validation failed : isCurrency"]};break;case"Percent":r.dt="double";break;case"Duration":r.dt="decimal";break;case"Rating":r.dt="int",r.cdf="0";break;case"Formula":r.dt="varchar";break;case"Rollup":r.dt="varchar";break;case"Count":r.dt="int";break;case"Lookup":r.dt="varchar";break;case"DateTime":r.dt="datetime";break;case"CreateTime":r.dt="datetime";break;case"LastModifiedTime":r.dt="datetime";break;case"AutoNumber":r.dt="int";break;case"Barcode":r.dt="varchar";break;case"Button":r.dt="varchar";break;case"JSON":r.dt="json";break;default:r.dt="varchar";break}return r}static getDataTypeListForUiType(e,a){switch(e.uidt){case"ID":return a==="AG"?["varchar","char","nchar"]:a==="AI"?["int","smallint","mediumint","bigint","bit","serial"]:le;case"ForeignKey":return le;case"SingleLineText":case"LongText":case"Collaborator":case"GeoData":return["char","varchar","nchar","text","tinytext","mediumtext","longtext"];case"Attachment":return["json","char","varchar","nchar","text","tinytext","mediumtext","longtext"];case"JSON":return["json","text","tinytext","mediumtext","longtext"];case"Checkbox":return["int","smallint","mediumint","bigint","bit","boolean","serial","tinyint"];case"MultiSelect":return["set","text","tinytext","mediumtext","longtext"];case"SingleSelect":return["enum","text","tinytext","mediumtext","longtext"];case"Year":return["year"];case"Time":return["time"];case"PhoneNumber":case"Email":return["varchar"];case"URL":return["text","tinytext","mediumtext","longtext","varchar"];case"Number":return["int","smallint","mediumint","bigint","bit","float","decimal","double","serial"];case"Decimal":return["float","decimal","double","serial"];case"Currency":return["decimal","float","double","serial","int","smallint","mediumint","bigint","bit"];case"Percent":return["decimal","float","double","serial","int","smallint","mediumint","bigint","bit"];case"Duration":return["decimal","float","double","serial","int","smallint","mediumint","bigint","bit"];case"Rating":return["decimal","float","double","serial","int","smallint","mediumint","bigint","bit"];case"Formula":return["char","varchar","nchar","text","tinytext","mediumtext","longtext"];case"Rollup":return["varchar"];case"Count":return["int","smallint","mediumint","bigint","serial"];case"Lookup":return["varchar"];case"Date":return["date","datetime","timestamp","varchar"];case"DateTime":case"CreateTime":case"LastModifiedTime":return["datetime","timestamp","varchar"];case"AutoNumber":return["int","smallint","mediumint","bigint"];case"Barcode":return["varchar"];case"Geometry":return["geometry","point","linestring","polygon","multipoint","multilinestring","multipolygon"];case"Button":default:return le}}static getUnsupportedFnList(){return[]}}const ue=["int","integer","bigint","bigserial","char","int2","int4","int8","int4range","int8range","serial","serial2","serial8","character","bit","bool","boolean","date","double precision","event_trigger","fdw_handler","float4","float8","uuid","smallint","smallserial","character varying","text","real","time","time without time zone","timestamp","timestamp without time zone","timestamptz","timestamp with time zone","timetz","time with time zone","daterange","json","jsonb","gtsvector","index_am_handler","anyenum","anynonarray","anyrange","box","bpchar","bytea","cid","cidr","circle","cstring","inet","internal","interval","language_handler","line","lsec","macaddr","money","name","numeric","numrange","oid","opaque","path","pg_ddl_command","pg_lsn","pg_node_tree","point","polygon","record","refcursor","regclass","regconfig","regdictionary","regnamespace","regoper","regoperator","regproc","regpreocedure","regrole","regtype","reltime","smgr","tid","tinterval","trigger","tsm_handler","tsquery","tsrange","tstzrange","tsvector","txid_snapshot","unknown","void","xid","xml"];class _e{static getNewTableColumns(){return[{column_name:"id",title:"Id",dt:"int4",dtx:"integer",ct:"int(11)",nrqd:!1,rqd:!0,ck:!1,pk:!0,un:!1,ai:!0,cdf:null,clen:null,np:11,ns:0,dtxp:"11",dtxs:"",altered:1,uidt:"ID",uip:"",uicn:""},{column_name:"title",title:"Title",dt:"character varying",dtx:"specificType",ct:"varchar(45)",nrqd:!0,rqd:!1,ck:!1,pk:!1,un:!1,ai:!1,cdf:null,clen:45,np:null,ns:null,dtxp:"45",dtxs:"",altered:1,uidt:"SingleLineText",uip:"",uicn:""},{column_name:"created_at",title:"CreatedAt",dt:"timestamp",dtx:"specificType",ct:"varchar(45)",nrqd:!0,rqd:!1,ck:!1,pk:!1,un:!1,ai:!1,cdf:"now()",clen:45,np:null,ns:null,dtxp:"",dtxs:"",altered:1,uidt:V.DateTime,uip:"",uicn:""},{column_name:"updated_at",title:"UpdatedAt",dt:"timestamp",dtx:"specificType",ct:"varchar(45)",nrqd:!0,rqd:!1,ck:!1,pk:!1,un:!1,ai:!1,au:!0,cdf:"now()",clen:45,np:null,ns:null,dtxp:"",dtxs:"",altered:1,uidt:V.DateTime,uip:"",uicn:""}]}static getNewColumn(e){return{column_name:"title"+e,dt:"character varying",dtx:"specificType",ct:"varchar(45)",nrqd:!0,rqd:!1,ck:!1,pk:!1,un:!1,ai:!1,cdf:null,clen:45,np:null,ns:null,dtxp:"45",dtxs:"",altered:1,uidt:"SingleLineText",uip:"",uicn:""}}static getDefaultLengthForDatatype(e){switch(e){case"int":return"";case"tinyint":return"";case"smallint":return"";case"mediumint":return"";case"bigint":return"";case"bit":return"";case"boolean":return"";case"float":return"";case"decimal":return"";case"double":return"";case"serial":return"";case"date":return"";case"datetime":case"timestamp":return"";case"time":return"";case"year":return"";case"char":return"";case"varchar":return"";case"nchar":return"";case"text":return"";case"tinytext":return"";case"mediumtext":return"";case"longtext":return"";case"binary":return"";case"varbinary":return"";case"blob":return"";case"tinyblob":return"";case"mediumblob":return"";case"longblob":return"";case"enum":return"";case"set":return"";case"geometry":return"";case"point":return"";case"linestring":return"";case"polygon":return"";case"multipoint":return"";case"multilinestring":return"";case"multipolygon":return"";case"json":return""}}static getDefaultLengthIsDisabled(e){switch(e){case"anyenum":case"anynonarray":case"anyrange":case"bigint":case"bigserial":case"bit":case"bool":case"box":case"bpchar":case"bytea":case"char":case"character":case"cid":case"cidr":case"circle":case"cstring":case"date":case"daterange":case"double precision":case"event_trigger":case"fdw_handler":case"float4":case"float8":case"gtsvector":case"index_am_handler":case"inet":case"int":case"int2":case"int4":case"int8":case"int4range":case"int8range":case"integer":case"internal":case"interval":case"jsonb":case"language_handler":case"line":case"lsec":case"macaddr":case"money":case"name":case"numeric":case"numrange":case"oid":case"opaque":case"path":case"pg_ddl_command":case"pg_lsn":case"pg_node_tree":case"real":case"record":case"refcursor":case"regclass":case"regconfig":case"regdictionary":case"regnamespace":case"regoper":case"regoperator":case"regproc":case"regpreocedure":case"regrole":case"regtype":case"reltime":case"serial":case"serial2":case"serial8":case"smallint":case"smallserial":case"smgr":case"text":case"tid":case"time":case"time without time zone":case"timestamp":case"timestamp without time zone":case"timestamptz":case"timestamp with time zone":case"timetz":case"time with time zone":case"tinterval":case"trigger":case"tsm_handler":case"tsquery":case"tsrange":case"tstzrange":case"tsvector":case"txid_snapshot":case"unknown":case"void":case"xid":case"xml":case"character varying":case"tinyint":case"mediumint":case"float":case"decimal":case"double":case"boolean":case"datetime":case"uuid":case"year":case"varchar":case"nchar":case"tinytext":case"mediumtext":case"longtext":case"binary":case"varbinary":case"blob":case"tinyblob":case"mediumblob":case"longblob":case"enum":case"set":case"geometry":case"point":case"linestring":case"polygon":case"multipoint":case"multilinestring":case"multipolygon":case"json":return!0}}static getDefaultValueForDatatype(e){switch(e){case"anyenum":return"eg: ";case"anynonarray":return"eg: ";case"anyrange":return"eg: ";case"bigint":return"eg: ";case"bigserial":return"eg: ";case"bit":return"eg: ";case"bool":return"eg: ";case"box":return"eg: ";case"bpchar":return"eg: ";case"bytea":return"eg: ";case"char":return"eg: ";case"character":return"eg: 'sample'";case"cid":return"eg: ";case"cidr":return"eg: ";case"circle":return"eg: ";case"cstring":return"eg: ";case"date":return"eg: '2020-09-09'";case"daterange":return"eg: ";case"double precision":return"eg: 1.2";case"event_trigger":return"eg: ";case"fdw_handler":return"eg: ";case"float4":return"eg: 1.2";case"float8":return"eg: 1.2";case"gtsvector":return"eg: ";case"index_am_handler":return"eg: ";case"inet":return"eg: ";case"int":return"eg: ";case"int2":return"eg: ";case"int4":return"eg: ";case"int8":return"eg: ";case"int4range":return"eg: ";case"int8range":return"eg: ";case"integer":return"eg: ";case"internal":return"eg: ";case"interval":return"eg: ";case"json":return"eg: ";case"jsonb":return"eg: ";case"language_handler":return"eg: ";case"line":return"eg: ";case"lsec":return"eg: ";case"macaddr":return"eg: ";case"money":return"eg: ";case"name":return"eg: ";case"numeric":return"eg: ";case"numrange":return"eg: ";case"oid":return"eg: ";case"opaque":return"eg: ";case"path":return"eg: ";case"pg_ddl_command":return"eg: ";case"pg_lsn":return"eg: ";case"pg_node_tree":return"eg: ";case"point":return"eg: ";case"polygon":return"eg: ";case"real":return"eg: 1.2";case"record":return"eg: ";case"refcursor":return"eg: ";case"regclass":return"eg: ";case"regconfig":return"eg: ";case"regdictionary":return"eg: ";case"regnamespace":return"eg: ";case"regoper":return"eg: ";case"regoperator":return"eg: ";case"regproc":return"eg: ";case"regpreocedure":return"eg: ";case"regrole":return"eg: ";case"regtype":return"eg: ";case"reltime":return"eg: ";case"serial":return"eg: ";case"serial2":return"eg: ";case"serial8":return"eg: ";case"smallint":return"eg: ";case"smallserial":return"eg: ";case"smgr":return"eg: ";case"text":return"eg: 'sample text'";case"tid":return"eg: ";case"time":return`eg: now()

'04:05:06.789'`;case"time without time zone":return`eg: now()

'04:05:06.789'`;case"timestamp":return`eg: now()

'2016-06-22 19:10:25-07'`;case"timestamp without time zone":return`eg: now()

'2016-06-22 19:10:25-07'`;case"timestamptz":return`eg: timezone('America/New_York','2016-06-01 00:00')

now()

'2016-06-22 19:10:25-07'`;case"timestamp with time zone":return`eg: now()

'2016-06-22 19:10:25-07'`;case"timetz":return"eg: now()";case"time with time zone":return"eg: now()";case"tinterval":return"eg: ";case"trigger":return"eg: ";case"tsm_handler":return"eg: ";case"tsquery":return"eg: ";case"tsrange":return"eg: ";case"tstzrange":return"eg: ";case"tsvector":return"eg: ";case"txid_snapshot":return"eg: ";case"unknown":return"eg: ";case"void":return"eg: ";case"xid":return"eg: ";case"xml":return"eg: ";case"character varying":return"eg: 'sample text'";case"tinyint":return"eg: ";case"mediumint":return"eg: ";case"float":return"eg: ";case"decimal":return"eg: ";case"double":return"eg: 1.2";case"boolean":return`eg: true

false`;case"datetime":return"eg: ";case"uuid":return"eg: ";case"year":return"eg: ";case"varchar":return"eg: ";case"nchar":return"eg: ";case"tinytext":return"eg: ";case"mediumtext":return"eg: ";case"longtext":return"eg: ";case"binary":return"eg: ";case"varbinary":return"eg: ";case"blob":return"eg: ";case"tinyblob":return"eg: ";case"mediumblob":return"eg: ";case"longblob":return"eg: ";case"enum":return"eg: ";case"set":return"eg: ";case"geometry":return"eg: ";case"linestring":return"eg: ";case"multipoint":return"eg: ";case"multilinestring":return"eg: ";case"multipolygon":return"eg: "}}static getDefaultScaleForDatatype(e){switch(e){case"int":return" ";case"tinyint":return" ";case"smallint":return" ";case"mediumint":return" ";case"bigint":return" ";case"bit":return" ";case"boolean":return" ";case"float":return"2";case"decimal":return"2";case"double":return"2";case"serial":return" ";case"date":case"datetime":case"timestamp":return" ";case"time":return" ";case"year":return" ";case"char":return" ";case"varchar":return" ";case"nchar":return" ";case"text":return" ";case"tinytext":return" ";case"mediumtext":return" ";case"longtext":return" ";case"binary":return" ";case"varbinary":return" ";case"blob":return" ";case"tinyblob":return" ";case"mediumblob":return" ";case"longblob":return" ";case"enum":return" ";case"set":return" ";case"geometry":return" ";case"point":return" ";case"linestring":return" ";case"polygon":return" ";case"multipoint":return" ";case"multilinestring":return" ";case"multipolygon":return" ";case"json":return" "}}static colPropAIDisabled(e,a){if(e.dt==="int4"||e.dt==="integer"||e.dt==="bigint"||e.dt==="smallint"){for(let t=0;t<a.length;++t)if(a[t].cn!==e.cn&&a[t].ai)return!0;return!1}else return!0}static colPropUNDisabled(e){return!0}static onCheckboxChangeAI(e){console.log(e),(e.dt==="int"||e.dt==="bigint"||e.dt==="smallint"||e.dt==="tinyint")&&(e.altered=e.altered||2)}static onCheckboxChangeAU(e){console.log(e),e.altered=e.altered||2,e.au&&(e.cdf="now()")}static showScale(e){return!1}static removeUnsigned(e){for(let a=0;a<e.length;++a)e[a].altered===1&&!(e[a].dt==="int"||e[a].dt==="bigint"||e[a].dt==="tinyint"||e[a].dt==="smallint"||e[a].dt==="mediumint")&&(e[a].un=!1,console.log(">> resetting unsigned value",e[a].cn)),console.log(e[a].cn)}static columnEditable(e){return e.tn!=="_evolutions"||e.tn!=="nc_evolutions"}static colPropAuDisabled(e){if(e.altered!==1)return!0;switch(e.dt){case"time":case"time without time zone":case"timestamp":case"timestamp without time zone":case"timestamptz":case"timestamp with time zone":case"timetz":case"time with time zone":return!1;default:return!0}}static getAbstractType(e){var a;switch((a=e.dt)===null||a===void 0?void 0:a.toLowerCase()){case"anyenum":return"enum";case"anynonarray":case"anyrange":return"string";case"bit":return"integer";case"bool":return"boolean";case"box":case"bpchar":case"bytea":case"char":case"character":return"string";case"cid":case"cidr":case"circle":case"cstring":return"string";case"date":return"date";case"daterange":return"string";case"double precision":return"string";case"event_trigger":case"fdw_handler":return"string";case"float4":case"float8":return"float";case"gtsvector":case"index_am_handler":case"inet":return"string";case"int":case"int2":case"int4":case"int8":case"integer":case"bigint":case"bigserial":return"integer";case"int4range":case"int8range":case"internal":case"interval":return"string";case"language_handler":case"line":case"lsec":case"macaddr":case"money":case"name":case"numeric":case"numrange":case"oid":case"opaque":case"path":case"pg_ddl_command":case"pg_lsn":case"pg_node_tree":case"point":case"polygon":return"string";case"real":return"float";case"record":case"refcursor":case"regclass":case"regconfig":case"regdictionary":case"regnamespace":case"regoper":case"regoperator":case"regproc":case"regpreocedure":case"regrole":case"regtype":case"reltime":return"string";case"serial":case"serial2":case"serial8":case"smallint":case"smallserial":return"integer";case"smgr":return"string";case"text":return"text";case"tid":return"string";case"time":case"time without time zone":return"time";case"timestamp":case"timestamp without time zone":case"timestamptz":case"timestamp with time zone":return"datetime";case"timetz":case"time with time zone":return"time";case"tinterval":case"trigger":case"tsm_handler":case"tsquery":case"tsrange":case"tstzrange":case"tsvector":case"txid_snapshot":case"unknown":case"void":case"xid":case"character varying":case"xml":return"string";case"tinyint":case"mediumint":return"integer";case"float":case"decimal":case"double":return"float";case"boolean":return"boolean";case"datetime":return"datetime";case"uuid":case"year":case"varchar":case"nchar":return"string";case"tinytext":case"mediumtext":case"longtext":return"text";case"binary":case"varbinary":return"string";case"blob":case"tinyblob":case"mediumblob":case"longblob":return"blob";case"enum":return"enum";case"set":return"set";case"geometry":case"linestring":case"multipoint":case"multilinestring":case"multipolygon":return"string";case"json":case"jsonb":return"json"}}static getUIType(e){switch(this.getAbstractType(e)){case"integer":return"Number";case"boolean":return"Checkbox";case"float":return"Decimal";case"date":return"Date";case"datetime":return"CreateTime";case"time":return"Time";case"year":return"Year";case"string":return"SingleLineText";case"text":return"LongText";case"blob":return"Attachment";case"enum":return"SingleSelect";case"set":return"MultiSelect";case"json":return"LongText"}}static getDataTypeForUiType(e,a){const t={};switch(e.uidt){case"ID":{const n=a==="AI",r=a==="AG";t.dt=r?"character varying":"int4",t.pk=!0,t.un=n,t.ai=n,t.rqd=!0,t.meta=r?{ag:"nc"}:void 0}break;case"ForeignKey":t.dt="character varying";break;case"SingleLineText":t.dt="character varying";break;case"LongText":t.dt="text";break;case"Attachment":t.dt="text";break;case"GeoData":t.dt="text";break;case"Checkbox":t.dt="bool",t.cdf="false";break;case"MultiSelect":t.dt="text";break;case"SingleSelect":t.dt="text";break;case"Collaborator":t.dt="character varying";break;case"Date":t.dt="date";break;case"Year":t.dt="int";break;case"Time":t.dt="time";break;case"PhoneNumber":t.dt="character varying",t.validate={func:["isMobilePhone"],args:[""],msg:["Validation failed : isMobilePhone"]};break;case"Email":t.dt="character varying",t.validate={func:["isEmail"],args:[""],msg:["Validation failed : isEmail"]};break;case"URL":t.dt="character varying",t.validate={func:["isURL"],args:[""],msg:["Validation failed : isURL"]};break;case"Number":t.dt="bigint";break;case"Decimal":t.dt="decimal";break;case"Currency":t.dt="decimal",t.validate={func:["isCurrency"],args:[""],msg:["Validation failed : isCurrency"]};break;case"Percent":t.dt="double precision";break;case"Duration":t.dt="decimal";break;case"Rating":t.dt="smallint",t.cdf="0";break;case"Formula":t.dt="character varying";break;case"Rollup":t.dt="character varying";break;case"Count":t.dt="int8";break;case"Lookup":t.dt="character varying";break;case"DateTime":t.dt="timestamp";break;case"CreateTime":t.dt="timestamp";break;case"LastModifiedTime":t.dt="timestamp";break;case"AutoNumber":t.dt="int";break;case"Barcode":t.dt="character varying";break;case"Button":t.dt="character varying";break;case"JSON":t.dt="json";break;default:t.dt="character varying";break}return t}static getDataTypeListForUiType(e,a){switch(e.uidt){case"ID":return a==="AG"?["char","character","character varying"]:a==="AI"?["int","integer","bigint","bigserial","int2","int4","int8","serial","serial2","serial8","smallint","smallserial"]:ue;case"ForeignKey":return ue;case"SingleLineText":case"LongText":case"Collaborator":case"GeoData":return["char","character","character varying","text"];case"Attachment":return["json","char","character","character varying","text"];case"JSON":return["json","jsonb","text"];case"Checkbox":return["bit","bool","int2","int4","int8","boolean","smallint","int","integer","bigint","bigserial","char","int4range","int8range","serial","serial2","serial8"];case"MultiSelect":return["text"];case"SingleSelect":return["text"];case"Year":return["int"];case"Time":return["time","time without time zone","timestamp","timestamp without time zone","timestamptz","timestamp with time zone","timetz","time with time zone"];case"PhoneNumber":case"Email":return["character varying"];case"URL":return["character varying","text"];case"Number":return["int","integer","bigint","bigserial","int2","int4","int8","serial","serial2","serial8","double precision","float4","float8","smallint","smallserial","numeric"];case"Decimal":return["double precision","float4","float8","numeric"];case"Currency":return["int","integer","bigint","bigserial","int2","int4","int8","serial","serial2","serial8","double precision","money","float4","float8","numeric"];case"Percent":return["int","integer","bigint","bigserial","int2","int4","int8","serial","serial2","serial8","double precision","float4","float8","smallint","smallserial","numeric"];case"Duration":return["int","integer","bigint","bigserial","int2","int4","int8","serial","serial2","serial8","double precision","float4","float8","smallint","smallserial","numeric"];case"Rating":return["int","integer","bigint","bigserial","int2","int4","int8","serial","serial2","serial8","double precision","float4","float8","smallint","smallserial","numeric"];case"Formula":return["text","character varying"];case"Rollup":return["character varying"];case"Count":return["int","integer","bigint","bigserial","int2","int4","int8","serial","serial2","serial8","smallint","smallserial"];case"Lookup":return["character varying"];case"Date":return["date","timestamp","timestamp without time zone","timestamptz","timestamp with time zone"];case"DateTime":case"CreateTime":case"LastModifiedTime":return["timestamp","timestamp without time zone","timestamptz","timestamp with time zone"];case"AutoNumber":return["int","integer","bigint","bigserial","int2","int4","int8","serial","serial2","serial8","smallint","smallserial"];case"Barcode":return["character varying"];case"Geometry":return["polygon","point","circle","box","line","lseg","path","circle"];case"Button":default:return ue}}static getUnsupportedFnList(){return[]}}const oe=["bigint","binary","bit","char","date","datetime","datetime2","datetimeoffset","decimal","float","geography","geometry","heirarchyid","image","int","money","nchar","ntext","numeric","nvarchar","real","json","smalldatetime","smallint","smallmoney","sql_variant","sysname","text","time","timestamp","tinyint","uniqueidentifier","varbinary","xml","varchar"];class Pe{static getNewTableColumns(){return[{column_name:"id",title:"Id",dt:"int",dtx:"integer",ct:"int(11)",nrqd:!1,rqd:!0,ck:!1,pk:!0,un:!1,ai:!0,cdf:null,clen:null,np:null,ns:0,dtxp:"",dtxs:"",altered:1,uidt:"ID",uip:"",uicn:""},{column_name:"title",title:"Title",dt:"varchar",dtx:"specificType",ct:"varchar(45)",nrqd:!0,rqd:!1,ck:!1,pk:!1,un:!1,ai:!1,cdf:null,clen:45,np:null,ns:null,dtxp:"45",dtxs:"",altered:1,uidt:"SingleLineText",uip:"",uicn:""},{column_name:"created_at",title:"CreatedAt",dt:"datetime",dtx:"specificType",ct:"varchar(45)",nrqd:!0,rqd:!1,ck:!1,pk:!1,un:!1,ai:!1,cdf:"GETDATE()",clen:45,np:null,ns:null,dtxp:"",dtxs:"",altered:1,uidt:V.DateTime,uip:"",uicn:""},{column_name:"updated_at",title:"UpdatedAt",dt:"datetime",dtx:"specificType",ct:"varchar(45)",nrqd:!0,rqd:!1,ck:!1,pk:!1,un:!1,ai:!1,au:!0,cdf:"GETDATE()",clen:45,np:null,ns:null,dtxp:"",dtxs:"",altered:1,uidt:V.DateTime,uip:"",uicn:""}]}static getNewColumn(e){return{column_name:"title"+e,dt:"varchar",dtx:"specificType",ct:"varchar(45)",nrqd:!0,rqd:!1,ck:!1,pk:!1,un:!1,ai:!1,cdf:null,clen:45,np:null,ns:null,dtxp:"45",dtxs:"",altered:1,uidt:"SingleLineText",uip:"",uicn:""}}static getDefaultLengthForDatatype(e){switch(e){case"decimal":return 10;case"varchar":return 255;default:return""}}static getDefaultLengthIsDisabled(e){switch(e){case"nvarchar":case"numeric":case"decimal":case"varchar":return!1;default:return!0}}static getDefaultValueForDatatype(e){switch(e){case"bigint":case"binary":case"bit":case"char":case"date":case"datetime":case"datetime2":case"datetimeoffset":case"decimal":case"float":case"geography":case"geometry":case"heirarchyid":case"image":case"int":case"money":case"nchar":case"ntext":case"numeric":case"nvarchar":case"real":case"json":case"smalldatetime":case"smallint":case"smallmoney":case"sql_variant":case"sysname":case"text":case"time":case"timestamp":case"tinyint":case"uniqueidentifier":case"varbinary":case"xml":case"varchar":return"eg: ";default:return""}}static getDefaultScaleForDatatype(e){switch(e){case"decimal":case"numeric":return"2";default:return""}}static colPropAIDisabled(e,a){if(e.dt==="int4"||e.dt==="integer"||e.dt==="bigint"||e.dt==="smallint"){for(let t=0;t<a.length;++t)if(a[t].cn!==e.cn&&a[t].ai)return!0;return!1}else return!0}static colPropUNDisabled(e){return!0}static onCheckboxChangeAI(e){console.log(e),(e.dt==="int"||e.dt==="bigint"||e.dt==="smallint"||e.dt==="tinyint")&&(e.altered=e.altered||2)}static showScale(e){return e.dt==="decimal"||e.dt==="numeric"}static removeUnsigned(e){for(let a=0;a<e.length;++a)e[a].altered===1&&!(e[a].dt==="int"||e[a].dt==="bigint"||e[a].dt==="tinyint"||e[a].dt==="smallint"||e[a].dt==="mediumint")&&(e[a].un=!1,console.log(">> resetting unsigned value",e[a].cn)),console.log(e[a].cn)}static columnEditable(e){return e.tn!=="_evolutions"||e.tn!=="nc_evolutions"}static onCheckboxChangeAU(e){console.log(e),e.altered=e.altered||2,e.au&&(e.cdf="GETDATE()")}static colPropAuDisabled(e){if(e.altered!==1)return!0;switch(e.dt){case"date":case"datetime":case"datetime2":case"datetimeoffset":case"time":case"timestamp":return!1;default:return!0}}static getAbstractType(e){var a;switch((a=e.dt)===null||a===void 0?void 0:a.toLowerCase()){case"bigint":case"smallint":case"bit":case"tinyint":case"int":return"integer";case"binary":return"string";case"char":return"string";case"date":return"date";case"datetime":case"datetime2":case"smalldatetime":case"datetimeoffset":return"datetime";case"decimal":case"float":return"float";case"geography":case"geometry":case"heirarchyid":case"image":return"string";case"money":case"nchar":return"string";case"ntext":return"text";case"numeric":return"float";case"nvarchar":return"string";case"real":return"float";case"json":return"json";case"smallmoney":case"sql_variant":case"sysname":return"string";case"text":return"text";case"time":return"time";case"timestamp":return"timestamp";case"uniqueidentifier":case"varbinary":case"xml":return"string";case"varchar":return"string"}return"string"}static getUIType(e){switch(this.getAbstractType(e)){case"integer":return"Number";case"boolean":return"Checkbox";case"float":return"Decimal";case"date":return"Date";case"datetime":return"CreateTime";case"time":return"Time";case"year":return"Year";case"string":return"SingleLineText";case"text":return"LongText";case"blob":return"Attachment";case"enum":return"SingleSelect";case"set":return"MultiSelect";case"json":return"LongText"}}static getDataTypeForUiType(e,a){const t={};switch(e.uidt){case"ID":{const n=a==="AI",r=a==="AG";t.dt=r?"varchar":"int",t.pk=!0,t.un=n,t.ai=n,t.rqd=!0,t.meta=r?{ag:"nc"}:void 0}break;case"ForeignKey":t.dt="varchar";break;case"SingleLineText":t.dt="varchar";break;case"LongText":t.dt="text";break;case"Attachment":t.dt="text";break;case"Checkbox":t.dt="tinyint",t.dtxp=1,t.cdf="0";break;case"MultiSelect":t.dt="text";break;case"SingleSelect":t.dt="text";break;case"Collaborator":t.dt="varchar";break;case"GeoData":t.dt="varchar";break;case"Date":t.dt="date";break;case"Year":t.dt="int";break;case"Time":t.dt="time";break;case"PhoneNumber":t.dt="varchar",t.validate={func:["isMobilePhone"],args:[""],msg:["Validation failed : isMobilePhone"]};break;case"Email":t.dt="varchar",t.validate={func:["isEmail"],args:[""],msg:["Validation failed : isEmail"]};break;case"URL":t.dt="varchar",t.validate={func:["isURL"],args:[""],msg:["Validation failed : isURL"]};break;case"Number":t.dt="int";break;case"Decimal":t.dt="decimal";break;case"Currency":t.dt="decimal",t.validate={func:["isCurrency"],args:[""],msg:["Validation failed : isCurrency"]};break;case"Percent":t.dt="double";break;case"Duration":t.dt="decimal";break;case"Rating":t.dt="int",t.cdf="0";break;case"Formula":t.dt="varchar";break;case"Rollup":t.dt="varchar";break;case"Count":t.dt="int";break;case"Lookup":t.dt="varchar";break;case"DateTime":t.dt="datetimeoffset";break;case"CreateTime":t.dt="datetime";break;case"LastModifiedTime":t.dt="datetime";break;case"AutoNumber":t.dt="int";break;case"Barcode":t.dt="varchar";break;case"Button":t.dt="varchar";break;default:t.dt="varchar";break}return t}static getDataTypeListForUiType(e,a){switch(e.uidt){case"ID":return a==="AG"?["char","ntext","text","varchar","nvarchar"]:a==="AI"?["int","bigint","bit","smallint","tinyint"]:oe;case"ForeignKey":return oe;case"SingleLineText":case"LongText":case"Attachment":case"Collaborator":case"GeoData":return["char","ntext","text","varchar","nvarchar"];case"JSON":return["text","ntext"];case"Checkbox":return["bigint","bit","int","tinyint"];case"MultiSelect":return["text","ntext"];case"SingleSelect":return["text","ntext"];case"Year":return["int"];case"Time":return["time"];case"PhoneNumber":case"Email":return["varchar"];case"URL":return["varchar","text"];case"Number":return["int","bigint","bit","decimal","float","numeric","real","smallint","tinyint"];case"Decimal":return["decimal","float"];case"Currency":return["int","bigint","bit","decimal","float","numeric","real","smallint","tinyint","money"];case"Percent":return["int","bigint","bit","decimal","float","numeric","real","smallint","tinyint"];case"Duration":return["int","bigint","bit","decimal","float","numeric","real","smallint","tinyint"];case"Rating":return["int","bigint","bit","decimal","float","numeric","real","smallint","tinyint"];case"Formula":return["text","ntext","varchar","nvarchar"];case"Rollup":return["varchar"];case"Count":return["int","bigint","smallint","tinyint"];case"Lookup":return["varchar"];case"Date":return["date"];case"DateTime":case"CreateTime":case"LastModifiedTime":return["datetimeoffset","datetime2"];case"AutoNumber":return["int","bigint","smallint","tinyint"];case"Barcode":return["varchar"];case"Geometry":return["geometry"];case"Button":default:return oe}}static getUnsupportedFnList(){return[]}}class je{static getNewTableColumns(){return[{column_name:"id",title:"Id",dt:"integer",dtx:"integer",ct:"int(11)",nrqd:!1,rqd:!0,ck:!1,pk:!0,un:!1,ai:!1,cdf:null,clen:null,np:null,ns:null,dtxp:"",dtxs:"",altered:1,uidt:"ID",uip:"",uicn:""},{column_name:"title",title:"Title",dt:"varchar",dtx:"specificType",ct:"varchar(45)",nrqd:!0,rqd:!1,ck:!1,pk:!1,un:!1,ai:!1,cdf:null,clen:45,np:null,ns:null,dtxp:"45",dtxs:"",altered:1,uidt:"SingleLineText",uip:"",uicn:""}]}static getNewColumn(e){return{column_name:"title"+e,dt:"varchar",dtx:"specificType",ct:"varchar(45)",nrqd:!0,rqd:!1,ck:!1,pk:!1,un:!1,ai:!1,cdf:null,clen:45,np:null,ns:null,dtxp:"45",dtxs:"",altered:1,uidt:"SingleLineText",uip:"",uicn:""}}static getDefaultLengthForDatatype(e){switch(e){default:return""}}static getDefaultLengthIsDisabled(e){switch(e){case"integer":return!0;case"bfile":case"binary rowid":case"binary double":case"binary_float":case"blob":case"canoical":case"cfile":case"char":case"clob":case"content pointer":case"contigous array":case"date":case"decimal":case"double precision":case"float":case"interval day to second":case"interval year to month":case"lob pointer":case"long":case"long raw":case"named collection":case"named object":case"nchar":case"nclob":case"number":case"nvarchar2":case"octet":case"oid":case"pointer":case"raw":case"real":case"ref":case"ref cursor":case"rowid":case"signed binary integer":case"smallint":case"table":case"time":case"time with tz":case"timestamp":case"timestamp with local time zone":case"timestamp with local tz":case"timestamp with timezone":case"timestamp with tz":case"unsigned binary integer":case"urowid":case"varchar":case"varchar2":case"varray":case"varying array":return!1}}static getDefaultValueForDatatype(e){switch(e){default:return""}}static getDefaultScaleForDatatype(e){switch(e){case"integer":case"bfile":case"binary rowid":case"binary double":case"binary_float":case"blob":case"canoical":case"cfile":case"char":case"clob":case"content pointer":case"contigous array":case"date":case"decimal":case"double precision":case"float":case"interval day to second":case"interval year to month":case"lob pointer":case"long":case"long raw":case"named collection":case"named object":case"nchar":case"nclob":case"number":case"nvarchar2":case"octet":case"oid":case"pointer":case"raw":case"real":case"ref":case"ref cursor":case"rowid":case"signed binary integer":case"smallint":case"table":case"time":case"time with tz":case"timestamp":case"timestamp with local time zone":case"timestamp with local tz":case"timestamp with timezone":case"timestamp with tz":case"unsigned binary integer":case"urowid":case"varchar":case"varchar2":case"varray":case"varying array":return" "}}static colPropAIDisabled(e,a){if(e.dt==="int4"||e.dt==="integer"||e.dt==="bigint"||e.dt==="smallint"){for(let t=0;t<a.length;++t)if(a[t].cn!==e.cn&&a[t].ai)return!0;return!1}else return!0}static colPropUNDisabled(e){return!0}static onCheckboxChangeAI(e){console.log(e),(e.dt==="int"||e.dt==="bigint"||e.dt==="smallint"||e.dt==="tinyint")&&(e.altered=e.altered||2)}static showScale(e){return!1}static removeUnsigned(e){for(let a=0;a<e.length;++a)e[a].altered===1&&!(e[a].dt==="int"||e[a].dt==="bigint"||e[a].dt==="tinyint"||e[a].dt==="smallint"||e[a].dt==="mediumint")&&(e[a].un=!1,console.log(">> resetting unsigned value",e[a].cn)),console.log(e[a].cn)}static columnEditable(e){return e.tn!=="_evolutions"||e.tn!=="nc_evolutions"}static extractFunctionName(e){const a=/^\s*CREATE\s+(?:OR\s+REPLACE\s*)?\s*FUNCTION\s+(?:[\w\d_]+\.)?([\w_\d]+)/i,t=e.match(a);return t&&t[1]}static extractProcedureName(e){const a=/^\s*CREATE\s+(?:OR\s+REPLACE\s*)?\s*PROCEDURE\s+(?:[\w\d_]+\.)?([\w_\d]+)/i,t=e.match(a);return t&&t[1]}static splitQueries(e){return e.match(/\b("[^"]*;[^"]*"|'[^']*;[^']*'|[^;])*;/g)}static onCheckboxChangeAU(e){console.log(e),e.altered=e.altered||2}sanitiseQuery(e){let a=e.query.trim().split(";");if(a[0].startsWith("Select"))a=a[0]+` LIMIT 0,${e.limit?e.limit:100};`;else if(a[0].startsWith("select"))a=a[0]+` LIMIT 0,${e.limit?e.limit:100};`;else if(a[0].startsWith("SELECT"))a=a[0]+` LIMIT 0,${e.limit?e.limit:100};`;else return e.query;return a}getColumnsFromJson(e,a){const t=[];try{if(typeof e=="object"&&!Array.isArray(e)){const n=Object.keys(e);for(let r=0;r<n.length;++r)switch(typeof e[n[r]]){case"number":Number.isInteger(e[n[r]])?t.push({dp:null,tn:a,column_name:n[r],cno:n[r],dt:"int",np:10,ns:0,clen:null,cop:1,pk:!1,nrqd:!1,rqd:!1,un:!1,ct:"int(11) unsigned",ai:!1,unique:!1,cdf:null,cc:"",csn:null,dtx:"specificType",dtxp:"11",dtxs:0,altered:1}):t.push({dp:null,tn:a,column_name:n[r],cno:n[r],dt:"float",np:10,ns:2,clen:null,cop:1,pk:!1,nrqd:!1,rqd:!1,un:!1,ct:"int(11) unsigned",ai:!1,unique:!1,cdf:null,cc:"",csn:null,dtx:"specificType",dtxp:"11",dtxs:2,altered:1});break;case"string":e[n[r]].length<=255?t.push({dp:null,tn:a,column_name:n[r],cno:n[r],dt:"varchar",np:45,ns:0,clen:null,cop:1,pk:!1,nrqd:!1,rqd:!1,un:!1,ct:"int(11) unsigned",ai:!1,unique:!1,cdf:null,cc:"",csn:null,dtx:"specificType",dtxp:"45",dtxs:0,altered:1}):t.push({dp:null,tn:a,column_name:n[r],cno:n[r],dt:"text",np:null,ns:0,clen:null,cop:1,pk:!1,nrqd:!1,rqd:!1,un:!1,ct:"int(11) unsigned",ai:!1,unique:!1,cdf:null,cc:"",csn:null,dtx:"specificType",dtxp:null,dtxs:0,altered:1});break;case"boolean":t.push({dp:null,tn:a,column_name:n[r],cno:n[r],dt:"boolean",np:3,ns:0,clen:null,cop:1,pk:!1,nrqd:!1,rqd:!1,un:!1,ct:"int(11) unsigned",ai:!1,unique:!1,cdf:null,cc:"",csn:null,dtx:"specificType",dtxp:"1",dtxs:0,altered:1});break;case"object":t.push({dp:null,tn:a,column_name:n[r],cno:n[r],dt:"json",np:3,ns:0,clen:null,cop:1,pk:!1,nrqd:!1,rqd:!1,un:!1,ct:"int(11) unsigned",ai:!1,unique:!1,cdf:null,cc:"",csn:null,dtx:"specificType",dtxp:null,dtxs:0,altered:1});break;default:break}}}catch(n){console.log("Error in getColumnsFromJson",n)}return t}static colPropAuDisabled(e){return!0}static getAbstractType(e){var a;switch((a=e.dt)===null||a===void 0?void 0:a.toLowerCase()){case"integer":return"integer";case"bfile":case"binary rowid":case"binary double":case"binary_float":return"string";case"blob":return"blob";case"canoical":case"cfile":case"char":case"clob":case"content pointer":case"contigous array":return"string";case"date":return"date";case"decimal":case"double precision":case"float":return"float";case"interval day to second":case"interval year to month":return"string";case"lob pointer":return"string";case"long":return"integer";case"long raw":return"string";case"named collection":case"named object":case"nchar":case"nclob":return"string";case"nvarchar2":case"octet":case"oid":case"pointer":case"raw":return"string";case"real":case"number":return"float";case"ref":case"ref cursor":case"rowid":case"signed binary integer":return"string";case"smallint":return"integer";case"table":return"string";case"time":case"time with tz":return"time";case"timestamp":case"timestamp with local time zone":case"timestamp with local tz":case"timestamp with timezone":case"timestamp with tz":return"datetime";case"unsigned binary integer":case"urowid":case"varchar":case"varchar2":return"string";case"varray":case"varying array":return"string"}}static getUIType(e){switch(this.getAbstractType(e)){case"integer":return"Number";case"boolean":return"Checkbox";case"float":return"Decimal";case"date":return"Date";case"datetime":return"CreateTime";case"time":return"Time";case"year":return"Year";case"string":return"SingleLineText";case"text":return"LongText";case"blob":return"Attachment";case"enum":return"SingleSelect";case"set":return"MultiSelect";case"json":return"LongText"}}static getDataTypeForUiType(e,a){const t={};switch(e.uidt){case"ID":{const n=a==="AI",r=a==="AG";t.dt=r?"varchar":"integer",t.pk=!0,t.un=n,t.ai=n,t.rqd=!0,t.meta=r?{ag:"nc"}:void 0}break;case"ForeignKey":t.dt="varchar";break;case"SingleLineText":t.dt="varchar";break;case"LongText":t.dt="clob";break;case"Attachment":t.dt="clob";break;case"GeoData":t.dt="varchar";break;case"Checkbox":t.dt="tinyint",t.dtxp=1,t.cdf="0";break;case"MultiSelect":t.dt="varchar2";break;case"SingleSelect":t.dt="varchar2";break;case"Collaborator":t.dt="varchar";break;case"Date":t.dt="varchar";break;case"Year":t.dt="year";break;case"Time":t.dt="time";break;case"PhoneNumber":t.dt="varchar",t.validate={func:["isMobilePhone"],args:[""],msg:["Validation failed : isMobilePhone"]};break;case"Email":t.dt="varchar",t.validate={func:["isEmail"],args:[""],msg:["Validation failed : isEmail"]};break;case"URL":t.dt="varchar",t.validate={func:["isURL"],args:[""],msg:["Validation failed : isURL"]};break;case"Number":t.dt="integer";break;case"Decimal":t.dt="decimal";break;case"Currency":t.dt="decimal",t.validate={func:["isCurrency"],args:[""],msg:["Validation failed : isCurrency"]};break;case"Percent":t.dt="double";break;case"Duration":t.dt="integer";break;case"Rating":t.dt="integer",t.cdf="0";break;case"Formula":t.dt="varchar";break;case"Rollup":t.dt="varchar";break;case"Count":t.dt="integer";break;case"Lookup":t.dt="varchar";break;case"DateTime":t.dt="timestamp";break;case"CreateTime":t.dt="timestamp";break;case"LastModifiedTime":t.dt="timestamp";break;case"AutoNumber":t.dt="integer";break;case"Barcode":t.dt="varchar";break;case"Button":t.dt="varchar";break;default:t.dt="varchar";break}return t}static getUnsupportedFnList(){return[]}}const de=["int","integer","tinyint","smallint","mediumint","bigint","int2","int8","character","blob sub_type text","blob","real","double","double precision","float","numeric","boolean","date","datetime","text","varchar","timestamp"];class Ue{static getNewTableColumns(){return[{column_name:"id",title:"Id",dt:"integer",dtx:"integer",ct:"int(11)",nrqd:!1,rqd:!0,ck:!1,pk:!0,un:!1,ai:!0,cdf:null,clen:null,np:null,ns:0,dtxp:"",dtxs:"",altered:1,uidt:"ID",uip:"",uicn:""},{column_name:"title",title:"Title",dt:"varchar",dtx:"specificType",ct:"varchar",nrqd:!0,rqd:!1,ck:!1,pk:!1,un:!1,ai:!1,cdf:null,clen:45,np:null,ns:null,dtxp:"",dtxs:"",altered:1,uidt:"SingleLineText",uip:"",uicn:""},{column_name:"created_at",title:"CreatedAt",dt:"datetime",dtx:"specificType",ct:"varchar",nrqd:!0,rqd:!1,ck:!1,pk:!1,un:!1,ai:!1,cdf:"CURRENT_TIMESTAMP",clen:45,np:null,ns:null,dtxp:"",dtxs:"",altered:1,uidt:V.DateTime,uip:"",uicn:""},{column_name:"updated_at",title:"UpdatedAt",dt:"datetime",dtx:"specificType",ct:"varchar",nrqd:!0,rqd:!1,ck:!1,pk:!1,un:!1,ai:!1,cdf:"CURRENT_TIMESTAMP",clen:45,np:null,ns:null,dtxp:"",dtxs:"",altered:1,uidt:V.DateTime,uip:"",uicn:""}]}static getNewColumn(e){return{column_name:"title"+e,dt:"varchar",dtx:"specificType",ct:"varchar",nrqd:!0,rqd:!1,ck:!1,pk:!1,un:!1,ai:!1,cdf:null,clen:45,np:null,ns:null,dtxp:"",dtxs:"",altered:1,uidt:"SingleLineText",uip:"",uicn:""}}static getDefaultLengthForDatatype(e){return""}static getDefaultLengthIsDisabled(e){switch(e){case"integer":case"blob":case"real":case"numeric":return!0;case"text":return!1}}static getDefaultValueForDatatype(e){switch(e){case"integer":return"eg : 10";case"text":return"eg : hey";case"numeric":return"eg : 10";case"real":return"eg : 10";case"blob":return"eg : 100"}}static getDefaultScaleForDatatype(e){switch(e){case"integer":case"text":case"numeric":case"real":case"blob":return" "}}static colPropAIDisabled(e,a){if(e.dt==="integer"){for(let t=0;t<a.length;++t)if(a[t].cn!==e.cn&&a[t].ai)return!0;return!1}else return!0}static colPropUNDisabled(e){return!0}static onCheckboxChangeAI(e){console.log(e),(e.dt==="int"||e.dt==="bigint"||e.dt==="smallint"||e.dt==="tinyint")&&(e.altered=e.altered||2)}static showScale(e){return!1}static removeUnsigned(e){for(let a=0;a<e.length;++a)e[a].altered===1&&!(e[a].dt==="int"||e[a].dt==="bigint"||e[a].dt==="tinyint"||e[a].dt==="smallint"||e[a].dt==="mediumint")&&(e[a].un=!1,console.log(">> resetting unsigned value",e[a].cn)),console.log(e[a].cn)}static onCheckboxChangeAU(e){console.log(e),e.altered=e.altered||2}static colPropAuDisabled(e){if(e.altered!==1)return!0;switch(e.dt){case"date":case"datetime":case"timestamp":case"time":return!1;default:return!0}}static getAbstractType(e){var a;switch((a=e.dt)===null||a===void 0?void 0:a.replace(/\(\d+\)$/).toLowerCase()){case"date":return"date";case"datetime":case"timestamp":return"datetime";case"integer":case"int":case"tinyint":case"smallint":case"mediumint":case"bigint":case"int2":case"int8":return"integer";case"text":return"text";case"boolean":return"boolean";case"real":case"double":case"double precision":case"float":case"decimal":case"numeric":return"float";case"blob sub_type text":case"blob":return"blob";case"character":case"varchar":return"string"}return"string"}static getUIType(e){switch(this.getAbstractType(e)){case"integer":return"Number";case"boolean":return"Checkbox";case"float":return"Decimal";case"date":return"Date";case"datetime":return"CreateTime";case"time":return"Time";case"year":return"Year";case"string":return"SingleLineText";case"text":return"LongText";case"blob":return"Attachment";case"enum":return"SingleSelect";case"set":return"MultiSelect";case"json":return"LongText"}}static getDataTypeForUiType(e,a){const t={};switch(e.uidt){case"ID":{const n=a==="AI",r=a==="AG";t.dt=r?"varchar":"integer",t.pk=!0,t.un=n,t.ai=n,t.rqd=!0,t.meta=r?{ag:"nc"}:void 0}break;case"ForeignKey":t.dt="varchar";break;case"SingleLineText":t.dt="varchar";break;case"LongText":t.dt="text";break;case"Attachment":t.dt="text";break;case"GeoData":t.dt="text";break;case"Checkbox":t.dt="boolean",t.cdf="0";break;case"MultiSelect":t.dt="text";break;case"SingleSelect":t.dt="text";break;case"Collaborator":t.dt="varchar";break;case"Date":t.dt="date";break;case"Year":t.dt="year";break;case"Time":t.dt="time";break;case"PhoneNumber":t.dt="varchar",t.validate={func:["isMobilePhone"],args:[""],msg:["Validation failed : isMobilePhone"]};break;case"Email":t.dt="varchar",t.validate={func:["isEmail"],args:[""],msg:["Validation failed : isEmail"]};break;case"URL":t.dt="varchar",t.validate={func:["isURL"],args:[""],msg:["Validation failed : isURL"]};break;case"Number":t.dt="integer";break;case"Decimal":t.dt="decimal";break;case"Currency":t.dt="double precision",t.validate={func:["isCurrency"],args:[""],msg:["Validation failed : isCurrency"]};break;case"Percent":t.dt="double";break;case"Duration":t.dt="decimal";break;case"Rating":t.dt="integer",t.cdf="0";break;case"Formula":t.dt="varchar";break;case"Rollup":t.dt="varchar";break;case"Count":t.dt="integer";break;case"Lookup":t.dt="varchar";break;case"DateTime":t.dt="datetime";break;case"CreateTime":t.dt="datetime";break;case"LastModifiedTime":t.dt="datetime";break;case"AutoNumber":t.dt="integer";break;case"Barcode":t.dt="varchar";break;case"Button":t.dt="varchar";break;case"JSON":t.dt="text";break;default:t.dt="varchar";break}return t}static getDataTypeListForUiType(e,a){switch(e.uidt){case"ID":return a==="AG"?["character","text","varchar"]:a==="AI"?["int","integer","tinyint","smallint","mediumint","bigint","int2","int8"]:de;case"ForeignKey":return de;case"SingleLineText":case"LongText":case"Attachment":case"Collaborator":case"GeoData":return["character","text","varchar"];case"Checkbox":return["int","integer","tinyint","smallint","mediumint","bigint","int2","int8","boolean"];case"MultiSelect":return["text","varchar"];case"SingleSelect":return["text","varchar"];case"Year":return["int","integer","tinyint","smallint","mediumint","bigint","int2","int8"];case"Time":return["int","integer","tinyint","smallint","mediumint","bigint","int2","int8"];case"PhoneNumber":case"Email":return["varchar","text"];case"URL":return["varchar","text"];case"Number":return["int","integer","tinyint","smallint","mediumint","bigint","int2","int8","numeric","real","double","double precision","float"];case"Decimal":return["real","double","double precision","float","numeric"];case"Currency":return["real","double","double precision","float","int","integer","tinyint","smallint","mediumint","bigint","int2","int8","numeric"];case"Percent":return["real","double","double precision","float","int","integer","tinyint","smallint","mediumint","bigint","int2","int8","numeric"];case"Duration":return["int","integer","tinyint","smallint","mediumint","bigint","int2","int8"];case"Rating":return["int","integer","tinyint","smallint","mediumint","bigint","int2","int8","numeric","real","double","double precision","float"];case"Formula":return["text","varchar"];case"Rollup":return["varchar"];case"Count":return["int","integer","tinyint","smallint","mediumint","bigint","int2","int8"];case"Lookup":return["varchar"];case"Date":return["date","varchar"];case"DateTime":case"CreateTime":case"LastModifiedTime":return["datetime","timestamp"];case"AutoNumber":return["int","integer","tinyint","smallint","mediumint","bigint","int2","int8"];case"Barcode":return["varchar"];case"Geometry":return["text"];case"JSON":return["text"];case"Button":default:return de}}static getUnsupportedFnList(){return["LOG","EXP","POWER","SQRT"]}}const me=["NUMBER","DECIMAL","NUMERIC","INT","INTEGER","BIGINT","SMALLINT","TINYINT","BYTEINT","FLOAT","FLOAT4","FLOAT8","DOUBLE","DOUBLE PRECISION","REAL","VARCHAR","CHAR","CHARACTER","STRING","TEXT","BINARY","VARBINARY","BOOLEAN","DATE","DATETIME","TIME","TIMESTAMP","TIMESTAMP_LTZ","TIMESTAMP_NTZ","TIMESTAMP_TZ","VARIANT","OBJECT","ARRAY","GEOGRAPHY"];class Oe{static getNewTableColumns(){return[{column_name:"id",title:"Id",dt:"int",dtx:"integer",ct:"int(11)",nrqd:!1,rqd:!0,ck:!1,pk:!0,un:!1,ai:!0,cdf:null,clen:null,np:11,ns:0,dtxp:"11",dtxs:"",altered:1,uidt:"ID",uip:"",uicn:""},{column_name:"title",title:"Title",dt:"varchar",dtx:"specificType",ct:"varchar(45)",nrqd:!0,rqd:!1,ck:!1,pk:!1,un:!1,ai:!1,cdf:null,clen:45,np:null,ns:null,dtxp:"45",dtxs:"",altered:1,uidt:"SingleLineText",uip:"",uicn:""},{column_name:"created_at",title:"CreatedAt",dt:"timestamp",dtx:"specificType",ct:"varchar(45)",nrqd:!0,rqd:!1,ck:!1,pk:!1,un:!1,ai:!1,cdf:"current_timestamp()",clen:45,np:null,ns:null,dtxp:"",dtxs:"",altered:1,uidt:V.DateTime,uip:"",uicn:""},{column_name:"updated_at",title:"UpdatedAt",dt:"timestamp",dtx:"specificType",ct:"varchar(45)",nrqd:!0,rqd:!1,ck:!1,pk:!1,un:!1,ai:!1,au:!0,cdf:"current_timestamp()",clen:45,np:null,ns:null,dtxp:"",dtxs:"",altered:1,uidt:V.DateTime,uip:"",uicn:""}]}static getNewColumn(e){return{column_name:"title"+e,dt:"varchar",dtx:"specificType",ct:"varchar(45)",nrqd:!0,rqd:!1,ck:!1,pk:!1,un:!1,ai:!1,cdf:null,clen:45,np:null,ns:null,dtxp:"45",dtxs:"",altered:1,uidt:"SingleLineText",uip:"",uicn:""}}static getDefaultLengthForDatatype(e){switch(e){case"VARCHAR":case"CHAR":case"CHARACTER":case"STRING":return 255;case"NUMBER":case"DECIMAL":case"NUMERIC":case"INT":case"INTEGER":case"BIGINT":case"SMALLINT":case"TINYINT":case"BYTEINT":case"FLOAT":case"FLOAT4":case"FLOAT8":case"DOUBLE":case"DOUBLE PRECISION":case"REAL":return 38}}static getDefaultLengthIsDisabled(e){switch(e){case"VARCHAR":case"CHAR":case"CHARACTER":case"STRING":case"NUMBER":case"DECIMAL":case"NUMERIC":case"INT":case"INTEGER":case"BIGINT":case"SMALLINT":case"TINYINT":case"BYTEINT":case"FLOAT":case"FLOAT4":case"FLOAT8":case"DOUBLE":case"DOUBLE PRECISION":case"REAL":return!1;case"TEXT":case"BINARY":case"VARBINARY":case"BOOLEAN":case"DATE":case"DATETIME":case"TIME":case"TIMESTAMP":case"TIMESTAMP_LTZ":case"TIMESTAMP_NTZ":case"TIMESTAMP_TZ":case"VARIANT":case"OBJECT":case"ARRAY":case"GEOGRAPHY":return!0}}static getDefaultValueForDatatype(e){switch(e){default:return"eg: "}}static getDefaultScaleForDatatype(e){switch(e){case"NUMBER":case"DECIMAL":case"NUMERIC":case"INT":case"INTEGER":case"BIGINT":case"SMALLINT":case"TINYINT":case"BYTEINT":case"FLOAT":case"FLOAT4":case"FLOAT8":case"DOUBLE":case"DOUBLE PRECISION":case"REAL":case"VARCHAR":case"CHAR":case"CHARACTER":case"STRING":case"TEXT":case"BINARY":case"VARBINARY":case"BOOLEAN":case"DATE":case"DATETIME":case"TIME":case"TIMESTAMP":case"TIMESTAMP_LTZ":case"TIMESTAMP_NTZ":case"TIMESTAMP_TZ":case"VARIANT":case"OBJECT":case"ARRAY":case"GEOGRAPHY":return" "}}static colPropAIDisabled(e,a){if(e.dt==="NUMBER"||e.dt==="DECIMAL"||e.dt==="NUMERIC"||e.dt==="INT"||e.dt==="INTEGER"||e.dt==="BIGINT"||e.dt==="SMALLINT"){for(let t=0;t<a.length;++t)if(a[t].cn!==e.cn&&a[t].ai)return!0;return!1}else return!0}static colPropUNDisabled(e){return!0}static onCheckboxChangeAI(e){console.log(e),(e.dt==="NUMBER"||e.dt==="DECIMAL"||e.dt==="NUMERIC"||e.dt==="INT"||e.dt==="INTEGER"||e.dt==="BIGINT"||e.dt==="SMALLINT")&&(e.altered=e.altered||2)}static onCheckboxChangeAU(e){console.log(e),e.altered=e.altered||2,e.au&&(e.cdf="current_timestamp()")}static showScale(e){return!1}static removeUnsigned(e){for(let a=0;a<e.length;++a)e[a].altered===1&&!(e[a].dt==="INT"||e[a].dt==="BIGINT"||e[a].dt==="SMALLINT"||e[a].dt==="TINYINT")&&(e[a].un=!1,console.log(">> resetting unsigned value",e[a].cn)),console.log(e[a].cn)}static columnEditable(e){return e.tn!=="_evolutions"||e.tn!=="nc_evolutions"}static colPropAuDisabled(e){if(e.altered!==1)return!0;switch(e.dt.toUpperCase()){case"DATE":case"DATETIME":case"TIME":case"TIMESTAMP":case"TIMESTAMP_LTZ":case"TIMESTAMP_NTZ":case"TIMESTAMP_TZ":return!1;default:return!0}}static getAbstractType(e){var a;switch((a=e.dt)===null||a===void 0?void 0:a.toUpperCase()){case"NUMBER":case"DECIMAL":case"NUMERIC":case"INT":case"INTEGER":case"BIGINT":case"SMALLINT":case"TINYINT":case"BYTEINT":return"integer";case"FLOAT":case"FLOAT4":case"FLOAT8":case"DOUBLE":case"DOUBLE PRECISION":case"REAL":return"float";case"VARCHAR":case"CHAR":case"CHARACTER":case"STRING":return"string";case"TEXT":return"text";case"BINARY":case"VARBINARY":return"string";case"BOOLEAN":return"boolean";case"DATE":return"date";case"DATETIME":case"TIME":case"TIMESTAMP":case"TIMESTAMP_LTZ":case"TIMESTAMP_NTZ":case"TIMESTAMP_TZ":return"string";case"VARIANT":return"string";case"OBJECT":return"json";case"ARRAY":return"enum";case"GEOGRAPHY":return"string";default:return"string"}}static getUIType(e){switch(this.getAbstractType(e)){case"NUMBER":case"DECIMAL":case"NUMERIC":case"INT":case"INTEGER":case"BIGINT":case"SMALLINT":case"TINYINT":case"BYTEINT":return"Number";case"FLOAT":case"FLOAT4":case"FLOAT8":case"DOUBLE":case"DOUBLE PRECISION":case"REAL":return"Decimal";case"VARCHAR":case"CHAR":case"CHARACTER":case"STRING":return"SingleLineText";case"TEXT":return"LongText";case"BOOLEAN":return"Checkbox";case"DATE":return"Date";case"DATETIME":return"DateTime"}}static getDataTypeForUiType(e,a){const t={};switch(e.uidt){case"ID":{const n=a==="AI",r=a==="AG";t.dt=r?"VARCHAR":"int4",t.pk=!0,t.un=n,t.ai=n,t.rqd=!0,t.meta=r?{ag:"nc"}:void 0}break;case"ForeignKey":t.dt="VARCHAR";break;case"SingleLineText":t.dt="VARCHAR";break;case"LongText":t.dt="TEXT";break;case"Attachment":t.dt="TEXT";break;case"GeoData":t.dt="TEXT";break;case"Checkbox":t.dt="BOOLEAN",t.cdf="0";break;case"MultiSelect":t.dt="TEXT";break;case"SingleSelect":t.dt="TEXT";break;case"Collaborator":t.dt="VARCHAR";break;case"Date":t.dt="DATE";break;case"Year":t.dt="INT";break;case"Time":t.dt="VARCHAR";break;case"PhoneNumber":t.dt="VARCHAR",t.validate={func:["isMobilePhone"],args:[""],msg:["Validation failed : isMobilePhone"]};break;case"Email":t.dt="VARCHAR",t.validate={func:["isEmail"],args:[""],msg:["Validation failed : isEmail"]};break;case"URL":t.dt="VARCHAR",t.validate={func:["isURL"],args:[""],msg:["Validation failed : isURL"]};break;case"Number":t.dt="BIGINT";break;case"Decimal":t.dt="DECIMAL";break;case"Currency":t.dt="DECIMAL",t.validate={func:["isCurrency"],args:[""],msg:["Validation failed : isCurrency"]};break;case"Percent":t.dt="DOUBLE PRECISION";break;case"Duration":t.dt="DECIMAL";break;case"Rating":t.dt="SMALLINT",t.cdf="0";break;case"Formula":t.dt="VARCHAR";break;case"Rollup":t.dt="VARCHAR";break;case"Count":t.dt="INT";break;case"Lookup":t.dt="VARCHAR";break;case"DateTime":t.dt="TIMESTAMP";break;case"CreateTime":t.dt="TIMESTAMP";break;case"LastModifiedTime":t.dt="TIMESTAMP";break;case"AutoNumber":t.dt="INT";break;case"Barcode":t.dt="VARCHAR";break;case"Button":t.dt="VARCHAR";break;case"JSON":t.dt="TEXT";break;default:t.dt="VARCHAR";break}return t}static getDataTypeListForUiType(e,a){switch(e.uidt){case"ID":return a==="AG"?["VARCHAR"]:a==="AI"?["NUMBER"]:me;case"ForeignKey":return me;case"SingleLineText":case"LongText":case"Collaborator":case"GeoData":return["CHAR","CHARACTER","VARCHAR","TEXT"];case"Attachment":return["TEXT","CHAR","CHARACTER","VARCHAR","text"];case"JSON":return["TEXT"];case"Checkbox":return["BIT","BOOLEAN","TINYINT","INT","BIGINT"];case"MultiSelect":return["TEXT"];case"SingleSelect":return["TEXT"];case"Year":return["INT"];case"Time":return["TIMESTAMP","VARCHAR"];case"PhoneNumber":case"Email":return["VARCHAR"];case"URL":return["VARCHAR","TEXT"];case"Number":return["NUMBER","DECIMAL","NUMERIC","INT","INTEGER","BIGINT","SMALLINT","TINYINT","BYTEINT","FLOAT","FLOAT4","FLOAT8","DOUBLE","DOUBLE PRECISION","REAL"];case"Decimal":return["DOUBLE","DOUBLE PRECISION","FLOAT","FLOAT4","FLOAT8","NUMERIC"];case"Currency":return["NUMBER","DECIMAL","NUMERIC","INT","INTEGER","BIGINT","FLOAT","FLOAT4","FLOAT8","DOUBLE","DOUBLE PRECISION"];case"Percent":return["NUMBER","DECIMAL","NUMERIC","INT","INTEGER","BIGINT","FLOAT","FLOAT4","FLOAT8","DOUBLE","DOUBLE PRECISION"];case"Duration":return["NUMBER","DECIMAL","NUMERIC","INT","INTEGER","BIGINT","FLOAT","FLOAT4","FLOAT8","DOUBLE","DOUBLE PRECISION"];case"Rating":return["NUMBER","DECIMAL","NUMERIC","INT","INTEGER","BIGINT","FLOAT","FLOAT4","FLOAT8","DOUBLE","DOUBLE PRECISION"];case"Formula":return["TEXT","VARCHAR"];case"Rollup":return["VARCHAR"];case"Count":return["NUMBER","INT","INTEGER","BIGINT"];case"Lookup":return["VARCHAR"];case"Date":return["DATE","TIMESTAMP"];case"DateTime":case"CreateTime":case"LastModifiedTime":return["TIMESTAMP"];case"AutoNumber":return["NUMBER","INT","INTEGER","BIGINT"];case"Barcode":return["VARCHAR"];case"Geometry":return["TEXT"];case"Button":default:return me}}static getUnsupportedFnList(){return[]}}/**
 * @copyright Copyright (c) 2021, Xgene Cloud Ltd
 *
 * @author Naveen MR <oof1lab@gmail.com>
 * @author Pranav C Balan <pranavxc@gmail.com>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 *
 */class we{static create(e){if(e.client==="mysql"||e.client==="mysql2")return Se;if(e.client==="sqlite3")return Ue;if(e.client==="mssql")return Pe;if(e.client==="oracledb")return je;if(e.client==="pg")return _e;if(e.client==="snowflake")return Oe;throw new Error("Database not supported")}}function We(m){if(!m)return{};try{return typeof m=="string"?JSON.parse(m):m}catch{return{}}}function Be(m){if(m)try{return typeof m=="string"?m:JSON.stringify(m)}catch{return"{}"}}var qe=Fe;function Q(m){return m instanceof Buffer?Buffer.from(m):new m.constructor(m.buffer.slice(),m.byteOffset,m.length)}function Fe(m){if(m=m||{},m.circles)return Ge(m);return m.proto?t:a;function e(n,r){for(var i=Object.keys(n),l=new Array(i.length),y=0;y<i.length;y++){var s=i[y],u=n[s];typeof u!="object"||u===null?l[s]=u:u instanceof Date?l[s]=new Date(u):ArrayBuffer.isView(u)?l[s]=Q(u):l[s]=r(u)}return l}function a(n){if(typeof n!="object"||n===null)return n;if(n instanceof Date)return new Date(n);if(Array.isArray(n))return e(n,a);if(n instanceof Map)return new Map(e(Array.from(n),a));if(n instanceof Set)return new Set(e(Array.from(n),a));var r={};for(var i in n)if(Object.hasOwnProperty.call(n,i)!==!1){var l=n[i];typeof l!="object"||l===null?r[i]=l:l instanceof Date?r[i]=new Date(l):l instanceof Map?r[i]=new Map(e(Array.from(l),a)):l instanceof Set?r[i]=new Set(e(Array.from(l),a)):ArrayBuffer.isView(l)?r[i]=Q(l):r[i]=a(l)}return r}function t(n){if(typeof n!="object"||n===null)return n;if(n instanceof Date)return new Date(n);if(Array.isArray(n))return e(n,t);if(n instanceof Map)return new Map(e(Array.from(n),t));if(n instanceof Set)return new Set(e(Array.from(n),t));var r={};for(var i in n){var l=n[i];typeof l!="object"||l===null?r[i]=l:l instanceof Date?r[i]=new Date(l):l instanceof Map?r[i]=new Map(e(Array.from(l),t)):l instanceof Set?r[i]=new Set(e(Array.from(l),t)):ArrayBuffer.isView(l)?r[i]=Q(l):r[i]=t(l)}return r}}function Ge(m){var e=[],a=[];return m.proto?r:n;function t(i,l){for(var y=Object.keys(i),s=new Array(y.length),u=0;u<y.length;u++){var v=y[u],k=i[v];if(typeof k!="object"||k===null)s[v]=k;else if(k instanceof Date)s[v]=new Date(k);else if(ArrayBuffer.isView(k))s[v]=Q(k);else{var w=e.indexOf(k);w!==-1?s[v]=a[w]:s[v]=l(k)}}return s}function n(i){if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return t(i,n);if(i instanceof Map)return new Map(t(Array.from(i),n));if(i instanceof Set)return new Set(t(Array.from(i),n));var l={};e.push(i),a.push(l);for(var y in i)if(Object.hasOwnProperty.call(i,y)!==!1){var s=i[y];if(typeof s!="object"||s===null)l[y]=s;else if(s instanceof Date)l[y]=new Date(s);else if(s instanceof Map)l[y]=new Map(t(Array.from(s),n));else if(s instanceof Set)l[y]=new Set(t(Array.from(s),n));else if(ArrayBuffer.isView(s))l[y]=Q(s);else{var u=e.indexOf(s);u!==-1?l[y]=a[u]:l[y]=n(s)}}return e.pop(),a.pop(),l}function r(i){if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return t(i,r);if(i instanceof Map)return new Map(t(Array.from(i),r));if(i instanceof Set)return new Set(t(Array.from(i),r));var l={};e.push(i),a.push(l);for(var y in i){var s=i[y];if(typeof s!="object"||s===null)l[y]=s;else if(s instanceof Date)l[y]=new Date(s);else if(s instanceof Map)l[y]=new Map(t(Array.from(s),r));else if(s instanceof Set)l[y]=new Set(t(Array.from(s),r));else if(ArrayBuffer.isView(s))l[y]=Q(s);else{var u=e.indexOf(s);u!==-1?l[y]=a[u]:l[y]=r(s)}}return e.pop(),a.pop(),l}}const Ve=Le(qe),ze=Ae(()=>{const m=Ve(),a=ne().currentRoute,t=x(()=>{const c=[{key:"root",param:"root"}];for(const[b,h]of Object.entries(a.value.params))Array.isArray(h)?c.push({key:b,param:h.join(",")}):c.push({key:b,param:h});return c}),n=c=>c.every(b=>t.value.some(h=>Array.isArray(b.param)?b.key==="viewTitle"&&h.key==="viewTitle"&&h.param===""||b.key===h.key&&b.param.includes(h.param):b.key==="viewTitle"&&h.key==="viewTitle"&&h.param===""||b.key===h.key&&b.param===h.param)),r=N([]),i=N([]),l=(c,b=!1)=>{b||(i.value=i.value.filter(h=>!n(h.scope||[]))),r.value.push(c)},y=c=>{i.value.push(c)},s=async()=>{let c=-1;for(let h=r.value.length-1;h>=0;h--){const S=r.value[h].scope||[{key:"root",param:"root"}];if(n(S)){c=h;break}}if(c===-1)return;const b=r.value.splice(c,1)[0];if(b)try{await b.undo.fn.apply(b,b.undo.args),y(b)}catch{$.warn("Error while undoing action, it is skipped.")}},u=async()=>{let c=-1;for(let h=i.value.length-1;h>=0;h--){const S=i.value[h].scope||[{key:"root",param:"root"}];if(n(S)){c=h;break}}if(c===-1)return;const b=i.value.splice(c,1)[0];if(b)try{await b.redo.fn.apply(b,b.redo.args),l(b,!0)}catch{$.warn("Error while redoing action, it is skipped.")}},v=()=>[{key:"root",param:"root"}],k=c=>c.project?[{key:"projectId",param:c.project.id}]:c.model?[{key:"projectId",param:c.model.project_id}]:c.view?[{key:"projectId",param:c.view.project_id}]:[{key:"projectId",param:c.project_id}],w=c=>c.model?[{key:"projectId",param:c.model.project_id},{key:"viewId",param:c.model.id}]:c.view?[{key:"projectId",param:c.view.project_id},{key:"viewId",param:c.view.fk_model_id}]:[{key:"projectId",param:c.project_id},{key:"viewId",param:c.model_id}],I=c=>c.view?[{key:"projectId",param:c.view.project_id},{key:"viewId",param:c.view.fk_model_id},{key:"viewTitle",param:[c.view.title,c.view.id]}]:[{key:"projectId",param:c.project_id},{key:"viewId",param:c.model_id},{key:"viewTitle",param:[c.title,c.id]}];return Ce(document,"keydown",async c=>{if((Ne()?c.metaKey:c.ctrlKey)&&!c.altKey)switch(c.keyCode){case 90:{c.preventDefault(),c.shiftKey?i.value.length&&u():r.value.length&&s();break}}}),{addUndo:l,undo:s,clone:m,defineRootScope:v,defineProjectScope:k,defineModelScope:w,defineViewScope:I}}),be=Ae(()=>{const m=N(),e=xe(),a=N("Quick actions"),t=x(()=>{}),n=x(()=>({})),r=(...i)=>{};return{commandPalette:m,cmdData:t,activeScope:n,cmdPlaceholder:a,refreshCommandPalette:e.trigger,loadTemporaryScope:r}}),Ee=se("workspaceStore",()=>{const m=ye(),e=N(),t=ne().currentRoute,{$api:n}=ee(),{refreshCommandPalette:r}=be(),i=N(null),{setTheme:l,theme:y}=ke(),{$e:s}=ee(),{appInfo:u,ncNavigateTo:v}=ge(),{orgRoles:k}=Ie(),w=N(new Map),I=x(()=>Array.from(w.value.values()).sort((g,D)=>g.updated_at-D.updated_at)),c=x(()=>t.value.name==="index-typeOrId-settings"),b=N(!0),h=N(!0),S=N(!1),_=x(()=>t.value.query.page??"recent"),j=x(()=>"default"),d=x(()=>({id:"default",title:"default",meta:{},roles:""})),E=x(()=>{const g={};if(!d.value)return g;try{return(pe(d.value.meta)?JSON.parse(d.value.meta):d.value.meta)??g}catch{return g}}),R=x(()=>{var g;return(g=k.value)==null?void 0:g[ie.OrgLevelCreator]}),A=x(()=>{var g;return(g=k.value)==null?void 0:g[ie.OrgLevelCreator]}),U=x(()=>{var g;return(g=k.value)==null?void 0:g[ie.OrgLevelCreator]}),O=async(g=!1)=>{},z=async(...g)=>{},J=async(...g)=>{},X=async(g,{skipStateUpdate:D}={})=>{},K=async(...g)=>{},o=async(...g)=>{},p=async(...g)=>{},T=async(...g)=>{},P=async(...g)=>{};async function M(...g){b.value=!0;try{await m.loadProjects()}catch(D){console.error(D)}finally{b.value=!1}}re(_,async g=>{g!=="workspace"&&await m.loadProjects(g)});const H=async g=>{var D;try{const he=m.projects.get(g);if(!he)return;he.starred=!0,await n.project.userMetaUpdate(g,{starred:!0},{baseURL:u.value.baseHostName?`https://${(D=d.value)==null?void 0:D.id}.${u.value.baseHostName}`:void 0})}catch(W){$.error(await ae(W))}},F=async g=>{var D;try{const W=m.projects.get(g);if(!W)return;W.starred=!1,await n.project.userMetaUpdate(g,{starred:!1},{baseURL:u.value.baseHostName?`https://${(D=d.value)==null?void 0:D.id}.${u.value.baseHostName}`:void 0})}catch(W){$.error(await ae(W))}},C=async g=>{try{await n.project.update(g.id,{title:g.temp_title},{baseURL:u.value.baseHostName?`https://${d.value.id}.${u.value.baseHostName}`:void 0}),g.title=g.temp_title,g.edit=!1,r()}catch(D){$.error(await ae(D))}},B=async(...g)=>{};async function Y(g){const D={primaryColor:y.value.primaryColor,accentColor:y.value.accentColor,...g};await J(d.value.id,{meta:{...d.value,theme:D}}),l(D),s("c:themes:change")}async function Z(){await m.clearProjects(),w.value.clear()}const f=async()=>{},L=async g=>{if(g=g||j.value,!g)throw new Error("Workspace not selected");await v({workspaceId:g})},G=async()=>{te("/account/users")};function q(g=!1){b.value=g}return{loadWorkspaces:O,workspaces:w,workspacesList:I,createWorkspace:z,deleteWorkspace:X,updateWorkspace:J,activeWorkspace:d,loadCollaborators:K,inviteCollaborator:o,removeCollaborator:p,updateCollaborator:T,collaborators:e,isWorkspaceCreator:R,isWorkspaceOwner:A,isInvitingCollaborators:S,isCollaboratorsLoading:h,addToFavourite:H,removeFromFavourite:F,activeWorkspaceId:j,activePage:_,updateProjectTitle:C,moveWorkspace:B,loadWorkspace:P,saveTheme:Y,activeWorkspaceMeta:E,isWorkspaceLoading:b,populateWorkspace:M,clearWorkspaces:Z,upgradeActiveWorkspace:f,navigateToWorkspace:L,isWorkspaceOwnerOrCreator:U,setLoadingState:q,navigateToWorkspaceSettings:G,lastPopulatedWorkspaceId:i,isWorkspaceSettingsPageOpened:c}}),ye=se("projectsStore",()=>{const{$api:m}=ee(),e=N(new Map),a=x(()=>Array.from(e.value.values()).sort((o,p)=>o.updated_at-p.updated_at)),n=ne().currentRoute,r=x(()=>{var o,p;return n.value.params.typeOrId==="base"?(p=(o=a.value)==null?void 0:o[0])==null?void 0:p.id:n.value.params.projectId}),i=x(()=>r.value?e.value.get(r.value):void 0),l=x(()=>{const o=new Map;if(!i.value||!i.value.bases)return o;for(const p of i.value.bases)o.set(p.id,p);return o}),y=Ee(),s=Re(),{api:u}=fe(),{getBaseUrl:v}=ge(),k=N(!1);async function w({projectId:o,limit:p,page:T,searchText:P}){const M=await u.auth.projectUserList(o,{query:{limit:p,offset:(T-1)*p,query:P}}),H=M.users.pageInfo.totalRows??0;return{users:M.users.list,totalRows:H}}const I=async(o,p)=>{await u.auth.projectUserAdd(o,p)},c=async(o,p)=>{await u.auth.projectUserUpdate(o,p.id,p)},b=async(o,p)=>{await u.auth.projectUserRemove(o,p.id)},h=async(o="recent")=>{var M,H;if(n.value.params.typeOrId==="base"&&n.value.params.projectId){const{project_id:F}=await m.public.sharedBaseGet(n.value.params.projectId),C=await m.project.read(F);if(!C)return;e.value=[C].reduce((B,Y)=>(B.set(Y.id,Y),B),new Map),e.value.set(C.id,{...e.value.get(C.id)||{},...C,bases:[...C.bases??((M=e.value.get(C.id))==null?void 0:M.bases)??[]],isExpanded:n.value.params.projectId===C.id||((H=e.value.get(C.id))==null?void 0:H.isExpanded),isLoading:!1});return}const p=y.activeWorkspace,T=y.workspace;if((!o||o==="workspace")&&!(T!=null&&T.id)&&!(p!=null&&p.id))throw new Error("Workspace not selected");let P=[];k.value=!0;try{const{list:F}=await m.project.list({baseURL:v((p==null?void 0:p.id)??(T==null?void 0:T.id))});P=F,e.value=P.reduce((C,B)=>{var Z;const Y=e.value.get(B.id)||{};return C.set(B.id,{...Y,...B,isExpanded:n.value.params.projectId===B.id||((Z=e.value.get(B.id))==null?void 0:Z.isExpanded),isLoading:!1}),C},new Map)}catch(F){console.error(F),$.error(F.message)}finally{k.value=!1}};function S(o){return _(o)?e.value.get(o)?s.projectTables.get(o).length===0:!1:!0}function _(o){var T;const p=e.value.get(o);return p?!!((T=p.bases)!=null&&T.length&&s.projectTables.get(o)):!1}const j=async(o,p=!1)=>{if(!p&&_(o))return e.value.get(o);const T=await u.project.read(o);if(!T){await te("/");return}T.meta=T!=null&&T.meta&&typeof T.meta=="string"?JSON.parse(T.meta):{};const P=e.value.get(o)??{},M={...P,...T,isExpanded:n.value.params.projectId===o||P.isExpanded,isLoading:P.isLoading};e.value.set(o,M)},d=async(o,p)=>{e.value.get(o)||await j(o);let T=null;const P=e.value.get(o);for(const M of P.bases??[])if(M.id===p){T=we.create({client:M.type});break}return T},E=async(o,p)=>{await u.project.update(o,p),await j(o,!0)},R=async o=>{const p=await u.project.create({title:o.title,linked_db_project_ids:o.linkedDbProjectIds},{baseURL:v("nc")});return await h(),p},A=async o=>{await u.project.delete(o),e.value.delete(o),s.projectTables.delete(o),await h()},U=o=>{const p=e.value.get(o);if(!p)throw new Error("Project not found");let T={showNullAndEmptyInFilter:!1};try{T=(pe(p.meta)?JSON.parse(p.meta):p.meta)??T}catch{}return T};async function O(o){return await u.project.metaGet(o,{})}async function z(o,p){e.value.set(o,p)}async function J(){e.value.clear()}const X=async({projectId:o,page:p})=>{if(!(!o||!e.value.get(o))){if(p)return await te(`/nc/${o}?page=${p}`);await te(`/nc/${o}`)}};return De(()=>{r.value&&(_(r.value)||j(r.value))}),{projects:e,projectsList:a,loadProjects:h,loadProject:j,getSqlUi:d,updateProject:E,createProject:R,deleteProject:A,getProjectMetaInfo:O,getProjectMeta:U,setProject:z,clearProjects:J,isProjectEmpty:S,isProjectPopulated:_,isProjectsLoading:k,activeProjectId:r,openedProject:i,openedProjectBasesMap:l,getProjectUsers:w,createProjectUser:I,updateProjectUser:c,navigateToProject:X,removeProjectUser:b,navigateToFirstProjectOrHome:async()=>{var o;(o=a.value)!=null&&o.length?await X({projectId:a.value[0].id}):te("/")}}}),Re=se("tablesStore",()=>{const{includeM2M:m,ncNavigateTo:e}=ge(),{api:a}=fe(),{$e:t,$api:n}=ee(),{addUndo:r,defineProjectScope:i}=ze(),{refreshCommandPalette:l}=be(),s=ne().currentRoute,u=N(new Map),v=ye(),k=Ee(),w=x(()=>s.value.params.viewId),I=x(()=>{if(!v)return[];const d=v.activeProjectId;if(!d)return[];const E=u.value.get(d);if(!E)return[];const R=v.openedProjectBasesMap;return E.filter(A=>{var U;return!A.base_id||((U=R.get(A.base_id))==null?void 0:U.enabled)})}),c=x(()=>{if(!v)return;const d=v.activeProjectId;if(!(!d||!u.value.get(d)))return I.value.find(R=>R.id===w.value)});re(()=>{var d;return(d=c.value)==null?void 0:d.title},d=>{var E,R,A;if(((E=v.openedProject)==null?void 0:E.type)==="database"){if(!d){ve((R=v.openedProject)==null?void 0:R.title);return}ve(`${(A=v.openedProject)==null?void 0:A.title}: ${d}`)}});const b=async(d,E=!1)=>{const R=v.projects;if(!E&&u.value.get(d))return;if(!R.get(d))throw new Error("Project not found");if(u.value.get(d)&&!E)return;const O=await a.dbTable.list(d,{includeM2M:m.value});u.value.set(d,O.list||[])},h=(d,E)=>{const R=u.value.get(d);R&&R.push(E)},S=async({projectId:d,tableId:E,viewTitle:R,workspaceId:A})=>{const U=A??k.activeWorkspaceId,O=d??v.activeProjectId;await e({workspaceId:U,projectId:O,tableId:E,viewId:R,query:s.value.query})},_=async d=>{if(!d.project_id)return;const E=v.projects,R=k.activeWorkspaceId;let A=E.get(d.project_id);if(!A&&(await v.loadProject(d.project_id),await b(d.project_id),A=E.get(d.project_id),!A))throw new Error("Project not found");const{getMeta:U}=Ye();await U(d.id);let O=R;["nc","base"].includes(s.value.params.typeOrId)&&(O=s.value.params.typeOrId);let z=A.id;["base"].includes(s.value.params.typeOrId)&&(z=s.value.params.projectId),e({workspaceId:O,projectId:z,tableId:d==null?void 0:d.id})},j=async(d,E)=>{if(d)try{await n.dbTable.update(d.id,{project_id:d.project_id,table_name:d.table_name,title:d.title}),await b(d.project_id,!0),E||r({redo:{fn:A=>{d.title=A,j(d,!0)},args:[d.title]},undo:{fn:A=>{d.title=A,j(d,!0)},args:[d.title]},scope:i({model:d})});const R=await n.dbTable.read(d.id);u.value.set(d.project_id,u.value.get(d.project_id).map(A=>A.id===d.id?{...A,...R}:A)),l(),t("a:table:rename")}catch(R){$.error(await ae(R))}};return{projectTables:u,loadProjectTables:b,addTable:h,activeTable:c,activeTables:I,openTable:_,updateTable:j,activeTableId:w,navigateToTable:S}}),He=se("projectStore",()=>{const{$e:m}=ee(),{api:e,isLoading:a}=fe(),t=ne(),n=t.currentRoute,{setTheme:r,theme:i}=ke(),{loadRoles:l}=Ie(),{refreshCommandPalette:y}=be(),s=N(),u=x(()=>s.value||n.value.params.projectId),v=ye(),k=Re(),w=N(),I=x(()=>v.projects.get(u.value)),c=x(()=>v.projects.get(u.value)||w.value||{}),b=x(()=>k.projectTables.get(u.value)||[]),h=xe(),S=x(()=>{var f;return((f=c.value)==null?void 0:f.bases)||[]}),_=N(),j=N({}),d=x(()=>n.value.params.typeOrId),E=x(()=>{const f={showNullAndEmptyInFilter:!1};try{return(pe(c.value.meta)?JSON.parse(c.value.meta):c.value.meta)??f}catch{return f}}),R=x(()=>{const f={};for(const L of S.value)L.id&&(f[L.id]=we.create({client:L.type}));return f});function A(f){var L;return((L=S.value.find(G=>G.id===f))==null?void 0:L.type)||ce.MYSQL}function U(f){return["mysql",ce.MYSQL].includes(A(f))}function O(f){return A(f)===ce.SQLITE}function z(f){return A(f)==="mssql"}function J(f){return A(f)==="pg"}function X(f){const L=S.value.find(G=>G.id===f);return(L==null?void 0:L.is_meta)||(L==null?void 0:L.is_local)||!1}const K=x(()=>d.value==="base"),o=x(()=>d.value==="ERD");async function p(f){(!_.value||f)&&(_.value=await e.project.metaGet(c.value.id,{}))}async function T(){c.value.id&&await k.loadProjectTables(c.value.id,!0)}async function P(f=!0,L){var G;if(L&&(s.value=L),d.value==="base")try{const q=await e.public.sharedBaseGet(n.value.params.projectId);s.value=q.project_id,w.value=await e.project.read(q.project_id)}catch(q){if(((G=q==null?void 0:q.response)==null?void 0:G.status)===404)return t.push("/error/404");throw q}else if(u.value)await v.loadProject(u.value);else{console.warn("Project id not found");return}return K.value?await l(c.value.id||u.value,{isSharedBase:K.value,sharedBaseId:n.value.params.projectId}):o.value?await l(c.value.id||u.value,{isSharedErd:o.value,sharedErdId:n.value.params.erdUuid}):await l(c.value.id||u.value),await T(),h.trigger(c.value)}async function M(f){d.value!=="base"&&(f.meta&&typeof f.meta=="string"?await e.project.update(u.value,f):await e.project.update(u.value,{...f,meta:Be(f.meta)}),y())}async function H(f){const L={primaryColor:i.value.primaryColor,accentColor:i.value.accentColor,...f};await M({color:L.primaryColor,meta:{...E.value,theme:L}}),m("c:themes:change")}async function F(){return await e.project.hasEmptyOrNullFilters(u.value)}const C=()=>{_.value=void 0,r()},B=f=>{w.value=f},Y=({id:f,type:L,isSharedBase:G})=>{if(G){const q=n.value.params.typeOrId,g=n.value.params.projectId;return`/${q}/${g}`}return`/nc/${f}`};re(()=>n.value.params.projectType,f=>{f||C()},{immediate:!0}),re(()=>{var f;return(f=I.value)==null?void 0:f.id},()=>{I.value&&(I.value.isExpanded||(I.value.isExpanded=!0))});const Z=async({page:f})=>{await t.push({name:"index-typeOrId-projectId-index-index",params:{typeOrId:n.value.params.typeOrId,projectId:n.value.params.projectId},query:{page:f}})};return{project:c,bases:S,tables:b,loadRoles:l,loadProject:P,updateProject:M,loadTables:T,isMysql:U,isMssql:z,isPg:J,isSqlite:O,sqlUis:R,isSharedBase:K,isSharedErd:o,loadProjectMetaInfo:p,projectMetaInfo:_,projectMeta:E,saveTheme:H,projectLoadedHook:h.on,reset:C,isLoading:a,lastOpenedViewMap:j,isXcdbBase:X,hasEmptyOrNullFilters:F,setProject:B,projectUrl:Y,getBaseType:A,navigateToProjectPage:Z}});function Ye(){const{$api:m}=ee(),{tables:e}=Me(He()),a=Te("metas",()=>({})),t=x(()=>{const s=Object.entries(a.value).filter(([u,v])=>u===v.id);return Object.fromEntries(s)}),n=Te("metas-loading-state",()=>({}));return{getMeta:async(s,u=!1,v=!1)=>{var k;if(!s)return null;for(;!u&&n.value[s];)if(await new Promise(w=>{let I;const c=setTimeout(()=>{I==null||I(),clearTimeout(c),w(null)},1e4);I=re(()=>!!n.value[s],b=>{b||(clearTimeout(c),I==null||I(),w(null))},{immediate:!0})}),a.value[s])return a.value[s];if(v)return null;n.value[s]=!0;try{if(!u&&a.value[s])return a.value[s];const w=(k=e.value.find(c=>c.id===s)||e.value.find(c=>c.title===s))==null?void 0:k.id;if(!w)return console.warn(`Table '${s}' is not found in the table list`),null;const I=await m.dbTable.read(w);return a.value={...a.value,[I.id]:I,[I.title]:I},I}catch(w){$.error(await ae(w))}finally{delete n.value[s]}return null},clearAllMeta:()=>{a.value={}},metas:a,metasWithIdAsKey:t,removeMeta:s=>{const u=a.value[s];u&&(delete a.value[u.id],delete a.value[u.title])},setMeta:async s=>{a.value={...a.value,[s.id]:s,[s.title]:s}}}}export{Pe as M,Ue as S,He as a,Re as b,ye as c,be as d,Ee as e,ze as f,We as p,Ve as r,Ye as u};

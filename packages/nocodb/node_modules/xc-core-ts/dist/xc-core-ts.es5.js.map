{"version":3,"file":"xc-core-ts.es5.js","sources":["../src/lib/ApiInterface.ts","../node_modules/auto-bind/index.js","../src/lib/BaseComponent.ts","../src/lib/BaseService.ts","../src/lib/BaseRouter.ts","../src/lib/BaseResolver.ts","../src/lib/BaseType.ts","../src/lib/CoreRest.ts","../node_modules/dataloader/index.js","../src/lib/Loader.ts","../src/lib/BaseMiddleware.ts","../src/lib/BaseMiddlewareGql.ts"],"sourcesContent":["export interface FindClauseProps {\n  limit?: string | number\n  offset?: string | number\n  sort?: string\n  where?: string\n}\n\nexport class FindClause {\n  public static make(option?: FindClauseProps): any {\n    return {\n      limit: option.limit ?? 10,\n      sort: option.sort ?? '',\n      offset: option.offset ?? 0,\n      xwhere: option.where ?? ''\n    }\n  }\n}\n","'use strict';\n\n// Gets all non-builtin properties up the prototype chain\nconst getAllProperties = object => {\n\tconst properties = new Set();\n\n\tdo {\n\t\tfor (const key of Reflect.ownKeys(object)) {\n\t\t\tproperties.add([object, key]);\n\t\t}\n\t} while ((object = Reflect.getPrototypeOf(object)) && object !== Object.prototype);\n\n\treturn properties;\n};\n\nmodule.exports = (self, {include, exclude} = {}) => {\n\tconst filter = key => {\n\t\tconst match = pattern => typeof pattern === 'string' ? key === pattern : pattern.test(key);\n\n\t\tif (include) {\n\t\t\treturn include.some(match);\n\t\t}\n\n\t\tif (exclude) {\n\t\t\treturn !exclude.some(match);\n\t\t}\n\n\t\treturn true;\n\t};\n\n\tfor (const [object, key] of getAllProperties(self.constructor.prototype)) {\n\t\tif (key === 'constructor' || !filter(key)) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst descriptor = Reflect.getOwnPropertyDescriptor(object, key);\n\t\tif (descriptor && typeof descriptor.value === 'function') {\n\t\t\tself[key] = self[key].bind(self);\n\t\t}\n\t}\n\n\treturn self;\n};\n","import autoBind from 'auto-bind'\n\nexport abstract class BaseComponent<T> {\n  // public abstract  priority:number;\n\n  protected app: T\n\n  constructor(app: T) {\n    this.app = app\n    autoBind(this)\n  }\n\n  public abstract async init(): Promise<void>\n}\n","import autoBind from 'auto-bind'\n\n/**\n * BaseClass for Router files in REST APIs\n *\n * @class\n * @classdesc BaseClass for Router files in REST APIs\n */\nexport abstract class BaseService {\n  constructor() {\n    autoBind(this)\n  }\n}\n","/* tslint:disable:typedef */\n\nimport autoBind from 'auto-bind'\n// import {Handler, any} from 'express';\n\n/**\n * BaseClass for Router files in REST APIs\n *\n * @class\n * @classdesc BaseClass for Router files in REST APIs\n */\nexport abstract class BaseRouter {\n  public static errJson(res: any, code: number = 200, message: string): any {\n    return res.status(code).json({ message })\n  }\n\n  constructor() {\n    autoBind(this)\n  }\n\n  /**\n   * @param {Object} app - app context\n   */\n  // constructor(app: any) {\n  //   this.app = app;\n  // }\n\n  public mapRoutes(): void {\n    throw new Error(`${this.constructor.name}.mapRoutes is not implemented`)\n  }\n\n  public catchErr(handler): any {\n    return (req, res, next) => {\n      Promise.resolve(handler.call(this, req, res, next)).catch(err => {\n        res.status(500).json({ msg: err.message })\n\n        // next(err);\n      })\n    }\n  }\n\n  public errOk<K>(res: any, dto?: K): any {\n    if (dto !== null || dto !== undefined) {\n      res.type('application/json')\n      return res.status(200).json(dto)\n    } else {\n      return res.sendStatus(200)\n    }\n  }\n\n  public created(res: any) {\n    return res.sendStatus(201)\n  }\n\n  public errBadRequest(res: any, message?: string) {\n    return BaseRouter.errJson(res, 400, message ? message : 'Bad Request')\n  }\n\n  public errUnauthorized(res: any, message?: string) {\n    return BaseRouter.errJson(res, 401, message ? message : 'Unauthorized')\n  }\n\n  public errPaymentRequired(res: any, message?: string) {\n    return BaseRouter.errJson(res, 402, message ? message : 'Payment required')\n  }\n\n  public errForbidden(res: any, message?: string) {\n    return BaseRouter.errJson(res, 403, message ? message : 'Forbidden')\n  }\n\n  public errNotFound(res: any, message?: string) {\n    return BaseRouter.errJson(res, 404, message ? message : 'Not found')\n  }\n\n  public errConflict(res: any, message?: string) {\n    return BaseRouter.errJson(res, 409, message ? message : 'Conflict')\n  }\n\n  public errTooMany(res: any, message?: string) {\n    return BaseRouter.errJson(res, 429, message ? message : 'Too many requests')\n  }\n\n  public errNotImplemented(res: any, message?: string) {\n    return BaseRouter.errJson(res, 501, message ? message : 'Not Implemented')\n  }\n\n  public todo(res: any) {\n    return BaseRouter.errJson(res, 400, 'TODO')\n  }\n\n  public errFailed(res: any, error: Error | string) {\n    return res.status(500).json({\n      message: error.toString()\n    })\n  }\n}\n","/* tslint:disable:typedef */\n\nimport autoBind from 'auto-bind'\n\n/**\n * BaseClass for Router files in REST APIs\n *\n * @class\n * @classdesc BaseClass for Router files in REST APIs\n */\nexport abstract class BaseResolver {\n  //\n  // public static errJson(\n  //   res: Response, code: number = 200, message: string\n  // ): any {\n  //   return res.status(code).json({message})\n  // }\n\n  constructor() {\n    autoBind(this)\n  }\n\n  /**\n   * @param {Object} app - app context\n   */\n  // constructor(app: any) {\n  //   this.app = app;\n  // }\n\n  public resolvers(): any {\n    throw new Error(`${this.constructor.name}.mapRoutes is not implemented`)\n  }\n\n  protected applyMiddlewares(\n    handlers: Array<(...args) => any> = [],\n    resolvers: { [key: string]: (...args) => any } = {},\n    postHandlers: Array<(...args) => any> = []\n  ) {\n    if (!handlers) {\n      return resolvers\n    }\n    for (const [name, resolver] of Object.entries(resolvers)) {\n      resolvers[name] = async (...args) => {\n        try {\n          for (const handler of handlers) {\n            await handler(...args)\n          }\n          const result = await resolver(...args)\n          if (postHandlers) {\n            for (const handler of postHandlers) {\n              await handler(result, ...args)\n            }\n          }\n          return result\n        } catch (e) {\n          throw e\n        }\n      }\n    }\n    return resolvers\n  }\n}\n","import autoBind from 'auto-bind'\n\nexport interface LoadersType {\n  [key: string]: { load: (...args) => any }\n}\n\nexport class BaseType {\n  public static applyMiddlewareForLoader(handlers = [], loader, postHandlers = []): any | never {\n    if (!handlers) {\n      return loader\n    }\n    return async args => {\n      try {\n        for (const handler of handlers) {\n          await handler(\n            args[0][1],\n            args[0][2],\n            args[0][3],\n            args.map(([id]) => id)\n          )\n        }\n        const result = await loader(args.map(([id]) => id))\n        if (postHandlers) {\n          for (const handler of postHandlers) {\n            await handler(result, ...args[0])\n          }\n        }\n        return result\n      } catch (e) {\n        throw e\n      }\n    }\n  }\n  protected static $loaders: LoadersType\n\n  constructor() {\n    autoBind(this)\n  }\n\n  public applyMiddlewares(\n    handlers = [],\n    loaders: { [key: string]: (...args) => any } = {},\n    postHandlers = []\n  ): {\n    [key: string]: any\n  } {\n    // return if there is no middlewares\n    if (!handlers) {\n      return loaders\n    }\n\n    // iterate over loaders\n    for (const [name, loader] of Object.entries(loaders)) {\n      // wrap the loader function\n      loaders[name] = async (...args) => {\n        try {\n          // execute handlers\n          for (const handler of handlers) {\n            await handler(...args)\n          }\n          // call loader function\n          const result = await loader(args[0])\n\n          // post handlers\n          if (postHandlers) {\n            for (const handler of postHandlers) {\n              await handler(result, ...args)\n            }\n          }\n          // return the result\n          return result\n        } catch (e) {\n          throw e\n        }\n      }\n    }\n    return loaders\n  }\n}\n","// import {Handler} from \"express\";\n\nexport interface Route {\n  path: string\n  type: RouteType | string\n  handler: Array<any | string>\n  acl: {\n    [key: string]: boolean\n  }\n  disabled?: boolean\n}\n\nexport enum RouteType {\n  GET = 'get',\n  POST = 'post',\n  PUT = 'put',\n  PATCH = 'patch',\n  DELETE = 'delete',\n  HEAD = 'head',\n  OPTIONS = 'options'\n}\n","\"use strict\";\n\n/**\n * Copyright (c) 2019-present, GraphQL Foundation\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\n// A Function, which when given an Array of keys, returns a Promise of an Array\n// of values or Errors.\n// Optionally turn off batching or caching or provide a cache key function or a\n// custom cache instance.\n// If a custom cache is provided, it must be of this type (a subset of ES6 Map).\n\n/**\n * A `DataLoader` creates a public API for loading data from a particular\n * data back-end with unique keys such as the `id` column of a SQL table or\n * document name in a MongoDB database, given a batch loading function.\n *\n * Each `DataLoader` instance contains a unique memoized cache. Use caution when\n * used in long-lived applications or those which serve many users with\n * different access permissions and consider creating a new instance per\n * web request.\n */\nvar DataLoader =\n/*#__PURE__*/\nfunction () {\n  function DataLoader(batchLoadFn, options) {\n    if (typeof batchLoadFn !== 'function') {\n      throw new TypeError('DataLoader must be constructed with a function which accepts ' + (\"Array<key> and returns Promise<Array<value>>, but got: \" + batchLoadFn + \".\"));\n    }\n\n    this._batchLoadFn = batchLoadFn;\n    this._maxBatchSize = getValidMaxBatchSize(options);\n    this._batchScheduleFn = getValidBatchScheduleFn(options);\n    this._cacheKeyFn = getValidCacheKeyFn(options);\n    this._cacheMap = getValidCacheMap(options);\n    this._batch = null;\n  } // Private\n\n\n  var _proto = DataLoader.prototype;\n\n  /**\n   * Loads a key, returning a `Promise` for the value represented by that key.\n   */\n  _proto.load = function load(key) {\n    if (key === null || key === undefined) {\n      throw new TypeError('The loader.load() function must be called with a value,' + (\"but got: \" + String(key) + \".\"));\n    }\n\n    var batch = getCurrentBatch(this);\n    var cacheMap = this._cacheMap;\n\n    var cacheKey = this._cacheKeyFn(key); // If caching and there is a cache-hit, return cached Promise.\n\n\n    if (cacheMap) {\n      var cachedPromise = cacheMap.get(cacheKey);\n\n      if (cachedPromise) {\n        var cacheHits = batch.cacheHits || (batch.cacheHits = []);\n        return new Promise(function (resolve) {\n          cacheHits.push(function () {\n            return resolve(cachedPromise);\n          });\n        });\n      }\n    } // Otherwise, produce a new Promise for this key, and enqueue it to be\n    // dispatched along with the current batch.\n\n\n    batch.keys.push(key);\n    var promise = new Promise(function (resolve, reject) {\n      batch.callbacks.push({\n        resolve: resolve,\n        reject: reject\n      });\n    }); // If caching, cache this promise.\n\n    if (cacheMap) {\n      cacheMap.set(cacheKey, promise);\n    }\n\n    return promise;\n  }\n  /**\n   * Loads multiple keys, promising an array of values:\n   *\n   *     var [ a, b ] = await myLoader.loadMany([ 'a', 'b' ]);\n   *\n   * This is similar to the more verbose:\n   *\n   *     var [ a, b ] = await Promise.all([\n   *       myLoader.load('a'),\n   *       myLoader.load('b')\n   *     ]);\n   *\n   * However it is different in the case where any load fails. Where\n   * Promise.all() would reject, loadMany() always resolves, however each result\n   * is either a value or an Error instance.\n   *\n   *     var [ a, b, c ] = await myLoader.loadMany([ 'a', 'b', 'badkey' ]);\n   *     // c instanceof Error\n   *\n   */\n  ;\n\n  _proto.loadMany = function loadMany(keys) {\n    if (!isArrayLike(keys)) {\n      throw new TypeError('The loader.loadMany() function must be called with Array<key> ' + (\"but got: \" + keys + \".\"));\n    } // Support ArrayLike by using only minimal property access\n\n\n    var loadPromises = [];\n\n    for (var i = 0; i < keys.length; i++) {\n      loadPromises.push(this.load(keys[i])[\"catch\"](function (error) {\n        return error;\n      }));\n    }\n\n    return Promise.all(loadPromises);\n  }\n  /**\n   * Clears the value at `key` from the cache, if it exists. Returns itself for\n   * method chaining.\n   */\n  ;\n\n  _proto.clear = function clear(key) {\n    var cacheMap = this._cacheMap;\n\n    if (cacheMap) {\n      var cacheKey = this._cacheKeyFn(key);\n\n      cacheMap[\"delete\"](cacheKey);\n    }\n\n    return this;\n  }\n  /**\n   * Clears the entire cache. To be used when some event results in unknown\n   * invalidations across this particular `DataLoader`. Returns itself for\n   * method chaining.\n   */\n  ;\n\n  _proto.clearAll = function clearAll() {\n    var cacheMap = this._cacheMap;\n\n    if (cacheMap) {\n      cacheMap.clear();\n    }\n\n    return this;\n  }\n  /**\n   * Adds the provided key and value to the cache. If the key already\n   * exists, no change is made. Returns itself for method chaining.\n   *\n   * To prime the cache with an error at a key, provide an Error instance.\n   */\n  ;\n\n  _proto.prime = function prime(key, value) {\n    var cacheMap = this._cacheMap;\n\n    if (cacheMap) {\n      var cacheKey = this._cacheKeyFn(key); // Only add the key if it does not already exist.\n\n\n      if (cacheMap.get(cacheKey) === undefined) {\n        // Cache a rejected promise if the value is an Error, in order to match\n        // the behavior of load(key).\n        var promise;\n\n        if (value instanceof Error) {\n          promise = Promise.reject(value); // Since this is a case where an Error is intentionally being primed\n          // for a given key, we want to disable unhandled promise rejection.\n\n          promise[\"catch\"](function () {});\n        } else {\n          promise = Promise.resolve(value);\n        }\n\n        cacheMap.set(cacheKey, promise);\n      }\n    }\n\n    return this;\n  };\n\n  return DataLoader;\n}(); // Private: Enqueue a Job to be executed after all \"PromiseJobs\" Jobs.\n//\n// ES6 JavaScript uses the concepts Job and JobQueue to schedule work to occur\n// after the current execution context has completed:\n// http://www.ecma-international.org/ecma-262/6.0/#sec-jobs-and-job-queues\n//\n// Node.js uses the `process.nextTick` mechanism to implement the concept of a\n// Job, maintaining a global FIFO JobQueue for all Jobs, which is flushed after\n// the current call stack ends.\n//\n// When calling `then` on a Promise, it enqueues a Job on a specific\n// \"PromiseJobs\" JobQueue which is flushed in Node as a single Job on the\n// global JobQueue.\n//\n// DataLoader batches all loads which occur in a single frame of execution, but\n// should include in the batch all loads which occur during the flushing of the\n// \"PromiseJobs\" JobQueue after that same execution frame.\n//\n// In order to avoid the DataLoader dispatch Job occuring before \"PromiseJobs\",\n// A Promise Job is created with the sole purpose of enqueuing a global Job,\n// ensuring that it always occurs after \"PromiseJobs\" ends.\n//\n// Node.js's job queue is unique. Browsers do not have an equivalent mechanism\n// for enqueuing a job to be performed after promise microtasks and before the\n// next macrotask. For browser environments, a macrotask is used (via\n// setImmediate or setTimeout) at a potential performance penalty.\n\n\nvar enqueuePostPromiseJob = typeof process === 'object' && typeof process.nextTick === 'function' ? function (fn) {\n  if (!resolvedPromise) {\n    resolvedPromise = Promise.resolve();\n  }\n\n  resolvedPromise.then(function () {\n    return process.nextTick(fn);\n  });\n} : setImmediate || setTimeout; // Private: cached resolved Promise instance\n\nvar resolvedPromise; // Private: Describes a batch of requests\n\n// Private: Either returns the current batch, or creates and schedules a\n// dispatch of a new batch for the given loader.\nfunction getCurrentBatch(loader) {\n  // If there is an existing batch which has not yet dispatched and is within\n  // the limit of the batch size, then return it.\n  var existingBatch = loader._batch;\n\n  if (existingBatch !== null && !existingBatch.hasDispatched && existingBatch.keys.length < loader._maxBatchSize && (!existingBatch.cacheHits || existingBatch.cacheHits.length < loader._maxBatchSize)) {\n    return existingBatch;\n  } // Otherwise, create a new batch for this loader.\n\n\n  var newBatch = {\n    hasDispatched: false,\n    keys: [],\n    callbacks: []\n  }; // Store it on the loader so it may be reused.\n\n  loader._batch = newBatch; // Then schedule a task to dispatch this batch of requests.\n\n  loader._batchScheduleFn(function () {\n    return dispatchBatch(loader, newBatch);\n  });\n\n  return newBatch;\n}\n\nfunction dispatchBatch(loader, batch) {\n  // Mark this batch as having been dispatched.\n  batch.hasDispatched = true; // If there's nothing to load, resolve any cache hits and return early.\n\n  if (batch.keys.length === 0) {\n    resolveCacheHits(batch);\n    return;\n  } // Call the provided batchLoadFn for this loader with the batch's keys and\n  // with the loader as the `this` context.\n\n\n  var batchPromise = loader._batchLoadFn(batch.keys); // Assert the expected response from batchLoadFn\n\n\n  if (!batchPromise || typeof batchPromise.then !== 'function') {\n    return failedDispatch(loader, batch, new TypeError('DataLoader must be constructed with a function which accepts ' + 'Array<key> and returns Promise<Array<value>>, but the function did ' + (\"not return a Promise: \" + String(batchPromise) + \".\")));\n  } // Await the resolution of the call to batchLoadFn.\n\n\n  batchPromise.then(function (values) {\n    // Assert the expected resolution from batchLoadFn.\n    if (!isArrayLike(values)) {\n      throw new TypeError('DataLoader must be constructed with a function which accepts ' + 'Array<key> and returns Promise<Array<value>>, but the function did ' + (\"not return a Promise of an Array: \" + String(values) + \".\"));\n    }\n\n    if (values.length !== batch.keys.length) {\n      throw new TypeError('DataLoader must be constructed with a function which accepts ' + 'Array<key> and returns Promise<Array<value>>, but the function did ' + 'not return a Promise of an Array of the same length as the Array ' + 'of keys.' + (\"\\n\\nKeys:\\n\" + String(batch.keys)) + (\"\\n\\nValues:\\n\" + String(values)));\n    } // Resolve all cache hits in the same micro-task as freshly loaded values.\n\n\n    resolveCacheHits(batch); // Step through values, resolving or rejecting each Promise in the batch.\n\n    for (var i = 0; i < batch.callbacks.length; i++) {\n      var value = values[i];\n\n      if (value instanceof Error) {\n        batch.callbacks[i].reject(value);\n      } else {\n        batch.callbacks[i].resolve(value);\n      }\n    }\n  })[\"catch\"](function (error) {\n    return failedDispatch(loader, batch, error);\n  });\n} // Private: do not cache individual loads if the entire batch dispatch fails,\n// but still reject each request so they do not hang.\n\n\nfunction failedDispatch(loader, batch, error) {\n  // Cache hits are resolved, even though the batch failed.\n  resolveCacheHits(batch);\n\n  for (var i = 0; i < batch.keys.length; i++) {\n    loader.clear(batch.keys[i]);\n    batch.callbacks[i].reject(error);\n  }\n} // Private: Resolves the Promises for any cache hits in this batch.\n\n\nfunction resolveCacheHits(batch) {\n  if (batch.cacheHits) {\n    for (var i = 0; i < batch.cacheHits.length; i++) {\n      batch.cacheHits[i]();\n    }\n  }\n} // Private: given the DataLoader's options, produce a valid max batch size.\n\n\nfunction getValidMaxBatchSize(options) {\n  var shouldBatch = !options || options.batch !== false;\n\n  if (!shouldBatch) {\n    return 1;\n  }\n\n  var maxBatchSize = options && options.maxBatchSize;\n\n  if (maxBatchSize === undefined) {\n    return Infinity;\n  }\n\n  if (typeof maxBatchSize !== 'number' || maxBatchSize < 1) {\n    throw new TypeError(\"maxBatchSize must be a positive number: \" + maxBatchSize);\n  }\n\n  return maxBatchSize;\n} // Private\n\n\nfunction getValidBatchScheduleFn(options) {\n  var batchScheduleFn = options && options.batchScheduleFn;\n\n  if (batchScheduleFn === undefined) {\n    return enqueuePostPromiseJob;\n  }\n\n  if (typeof batchScheduleFn !== 'function') {\n    throw new TypeError(\"batchScheduleFn must be a function: \" + batchScheduleFn);\n  }\n\n  return batchScheduleFn;\n} // Private: given the DataLoader's options, produce a cache key function.\n\n\nfunction getValidCacheKeyFn(options) {\n  var cacheKeyFn = options && options.cacheKeyFn;\n\n  if (cacheKeyFn === undefined) {\n    return function (key) {\n      return key;\n    };\n  }\n\n  if (typeof cacheKeyFn !== 'function') {\n    throw new TypeError(\"cacheKeyFn must be a function: \" + cacheKeyFn);\n  }\n\n  return cacheKeyFn;\n} // Private: given the DataLoader's options, produce a CacheMap to be used.\n\n\nfunction getValidCacheMap(options) {\n  var shouldCache = !options || options.cache !== false;\n\n  if (!shouldCache) {\n    return null;\n  }\n\n  var cacheMap = options && options.cacheMap;\n\n  if (cacheMap === undefined) {\n    return new Map();\n  }\n\n  if (cacheMap !== null) {\n    var cacheFunctions = ['get', 'set', 'delete', 'clear'];\n    var missingFunctions = cacheFunctions.filter(function (fnName) {\n      return cacheMap && typeof cacheMap[fnName] !== 'function';\n    });\n\n    if (missingFunctions.length !== 0) {\n      throw new TypeError('Custom cacheMap missing methods: ' + missingFunctions.join(', '));\n    }\n  }\n\n  return cacheMap;\n} // Private\n\n\nfunction isArrayLike(x) {\n  return typeof x === 'object' && x !== null && typeof x.length === 'number' && (x.length === 0 || x.length > 0 && Object.prototype.hasOwnProperty.call(x, x.length - 1));\n}\n\nmodule.exports = DataLoader;","import DataLoader from 'dataloader'\n\nexport class Loader {\n  public static get(\n    func: (...args) => any,\n    options: any = {\n      cacheKeyFn: ([id]) => id\n    }\n  ): DataLoader<any, any> {\n    const loader = new DataLoader(ids => {\n      return func(ids)\n    }, options)\n    loader.load = loader.load.bind(loader)\n    return loader\n  }\n}\n","import autoBind from 'auto-bind'\n\nexport abstract class BaseMiddleware {\n  // @ts-ignore\n  protected app: any\n\n  constructor(app: any) {\n    autoBind(this)\n    this.app = app\n  }\n\n  public abstract default(args: any): void\n}\n","import autoBind from 'auto-bind'\n\nexport abstract class BaseMiddlewareGql {\n  // @ts-ignore\n  protected app: any\n\n  constructor(app: any) {\n    autoBind(this)\n    this.app = app\n  }\n\n  public abstract default(args: any, ctx: { req: any; res: any; next: any }, info: any): void\n}\n"],"names":["DataLoader"],"mappings":"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"}
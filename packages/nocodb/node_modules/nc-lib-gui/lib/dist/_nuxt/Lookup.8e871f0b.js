import{h as M,$ as k,r as _,i as f,aq as z,cd as p,f4 as O,Z as h,o,c as r,a as C,E as e,aj as v,f3 as R,cp as A,C as w,b as I,I as P,W as x,t as L,Q as j,R as N}from"./entry.51f4e399.js";import{C as U,M as S,j as $,y as G,t as q}from"./index.5263eb1d.js";import{o as V}from"./cell.1732684e.js";import{u as Q}from"./useMetas.ba7abae7.js";import{u as Z}from"./useShowNotEditableWarning.9179ba64.js";import"./index.82c42c24.js";const H=j(()=>N(()=>import("./VirtualCell.4b63c3ca.js"),["./VirtualCell.4b63c3ca.js","./entry.51f4e399.js","./entry.0f786d51.css","./index.5263eb1d.js","./virtualCell.4dce1393.js"],import.meta.url).then(d=>d.default||d)),J=j(()=>N(()=>import("./Cell.4f83cd62.js"),["./Cell.4f83cd62.js","./entry.51f4e399.js","./entry.0f786d51.css","./index.5263eb1d.js","./cell.1732684e.js","./useMetas.ba7abae7.js","./useSmartsheetRowStore.aafbb4bb.js","./deepCompare.d32ec333.js","./dataUtils.edecace3.js","./virtualCell.4dce1393.js","./index.b9981e09.js","./_plugin-vue_export-helper.c27b6911.js","./Cell.69966cf7.css"],import.meta.url).then(d=>d.default||d)),K={class:"h-full flex gap-1 overflow-x-auto p-1"},X={key:0},Y={key:0},ee={key:0,class:"text-left text-wrap mt-2 text-[#e65100] text-xs"},te={key:1,class:"text-left text-wrap mt-2 text-[#e65100] text-xs"},ue=M({__name:"Lookup",setup(d){const{metas:T,getMeta:W}=Q(),b=k(U,_()),B=k(S,_()),c=k($,_()),m=f(()=>{var t,a;return(a=(t=B.value)==null?void 0:t.columns)==null?void 0:a.find(s=>{var u,n;return s.id===((n=(u=b.value)==null?void 0:u.colOptions)==null?void 0:n.fk_relation_column_id)})});z(m,async t=>{t&&t.colOptions&&await W(t.colOptions.fk_related_model_id)},{immediate:!0});const g=f(()=>{var t;if(m.value&&((t=m.value)!=null&&t.colOptions))return T.value[m.value.colOptions.fk_related_model_id]}),l=f(()=>{var t,a;return(a=(t=g.value)==null?void 0:t.columns)==null?void 0:a.find(s=>{var u,n;return s.id===((n=(u=b.value)==null?void 0:u.colOptions)==null?void 0:n.fk_lookup_column_id)})}),i=f(()=>{var t,a,s;return c.value?((t=l.value)==null?void 0:t.uidt)===p.Attachment&&((s=(a=m.value)==null?void 0:a.colOptions)==null?void 0:s.type)===O.BELONGS_TO?[c.value]:Array.isArray(c.value)?c.value:[c.value]:[]});h(S,g),h(G,_(!0)),h(q,_(!0));const{showEditNonEditableFieldWarning:D,showClearNonEditableFieldWarning:F,activateShowEditNonEditableFieldWarning:E}=Z();return(t,a)=>{const s=H,u=J;return o(),r("div",{class:"h-full",onDblclick:a[0]||(a[0]=(...n)=>e(E)&&e(E)(...n))},[C("div",K,[e(l)?(o(),r(v,{key:0},[e(R)(e(l))?(o(),r("div",X,[e(l).uidt===e(p).LinkToAnotherRecord&&e(l).colOptions.type===e(O).BELONGS_TO?(o(!0),r(v,{key:0},A(e(i),(n,y)=>(o(),w(s,{key:y,"edit-enabled":!1,"model-value":n,column:e(l),"read-only":!0},null,8,["model-value","column"]))),128)):(o(),w(s,{key:1,"edit-enabled":!1,"read-only":!0,"model-value":e(i),column:e(l)},null,8,["model-value","column"]))])):(o(),r(v,{key:1},[e(V)(e(l))&&e(i)[0]&&!Array.isArray(e(i)[0])&&typeof e(i)[0]=="object"?(o(),r("div",Y,[I(u,{"model-value":e(i),column:e(l),"edit-enabled":!1,"read-only":!0},null,8,["model-value","column"])])):(o(!0),r(v,{key:1},A(e(i),(n,y)=>(o(),r("div",{key:y,class:P(["min-w-max",{"bg-gray-100 px-1 rounded-full flex-1":!e(V)(e(l)),"border-gray-200 rounded border-1":![e(p).Attachment,e(p).MultiSelect,e(p).SingleSelect].includes(e(l).uidt)}])},[I(u,{"model-value":n,column:e(l),"edit-enabled":!1,virtual:!0,"read-only":!0},null,8,["model-value","column"])],2))),128))],64))],64)):x("",!0)]),C("div",null,[e(D)?(o(),r("div",ee,L(t.$t("msg.info.computedFieldEditWarning")),1)):x("",!0),e(F)?(o(),r("div",te,L(t.$t("msg.info.computedFieldDeleteWarning")),1)):x("",!0)])],32)}}});export{ue as default};

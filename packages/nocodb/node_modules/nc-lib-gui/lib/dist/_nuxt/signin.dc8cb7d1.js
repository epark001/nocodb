import{h as G,S as L,z as W,A as z,r as B,B as D,k as q,o as n,C as U,w as r,Q as M,c9 as T,a as o,b as t,E as e,t as a,c as l,bP as O,W as d,d as m,aj as w,D as H,F as Q,R as J,y as K}from"./entry.51f4e399.js";import{_ as X}from"./nuxt-link.b37e7c69.js";import{e as Y}from"./useMetas.ba7abae7.js";import{u as Z}from"./index.3c3505ee.js";import{v as ee}from"./validation.6db726f3.js";import{_ as se,a as oe}from"./google-gmail.9d3ae743.js";import{_ as te}from"./warning.6435b508.js";import"./index.e760d172.js";import{I as ne}from"./Input.7cb175ff.js";import{F as ae}from"./index.de92142d.js";import{_ as ie}from"./FormItem.cda40628.js";import{_ as re}from"./Password.d493e47a.js";import"./SearchOutlined.dec109ce.js";import"./isPlainObject.ecf52d25.js";import"./_getPrototype.ec1165af.js";import"./TextArea.442a25cb.js";import"./antInputDirective.8ac36ea7.js";import"./FormItemContext.e001cd7c.js";import"./useSize.3b3f469f.js";import"./identity.dd5da9ba.js";import"./isSymbol.b53bd26f.js";import"./_flatRest.ff2d3d5c.js";import"./debounce.7d32c110.js";import"./toNumber.9dc54e53.js";import"./Col.88cfabc0.js";import"./responsiveObserve.501a6cf9.js";import"./toArray.06afb623.js";const le=M(()=>J(()=>import("./NocoIcon.f1ec0f0c.js"),["./NocoIcon.f1ec0f0c.js","./NocoIcon.vue.6ea1cae5.js","./entry.51f4e399.js","./entry.0f786d51.css","./256x256-trans.2cd7e00a.js","./256x256.3b34edca.js"],import.meta.url).then(g=>g.default||g)),me={"data-testid":"nc-form-signin",class:"md:bg-primary bg-opacity-5 signin h-full min-h-[600px] flex flex-col justify-center items-center nc-form-signin"},ce={class:"bg-white mt-[60px] relative flex flex-col justify-center gap-2 w-full max-w-[500px] mx-auto p-8 md:rounded-lg md:border-1 md:border-gray-200 md:shadow-xl"},pe={class:"prose-2xl font-bold self-center my-4"},de={key:0,class:"self-center mb-4 bg-red-500 text-white rounded-lg w-3/4 mx-auto p-1"},_e={class:"flex items-center gap-2 justify-center"},ue={class:"break-words"},ge={class:"hidden md:block text-right"},fe={class:"self-center flex flex-col flex-wrap gap-4 items-center mt-4 justify-center"},he={key:0,"data-testid":"nc-form-signin__submit",class:"scaling-btn bg-opacity-100",type:"submit"},be={class:"flex items-center gap-2"},ve=["href"],ye={class:"flex items-center gap-2"},we={key:2,class:"self-center flex flex-col flex-wrap gap-4 items-center mt-4 justify-center"},xe=["href"],ke={type:"button",class:"scaling-btn bg-opacity-100"},Ie={class:"flex items-center gap-2"},Ue={class:"text-end prose-sm"},$e={key:3,class:"md:hidden"},es=G({__name:"signin",setup(g){const{signIn:$,appInfo:i}=L(),{api:E,isLoading:A,error:_}=W({useGlobalInstance:!0}),{t:u}=z();Z("nc-left-sidebar",{hasSidebar:!1});const{clearWorkspaces:P}=Y(),x=B(),c=D({email:"",password:""}),k={email:[{required:!0,message:u("msg.error.signUpRules.emailReqd")},{validator:(s,p)=>new Promise((h,b)=>{if(ee(p))return h();b(new Error(u("msg.error.signUpRules.emailInvalid")))}),message:u("msg.error.signUpRules.emailInvalid")}],password:[{required:!0,message:u("msg.error.signUpRules.passwdRequired")}]};async function R(){x.value.validate()&&(f(),E.auth.signin(c).then(async({token:s})=>{$(s),await K("/")}))}function f(){_.value&&(_.value=null)}return q(async()=>{await P()}),(s,p)=>{const h=le,b=te,C=ne,I=ie,F=re,v=X,N=se,S=oe,V=ae,j=T;return n(),U(j,null,{default:r(()=>[o("div",me,[o("div",ce,[t(h,{class:"color-transition hover:ring hover:ring-accent hover:ring-opacity-100",animate:e(A)},null,8,["animate"]),o("h1",pe,a(s.$t("general.signIn")),1),t(V,{ref_key:"formValidator",ref:x,model:e(c),layout:"vertical","no-style":"",onFinish:R},{default:r(()=>[e(i).disableEmailAuth?d("",!0):(n(),l(w,{key:0},[t(O,{name:"layout"},{default:r(()=>[e(_)?(n(),l("div",de,[o("div",_e,[t(b),o("div",ue,a(e(_)),1)])])):d("",!0)]),_:1}),t(I,{label:s.$t("labels.email"),name:"email",rules:k.email},{default:r(()=>[t(C,{value:e(c).email,"onUpdate:value":p[0]||(p[0]=y=>e(c).email=y),"data-testid":"nc-form-signin__email",size:"large",placeholder:s.$t("msg.info.signUp.workEmail"),onFocus:f},null,8,["value","placeholder"])]),_:1},8,["label","rules"]),t(I,{label:s.$t("labels.password"),name:"password",rules:k.password},{default:r(()=>[t(F,{value:e(c).password,"onUpdate:value":p[1]||(p[1]=y=>e(c).password=y),"data-testid":"nc-form-signin__password",size:"large",class:"password",placeholder:s.$t("msg.info.signUp.enterPassword"),onFocus:f},null,8,["value","placeholder"])]),_:1},8,["label","rules"]),o("div",ge,[t(v,{class:"prose-sm",to:"/forgot-password"},{default:r(()=>[m(a(s.$t("msg.info.signUp.forgotPassword")),1)]),_:1})])],64)),o("div",fe,[e(i).disableEmailAuth?d("",!0):(n(),l("button",he,[o("span",be,[(n(),U(H(e(Q).signin))),m(" "+a(s.$t("general.signIn")),1)])])),e(i).googleAuthEnabled?(n(),l("a",{key:1,href:`${e(i).ncSiteUrl}/auth/google`,class:"scaling-btn bg-opacity-100 !after:bg-white !text-primary !no-underline"},[o("span",ye,[t(N),m(" "+a(s.$t("labels.signInWithProvider",{provider:"Google"})),1)])],8,ve)):d("",!0),e(i).oidcAuthEnabled?(n(),l("div",we,[o("a",{href:`${e(i).ncSiteUrl}/auth/oidc`,class:"!text-primary !no-underline"},[o("button",ke,[o("span",Ie,[t(S),e(i).disableEmailAuth?(n(),l(w,{key:1},[m(a(s.$t("general.signIn")),1)],64)):(n(),l(w,{key:0},[m(a(s.$t("labels.signUpWithProvider",{provider:e(i).oidcProviderName||"OpenID Connect"})),1)],64))])])],8,xe)])):d("",!0),o("div",Ue,[m(a(s.$t("msg.info.signUp.dontHaveAccount"))+" ",1),t(v,{to:"/signup"},{default:r(()=>[m(a(s.$t("general.signUp")),1)]),_:1})]),e(i).disableEmailAuth?d("",!0):(n(),l("div",$e,[t(v,{class:"prose-sm",to:"/forgot-password"},{default:r(()=>[m(a(s.$t("msg.info.signUp.forgotPassword")),1)]),_:1})]))])]),_:1},8,["model"])])])]),_:1})}}});export{es as default};

import{h as ce,r as le,i as oe,o as G,c as te,V as he,E as S,I as qe,C as ye,dt as rl,dQ as yi,$ as Et,Z as St,b3 as il,ac as al,k as nt,b as we,w as Ee,aj as Te,cp as jt,e9 as wn,al as de,ed as wi,dE as _i,aq as pe,e4 as ll,B as bi,dP as ul,ad as lr,a as se,t as Re,W as me,H as Ho,at as xi,ah as Gn,ap as yt,b5 as Le,l as $i,e1 as wt,m as fe,n as Ei,de as sl,d as cl,D as et,cA as dl,S as hl,T as fl,cI as pl,aV as Tt,F as ur,cb as gl,Q as vl,R as ml,eW as yl}from"./entry.13466615.js";import{_ as wl}from"./Overlay.f7b74b5f.js";import{C as _l}from"./index.2660048d.js";import{_ as bl}from"./_plugin-vue_export-helper.c27b6911.js";import{a as xl,u as $l}from"./useMetas.223da623.js";import{S as El}from"./index.f2e6837c.js";function tn(e){return yi()?(wn(e),!0):!1}function ae(e){return typeof e=="function"?e():S(e)}const Si=typeof window<"u",Sl=e=>typeof e<"u",ki=()=>{};function kl(e,t){function n(...o){return new Promise((r,i)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(r).catch(i)})}return n}const Ni=e=>e();function Nl(e=Ni){const t=le(!0);function n(){t.value=!1}function o(){t.value=!0}const r=(...i)=>{t.value&&e(...i)};return{isActive:wi(t),pause:n,resume:o,eventFilter:r}}function sr(e,t=!1,n="Timeout"){return new Promise((o,r)=>{setTimeout(t?()=>r(n):o,e)})}function Nn(...e){if(e.length!==1)return de(...e);const t=e[0];return typeof t=="function"?wi(_i(()=>({get:t,set:ki}))):le(t)}var Ml=Object.defineProperty,Cl=Object.defineProperties,Al=Object.getOwnPropertyDescriptors,cr=Object.getOwnPropertySymbols,Pl=Object.prototype.hasOwnProperty,Il=Object.prototype.propertyIsEnumerable,dr=(e,t,n)=>t in e?Ml(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tl=(e,t)=>{for(var n in t||(t={}))Pl.call(t,n)&&dr(e,n,t[n]);if(cr)for(var n of cr(t))Il.call(t,n)&&dr(e,n,t[n]);return e},Ol=(e,t)=>Cl(e,Al(t));function zl(e){if(!Ho(e))return xi(e);const t=Array.isArray(e.value)?new Array(e.value.length):{};for(const n in e.value)t[n]=_i(()=>({get(){return e.value[n]},set(o){if(Array.isArray(e.value)){const r=[...e.value];r[n]=o,e.value=r}else{const r=Ol(Tl({},e.value),{[n]:o});Object.setPrototypeOf(r,e.value),e.value=r}}}));return t}function _o(e,t=!1){function n(d,{flush:f="sync",deep:h=!1,timeout:p,throwOnTimeout:g}={}){let w=null;const x=[new Promise(E=>{w=pe(e,N=>{d(N)!==t&&(w==null||w(),E(N))},{flush:f,deep:h,immediate:!0})})];return p!=null&&x.push(sr(p,g).then(()=>ae(e)).finally(()=>w==null?void 0:w())),Promise.race(x)}function o(d,f){if(!Ho(d))return n(N=>N===d,f);const{flush:h="sync",deep:p=!1,timeout:g,throwOnTimeout:w}=f??{};let x=null;const E=[new Promise(N=>{x=pe([e,d],([v,M])=>{t!==(v===M)&&(x==null||x(),N(v))},{flush:h,deep:p,immediate:!0})})];return g!=null&&E.push(sr(g,w).then(()=>ae(e)).finally(()=>(x==null||x(),ae(e)))),Promise.race(E)}function r(d){return n(f=>!!f,d)}function i(d){return o(null,d)}function a(d){return o(void 0,d)}function l(d){return n(Number.isNaN,d)}function u(d,f){return n(h=>{const p=Array.from(h);return p.includes(d)||p.includes(ae(d))},f)}function s(d){return c(1,d)}function c(d=1,f){let h=-1;return n(()=>(h+=1,h>=d),f)}return Array.isArray(ae(e))?{toMatch:n,toContains:u,changed:s,changedTimes:c,get not(){return _o(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:r,toBeNull:i,toBeNaN:l,toBeUndefined:a,changed:s,changedTimes:c,get not(){return _o(e,!t)}}}function Me(e){return _o(e)}var hr=Object.getOwnPropertySymbols,Bl=Object.prototype.hasOwnProperty,Dl=Object.prototype.propertyIsEnumerable,Rl=(e,t)=>{var n={};for(var o in e)Bl.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&hr)for(var o of hr(e))t.indexOf(o)<0&&Dl.call(e,o)&&(n[o]=e[o]);return n};function Vl(e,t,n={}){const o=n,{eventFilter:r=Ni}=o,i=Rl(o,["eventFilter"]);return pe(e,kl(r,t),i)}var Hl=Object.defineProperty,Ll=Object.defineProperties,Fl=Object.getOwnPropertyDescriptors,Mn=Object.getOwnPropertySymbols,Mi=Object.prototype.hasOwnProperty,Ci=Object.prototype.propertyIsEnumerable,fr=(e,t,n)=>t in e?Hl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gl=(e,t)=>{for(var n in t||(t={}))Mi.call(t,n)&&fr(e,n,t[n]);if(Mn)for(var n of Mn(t))Ci.call(t,n)&&fr(e,n,t[n]);return e},Yl=(e,t)=>Ll(e,Fl(t)),jl=(e,t)=>{var n={};for(var o in e)Mi.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Mn)for(var o of Mn(e))t.indexOf(o)<0&&Ci.call(e,o)&&(n[o]=e[o]);return n};function pt(e,t,n={}){const o=n,{eventFilter:r}=o,i=jl(o,["eventFilter"]),{eventFilter:a,pause:l,resume:u,isActive:s}=Nl(r);return{stop:Vl(e,t,Yl(Gl({},i),{eventFilter:a})),pause:l,resume:u,isActive:s}}function bo(e){var t;const n=ae(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Lo=Si?window:void 0;function Fo(...e){let t,n,o,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,r]=e,t=Lo):[t,n,o,r]=e,!t)return ki;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const i=[],a=()=>{i.forEach(c=>c()),i.length=0},l=(c,d,f,h)=>(c.addEventListener(d,f,h),()=>c.removeEventListener(d,f,h)),u=pe(()=>[bo(t),ae(r)],([c,d])=>{a(),c&&i.push(...n.flatMap(f=>o.map(h=>l(c,f,h,d))))},{immediate:!0,flush:"post"}),s=()=>{u(),a()};return tn(s),s}function Ul(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function pr(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:r=Lo,eventName:i="keydown",passive:a=!1,dedupe:l=!1}=o,u=Ul(t);return Fo(r,i,s=>{s.repeat&&ae(l)||u(s)&&n(s)},a)}function Xl(){const e=le(!1);return Gn()&&nt(()=>{e.value=!0}),e}function Zl(e){const t=Xl();return oe(()=>(t.value,!!e()))}function ql(e){return JSON.parse(JSON.stringify(e))}var gr=Object.getOwnPropertySymbols,Wl=Object.prototype.hasOwnProperty,Kl=Object.prototype.propertyIsEnumerable,Jl=(e,t)=>{var n={};for(var o in e)Wl.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&gr)for(var o of gr(e))t.indexOf(o)<0&&Kl.call(e,o)&&(n[o]=e[o]);return n};function Ql(e,t,n={}){const o=n,{window:r=Lo}=o,i=Jl(o,["window"]);let a;const l=Zl(()=>r&&"ResizeObserver"in r),u=()=>{a&&(a.disconnect(),a=void 0)},s=oe(()=>Array.isArray(e)?e.map(f=>bo(f)):[bo(e)]),c=pe(s,f=>{if(u(),l.value&&r){a=new ResizeObserver(t);for(const h of f)h&&a.observe(h,i)}},{immediate:!0,flush:"post",deep:!0}),d=()=>{u(),c()};return tn(d),{isSupported:l,stop:d}}function Ft(e,t,n,o={}){var r,i,a;const{clone:l=!1,passive:u=!1,eventName:s,deep:c=!1,defaultValue:d,shouldEmit:f}=o,h=Gn(),p=n||(h==null?void 0:h.emit)||((r=h==null?void 0:h.$emit)==null?void 0:r.bind(h))||((a=(i=h==null?void 0:h.proxy)==null?void 0:i.$emit)==null?void 0:a.bind(h==null?void 0:h.proxy));let g=s;t||(t="modelValue"),g=s||g||`update:${t.toString()}`;const w=N=>l?typeof l=="function"?l(N):ql(N):N,x=()=>Sl(e[t])?w(e[t]):d,E=N=>{f?f(N)&&p(g,N):p(g,N)};if(u){const N=x(),v=le(N);return pe(()=>e[t],M=>v.value=w(M)),pe(v,M=>{(M!==e[t]||c)&&E(M)},{deep:c}),v}else return oe({get(){return x()},set(N){E(N)}})}var eu={value:()=>{}};function Yn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new _n(n)}function _n(e){this._=e}function tu(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}_n.prototype=Yn.prototype={constructor:_n,on:function(e,t){var n=this._,o=tu(e+"",n),r,i=-1,a=o.length;if(arguments.length<2){for(;++i<a;)if((r=(e=o[i]).type)&&(r=nu(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(r=(e=o[i]).type)n[r]=vr(n[r],e.name,t);else if(t==null)for(r in n)n[r]=vr(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new _n(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function nu(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function vr(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=eu,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var xo="http://www.w3.org/1999/xhtml";const mr={svg:"http://www.w3.org/2000/svg",xhtml:xo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function jn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),mr.hasOwnProperty(t)?{space:mr[t],local:e}:e}function ou(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===xo&&t.documentElement.namespaceURI===xo?t.createElement(e):t.createElementNS(n,e)}}function ru(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ai(e){var t=jn(e);return(t.local?ru:ou)(t)}function iu(){}function Go(e){return e==null?iu:function(){return this.querySelector(e)}}function au(e){typeof e!="function"&&(e=Go(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,l=o[r]=new Array(a),u,s,c=0;c<a;++c)(u=i[c])&&(s=e.call(u,u.__data__,c,i))&&("__data__"in u&&(s.__data__=u.__data__),l[c]=s);return new Ce(o,this._parents)}function lu(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function uu(){return[]}function Pi(e){return e==null?uu:function(){return this.querySelectorAll(e)}}function su(e){return function(){return lu(e.apply(this,arguments))}}function cu(e){typeof e=="function"?e=su(e):e=Pi(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a=t[i],l=a.length,u,s=0;s<l;++s)(u=a[s])&&(o.push(e.call(u,u.__data__,s,a)),r.push(u));return new Ce(o,r)}function Ii(e){return function(){return this.matches(e)}}function Ti(e){return function(t){return t.matches(e)}}var du=Array.prototype.find;function hu(e){return function(){return du.call(this.children,e)}}function fu(){return this.firstElementChild}function pu(e){return this.select(e==null?fu:hu(typeof e=="function"?e:Ti(e)))}var gu=Array.prototype.filter;function vu(){return Array.from(this.children)}function mu(e){return function(){return gu.call(this.children,e)}}function yu(e){return this.selectAll(e==null?vu:mu(typeof e=="function"?e:Ti(e)))}function wu(e){typeof e!="function"&&(e=Ii(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,l=o[r]=[],u,s=0;s<a;++s)(u=i[s])&&e.call(u,u.__data__,s,i)&&l.push(u);return new Ce(o,this._parents)}function Oi(e){return new Array(e.length)}function _u(){return new Ce(this._enter||this._groups.map(Oi),this._parents)}function Cn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Cn.prototype={constructor:Cn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function bu(e){return function(){return e}}function xu(e,t,n,o,r,i){for(var a=0,l,u=t.length,s=i.length;a<s;++a)(l=t[a])?(l.__data__=i[a],o[a]=l):n[a]=new Cn(e,i[a]);for(;a<u;++a)(l=t[a])&&(r[a]=l)}function $u(e,t,n,o,r,i,a){var l,u,s=new Map,c=t.length,d=i.length,f=new Array(c),h;for(l=0;l<c;++l)(u=t[l])&&(f[l]=h=a.call(u,u.__data__,l,t)+"",s.has(h)?r[l]=u:s.set(h,u));for(l=0;l<d;++l)h=a.call(e,i[l],l,i)+"",(u=s.get(h))?(o[l]=u,u.__data__=i[l],s.delete(h)):n[l]=new Cn(e,i[l]);for(l=0;l<c;++l)(u=t[l])&&s.get(f[l])===u&&(r[l]=u)}function Eu(e){return e.__data__}function Su(e,t){if(!arguments.length)return Array.from(this,Eu);var n=t?$u:xu,o=this._parents,r=this._groups;typeof e!="function"&&(e=bu(e));for(var i=r.length,a=new Array(i),l=new Array(i),u=new Array(i),s=0;s<i;++s){var c=o[s],d=r[s],f=d.length,h=ku(e.call(c,c&&c.__data__,s,o)),p=h.length,g=l[s]=new Array(p),w=a[s]=new Array(p),x=u[s]=new Array(f);n(c,d,g,w,x,h,t);for(var E=0,N=0,v,M;E<p;++E)if(v=g[E]){for(E>=N&&(N=E+1);!(M=w[N])&&++N<p;);v._next=M||null}}return a=new Ce(a,o),a._enter=l,a._exit=u,a}function ku(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Nu(){return new Ce(this._exit||this._groups.map(Oi),this._parents)}function Mu(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function Cu(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),l=new Array(r),u=0;u<a;++u)for(var s=n[u],c=o[u],d=s.length,f=l[u]=new Array(d),h,p=0;p<d;++p)(h=s[p]||c[p])&&(f[p]=h);for(;u<r;++u)l[u]=n[u];return new Ce(l,this._parents)}function Au(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],a;--r>=0;)(a=o[r])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function Pu(e){e||(e=Iu);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a=n[i],l=a.length,u=r[i]=new Array(l),s,c=0;c<l;++c)(s=a[c])&&(u[c]=s);u.sort(t)}return new Ce(r,this._parents).order()}function Iu(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Tu(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ou(){return Array.from(this)}function zu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null}function Bu(){let e=0;for(const t of this)++e;return e}function Du(){return!this.node()}function Ru(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,a=r.length,l;i<a;++i)(l=r[i])&&e.call(l,l.__data__,i,r);return this}function Vu(e){return function(){this.removeAttribute(e)}}function Hu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Lu(e,t){return function(){this.setAttribute(e,t)}}function Fu(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Gu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Yu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ju(e,t){var n=jn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Hu:Vu:typeof t=="function"?n.local?Yu:Gu:n.local?Fu:Lu)(n,t))}function zi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Uu(e){return function(){this.style.removeProperty(e)}}function Xu(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Zu(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function qu(e,t,n){return arguments.length>1?this.each((t==null?Uu:typeof t=="function"?Zu:Xu)(e,t,n??"")):kt(this.node(),e)}function kt(e,t){return e.style.getPropertyValue(t)||zi(e).getComputedStyle(e,null).getPropertyValue(t)}function Wu(e){return function(){delete this[e]}}function Ku(e,t){return function(){this[e]=t}}function Ju(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Qu(e,t){return arguments.length>1?this.each((t==null?Wu:typeof t=="function"?Ju:Ku)(e,t)):this.node()[e]}function Bi(e){return e.trim().split(/^|\s+/)}function Yo(e){return e.classList||new Di(e)}function Di(e){this._node=e,this._names=Bi(e.getAttribute("class")||"")}Di.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ri(e,t){for(var n=Yo(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function Vi(e,t){for(var n=Yo(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function es(e){return function(){Ri(this,e)}}function ts(e){return function(){Vi(this,e)}}function ns(e,t){return function(){(t.apply(this,arguments)?Ri:Vi)(this,e)}}function os(e,t){var n=Bi(e+"");if(arguments.length<2){for(var o=Yo(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?ns:t?es:ts)(n,t))}function rs(){this.textContent=""}function is(e){return function(){this.textContent=e}}function as(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function ls(e){return arguments.length?this.each(e==null?rs:(typeof e=="function"?as:is)(e)):this.node().textContent}function us(){this.innerHTML=""}function ss(e){return function(){this.innerHTML=e}}function cs(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ds(e){return arguments.length?this.each(e==null?us:(typeof e=="function"?cs:ss)(e)):this.node().innerHTML}function hs(){this.nextSibling&&this.parentNode.appendChild(this)}function fs(){return this.each(hs)}function ps(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gs(){return this.each(ps)}function vs(e){var t=typeof e=="function"?e:Ai(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ms(){return null}function ys(e,t){var n=typeof e=="function"?e:Ai(e),o=t==null?ms:typeof t=="function"?t:Go(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function ws(){var e=this.parentNode;e&&e.removeChild(this)}function _s(){return this.each(ws)}function bs(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function xs(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function $s(e){return this.select(e?xs:bs)}function Es(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ss(e){return function(t){e.call(this,t,this.__data__)}}function ks(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Ns(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function Ms(e,t,n){return function(){var o=this.__on,r,i=Ss(t);if(o){for(var a=0,l=o.length;a<l;++a)if((r=o[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function Cs(e,t,n){var o=ks(e+""),r,i=o.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,s=l.length,c;u<s;++u)for(r=0,c=l[u];r<i;++r)if((a=o[r]).type===c.type&&a.name===c.name)return c.value}return}for(l=t?Ms:Ns,r=0;r<i;++r)this.each(l(o[r],t,n));return this}function Hi(e,t,n){var o=zi(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function As(e,t){return function(){return Hi(this,e,t)}}function Ps(e,t){return function(){return Hi(this,e,t.apply(this,arguments))}}function Is(e,t){return this.each((typeof t=="function"?Ps:As)(e,t))}function*Ts(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,a;r<i;++r)(a=o[r])&&(yield a)}var Li=[null];function Ce(e,t){this._groups=e,this._parents=t}function nn(){return new Ce([[document.documentElement]],Li)}function Os(){return this}Ce.prototype=nn.prototype={constructor:Ce,select:au,selectAll:cu,selectChild:pu,selectChildren:yu,filter:wu,data:Su,enter:_u,exit:Nu,join:Mu,merge:Cu,selection:Os,order:Au,sort:Pu,call:Tu,nodes:Ou,node:zu,size:Bu,empty:Du,each:Ru,attr:ju,style:qu,property:Qu,classed:os,text:ls,html:ds,raise:fs,lower:gs,append:vs,insert:ys,remove:_s,clone:$s,datum:Es,on:Cs,dispatch:Is,[Symbol.iterator]:Ts};function Ae(e){return typeof e=="string"?new Ce([[document.querySelector(e)]],[document.documentElement]):new Ce([[e]],Li)}function zs(e){let t;for(;t=e.sourceEvent;)e=t;return e}function De(e,t){if(e=zs(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const Bs={passive:!1},Ut={capture:!0,passive:!1};function ao(e){e.stopImmediatePropagation()}function _t(e){e.preventDefault(),e.stopImmediatePropagation()}function Fi(e){var t=e.document.documentElement,n=Ae(e).on("dragstart.drag",_t,Ut);"onselectstart"in t?n.on("selectstart.drag",_t,Ut):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Gi(e,t){var n=e.document.documentElement,o=Ae(e).on("dragstart.drag",null);t&&(o.on("click.drag",_t,Ut),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const un=e=>()=>e;function $o(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:a,y:l,dx:u,dy:s,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:s,enumerable:!0,configurable:!0},_:{value:c}})}$o.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ds(e){return!e.ctrlKey&&!e.button}function Rs(){return this.parentNode}function Vs(e,t){return t??{x:e.x,y:e.y}}function Hs(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ls(){var e=Ds,t=Rs,n=Vs,o=Hs,r={},i=Yn("start","drag","end"),a=0,l,u,s,c,d=0;function f(v){v.on("mousedown.drag",h).filter(o).on("touchstart.drag",w).on("touchmove.drag",x,Bs).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(v,M){if(!(c||!e.call(this,v,M))){var m=N(this,t.call(this,v,M),v,M,"mouse");m&&(Ae(v.view).on("mousemove.drag",p,Ut).on("mouseup.drag",g,Ut),Fi(v.view),ao(v),s=!1,l=v.clientX,u=v.clientY,m("start",v))}}function p(v){if(_t(v),!s){var M=v.clientX-l,m=v.clientY-u;s=M*M+m*m>d}r.mouse("drag",v)}function g(v){Ae(v.view).on("mousemove.drag mouseup.drag",null),Gi(v.view,s),_t(v),r.mouse("end",v)}function w(v,M){if(e.call(this,v,M)){var m=v.changedTouches,D=t.call(this,v,M),Y=m.length,L,z;for(L=0;L<Y;++L)(z=N(this,D,v,M,m[L].identifier,m[L]))&&(ao(v),z("start",v,m[L]))}}function x(v){var M=v.changedTouches,m=M.length,D,Y;for(D=0;D<m;++D)(Y=r[M[D].identifier])&&(_t(v),Y("drag",v,M[D]))}function E(v){var M=v.changedTouches,m=M.length,D,Y;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),D=0;D<m;++D)(Y=r[M[D].identifier])&&(ao(v),Y("end",v,M[D]))}function N(v,M,m,D,Y,L){var z=i.copy(),Q=De(L||m,M),J,ne,y;if((y=n.call(v,new $o("beforestart",{sourceEvent:m,target:f,identifier:Y,active:a,x:Q[0],y:Q[1],dx:0,dy:0,dispatch:z}),D))!=null)return J=y.x-Q[0]||0,ne=y.y-Q[1]||0,function C(k,P,H){var U=Q,A;switch(k){case"start":r[Y]=C,A=a++;break;case"end":delete r[Y],--a;case"drag":Q=De(H||P,M),A=a;break}z.call(k,v,new $o(k,{sourceEvent:P,subject:y,target:f,identifier:Y,active:A,x:Q[0]+J,y:Q[1]+ne,dx:Q[0]-U[0],dy:Q[1]-U[1],dispatch:z}),D)}}return f.filter=function(v){return arguments.length?(e=typeof v=="function"?v:un(!!v),f):e},f.container=function(v){return arguments.length?(t=typeof v=="function"?v:un(v),f):t},f.subject=function(v){return arguments.length?(n=typeof v=="function"?v:un(v),f):n},f.touchable=function(v){return arguments.length?(o=typeof v=="function"?v:un(!!v),f):o},f.on=function(){var v=i.on.apply(i,arguments);return v===i?f:v},f.clickDistance=function(v){return arguments.length?(d=(v=+v)*v,f):Math.sqrt(d)},f}function jo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Yi(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function on(){}var Xt=.7,An=1/Xt,bt="\\s*([+-]?\\d+)\\s*",Zt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ve="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Fs=/^#([0-9a-f]{3,8})$/,Gs=new RegExp(`^rgb\\(${bt},${bt},${bt}\\)$`),Ys=new RegExp(`^rgb\\(${Ve},${Ve},${Ve}\\)$`),js=new RegExp(`^rgba\\(${bt},${bt},${bt},${Zt}\\)$`),Us=new RegExp(`^rgba\\(${Ve},${Ve},${Ve},${Zt}\\)$`),Xs=new RegExp(`^hsl\\(${Zt},${Ve},${Ve}\\)$`),Zs=new RegExp(`^hsla\\(${Zt},${Ve},${Ve},${Zt}\\)$`),yr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jo(on,qt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:wr,formatHex:wr,formatHex8:qs,formatHsl:Ws,formatRgb:_r,toString:_r});function wr(){return this.rgb().formatHex()}function qs(){return this.rgb().formatHex8()}function Ws(){return ji(this).formatHsl()}function _r(){return this.rgb().formatRgb()}function qt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Fs.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?br(t):n===3?new ke(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?sn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?sn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Gs.exec(e))?new ke(t[1],t[2],t[3],1):(t=Ys.exec(e))?new ke(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=js.exec(e))?sn(t[1],t[2],t[3],t[4]):(t=Us.exec(e))?sn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Xs.exec(e))?Er(t[1],t[2]/100,t[3]/100,1):(t=Zs.exec(e))?Er(t[1],t[2]/100,t[3]/100,t[4]):yr.hasOwnProperty(e)?br(yr[e]):e==="transparent"?new ke(NaN,NaN,NaN,0):null}function br(e){return new ke(e>>16&255,e>>8&255,e&255,1)}function sn(e,t,n,o){return o<=0&&(e=t=n=NaN),new ke(e,t,n,o)}function Ks(e){return e instanceof on||(e=qt(e)),e?(e=e.rgb(),new ke(e.r,e.g,e.b,e.opacity)):new ke}function Eo(e,t,n,o){return arguments.length===1?Ks(e):new ke(e,t,n,o??1)}function ke(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}jo(ke,Eo,Yi(on,{brighter(e){return e=e==null?An:Math.pow(An,e),new ke(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Xt:Math.pow(Xt,e),new ke(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ke(lt(this.r),lt(this.g),lt(this.b),Pn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xr,formatHex:xr,formatHex8:Js,formatRgb:$r,toString:$r}));function xr(){return`#${rt(this.r)}${rt(this.g)}${rt(this.b)}`}function Js(){return`#${rt(this.r)}${rt(this.g)}${rt(this.b)}${rt((isNaN(this.opacity)?1:this.opacity)*255)}`}function $r(){const e=Pn(this.opacity);return`${e===1?"rgb(":"rgba("}${lt(this.r)}, ${lt(this.g)}, ${lt(this.b)}${e===1?")":`, ${e})`}`}function Pn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function lt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function rt(e){return e=lt(e),(e<16?"0":"")+e.toString(16)}function Er(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Pe(e,t,n,o)}function ji(e){if(e instanceof Pe)return new Pe(e.h,e.s,e.l,e.opacity);if(e instanceof on||(e=qt(e)),!e)return new Pe;if(e instanceof Pe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,l=i-r,u=(i+r)/2;return l?(t===i?a=(n-o)/l+(n<o)*6:n===i?a=(o-t)/l+2:a=(t-n)/l+4,l/=u<.5?i+r:2-i-r,a*=60):l=u>0&&u<1?0:a,new Pe(a,l,u,e.opacity)}function Qs(e,t,n,o){return arguments.length===1?ji(e):new Pe(e,t,n,o??1)}function Pe(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}jo(Pe,Qs,Yi(on,{brighter(e){return e=e==null?An:Math.pow(An,e),new Pe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Xt:Math.pow(Xt,e),new Pe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new ke(lo(e>=240?e-240:e+120,r,o),lo(e,r,o),lo(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new Pe(Sr(this.h),cn(this.s),cn(this.l),Pn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Pn(this.opacity);return`${e===1?"hsl(":"hsla("}${Sr(this.h)}, ${cn(this.s)*100}%, ${cn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Sr(e){return e=(e||0)%360,e<0?e+360:e}function cn(e){return Math.max(0,Math.min(1,e||0))}function lo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ui=e=>()=>e;function ec(e,t){return function(n){return e+n*t}}function tc(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function nc(e){return(e=+e)==1?Xi:function(t,n){return n-t?tc(t,n,e):Ui(isNaN(t)?n:t)}}function Xi(e,t){var n=t-e;return n?ec(e,n):Ui(isNaN(e)?t:e)}const kr=function e(t){var n=nc(t);function o(r,i){var a=n((r=Eo(r)).r,(i=Eo(i)).r),l=n(r.g,i.g),u=n(r.b,i.b),s=Xi(r.opacity,i.opacity);return function(c){return r.r=a(c),r.g=l(c),r.b=u(c),r.opacity=s(c),r+""}}return o.gamma=e,o}(1);function Je(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var So=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uo=new RegExp(So.source,"g");function oc(e){return function(){return e}}function rc(e){return function(t){return e(t)+""}}function ic(e,t){var n=So.lastIndex=uo.lastIndex=0,o,r,i,a=-1,l=[],u=[];for(e=e+"",t=t+"";(o=So.exec(e))&&(r=uo.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),l[a]?l[a]+=i:l[++a]=i),(o=o[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,u.push({i:a,x:Je(o,r)})),n=uo.lastIndex;return n<t.length&&(i=t.slice(n),l[a]?l[a]+=i:l[++a]=i),l.length<2?u[0]?rc(u[0].x):oc(t):(t=u.length,function(s){for(var c=0,d;c<t;++c)l[(d=u[c]).i]=d.x(s);return l.join("")})}var Nr=180/Math.PI,Zi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qi(e,t,n,o,r,i){var a,l,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),e*o<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Nr,skewX:Math.atan(u)*Nr,scaleX:a,scaleY:l}}var dn;function ac(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Zi:qi(t.a,t.b,t.c,t.d,t.e,t.f)}function lc(e){return e==null||(dn||(dn=document.createElementNS("http://www.w3.org/2000/svg","g")),dn.setAttribute("transform",e),!(e=dn.transform.baseVal.consolidate()))?Zi:(e=e.matrix,qi(e.a,e.b,e.c,e.d,e.e,e.f))}function Wi(e,t,n,o){function r(s){return s.length?s.pop()+" ":""}function i(s,c,d,f,h,p){if(s!==d||c!==f){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:Je(s,d)},{i:g-2,x:Je(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function a(s,c,d,f){s!==c?(s-c>180?c+=360:c-s>180&&(s+=360),f.push({i:d.push(r(d)+"rotate(",null,o)-2,x:Je(s,c)})):c&&d.push(r(d)+"rotate("+c+o)}function l(s,c,d,f){s!==c?f.push({i:d.push(r(d)+"skewX(",null,o)-2,x:Je(s,c)}):c&&d.push(r(d)+"skewX("+c+o)}function u(s,c,d,f,h,p){if(s!==d||c!==f){var g=h.push(r(h)+"scale(",null,",",null,")");p.push({i:g-4,x:Je(s,d)},{i:g-2,x:Je(c,f)})}else(d!==1||f!==1)&&h.push(r(h)+"scale("+d+","+f+")")}return function(s,c){var d=[],f=[];return s=e(s),c=e(c),i(s.translateX,s.translateY,c.translateX,c.translateY,d,f),a(s.rotate,c.rotate,d,f),l(s.skewX,c.skewX,d,f),u(s.scaleX,s.scaleY,c.scaleX,c.scaleY,d,f),s=c=null,function(h){for(var p=-1,g=f.length,w;++p<g;)d[(w=f[p]).i]=w.x(h);return d.join("")}}}var uc=Wi(ac,"px, ","px)","deg)"),sc=Wi(lc,", ",")",")"),cc=1e-12;function Mr(e){return((e=Math.exp(e))+1/e)/2}function dc(e){return((e=Math.exp(e))-1/e)/2}function hc(e){return((e=Math.exp(2*e))-1)/(e+1)}const fc=function e(t,n,o){function r(i,a){var l=i[0],u=i[1],s=i[2],c=a[0],d=a[1],f=a[2],h=c-l,p=d-u,g=h*h+p*p,w,x;if(g<cc)x=Math.log(f/s)/t,w=function(D){return[l+D*h,u+D*p,s*Math.exp(t*D*x)]};else{var E=Math.sqrt(g),N=(f*f-s*s+o*g)/(2*s*n*E),v=(f*f-s*s-o*g)/(2*f*n*E),M=Math.log(Math.sqrt(N*N+1)-N),m=Math.log(Math.sqrt(v*v+1)-v);x=(m-M)/t,w=function(D){var Y=D*x,L=Mr(M),z=s/(n*E)*(L*hc(t*Y+M)-dc(M));return[l+z*h,u+z*p,s*L/Mr(t*Y+M)]}}return w.duration=x*1e3*t/Math.SQRT2,w}return r.rho=function(i){var a=Math.max(.001,+i),l=a*a,u=l*l;return e(a,l,u)},r}(Math.SQRT2,2,4);var Nt=0,Dt=0,Ot=0,Ki=1e3,In,Rt,Tn=0,ct=0,Un=0,Wt=typeof performance=="object"&&performance.now?performance:Date,Ji=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Uo(){return ct||(Ji(pc),ct=Wt.now()+Un)}function pc(){ct=0}function On(){this._call=this._time=this._next=null}On.prototype=Qi.prototype={constructor:On,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Uo():+n)+(t==null?0:+t),!this._next&&Rt!==this&&(Rt?Rt._next=this:In=this,Rt=this),this._call=e,this._time=n,ko()},stop:function(){this._call&&(this._call=null,this._time=1/0,ko())}};function Qi(e,t,n){var o=new On;return o.restart(e,t,n),o}function gc(){Uo(),++Nt;for(var e=In,t;e;)(t=ct-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Nt}function Cr(){ct=(Tn=Wt.now())+Un,Nt=Dt=0;try{gc()}finally{Nt=0,mc(),ct=0}}function vc(){var e=Wt.now(),t=e-Tn;t>Ki&&(Un-=t,Tn=e)}function mc(){for(var e,t=In,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:In=n);Rt=e,ko(o)}function ko(e){if(!Nt){Dt&&(Dt=clearTimeout(Dt));var t=e-ct;t>24?(e<1/0&&(Dt=setTimeout(Cr,e-Wt.now()-Un)),Ot&&(Ot=clearInterval(Ot))):(Ot||(Tn=Wt.now(),Ot=setInterval(vc,Ki)),Nt=1,Ji(Cr))}}function Ar(e,t,n){var o=new On;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var yc=Yn("start","end","cancel","interrupt"),wc=[],ea=0,Pr=1,No=2,bn=3,Ir=4,Mo=5,xn=6;function Xn(e,t,n,o,r,i){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;_c(e,n,{name:t,index:o,group:r,on:yc,tween:wc,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:ea})}function Xo(e,t){var n=ze(e,t);if(n.state>ea)throw new Error("too late; already scheduled");return n}function Fe(e,t){var n=ze(e,t);if(n.state>bn)throw new Error("too late; already running");return n}function ze(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function _c(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=Qi(i,0,n.time);function i(s){n.state=Pr,n.timer.restart(a,n.delay,n.time),n.delay<=s&&a(s-n.delay)}function a(s){var c,d,f,h;if(n.state!==Pr)return u();for(c in o)if(h=o[c],h.name===n.name){if(h.state===bn)return Ar(a);h.state===Ir?(h.state=xn,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=xn,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(Ar(function(){n.state===bn&&(n.state=Ir,n.timer.restart(l,n.delay,n.time),l(s))}),n.state=No,n.on.call("start",e,e.__data__,n.index,n.group),n.state===No){for(n.state=bn,r=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=h);r.length=d+1}}function l(s){for(var c=s<n.duration?n.ease.call(null,s/n.duration):(n.timer.restart(u),n.state=Mo,1),d=-1,f=r.length;++d<f;)r[d].call(e,c);n.state===Mo&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=xn,n.timer.stop(),delete o[t];for(var s in o)return;delete e.__transition}}function $n(e,t){var n=e.__transition,o,r,i=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((o=n[a]).name!==t){i=!1;continue}r=o.state>No&&o.state<Mo,o.state=xn,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[a]}i&&delete e.__transition}}function bc(e){return this.each(function(){$n(this,e)})}function xc(e,t){var n,o;return function(){var r=Fe(this,e),i=r.tween;if(i!==n){o=n=i;for(var a=0,l=o.length;a<l;++a)if(o[a].name===t){o=o.slice(),o.splice(a,1);break}}r.tween=o}}function $c(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=Fe(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var l={name:t,value:n},u=0,s=r.length;u<s;++u)if(r[u].name===t){r[u]=l;break}u===s&&r.push(l)}i.tween=r}}function Ec(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=ze(this.node(),n).tween,r=0,i=o.length,a;r<i;++r)if((a=o[r]).name===e)return a.value;return null}return this.each((t==null?xc:$c)(n,e,t))}function Zo(e,t,n){var o=e._id;return e.each(function(){var r=Fe(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return ze(r,o).value[t]}}function ta(e,t){var n;return(typeof t=="number"?Je:t instanceof qt?kr:(n=qt(t))?(t=n,kr):ic)(e,t)}function Sc(e){return function(){this.removeAttribute(e)}}function kc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Nc(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttribute(e);return a===r?null:a===o?i:i=t(o=a,n)}}function Mc(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===o?i:i=t(o=a,n)}}function Cc(e,t,n){var o,r,i;return function(){var a,l=n(this),u;return l==null?void this.removeAttribute(e):(a=this.getAttribute(e),u=l+"",a===u?null:a===o&&u===r?i:(r=u,i=t(o=a,l)))}}function Ac(e,t,n){var o,r,i;return function(){var a,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),u=l+"",a===u?null:a===o&&u===r?i:(r=u,i=t(o=a,l)))}}function Pc(e,t){var n=jn(e),o=n==="transform"?sc:ta;return this.attrTween(e,typeof t=="function"?(n.local?Ac:Cc)(n,o,Zo(this,"attr."+e,t)):t==null?(n.local?kc:Sc)(n):(n.local?Mc:Nc)(n,o,t))}function Ic(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Tc(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Oc(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&Tc(e,i)),n}return r._value=t,r}function zc(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&Ic(e,i)),n}return r._value=t,r}function Bc(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=jn(e);return this.tween(n,(o.local?Oc:zc)(o,t))}function Dc(e,t){return function(){Xo(this,e).delay=+t.apply(this,arguments)}}function Rc(e,t){return t=+t,function(){Xo(this,e).delay=t}}function Vc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Dc:Rc)(t,e)):ze(this.node(),t).delay}function Hc(e,t){return function(){Fe(this,e).duration=+t.apply(this,arguments)}}function Lc(e,t){return t=+t,function(){Fe(this,e).duration=t}}function Fc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Hc:Lc)(t,e)):ze(this.node(),t).duration}function Gc(e,t){if(typeof t!="function")throw new Error;return function(){Fe(this,e).ease=t}}function Yc(e){var t=this._id;return arguments.length?this.each(Gc(t,e)):ze(this.node(),t).ease}function jc(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Fe(this,e).ease=n}}function Uc(e){if(typeof e!="function")throw new Error;return this.each(jc(this._id,e))}function Xc(e){typeof e!="function"&&(e=Ii(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,l=o[r]=[],u,s=0;s<a;++s)(u=i[s])&&e.call(u,u.__data__,s,i)&&l.push(u);return new We(o,this._parents,this._name,this._id)}function Zc(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),l=0;l<i;++l)for(var u=t[l],s=n[l],c=u.length,d=a[l]=new Array(c),f,h=0;h<c;++h)(f=u[h]||s[h])&&(d[h]=f);for(;l<o;++l)a[l]=t[l];return new We(a,this._parents,this._name,this._id)}function qc(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Wc(e,t,n){var o,r,i=qc(t)?Xo:Fe;return function(){var a=i(this,e),l=a.on;l!==o&&(r=(o=l).copy()).on(t,n),a.on=r}}function Kc(e,t){var n=this._id;return arguments.length<2?ze(this.node(),n).on.on(e):this.each(Wc(n,e,t))}function Jc(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Qc(){return this.on("end.remove",Jc(this._id))}function ed(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Go(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var l=o[a],u=l.length,s=i[a]=new Array(u),c,d,f=0;f<u;++f)(c=l[f])&&(d=e.call(c,c.__data__,f,l))&&("__data__"in c&&(d.__data__=c.__data__),s[f]=d,Xn(s[f],t,n,f,s,ze(c,n)));return new We(i,this._parents,t,n)}function td(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Pi(e));for(var o=this._groups,r=o.length,i=[],a=[],l=0;l<r;++l)for(var u=o[l],s=u.length,c,d=0;d<s;++d)if(c=u[d]){for(var f=e.call(c,c.__data__,d,u),h,p=ze(c,n),g=0,w=f.length;g<w;++g)(h=f[g])&&Xn(h,t,n,g,f,p);i.push(f),a.push(c)}return new We(i,a,t,n)}var nd=nn.prototype.constructor;function od(){return new nd(this._groups,this._parents)}function rd(e,t){var n,o,r;return function(){var i=kt(this,e),a=(this.style.removeProperty(e),kt(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}function na(e){return function(){this.style.removeProperty(e)}}function id(e,t,n){var o,r=n+"",i;return function(){var a=kt(this,e);return a===r?null:a===o?i:i=t(o=a,n)}}function ad(e,t,n){var o,r,i;return function(){var a=kt(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),kt(this,e))),a===u?null:a===o&&u===r?i:(r=u,i=t(o=a,l))}}function ld(e,t){var n,o,r,i="style."+t,a="end."+i,l;return function(){var u=Fe(this,e),s=u.on,c=u.value[i]==null?l||(l=na(t)):void 0;(s!==n||r!==c)&&(o=(n=s).copy()).on(a,r=c),u.on=o}}function ud(e,t,n){var o=(e+="")=="transform"?uc:ta;return t==null?this.styleTween(e,rd(e,o)).on("end.style."+e,na(e)):typeof t=="function"?this.styleTween(e,ad(e,o,Zo(this,"style."+e,t))).each(ld(this._id,e)):this.styleTween(e,id(e,o,t),n).on("end.style."+e,null)}function sd(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function cd(e,t,n){var o,r;function i(){var a=t.apply(this,arguments);return a!==r&&(o=(r=a)&&sd(e,a,n)),o}return i._value=t,i}function dd(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,cd(e,t,n??""))}function hd(e){return function(){this.textContent=e}}function fd(e){return function(){var t=e(this);this.textContent=t??""}}function pd(e){return this.tween("text",typeof e=="function"?fd(Zo(this,"text",e)):hd(e==null?"":e+""))}function gd(e){return function(t){this.textContent=e.call(this,t)}}function vd(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&gd(r)),t}return o._value=e,o}function md(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,vd(e))}function yd(){for(var e=this._name,t=this._id,n=oa(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],l=a.length,u,s=0;s<l;++s)if(u=a[s]){var c=ze(u,t);Xn(u,e,n,s,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new We(o,this._parents,e,n)}function wd(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,a){var l={value:a},u={value:function(){--r===0&&i()}};n.each(function(){var s=Fe(this,o),c=s.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),s.on=t}),r===0&&i()})}var _d=0;function We(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function oa(){return++_d}var Ye=nn.prototype;We.prototype={constructor:We,select:ed,selectAll:td,selectChild:Ye.selectChild,selectChildren:Ye.selectChildren,filter:Xc,merge:Zc,selection:od,transition:yd,call:Ye.call,nodes:Ye.nodes,node:Ye.node,size:Ye.size,empty:Ye.empty,each:Ye.each,on:Kc,attr:Pc,attrTween:Bc,style:ud,styleTween:dd,text:pd,textTween:md,remove:Qc,tween:Ec,delay:Vc,duration:Fc,ease:Yc,easeVarying:Uc,end:wd,[Symbol.iterator]:Ye[Symbol.iterator]};function bd(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var xd={time:null,delay:0,duration:250,ease:bd};function $d(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ed(e){var t,n;e instanceof We?(t=e._id,e=e._name):(t=oa(),(n=xd).time=Uo(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],l=a.length,u,s=0;s<l;++s)(u=a[s])&&Xn(u,e,t,s,a,n||$d(u,t));return new We(o,this._parents,e,t)}nn.prototype.interrupt=bc;nn.prototype.transition=Ed;const hn=e=>()=>e;function Sd(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Xe(e,t,n){this.k=e,this.x=t,this.y=n}Xe.prototype={constructor:Xe,scale:function(e){return e===1?this:new Xe(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Xe(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Mt=new Xe(1,0,0);Xe.prototype;function so(e){e.stopImmediatePropagation()}function zt(e){e.preventDefault(),e.stopImmediatePropagation()}function kd(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Nd(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Tr(){return this.__zoom||Mt}function Md(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Cd(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ad(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function Pd(){var e=kd,t=Nd,n=Ad,o=Md,r=Cd,i=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,u=fc,s=Yn("start","zoom","end"),c,d,f,h=500,p=150,g=0,w=10;function x(y){y.property("__zoom",Tr).on("wheel.zoom",Y,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",z).filter(r).on("touchstart.zoom",Q).on("touchmove.zoom",J).on("touchend.zoom touchcancel.zoom",ne).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(y,C,k,P){var H=y.selection?y.selection():y;H.property("__zoom",Tr),y!==H?M(y,C,k,P):H.interrupt().each(function(){m(this,arguments).event(P).start().zoom(null,typeof C=="function"?C.apply(this,arguments):C).end()})},x.scaleBy=function(y,C,k,P){x.scaleTo(y,function(){var H=this.__zoom.k,U=typeof C=="function"?C.apply(this,arguments):C;return H*U},k,P)},x.scaleTo=function(y,C,k,P){x.transform(y,function(){var H=t.apply(this,arguments),U=this.__zoom,A=k==null?v(H):typeof k=="function"?k.apply(this,arguments):k,j=U.invert(A),T=typeof C=="function"?C.apply(this,arguments):C;return n(N(E(U,T),A,j),H,a)},k,P)},x.translateBy=function(y,C,k,P){x.transform(y,function(){return n(this.__zoom.translate(typeof C=="function"?C.apply(this,arguments):C,typeof k=="function"?k.apply(this,arguments):k),t.apply(this,arguments),a)},null,P)},x.translateTo=function(y,C,k,P,H){x.transform(y,function(){var U=t.apply(this,arguments),A=this.__zoom,j=P==null?v(U):typeof P=="function"?P.apply(this,arguments):P;return n(Mt.translate(j[0],j[1]).scale(A.k).translate(typeof C=="function"?-C.apply(this,arguments):-C,typeof k=="function"?-k.apply(this,arguments):-k),U,a)},P,H)};function E(y,C){return C=Math.max(i[0],Math.min(i[1],C)),C===y.k?y:new Xe(C,y.x,y.y)}function N(y,C,k){var P=C[0]-k[0]*y.k,H=C[1]-k[1]*y.k;return P===y.x&&H===y.y?y:new Xe(y.k,P,H)}function v(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function M(y,C,k,P){y.on("start.zoom",function(){m(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){m(this,arguments).event(P).end()}).tween("zoom",function(){var H=this,U=arguments,A=m(H,U).event(P),j=t.apply(H,U),T=k==null?v(j):typeof k=="function"?k.apply(H,U):k,W=Math.max(j[1][0]-j[0][0],j[1][1]-j[0][1]),ee=H.__zoom,I=typeof C=="function"?C.apply(H,U):C,X=u(ee.invert(T).concat(W/ee.k),I.invert(T).concat(W/I.k));return function(R){if(R===1)R=I;else{var Z=X(R),ue=W/Z[2];R=new Xe(ue,T[0]-Z[0]*ue,T[1]-Z[1]*ue)}A.zoom(null,R)}})}function m(y,C,k){return!k&&y.__zooming||new D(y,C)}function D(y,C){this.that=y,this.args=C,this.active=0,this.sourceEvent=null,this.extent=t.apply(y,C),this.taps=0}D.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,C){return this.mouse&&y!=="mouse"&&(this.mouse[1]=C.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=C.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=C.invert(this.touch1[0])),this.that.__zoom=C,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var C=Ae(this.that).datum();s.call(y,this.that,new Sd(y,{sourceEvent:this.sourceEvent,target:x,type:y,transform:this.that.__zoom,dispatch:s}),C)}};function Y(y,...C){if(!e.apply(this,arguments))return;var k=m(this,C).event(y),P=this.__zoom,H=Math.max(i[0],Math.min(i[1],P.k*Math.pow(2,o.apply(this,arguments)))),U=De(y);if(k.wheel)(k.mouse[0][0]!==U[0]||k.mouse[0][1]!==U[1])&&(k.mouse[1]=P.invert(k.mouse[0]=U)),clearTimeout(k.wheel);else{if(P.k===H)return;k.mouse=[U,P.invert(U)],$n(this),k.start()}zt(y),k.wheel=setTimeout(A,p),k.zoom("mouse",n(N(E(P,H),k.mouse[0],k.mouse[1]),k.extent,a));function A(){k.wheel=null,k.end()}}function L(y,...C){if(f||!e.apply(this,arguments))return;var k=y.currentTarget,P=m(this,C,!0).event(y),H=Ae(y.view).on("mousemove.zoom",T,!0).on("mouseup.zoom",W,!0),U=De(y,k),A=y.clientX,j=y.clientY;Fi(y.view),so(y),P.mouse=[U,this.__zoom.invert(U)],$n(this),P.start();function T(ee){if(zt(ee),!P.moved){var I=ee.clientX-A,X=ee.clientY-j;P.moved=I*I+X*X>g}P.event(ee).zoom("mouse",n(N(P.that.__zoom,P.mouse[0]=De(ee,k),P.mouse[1]),P.extent,a))}function W(ee){H.on("mousemove.zoom mouseup.zoom",null),Gi(ee.view,P.moved),zt(ee),P.event(ee).end()}}function z(y,...C){if(e.apply(this,arguments)){var k=this.__zoom,P=De(y.changedTouches?y.changedTouches[0]:y,this),H=k.invert(P),U=k.k*(y.shiftKey?.5:2),A=n(N(E(k,U),P,H),t.apply(this,C),a);zt(y),l>0?Ae(this).transition().duration(l).call(M,A,P,y):Ae(this).call(x.transform,A,P,y)}}function Q(y,...C){if(e.apply(this,arguments)){var k=y.touches,P=k.length,H=m(this,C,y.changedTouches.length===P).event(y),U,A,j,T;for(so(y),A=0;A<P;++A)j=k[A],T=De(j,this),T=[T,this.__zoom.invert(T),j.identifier],H.touch0?!H.touch1&&H.touch0[2]!==T[2]&&(H.touch1=T,H.taps=0):(H.touch0=T,U=!0,H.taps=1+!!c);c&&(c=clearTimeout(c)),U&&(H.taps<2&&(d=T[0],c=setTimeout(function(){c=null},h)),$n(this),H.start())}}function J(y,...C){if(this.__zooming){var k=m(this,C).event(y),P=y.changedTouches,H=P.length,U,A,j,T;for(zt(y),U=0;U<H;++U)A=P[U],j=De(A,this),k.touch0&&k.touch0[2]===A.identifier?k.touch0[0]=j:k.touch1&&k.touch1[2]===A.identifier&&(k.touch1[0]=j);if(A=k.that.__zoom,k.touch1){var W=k.touch0[0],ee=k.touch0[1],I=k.touch1[0],X=k.touch1[1],R=(R=I[0]-W[0])*R+(R=I[1]-W[1])*R,Z=(Z=X[0]-ee[0])*Z+(Z=X[1]-ee[1])*Z;A=E(A,Math.sqrt(R/Z)),j=[(W[0]+I[0])/2,(W[1]+I[1])/2],T=[(ee[0]+X[0])/2,(ee[1]+X[1])/2]}else if(k.touch0)j=k.touch0[0],T=k.touch0[1];else return;k.zoom("touch",n(N(A,j,T),k.extent,a))}}function ne(y,...C){if(this.__zooming){var k=m(this,C).event(y),P=y.changedTouches,H=P.length,U,A;for(so(y),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),U=0;U<H;++U)A=P[U],k.touch0&&k.touch0[2]===A.identifier?delete k.touch0:k.touch1&&k.touch1[2]===A.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(A=De(A,this),Math.hypot(d[0]-A[0],d[1]-A[1])<w)){var j=Ae(this).on("dblclick.zoom");j&&j.apply(this,arguments)}}}return x.wheelDelta=function(y){return arguments.length?(o=typeof y=="function"?y:hn(+y),x):o},x.filter=function(y){return arguments.length?(e=typeof y=="function"?y:hn(!!y),x):e},x.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:hn(!!y),x):r},x.extent=function(y){return arguments.length?(t=typeof y=="function"?y:hn([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),x):t},x.scaleExtent=function(y){return arguments.length?(i[0]=+y[0],i[1]=+y[1],x):[i[0],i[1]]},x.translateExtent=function(y){return arguments.length?(a[0][0]=+y[0][0],a[1][0]=+y[1][0],a[0][1]=+y[0][1],a[1][1]=+y[1][1],x):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},x.constrain=function(y){return arguments.length?(n=y,x):n},x.duration=function(y){return arguments.length?(l=+y,x):l},x.interpolate=function(y){return arguments.length?(u=y,x):u},x.on=function(){var y=s.on.apply(s,arguments);return y===s?x:y},x.clickDistance=function(y){return arguments.length?(g=(y=+y)*y,x):Math.sqrt(g)},x.tapDistance=function(y){return arguments.length?(w=+y,x):w},x}var K=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(K||{}),qo=(e=>(e.Partial="partial",e.Full="full",e))(qo||{}),gt=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(gt||{}),dt=(e=>(e.Strict="strict",e.Loose="loose",e))(dt||{}),Co=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(Co||{}),zn=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(zn||{});const ra="vue-flow__node-desc",ia="vue-flow__edge-desc",Id="vue-flow__aria-live",aa=["Enter"," ","Escape"],xt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function Or(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function Ao(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function Zn(e){return{width:e.offsetWidth,height:e.offsetHeight}}function ht(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function la(e,t){return{x:ht(e.x,t[0][0],t[1][0]),y:ht(e.y,t[0][1],t[1][1])}}function zr(e){const t=e.getRootNode(),n=er();return"elementFromPoint"in t?t:n.document}function Ct(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function Td(e){return Ct(e)&&"sourceNode"in e&&"targetNode"in e}function Gt(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!Ct(e)}function vt(e){return Gt(e)&&"computedPosition"in e}function Od(e){return!!e.width&&!!e.height&&!!e.x&&!!e.y}function zd(e,t={}){let n=t;return vt(e)||(n={type:e.type??t.type??"default",dimensions:wt({width:0,height:0}),handleBounds:{source:[],target:[]},computedPosition:wt({z:0,...e.position}),draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,...t,data:ge(e.data)?e.data:{},events:wt(ge(e.events)?e.events:{})}),Object.assign({},n,e,{id:e.id.toString()})}function ua(e,t={}){const n=ge(e.events)?e.events:t.events&&ge(t.events)?t.events:{},o=ge(e.data)?e.data:t.data&&ge(t.data)?t.data:{};return t=Td(e)?t:{...t,sourceHandle:(e.sourceHandle?e.sourceHandle.toString():void 0)||t.sourceHandle,targetHandle:(e.targetHandle?e.targetHandle.toString():void 0)||t.targetHandle,type:e.type??t.type??"default",source:e.source.toString()||t.source,target:e.target.toString()||t.target,updatable:e.updatable??t.updatable,selectable:e.selectable??t.selectable,focusable:e.focusable??t.focusable,data:o,events:wt(n),label:(e.label&&!tt(e.label)?wt(e.label):e.label)||t.label,interactionWidth:e.interactionWidth||t.interactionWidth},Object.assign({},t,e,{id:e.id.toString()})}function sa({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function Bd(e,t){return t.some(n=>Ct(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function Dd({x:e,y:t},{x:n,y:o,zoom:r}){return{x:e*r+n,y:t*r+o}}function ca({x:e,y:t},{x:n,y:o,zoom:r},i,[a,l]){const u={x:(e-n)/r,y:(t-o)/r};return i?{x:a*Math.round(u.x/a),y:l*Math.round(u.y/l)}:u}function Rd(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function da({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function Vd({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function ha(e){const t=e.reduce((n,{computedPosition:o={x:0,y:0},dimensions:r={width:0,height:0}}={})=>Rd(n,da({...o,...r})),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Vd(t)}function fa(e,t,{x:n,y:o,zoom:r}={x:0,y:0,zoom:1},i=!1,a=!1){const l={x:(t.x-n)/r,y:(t.y-o)/r,width:t.width/r,height:t.height/r};return e.filter(u=>{const{computedPosition:s={x:0,y:0},dimensions:c={width:0,height:0},selectable:d}=u;if(a&&!d)return!1;const f={...s,width:c.width||0,height:c.height||0},h=Ao(l,f),p=typeof c.width>"u"||typeof c.height>"u"||c.width===0||c.height===0,g=i&&h>0,w=c.width*c.height;return p||g||h>=w})}function qn(e,t){const n=e.map(o=>tt(o)?o:o.id);return t.filter(o=>n.includes(o.source)||n.includes(o.target))}function Br(e,t,n,o,r,i=.1,a={x:0,y:0}){const l=t/(e.width*(1+i)),u=n/(e.height*(1+i)),s=Math.min(l,u),c=ht(s,o,r),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*c+(a.x??0),p=n/2-f*c+(a.y??0);return{x:h,y:p,zoom:c}}function Hd(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function pa(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:pa(n,t):!1}function it(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`}function Dr(e,t,n){return e<t?ht(Math.abs(e-t),1,50)/50:e>n?-ht(Math.abs(e-n),1,50)/50:0}function ga(e,t){const n=Dr(e.x,35,t.width-35)*20,o=Dr(e.y,35,t.height-35)*20;return[n,o]}function co(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let r={};if(At(t.style)?r={...t.style(t)}:t.style&&(r={...t.style}),r.width=r.width??`${t.dimensions.width}px`,r.height=r.height??`${t.dimensions.height}px`,n>0)if(tt(r.width)){const i=Number(r.width.replace("px",""));r.width=`${i+n}px`}else r.width+=n;if(o>0)if(tt(r.height)){const i=Number(r.height.replace("px",""));r.height=`${i+o}px`}else r.height+=o;if(e.position.x<0){const i=Math.abs(e.position.x);if(t.position.x=t.position.x-i,tt(r.width)){const a=Number(r.width.replace("px",""));r.width=`${a+i}px`}else r.width+=i;e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);if(t.position.y=t.position.y-i,tt(r.height)){const a=Number(r.height.replace("px",""));r.height=`${a+i}px`}else r.height+=i;e.position.y=0}t.dimensions.width=Number(r.width.toString().replace("px","")),t.dimensions.height=Number(r.height.toString().replace("px","")),At(t.style)?t.style=i=>{const a=t.style;return{...a(i),...r}}:t.style={...t.style,...r}}}}function Rr(e,t){e.filter(o=>o.type==="add"||o.type==="remove").forEach(o=>{if(o.type==="add")t.findIndex(r=>r.id===o.item.id)===-1&&t.push(o.item);else if(o.type==="remove"){const r=t.findIndex(i=>i.id===o.id);r!==-1&&t.splice(r,1)}});const n=t.map(o=>o.id);return t.forEach(o=>{var r,i;const a=e.filter(l=>l.id===o.id);for(const l of a)switch(l.type){case"select":o.selected=l.selected;break;case"position":if(vt(o)&&(typeof l.position<"u"&&(o.position=l.position),typeof l.dragging<"u"&&(o.dragging=l.dragging),o.expandParent&&o.parentNode)){const u=t[n.indexOf(o.parentNode)];u&&vt(u)&&co(o,u)}break;case"dimensions":if(vt(o)){if(typeof l.dimensions<"u"&&(o.dimensions=l.dimensions),typeof l.updateStyle<"u"&&(o.style={...o.style||{},width:`${(r=l.dimensions)==null?void 0:r.width}px`,height:`${(i=l.dimensions)==null?void 0:i.height}px`}),typeof l.resizing<"u"&&(o.resizing=l.resizing),o.expandParent&&o.parentNode){const u=t[n.indexOf(o.parentNode)];u&&vt(u)&&(u.initialized?co(o,u):yt(()=>{co(o,u)}))}o.initialized||(o.initialized=!0)}break}}),t}function Ue(e,t){return{id:e,type:"select",selected:t}}function Vr(e){return{item:e,type:"add"}}function ho(e){return{id:e,type:"remove"}}function fo(e,t){return e.reduce((n,o)=>{let r=t.includes(o.id);ge(o.selectable)&&!o.selectable&&(r=!1);const i=vt(o)?"changedNodes":"changedEdges";return!o.selected&&r?n[i].push(Ue(o.id,!0)):o.selected&&!r&&n[i].push(Ue(o.id,!1)),n},{changedNodes:[],changedEdges:[]})}function F(e=()=>{}){const t=le(new Set);e&&t.value.add(e);const n=o=>{t.value.delete(o)};return{on:o=>{t.value.has(e)&&t.value.delete(e),t.value.add(o);const r=()=>n(o);return tn(r),{off:r}},off:n,trigger:o=>Promise.all(Array.from(t.value).map(r=>r(o))),fns:t}}function Hr(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function Ld(e,t,n,o,r){return e.filter(i=>(i.selected||i.id===r)&&(!i.parentNode||!pa(i,o))&&(i.draggable||t&&typeof i.draggable>"u")).map(i=>{var a,l;return wt({id:i.id,position:i.position||{x:0,y:0},distance:{x:n.x-((a=i.computedPosition)==null?void 0:a.x)||0,y:n.y-((l=i.computedPosition)==null?void 0:l.y)||0},from:i.computedPosition,extent:i.extent,parentNode:i.parentNode,dimensions:i.dimensions})})}function po({id:e,dragItems:t,findNode:n}){const o=t.reduce((r,i)=>{const a=n(i.id);return a&&r.push(a),r},[]);return[e?o.find(r=>r.id===e):o[0],o]}function va(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function Fd(e,t,n){const[o,r,i,a]=typeof e!="string"?va(e.padding):[0,0,0,0];return n&&Ze(n.computedPosition.x)&&Ze(n.computedPosition.y)&&Ze(n.dimensions.width)&&Ze(n.dimensions.height)?[[n.computedPosition.x+a,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-r,n.computedPosition.y+n.dimensions.height-i]]:!1}function Gd(e,t,n,o){let r=e.extent||n;if(r==="parent"||!Array.isArray(r)&&(r==null?void 0:r.range)==="parent")if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const i=Fd(r,e,o);i&&(r=i)}else t(new $e(xe.NODE_EXTENT_INVALID,e.id)),r=n;else if(Array.isArray(r)){const i=(o==null?void 0:o.computedPosition.x)||0,a=(o==null?void 0:o.computedPosition.y)||0;r=[[r[0][0]+i,r[0][1]+a],[r[1][0]+i,r[1][1]+a]]}else if(r!=null&&r.range&&Array.isArray(r.range)){const[i,a,l,u]=va(r.padding),s=(o==null?void 0:o.computedPosition.x)||0,c=(o==null?void 0:o.computedPosition.y)||0;r=[[r.range[0][0]+s+u,r.range[0][1]+c+i],[r.range[1][0]+s-a,r.range[1][1]+c-l]]}return r}function Yd({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function Wo(e,t,n,o,r){const i=Yd(e.dimensions,Gd(e,n,o,r)),a=la(t,i);return{position:{x:a.x-((r==null?void 0:r.computedPosition.x)||0),y:a.y-((r==null?void 0:r.computedPosition.y)||0)},computedPosition:a}}function Lr(e,t,n){const o=((n==null?void 0:n.x)??0)+t.x,r=((n==null?void 0:n.y)??0)+t.y,i=(n==null?void 0:n.width)??t.width,a=(n==null?void 0:n.height)??t.height;switch(e){case K.Top:return{x:o+i/2,y:r};case K.Right:return{x:o+i,y:r+a/2};case K.Bottom:return{x:o+i/2,y:r+a};case K.Left:return{x:o,y:r+a/2}}}function Fr(e=[],t){return e.length?!t||e.length===1?e[0]:t&&e.find(n=>n.id===t)||null:null}function jd(e,t,n,o,r,i){const a=Lr(n,{...e.dimensions,...e.computedPosition},t),l=Lr(i,{...o.dimensions,...o.computedPosition},r);return{sourceX:a.x,sourceY:a.y,targetX:l.x,targetY:l.y}}function Ud({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:i,width:a,height:l,viewport:u}){const s={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+i)};s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const c=da({x:(0-u.x)/u.zoom,y:(0-u.y)/u.zoom,width:a/u.zoom,height:l/u.zoom}),d=Math.max(0,Math.min(c.x2,s.x2)-Math.max(c.x,s.x)),f=Math.max(0,Math.min(c.y2,s.y2)-Math.max(c.y,s.y));return Math.ceil(d*f)>0}function Xd(e,t,n=!1){const o=Ze(e.zIndex);let r=o?e.zIndex:0;const i=t(e.source),a=t(e.target);return!i||!a?0:(n&&(r=o?e.zIndex:Math.max(i.computedPosition.z||0,a.computedPosition.z||0)),r)}var xe=(e=>(e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e))(xe||{});const Gr={MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`};let $e=class extends Error{constructor(t,...n){var o;super((o=Gr[t])==null?void 0:o.call(Gr,...n)),this.code=t}};function Ko(e){return"clientX"in e}function ut(e,t){var n,o;const r=Ko(e),i=r?e.clientX:(n=e.touches)==null?void 0:n[0].clientX,a=r?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}}function tt(e){return typeof e=="string"}function At(e){return typeof e=="function"}function Zd(e){return typeof e=="boolean"}function Ze(e){return typeof e=="number"}function ma(){return{handleDomNode:null,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null}}function go(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function Yr(e,t,n,o){return(t[n]||[]).reduce((r,i)=>{var a,l;return`${e.id}-${i.id}-${n}`!==o&&r.push({id:i.id||null,type:n,nodeId:e.id,x:(((a=e.computedPosition)==null?void 0:a.x)??0)+i.x+i.width/2,y:(((l=e.computedPosition)==null?void 0:l.y)??0)+i.y+i.height/2,width:i.width,height:i.height}),r},[])}function qd(e,t,n,o,r,i){const{x:a,y:l}=ut(e),u=t.elementsFromPoint(a,l).find(h=>h.classList.contains("vue-flow__handle"));if(u){const h=u.getAttribute("data-nodeid");if(h){const p=Jo(void 0,u),g=u.getAttribute("data-handleid"),w=i({nodeId:h,id:g,type:p});if(w)return{handle:{id:g,type:p,nodeId:h,x:n.x,y:n.y},validHandleResult:w}}}let s=[],c=1/0;if(r.forEach(h=>{const p=Math.sqrt((h.x-n.x)**2+(h.y-n.y)**2);if(p<=o){const g=i(h);p<=c&&(p<c?s=[{handle:h,validHandleResult:g}]:p===c&&s.push({handle:h,validHandleResult:g}),c=p)}}),!s.length)return{handle:null,validHandleResult:ma()};if(s.length===1)return s[0];const d=s.some(({validHandleResult:h})=>h.isValid),f=s.some(({handle:h})=>h.type==="target");return s.find(({handle:h,validHandleResult:p})=>f?h.type==="target":d?p.isValid:!0)||s[0]}function jr(e,t,n,o,r,i,a,l,u,s){const c=i==="target",d=l.querySelector(`.vue-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:f,y:h}=ut(e),p=l.elementFromPoint(f,h),g=p!=null&&p.classList.contains("vue-flow__handle")?p:d,w=ma();if(g){const x=Jo(void 0,g),E=g.getAttribute("data-nodeid"),N=g.getAttribute("data-handleid"),v=g.classList.contains("connectable"),M=g.classList.contains("connectableend"),m={source:c?E:o,sourceHandle:c?N:r,target:c?o:E,targetHandle:c?r:N};w.connection=m;const D=v&&M&&(n===dt.Strict?c&&x==="source"||!c&&x==="target":E!==o||N!==r);w.endHandle={nodeId:E,handleId:N,type:x},D&&(w.isValid=a(m,{edges:u,sourceNode:s(m.source),targetNode:s(m.target)}))}return w}function Wd({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce((r,i)=>{const{handleBounds:a}=i;let l=[],u=[];return a&&(l=Yr(i,a,"source",`${t}-${n}-${o}`),u=Yr(i,a,"target",`${t}-${n}-${o}`)),r.push(...l,...u),r},[])}function Jo(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Kd(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}const Jd=["production","prod"];function ya(e,...t){Jd.includes("production")||console.warn(`[Vue Flow]: ${e}`,...t)}function Ur(e,t,n){const o=t.querySelectorAll(`.vue-flow__handle${e}`);if(!o||!o.length)return;const r=Array.from(o),i=t.getBoundingClientRect();return r.map(a=>{const l=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),position:a.getAttribute("data-handlepos"),x:(l.left-i.left)/n,y:(l.top-i.top)/n,...Zn(a)}})}function Po(e,t,n,o,r,i=!1,a){r.value=!1,e.selected?(i||e.selected&&t)&&(o([e]),yt(a.blur)):n([e])}function ge(e){return typeof S(e)<"u"}function Qd(e,t,n){if(!e.source||!e.target)return n(new $e(xe.EDGE_INVALID,e.id)),!1;let o;return Ct(e)?o=e:o={...e,id:sa(e)},o=ua(o),Bd(o,t)?!1:o}function eh(e,t,n,o,r,i){if(!t.source||!t.target)return i(new $e(xe.EDGE_INVALID,e.id)),!1;const a=o(e.id);if(!a)return i(new $e(xe.EDGE_NOT_FOUND,e.id)),!1;const{id:l,...u}=e,s={...u,id:r?sa(t):l,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(a),1,s),s}function Xr(e,t,n,o){const r={},i=e.reduce((l,u)=>{if(!Gt(u))return o(new $e(xe.NODE_INVALID)),l;const s=zd(u,{...n(u.id),parentNode:u.parentNode});return u.parentNode&&(r[u.parentNode]=!0),l.concat(s)},[]),a=[...i,...t];for(const l of i){const u=a.find(s=>s.id===l.parentNode);l.parentNode&&!u&&o(new $e(xe.NODE_MISSING_PARENT,l.id,l.parentNode)),(l.parentNode||r[l.id])&&(r[l.id]&&(l.isParent=!0),u&&(u.isParent=!0))}return i}function wa(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:r,nodes:i,nodeExtent:a,viewport:l,autoPanOnNodeDrag:u,nodesDraggable:s,panBy:c,findNode:d,multiSelectionActive:f,nodesSelectionActive:h,selectNodesOnDrag:p,removeSelectedElements:g,addSelectedNodes:w,updateNodePositions:x,emits:E}=_e(),{onStart:N,onDrag:v,onStop:M,el:m,disabled:D,id:Y,selectable:L,dragHandle:z}=e,Q=le(!1);let J=[],ne,y=null,C={x:void 0,y:void 0},k={x:0,y:0},P=null,H=0,U=!1;const A=ef(),j=({x:W,y:ee})=>{C={x:W,y:ee};let I=!1;if(J=J.map(X=>{const R={x:W-X.distance.x,y:ee-X.distance.y};n.value&&(R.x=o.value[0]*Math.round(R.x/o.value[0]),R.y=o.value[1]*Math.round(R.y/o.value[1]));const{computedPosition:Z}=Wo(X,R,E.error,a.value,X.parentNode?d(X.parentNode):void 0);return I=I||X.position.x!==Z.x||X.position.y!==Z.y,X.position=Z,X}),!!I&&(x(J,!0,!0),Q.value=!0,P)){const[X,R]=po({id:Y,dragItems:J,findNode:d});v({event:P,node:X,nodes:R})}},T=()=>{if(!y)return;const[W,ee]=ga(k,y);if(W!==0||ee!==0){const I={x:(C.x??0)-W/l.value.zoom,y:(C.y??0)-ee/l.value.zoom};c({x:W,y:ee})&&j(I)}H=requestAnimationFrame(T)};return pe([()=>ae(D),m],([W,ee])=>{if(ee){const I=Ae(ee);W?I.on(".drag",null):(ne=Ls().on("start",X=>{var R;const Z=d(Y);!p.value&&!f.value&&Z&&(Z.selected||g()),Z&&ae(L)&&p.value&&Po(Z,f.value,w,g,h,!1,ee);const ue=A(X);if(C=ue,J=Ld(i.value,s.value,ue,d,Y),J.length){const[ve,be]=po({id:Y,dragItems:J,findNode:d});N({event:X.sourceEvent,node:ve,nodes:be})}y=((R=t.value)==null?void 0:R.getBoundingClientRect())||null,k=ut(X.sourceEvent,y)}).on("drag",X=>{const R=A(X);!U&&u.value&&(U=!0,T()),(C.x!==R.xSnapped||C.y!==R.ySnapped)&&J.length&&(P=X.sourceEvent,k=ut(X.sourceEvent,y),j(R))}).on("end",X=>{if(Q.value=!1,U=!1,cancelAnimationFrame(H),J.length){x(J,!1,!1);const[R,Z]=po({id:Y,dragItems:J,findNode:d});M({event:X.sourceEvent,node:R,nodes:Z})}}).filter(X=>{const R=X.target,Z=ae(z);return!X.button&&(!r.value||!Hr(R,`.${r.value}`,ee)&&(!Z||Hr(R,Z,ee)))}),I.call(ne))}}),Q}function th(){return{edgesChange:F(),nodesChange:F(),nodeDoubleClick:F(),nodeClick:F(),nodeMouseEnter:F(),nodeMouseMove:F(),nodeMouseLeave:F(),nodeContextMenu:F(),nodeDragStart:F(),nodeDrag:F(),nodeDragStop:F(),nodesInitialized:F(),miniMapNodeClick:F(),miniMapNodeDoubleClick:F(),miniMapNodeMouseEnter:F(),miniMapNodeMouseMove:F(),miniMapNodeMouseLeave:F(),connect:F(),connectStart:F(),connectEnd:F(),clickConnectStart:F(),clickConnectEnd:F(),paneReady:F(),move:F(),moveStart:F(),moveEnd:F(),selectionDragStart:F(),selectionDrag:F(),selectionDragStop:F(),selectionContextMenu:F(),selectionStart:F(),selectionEnd:F(),viewportChangeStart:F(),viewportChange:F(),viewportChangeEnd:F(),paneScroll:F(),paneClick:F(),paneContextMenu:F(),paneMouseEnter:F(),paneMouseMove:F(),paneMouseLeave:F(),edgeContextMenu:F(),edgeMouseEnter:F(),edgeMouseMove:F(),edgeMouseLeave:F(),edgeDoubleClick:F(),edgeClick:F(),edgeUpdateStart:F(),edgeUpdate:F(),edgeUpdateEnd:F(),updateNodeInternals:F(),error:F(e=>ya(e.message))}}function nh(e,t){ll(()=>{for(const[n,o]of Object.entries(t.value)){const r=i=>{e(n,i)};o.on(r),tn(()=>{o.off(r)})}})}function _a(e,t){const n={};for(const o in e)t.includes(o)||Object.defineProperty(n,o,{enumerable:!0,get:()=>e[o]});return n}const oh=["data-id","data-handleid","data-nodeid","data-handlepos"],rh={name:"Handle",compatConfig:{MODE:3}},Bn=ce({...rh,props:{id:null,type:null,position:{default:K.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e){const t=_a(e,["position","connectable","connectableStart","connectableEnd","id"]),n=Nn(t,"type","source"),o=Nn(t,"isValidConnection",void 0),{connectionStartHandle:r,connectionClickStartHandle:i,connectionEndHandle:a,vueFlowRef:l,nodesConnectable:u,noDragClassName:s,noPanClassName:c}=_e(),{id:d,node:f,nodeEl:h,connectedEdges:p}=of(),g=le(),w=oe(()=>e.id??`${d}__handle-${e.position}`),x=oe(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),E=oe(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),{handlePointerDown:N,handleClick:v}=Ca({nodeId:d,handleId:w,isValidConnection:o,type:n}),M=oe(()=>tt(e.connectable)&&e.connectable==="single"?!p.value.some(z=>{const Q=z[`${n.value}Handle`];return z[n.value]!==d?!1:Q?Q===w.value:!0}):At(e.connectable)?e.connectable(f,p.value):ge(e.connectable)?e.connectable:u.value),m=oe(()=>{var z,Q,J,ne,y,C;return((z=r.value)==null?void 0:z.nodeId)===d&&((Q=r.value)==null?void 0:Q.handleId)===w.value&&((J=r.value)==null?void 0:J.type)===n.value||((ne=a.value)==null?void 0:ne.nodeId)===d&&((y=a.value)==null?void 0:y.handleId)===w.value&&((C=a.value)==null?void 0:C.type)===n.value}),D=oe(()=>{var z,Q,J;return((z=i.value)==null?void 0:z.nodeId)===d&&((Q=i.value)==null?void 0:Q.handleId)===w.value&&((J=i.value)==null?void 0:J.type)===n.value});Me(()=>f.initialized).toBe(!0,{flush:"post"}).then(()=>{var z;const Q=(z=f.handleBounds[n.value])==null?void 0:z.find(H=>H.id===w.value);if(!l.value||Q)return;const J=l.value.querySelector(".vue-flow__transformationpane");if(!h.value||!g.value||!J||!w.value)return;const ne=h.value.getBoundingClientRect(),y=g.value.getBoundingClientRect(),C=window.getComputedStyle(J),{m22:k}=new window.DOMMatrixReadOnly(C.transform),P={id:w.value,position:e.position,x:(y.left-ne.left)/k,y:(y.top-ne.top)/k,...Zn(g.value)};f.handleBounds[n.value]=[...f.handleBounds[n.value]??[],P]});function Y(z){const Q=Ko(z);M.value&&x.value&&(Q&&z.button===0||!Q)&&N(z)}function L(z){!d||!i.value&&!x.value||M.value&&v(z)}return(z,Q)=>(G(),te("div",{ref_key:"handle",ref:g,"data-id":`${S(d)}-${S(w)}-${S(n)}`,"data-handleid":S(w),"data-nodeid":S(d),"data-handlepos":e.position,class:qe(["vue-flow__handle",[`vue-flow__handle-${e.position}`,`vue-flow__handle-${S(w)}`,S(s),S(c),S(n),{connectable:S(M),connecting:S(D),connectablestart:S(x),connectableend:S(E),connectionindicator:S(M)&&(S(x)&&!S(m)||S(E)&&S(m))}]]),onMousedown:Y,onTouchstartPassive:Y,onClick:L},[he(z.$slots,"default",{id:e.id})],42,oh))}}),Wn=function({sourcePosition:e=K.Bottom,targetPosition:t=K.Top,label:n,connectable:o=!0,isValidTargetPos:r,isValidSourcePos:i}){return[fe(Bn,{type:"target",position:t,connectable:o,isValidConnection:r}),typeof n!="string"&&n?fe(n):fe("div",{innerHTML:n}),fe(Bn,{type:"source",position:e,connectable:o,isValidConnection:i})]};Wn.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable"];Wn.inheritAttrs=!1;Wn.compatConfig={MODE:3};const ih=Wn,Kn=function({sourcePosition:e=K.Bottom,label:t,connectable:n=!0,isValidSourcePos:o}){return[typeof t!="string"&&t?fe(t):fe("div",{innerHTML:t}),fe(Bn,{type:"source",position:e,connectable:n,isValidConnection:o})]};Kn.props=["sourcePosition","label","isValidSourcePos","connectable"];Kn.inheritAttrs=!1;Kn.compatConfig={MODE:3};const ah=Kn,Jn=function({targetPosition:e=K.Top,label:t,connectable:n=!0,isValidTargetPos:o}){return[fe(Bn,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof t!="string"&&t?fe(t):fe("div",{innerHTML:t})]};Jn.props=["targetPosition","label","isValidTargetPos","connectable"];Jn.inheritAttrs=!1;Jn.compatConfig={MODE:3};const lh=Jn,Zr=Symbol("vueFlow"),ba=Symbol("nodeId"),xa=Symbol("nodeRef"),uh=Symbol("edgeId"),sh=Symbol("edgeRef"),Qn=Symbol("slots"),ch=ce({name:"Node",compatConfig:{MODE:3},props:["name","type","id","draggable","selectable","focusable","connectable","node","resizeObserver"],setup(e){St(ba,e.id);const{id:t,edges:n,noPanClassName:o,selectNodesOnDrag:r,nodesSelectionActive:i,multiSelectionActive:a,emits:l,findNode:u,removeSelectedNodes:s,addSelectedNodes:c,updateNodeDimensions:d,onUpdateNodeInternals:f,getIntersectingNodes:h,getNodeTypes:p,nodeExtent:g,elevateNodesOnSelect:w,disableKeyboardA11y:x,ariaLiveMessage:E,snapToGrid:N,snapGrid:v}=_e(),M=Aa(),m=Ft(e,"node"),D=oe(()=>u(m.value.parentNode)),Y=oe(()=>qn([m.value],n.value)),L=le(null);St(xa,L);const{emit:z,on:Q}=af(m.value,l),J=wa({id:e.id,el:L,disabled:()=>!e.draggable,selectable:()=>e.selectable,dragHandle:()=>m.value.dragHandle,onStart(I){z.dragStart({...I,intersections:h(m.value)})},onDrag(I){z.drag({...I,intersections:h(m.value)})},onStop(I){z.dragStop({...I,intersections:h(m.value)})}}),ne=oe(()=>m.value.class instanceof Function?m.value.class(m.value):m.value.class),y=oe(()=>{const I=(m.value.style instanceof Function?m.value.style(m.value):m.value.style)||{},X=m.value.width instanceof Function?m.value.width(m.value):m.value.width,R=m.value.height instanceof Function?m.value.height(m.value):m.value.height;return X&&(I.width=typeof X=="string"?X:`${X}px`),R&&(I.height=typeof R=="string"?R:`${R}px`),I}),C=()=>Number(m.value.zIndex??y.value.zIndex??0);return f(I=>{I.includes(e.id)&&P()}),nt(()=>{e.resizeObserver.observe(L.value)}),$i(()=>{e.resizeObserver.unobserve(L.value)}),pe([()=>m.value.type,()=>m.value.sourcePosition,()=>m.value.targetPosition],()=>{d([{id:e.id,nodeElement:L.value,forceUpdate:!0}])},{flush:"pre"}),pe([()=>m.value.position.x,()=>m.value.position.y,()=>{var I;return(I=D.value)==null?void 0:I.computedPosition.x},()=>{var I;return(I=D.value)==null?void 0:I.computedPosition.y},()=>{var I;return(I=D.value)==null?void 0:I.computedPosition.z},()=>C(),()=>m.value.selected,()=>m.value.dimensions.height,()=>m.value.dimensions.width,()=>{var I;return(I=D.value)==null?void 0:I.dimensions.height},()=>{var I;return(I=D.value)==null?void 0:I.dimensions.width}],([I,X,R,Z,ue,ve])=>{const be={x:I,y:X,z:ve+(w.value&&m.value.selected?1e3:0)};Ze(R)&&Ze(Z)?m.value.computedPosition=Hd({x:R,y:Z,z:ue},be):m.value.computedPosition=be},{flush:"pre",immediate:!0}),pe([()=>m.value.extent,g],([I,X],[R,Z])=>{(I!==R||X!==Z)&&k()}),m.value.extent==="parent"||typeof m.value.extent=="object"&&"range"in m.value.extent&&m.value.extent.range==="parent"?Me(()=>m.value.initialized).toBe(!0).then(k):k(),()=>fe("div",{ref:L,"data-id":m.value.id,class:["vue-flow__node",`vue-flow__node-${e.type===!1?"default":e.name}`,{[o.value]:e.draggable,dragging:J==null?void 0:J.value,selected:m.value.selected,selectable:e.selectable,parent:m.value.isParent},ne.value],style:{zIndex:m.value.computedPosition.z??C(),transform:`translate(${m.value.computedPosition.x}px,${m.value.computedPosition.y}px)`,pointerEvents:e.selectable||e.draggable?"all":"none",visibility:m.value.initialized?"visible":"hidden",...y.value},tabIndex:e.focusable?0:void 0,role:e.focusable?"button":void 0,"aria-describedby":x.value?void 0:`${ra}-${t}`,"aria-label":m.value.ariaLabel,onMouseenter:H,onMousemove:U,onMouseleave:A,onContextmenu:j,onClick:W,onDblclick:T,onKeydown:ee},[fe(e.type===!1?p.value.default:e.type,{id:m.value.id,type:m.value.type,data:m.value.data,events:{...m.value.events,...Q},selected:!!m.value.selected,resizing:!!m.value.resizing,dragging:J.value,connectable:e.connectable,position:m.value.position,dimensions:m.value.dimensions,isValidTargetPos:m.value.isValidTargetPos,isValidSourcePos:m.value.isValidSourcePos,parent:m.value.parentNode,zIndex:m.value.computedPosition.z,targetPosition:m.value.targetPosition,sourcePosition:m.value.sourcePosition,label:m.value.label,dragHandle:m.value.dragHandle,onUpdateNodeInternals:P})]);function k(){const I=m.value.computedPosition;N.value&&(I.x=v.value[0]*Math.round(I.x/v.value[0]),I.y=v.value[1]*Math.round(I.y/v.value[1]));const{computedPosition:X,position:R}=Wo(m.value,I,l.error,g.value,D.value);(m.value.computedPosition.x!==X.x||m.value.computedPosition.y!==X.y)&&(m.value.computedPosition={...m.value.computedPosition,...X}),(m.value.position.x!==R.x||m.value.position.y!==R.y)&&(m.value.position=R)}function P(){L.value&&d([{id:e.id,nodeElement:L.value,forceUpdate:!0}])}function H(I){J!=null&&J.value||z.mouseEnter({event:I,node:m.value,connectedEdges:Y.value})}function U(I){J!=null&&J.value||z.mouseMove({event:I,node:m.value,connectedEdges:Y.value})}function A(I){J!=null&&J.value||z.mouseLeave({event:I,node:m.value,connectedEdges:Y.value})}function j(I){return z.contextMenu({event:I,node:m.value,connectedEdges:Y.value})}function T(I){return z.doubleClick({event:I,node:m.value,connectedEdges:Y.value})}function W(I){e.selectable&&(!r.value||!e.draggable)&&Po(m.value,a.value,c,s,i,!1,L.value),z.click({event:I,node:m.value,connectedEdges:Y.value})}function ee(I){if(!To(I))if(aa.includes(I.key)&&e.selectable){const X=I.key==="Escape";Po(m.value,a.value,c,s,i,X,L.value)}else!x.value&&e.draggable&&m.value.selected&&xt[I.key]&&(E.value=`Moved selected node ${I.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~m.value.position.x}, y: ${~~m.value.position.y}`,M({x:xt[I.key].x,y:xt[I.key].y},I.shiftKey))}}}),dh=ch,hh=["transform"],fh=["width","height","x","y","rx","ry"],ph=["y"],gh={name:"EdgeText",compatConfig:{MODE:3}},vh=ce({...gh,props:{"aria-activedescendant":null,"aria-atomic":{type:[Boolean,String]},"aria-autocomplete":null,"aria-busy":{type:[Boolean,String]},"aria-checked":{type:[Boolean,String]},"aria-colcount":null,"aria-colindex":null,"aria-colspan":null,"aria-controls":null,"aria-current":{type:[Boolean,String]},"aria-describedby":null,"aria-details":null,"aria-disabled":{type:[Boolean,String]},"aria-dropeffect":null,"aria-errormessage":null,"aria-expanded":{type:[Boolean,String]},"aria-flowto":null,"aria-grabbed":{type:[Boolean,String]},"aria-haspopup":{type:[Boolean,String]},"aria-hidden":{type:[Boolean,String]},"aria-invalid":{type:[Boolean,String]},"aria-keyshortcuts":null,"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":null,"aria-modal":{type:[Boolean,String]},"aria-multiline":{type:[Boolean,String]},"aria-multiselectable":{type:[Boolean,String]},"aria-orientation":null,"aria-owns":null,"aria-placeholder":null,"aria-posinset":null,"aria-pressed":{type:[Boolean,String]},"aria-readonly":{type:[Boolean,String]},"aria-relevant":null,"aria-required":{type:[Boolean,String]},"aria-roledescription":null,"aria-rowcount":null,"aria-rowindex":null,"aria-rowspan":null,"aria-selected":{type:[Boolean,String]},"aria-setsize":null,"aria-sort":null,"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null,innerHTML:null,class:null,style:null,color:null,height:null,id:null,lang:null,max:null,media:null,method:null,min:null,name:null,target:null,type:null,width:null,role:null,tabindex:null,"accent-height":null,accumulate:null,additive:null,"alignment-baseline":null,allowReorder:null,alphabetic:null,amplitude:null,"arabic-form":null,ascent:null,attributeName:null,attributeType:null,autoReverse:null,azimuth:null,baseFrequency:null,"baseline-shift":null,baseProfile:null,bbox:null,begin:null,bias:null,by:null,calcMode:null,"cap-height":null,clip:null,"clip-path":null,clipPathUnits:null,"clip-rule":null,"color-interpolation":null,"color-interpolation-filters":null,"color-profile":null,"color-rendering":null,contentScriptType:null,contentStyleType:null,cursor:null,cx:null,cy:null,d:null,decelerate:null,descent:null,diffuseConstant:null,direction:null,display:null,divisor:null,"dominant-baseline":null,dur:null,dx:null,dy:null,edgeMode:null,elevation:null,"enable-background":null,end:null,exponent:null,externalResourcesRequired:null,fill:null,"fill-opacity":null,"fill-rule":null,filter:null,filterRes:null,filterUnits:null,"flood-color":null,"flood-opacity":null,focusable:null,"font-family":null,"font-size":null,"font-size-adjust":null,"font-stretch":null,"font-style":null,"font-variant":null,"font-weight":null,format:null,from:null,fx:null,fy:null,g1:null,g2:null,"glyph-name":null,"glyph-orientation-horizontal":null,"glyph-orientation-vertical":null,glyphRef:null,gradientTransform:null,gradientUnits:null,hanging:null,"horiz-adv-x":null,"horiz-origin-x":null,href:null,ideographic:null,"image-rendering":null,in2:null,in:null,intercept:null,k1:null,k2:null,k3:null,k4:null,k:null,kernelMatrix:null,kernelUnitLength:null,kerning:null,keyPoints:null,keySplines:null,keyTimes:null,lengthAdjust:null,"letter-spacing":null,"lighting-color":null,limitingConeAngle:null,local:null,"marker-end":null,markerHeight:null,"marker-mid":null,"marker-start":null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,mode:null,numOctaves:null,offset:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,"overline-position":null,"overline-thickness":null,"paint-order":null,"panose-1":null,pathLength:null,patternContentUnits:null,patternTransform:null,patternUnits:null,"pointer-events":null,points:null,pointsAtX:null,pointsAtY:null,pointsAtZ:null,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,r:null,radius:null,refX:null,refY:null,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:null,requiredFeatures:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,"shape-rendering":null,slope:null,spacing:null,specularConstant:null,specularExponent:null,speed:null,spreadMethod:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,"stop-color":null,"stop-opacity":null,"strikethrough-position":null,"strikethrough-thickness":null,string:null,stroke:null,"stroke-dasharray":null,"stroke-dashoffset":null,"stroke-linecap":null,"stroke-linejoin":null,"stroke-miterlimit":null,"stroke-opacity":null,"stroke-width":null,surfaceScale:null,systemLanguage:null,tableValues:null,targetX:null,targetY:null,"text-anchor":null,"text-decoration":null,textLength:null,"text-rendering":null,to:null,transform:null,u1:null,u2:null,"underline-position":null,"underline-thickness":null,unicode:null,"unicode-bidi":null,"unicode-range":null,"unitsPer-em":null,"v-alphabetic":null,values:null,"vector-effect":null,version:null,"vert-adv-y":null,"vert-origin-x":null,"vert-origin-y":null,"v-hanging":null,"v-ideographic":null,viewBox:null,viewTarget:null,visibility:null,"v-mathematical":null,widths:null,"word-spacing":null,"writing-mode":null,x1:null,x2:null,x:null,xChannelSelector:null,"x-height":null,xlinkActuate:null,xlinkArcrole:null,xlinkHref:null,xlinkRole:null,xlinkShow:null,xlinkTitle:null,xlinkType:null,xmlns:null,y1:null,y2:null,y:null,yChannelSelector:null,z:null,zoomAndPan:null,label:null,labelStyle:{default:{}},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:{}},labelBgPadding:{default:[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=le({x:0,y:0,width:0,height:0}),n=le(null),o=oe(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);nt(r),pe([()=>e.x,()=>e.y,n,()=>e.label],r);function r(){if(!n.value)return;const i=n.value.getBBox();(i.width!==t.value.width||i.height!==t.value.height)&&(t.value=i)}return(i,a)=>(G(),te("g",{transform:S(o),class:"vue-flow__edge-textwrapper"},[e.labelShowBg?(G(),te("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*e.labelBgPadding[0]}px`,height:`${t.value.height+2*e.labelBgPadding[1]}px`,x:-e.labelBgPadding[0],y:-e.labelBgPadding[1],style:Le(e.labelBgStyle),rx:e.labelBgBorderRadius,ry:e.labelBgBorderRadius},null,12,fh)):me("",!0),se("text",dl(i.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:e.labelStyle}),[he(i.$slots,"default",{},()=>[S(tt)(e.label)?(G(),te(Te,{key:1},[cl(Re(e.label),1)],64)):(G(),ye(et(e.label),{key:0}))])],16,ph)],8,hh))}}),mh=["id","d","marker-end","marker-start"],yh=["d","stroke-width"],wh={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},eo=ce({...wh,props:{labelStyle:null,labelShowBg:{type:Boolean,default:!0},labelBgStyle:null,labelBgPadding:null,labelBgBorderRadius:null,id:null,labelX:null,labelY:null,path:null,label:null,markerStart:null,markerEnd:null,interactionWidth:{default:20},style:null,ref:null},setup(e,{expose:t}){const n=_a(e,["interactionWidth","labelShowBg"]),o=le(null),r=le(null),i=le(null),a=sl();return t({pathEl:o,interactionEl:r,labelEl:i}),(l,u)=>(G(),te(Te,null,[se("path",{id:e.id,ref_key:"pathEl",ref:o,d:e.path,style:Le(S(n).style),class:qe(["vue-flow__edge-path",S(a).class]),"marker-end":e.markerEnd,"marker-start":e.markerStart},null,14,mh),e.interactionWidth?(G(),te("path",{key:0,ref_key:"interactionEl",ref:r,fill:"none",d:e.path,"stroke-width":e.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,yh)):me("",!0),e.label&&S(Ze)(e.labelX)&&S(Ze)(e.labelY)?(G(),ye(vh,{key:1,ref_key:"labelEl",ref:i,x:e.labelX,y:e.labelY,label:e.label,"label-show-bg":e.labelShowBg,"label-bg-style":e.labelBgStyle,"label-bg-padding":e.labelBgPadding,"label-bg-border-radius":e.labelBgBorderRadius,"label-style":e.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):me("",!0)],64))}});function $a({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,a=Math.abs(o-t)/2,l=o<t?o+a:o-a;return[i,l,r,a]}function Ea({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:a,targetControlY:l}){const u=e*.125+r*.375+a*.375+n*.125,s=t*.125+i*.375+l*.375+o*.125,c=Math.abs(u-e),d=Math.abs(s-t);return[u,s,c,d]}function fn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function qr({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){let a,l;switch(e){case K.Left:a=t-fn(t-o,i),l=n;break;case K.Right:a=t+fn(o-t,i),l=n;break;case K.Top:a=t,l=n-fn(n-r,i);break;case K.Bottom:a=t,l=n+fn(r-n,i);break}return[a,l]}function Sa({sourceX:e,sourceY:t,sourcePosition:n=K.Bottom,targetX:o,targetY:r,targetPosition:i=K.Top,curvature:a=.25}){const[l,u]=qr({pos:n,x1:e,y1:t,x2:o,y2:r,c:a}),[s,c]=qr({pos:i,x1:o,y1:r,x2:e,y2:t,c:a}),[d,f,h,p]=Ea({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:l,sourceControlY:u,targetControlX:s,targetControlY:c});return[`M${e},${t} C${l},${u} ${s},${c} ${o},${r}`,d,f,h,p]}function Wr({pos:e,x1:t,y1:n,x2:o,y2:r}){let i,a;switch(e){case K.Left:case K.Right:i=.5*(t+o),a=n;break;case K.Top:case K.Bottom:i=t,a=.5*(n+r);break}return[i,a]}function ka({sourceX:e,sourceY:t,sourcePosition:n=K.Bottom,targetX:o,targetY:r,targetPosition:i=K.Top}){const[a,l]=Wr({pos:n,x1:e,y1:t,x2:o,y2:r}),[u,s]=Wr({pos:i,x1:o,y1:r,x2:e,y2:t}),[c,d,f,h]=Ea({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:s});return[`M${e},${t} C${a},${l} ${u},${s} ${o},${r}`,c,d,f,h]}const Kr={[K.Left]:{x:-1,y:0},[K.Right]:{x:1,y:0},[K.Top]:{x:0,y:-1},[K.Bottom]:{x:0,y:1}};function _h({source:e,sourcePosition:t=K.Bottom,target:n}){return t===K.Left||t===K.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Jr(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function bh({source:e,sourcePosition:t=K.Bottom,target:n,targetPosition:o=K.Top,center:r,offset:i}){const a=Kr[t],l=Kr[o],u={x:e.x+a.x*i,y:e.y+a.y*i},s={x:n.x+l.x*i,y:n.y+l.y*i},c=_h({source:u,sourcePosition:t,target:s}),d=c.x!==0?"x":"y",f=c[d];let h,p,g;const[w,x,E,N]=$a({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*l[d]===-1){p=r.x||w,g=r.y||x;const v=[{x:p,y:u.y},{x:p,y:s.y}],M=[{x:u.x,y:g},{x:s.x,y:g}];a[d]===f?h=d==="x"?v:M:h=d==="x"?M:v}else{const v=[{x:u.x,y:s.y}],M=[{x:s.x,y:u.y}];if(d==="x"?h=a.x===f?M:v:h=a.y===f?v:M,t!==o){const m=d==="x"?"y":"x",D=a[d]===l[m],Y=u[m]>s[m],L=u[m]<s[m];(a[d]===1&&(!D&&Y||D&&L)||a[d]!==1&&(!D&&L||D&&Y))&&(h=d==="x"?v:M)}p=h[0].x,g=h[0].y}return[[e,u,...h,s,n],p,g,E,N]}function xh(e,t,n,o){const r=Math.min(Jr(e,t)/2,Jr(t,n)/2,o),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return`L${i} ${a}`;if(e.y===a){const s=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${i+r*s},${a}Q ${i},${a} ${i},${a+r*c}`}const l=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${i},${a+r*u}Q ${i},${a} ${i+r*l},${a}`}function Io({sourceX:e,sourceY:t,sourcePosition:n=K.Bottom,targetX:o,targetY:r,targetPosition:i=K.Top,borderRadius:a=5,centerX:l,centerY:u,offset:s=20}){const[c,d,f,h,p]=bh({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:i,center:{x:l,y:u},offset:s});return[c.reduce((g,w,x)=>{let E;return x>0&&x<c.length-1?E=xh(c[x-1],w,c[x+1],a):E=`${x===0?"M":"L"}${w.x} ${w.y}`,g+=E,g},""),d,f,h,p]}function $h({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,i,a,l]=$a({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,i,a,l]}const Eh=ce({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=Sa({...e,sourcePosition:e.sourcePosition??K.Bottom,targetPosition:e.targetPosition??K.Top});return fe(eo,{path:n,labelX:o,labelY:r,...t,...e})}}}),Sh=Eh,kh=ce({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=ka({...e,sourcePosition:e.sourcePosition??K.Bottom,targetPosition:e.targetPosition??K.Top});return fe(eo,{path:n,labelX:o,labelY:r,...t,...e})}}}),Nh=kh,Mh=ce({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=Io({...e,sourcePosition:e.sourcePosition??K.Bottom,targetPosition:e.targetPosition??K.Top});return fe(eo,{path:n,labelX:o,labelY:r,...t,...e})}}}),Na=Mh,Ch=ce({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>fe(Na,{...e,...t,borderRadius:0})}}),Ah=Ch,Ph=ce({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=$h(e);return fe(eo,{path:n,labelX:o,labelY:r,...t,...e})}}}),Ih=Ph;function Th(e,t,n){return n===K.Left?e-t:n===K.Right?e+t:e}function Oh(e,t,n){return n===K.Top?e-t:n===K.Bottom?e+t:e}const Qo=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=K.Top,type:r}){return fe("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${r}`,cx:Th(t,e,o),cy:Oh(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};Qo.props=["radius","centerX","centerY","position","type"];Qo.compatConfig={MODE:3};const Qr=Qo,zh=ce({name:"Edge",compatConfig:{MODE:3},props:["name","type","id","updatable","selectable","focusable","edge"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:r,emits:i,nodesSelectionActive:a,noPanClassName:l,getEdgeTypes:u,removeSelectedEdges:s,findEdge:c,findNode:d,isValidConnection:f}=_e(),h=Qh(e.edge,i),p=Ft(e,"edge"),g=le(!1),w=le(!1),x=le(""),E=le(null),N=le("source"),v=le(null);St(uh,e.id),St(sh,v);const M=oe(()=>p.value.class instanceof Function?p.value.class(p.value):p.value.class),m=oe(()=>p.value.style instanceof Function?p.value.style(p.value):p.value.style),{handlePointerDown:D}=Ca({nodeId:x,handleId:E,type:N,isValidConnection:f,edgeUpdaterType:N,onEdgeUpdate:z,onEdgeUpdateEnd:Q});return()=>{const T=d(p.value.source),W=d(p.value.target);if(!T||!W||!p.value||T.hidden||W.hidden)return null;let ee;o.value===dt.Strict?ee=T.handleBounds.source:ee=[...T.handleBounds.source||[],...T.handleBounds.target||[]];const I=Fr(ee,p.value.sourceHandle);let X;o.value===dt.Strict?X=W.handleBounds.target:X=[...W.handleBounds.target||[],...W.handleBounds.source||[]];const R=Fr(X,p.value.targetHandle),Z=I?I.position:K.Bottom,ue=R?R.position:K.Top,{sourceX:ve,sourceY:be,targetY:_,targetX:b}=jd(T,I,Z,W,R,ue);return p.value.sourceX=ve,p.value.sourceY=be,p.value.targetX=b,p.value.targetY=_,fe("g",{ref:v,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${e.type===!1?"default":e.name}`,l.value,M.value,{updating:g.value,selected:p.value.selected,animated:p.value.animated,inactive:!e.selectable}],onClick:ne,onContextmenu:y,onDblclick:C,onMouseenter:k,onMousemove:P,onMouseleave:H,onKeyDown:e.focusable?j:void 0,tabIndex:e.focusable?0:void 0,"aria-label":p.value.ariaLabel===null?void 0:p.value.ariaLabel||`Edge from ${p.value.source} to ${p.value.target}`,"aria-describedby":e.focusable?`${ia}-${t}`:void 0,role:e.focusable?"button":void 0},[w.value?null:fe(e.type===!1?u.value.default:e.type,{id:e.id,sourceNode:T,targetNode:W,source:p.value.source,target:p.value.target,type:p.value.type,updatable:e.updatable,selected:p.value.selected,animated:p.value.animated,label:p.value.label,labelStyle:p.value.labelStyle,labelShowBg:p.value.labelShowBg,labelBgStyle:p.value.labelBgStyle,labelBgPadding:p.value.labelBgPadding,labelBgBorderRadius:p.value.labelBgBorderRadius,data:p.value.data,events:{...p.value.events,...h.on},style:m.value,markerStart:`url(#${it(p.value.markerStart,t)})`,markerEnd:`url(#${it(p.value.markerEnd,t)})`,sourcePosition:Z,targetPosition:ue,sourceX:ve,sourceY:be,targetX:b,targetY:_,sourceHandleId:p.value.sourceHandle,targetHandleId:p.value.targetHandle,interactionWidth:p.value.interactionWidth}),[e.updatable==="source"||e.updatable===!0?[fe("g",{onMousedown:U,onMouseenter:Y,onMouseout:L},fe(Qr,{position:Z,centerX:ve,centerY:be,radius:r.value,type:"source","data-type":"source"}))]:null,e.updatable==="target"||e.updatable===!0?[fe("g",{onMousedown:A,onMouseenter:Y,onMouseout:L},fe(Qr,{position:ue,centerX:b,centerY:_,radius:r.value,type:"target","data-type":"target"}))]:null]])};function Y(){g.value=!0}function L(){g.value=!1}function z(T,W){h.emit.update({event:T,edge:p.value,connection:W})}function Q(T){h.emit.updateEnd({event:T,edge:p.value}),w.value=!1}function J(T,W){T.button===0&&(w.value=!0,x.value=W?p.value.target:p.value.source,E.value=(W?p.value.targetHandle:p.value.sourceHandle)??"",N.value=W?"target":"source",h.emit.updateStart({event:T,edge:p.value}),D(T))}function ne(T){const W={event:T,edge:p.value};e.selectable&&(a.value=!1,n([p.value])),h.emit.click(W)}function y(T){h.emit.contextMenu({event:T,edge:p.value})}function C(T){h.emit.doubleClick({event:T,edge:p.value})}function k(T){h.emit.mouseEnter({event:T,edge:p.value})}function P(T){h.emit.mouseMove({event:T,edge:p.value})}function H(T){h.emit.mouseLeave({event:T,edge:p.value})}function U(T){J(T,!0)}function A(T){J(T,!1)}function j(T){var W;aa.includes(T.key)&&e.selectable&&(T.key==="Escape"?((W=v.value)==null||W.blur(),s([c(e.id)])):n([c(e.id)]))}}}),Bh=zh,Dh={height:"0",width:"0"},Rh={name:"EdgeLabelRenderer",compatConfig:{MODE:3}},b0=ce({...Rh,setup(e){const{viewportRef:t}=_e(),n=Nn(()=>t.value.getElementsByClassName("vue-flow__edge-labels")[0]);return(o,r)=>(G(),te("svg",null,[(G(),te("foreignObject",Dh,[(G(),ye(rl,{to:S(n),disabled:!S(n)},[he(o.$slots,"default")],8,["to","disabled"]))]))]))}}),Vh={[K.Left]:K.Right,[K.Right]:K.Left,[K.Top]:K.Bottom,[K.Bottom]:K.Top},Hh=ce({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{connectionMode:t,connectionStartHandle:n,connectionEndHandle:o,connectionPosition:r,connectionLineType:i,connectionLineStyle:a,connectionLineOptions:l,connectionStatus:u,viewport:s,findNode:c}=_e(),d=(e=Et(Qn))==null?void 0:e["connection-line"];return()=>{var f,h,p,g,w,x;if(!n.value)return null;const E=c(n.value.nodeId);if(!E)return null;const N=n.value.handleId,v=n.value.type,M=((f=o.value)==null?void 0:f.handleId)&&c(o.value.nodeId)||null,m=(r.value.x-s.value.x)/s.value.zoom,D=(r.value.y-s.value.y)/s.value.zoom,Y=E.handleBounds;let L=Y==null?void 0:Y[v];if(t.value===dt.Loose&&(L=L||(Y==null?void 0:Y[v==="source"?"target":"source"])),!L)return null;const z=N?L.find(j=>j.id===N):L[0],Q=z?z.x+z.width/2:(E.dimensions.width??0)/2,J=z?z.y+z.height/2:E.dimensions.height??0,ne=(((h=E.computedPosition)==null?void 0:h.x)??0)+Q,y=(((p=E.computedPosition)==null?void 0:p.y)??0)+J,C=z==null?void 0:z.position,k=M&&((g=o.value)==null?void 0:g.handleId)&&((t.value===dt.Strict?(w=M.handleBounds[v==="source"?"target":"source"])==null?void 0:w.find(j=>{var T;return j.id===((T=o.value)==null?void 0:T.handleId)}):[...M.handleBounds.source||[],...M.handleBounds.target||[]].find(j=>{var T;return j.id===((T=o.value)==null?void 0:T.handleId)}))||((x=M.handleBounds[v??"target"])==null?void 0:x[0]))||null,P=C?Vh[C]:null;if(!C||!P)return null;const H=i.value??l.value.type;let U="";const A={sourceX:ne,sourceY:y,sourcePosition:C,targetX:m,targetY:D,targetPosition:P};return H===gt.Bezier?[U]=Sa(A):H===gt.Step?[U]=Io({...A,borderRadius:0}):H===gt.SmoothStep?[U]=Io(A):H===gt.SimpleBezier?[U]=ka(A):U=`M${ne},${y} ${m},${D}`,fe("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},fe("g",{class:"vue-flow__connection"},d?fe(d,{sourceX:ne,sourceY:y,sourcePosition:C,targetX:m,targetY:D,targetPosition:P,sourceNode:E,sourceHandle:z,targetNode:M,targetHandle:k,markerEnd:`url(#${it(l.value.markerEnd)})`,markerStart:`url(#${it(l.value.markerStart)})`,connectionStatus:u.value}):fe("path",{d:U,class:[l.value.class,u,"vue-flow__connection-path"],style:a.value||l.value.style,"marker-end":`url(#${it(l.value.markerEnd)})`,"marker-start":`url(#${it(l.value.markerStart)})`})))}}}),Lh=Hh,Fh=["tabIndex"],Gh={name:"NodesSelection",compatConfig:{MODE:3}},Yh=ce({...Gh,setup(e){const t=_e(),n=de(t,"emits"),o=de(t,"viewport"),r=de(t,"getSelectedNodes"),i=de(t,"noPanClassName"),a=de(t,"disableKeyboardA11y"),l=de(t,"userSelectionActive"),u=Aa(),s=le(null),c=wa({el:s,onStart(g){n.value.selectionDragStart(g)},onDrag(g){n.value.selectionDrag(g)},onStop(g){n.value.selectionDragStop(g)}});nt(()=>{var g;a.value||(g=s.value)==null||g.focus({preventScroll:!0})});const d=oe(()=>ha(r.value)),f=oe(()=>({width:`${d.value.width}px`,height:`${d.value.height}px`,top:`${d.value.y}px`,left:`${d.value.x}px`}));function h(g){n.value.selectionContextMenu({event:g,nodes:r.value})}function p(g){a.value||xt[g.key]&&u({x:xt[g.key].x,y:xt[g.key].y},g.shiftKey)}return(g,w)=>!S(l)&&S(d).width&&S(d).height?(G(),te("div",{key:0,class:qe(["vue-flow__nodesselection vue-flow__container",S(i)]),style:Le({transform:`translate(${S(o).x}px,${S(o).y}px) scale(${S(o).zoom})`})},[se("div",{ref_key:"el",ref:s,class:qe([{dragging:S(c)},"vue-flow__nodesselection-rect"]),style:Le(S(f)),tabIndex:S(a)?void 0:-1,onContextmenu:h,onKeydown:p},null,46,Fh)],6)):me("",!0)}}),jh={name:"UserSelection",compatConfig:{MODE:3}},Uh=ce({...jh,props:{userSelectionRect:null},setup(e){return(t,n)=>(G(),te("div",{class:"vue-flow__selection vue-flow__container",style:Le({width:`${e.userSelectionRect.width}px`,height:`${e.userSelectionRect.height}px`,transform:`translate(${e.userSelectionRect.x}px, ${e.userSelectionRect.y}px)`})},null,4))}}),Xh={input:ah,default:ih,output:lh},Zh={default:Sh,straight:Ih,step:Ah,smoothstep:Na,simplebezier:Nh};function qh(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:qo.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:zn.Free,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:gt.Bezier,style:{}},connectionMode:dt.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:NaN,y:NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:"Meta",zoomActivationKeyCode:"Meta",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:th(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,disableKeyboardA11y:!1,ariaLiveMessage:"",__experimentalFeatures:{nestedFlow:!1}}}function Ma(e){const t=qh();return e&&Object.keys(e).forEach(n=>{const o=e[n];ge(o)&&(t[n]=o)}),t}function Wh(e,t,n,o){let r=!1;const i=uf(e,t),a=_=>{const b=_??n.value??[];e.hooks.updateNodeInternals.trigger(b)},l=_=>{if(_)return e.nodes&&!n.value.length?e.nodes.find(b=>b.id===_):e.nodes[n.value.indexOf(_)]},u=_=>{if(_)return e.edges&&!o.value.length?e.edges.find(b=>b.id===_):e.edges[o.value.indexOf(_)]},s=(_,b,O)=>{const B=[];_.forEach($=>{var V,q;const re={id:$.id,type:"position",dragging:O,from:$.from};if(b&&(re.position=$.position,$.parentNode)){const ie=l($.parentNode);re.position={x:re.position.x-(((V=ie==null?void 0:ie.computedPosition)==null?void 0:V.x)??0),y:re.position.y-(((q=ie==null?void 0:ie.computedPosition)==null?void 0:q.y)??0)}}B.push(re)}),B!=null&&B.length&&e.hooks.nodesChange.trigger(B)},c=_=>{var b;if(!e.vueFlowRef)return;const O=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!O)return;let B;if((b=e.__experimentalFeatures)!=null&&b.nestedFlow){let V=[O],q=O,re;for(;!re&&q;)q=q.parentElement,re=q==null?void 0:q.classList.contains("vue-flow__transformationpane"),re&&(V=[q,...V]);V.forEach(ie=>{const Se=window.getComputedStyle(ie),{m22:ln}=new window.DOMMatrixReadOnly(Se.transform);B?B*=ln:B=ln})}else{const V=window.getComputedStyle(O),{m22:q}=new window.DOMMatrixReadOnly(V.transform);B=q}const $=_.reduce((V,q)=>{const re=l(q.id);if(re){const ie=Zn(q.nodeElement);ie.width&&ie.height&&(re.dimensions.width!==ie.width||re.dimensions.height!==ie.height||q.forceUpdate)&&(re.handleBounds.source=Ur(".source",q.nodeElement,B),re.handleBounds.target=Ur(".target",q.nodeElement,B),re.dimensions=ie,re.initialized=!0,V.push({id:re.id,type:"dimensions",dimensions:ie}))}return V},[]);e.fitViewOnInit&&!r&&(Me(()=>i.value.initialized).toBe(!0).then(()=>{i.value.fitView()}),r=!0),$.length&&e.hooks.nodesChange.trigger($)},d=(_,b)=>{const O=_.map(V=>V.id);let B,$=[];if(e.multiSelectionActive)B=O.map(V=>Ue(V,b));else{const V=fo([...e.nodes,...e.edges],O);B=V.changedNodes,$=V.changedEdges}B.length&&e.hooks.nodesChange.trigger(B),$.length&&e.hooks.edgesChange.trigger($)},f=(_,b)=>{const O=_.map(V=>V.id);let B=[],$;if(e.multiSelectionActive)$=O.map(V=>Ue(V,b));else{const V=fo([...e.nodes,...e.edges],O);B=V.changedNodes,$=V.changedEdges}B.length&&e.hooks.nodesChange.trigger(B),$.length&&e.hooks.edgesChange.trigger($)},h=(_,b)=>{const O=_.filter(Gt).map(q=>q.id),B=_.filter(Ct).map(q=>q.id);let{changedNodes:$,changedEdges:V}=fo([...e.nodes,...e.edges],[...O,...B]);e.multiSelectionActive&&($=O.map(q=>Ue(q,b)),V=B.map(q=>Ue(q,b))),$.length&&e.hooks.nodesChange.trigger($),V.length&&e.hooks.edgesChange.trigger(V)},p=_=>{d(_,!0)},g=_=>{f(_,!0)},w=_=>{h(_,!0)},x=_=>{if(!_.length)return d(_,!1);const b=_.map(O=>O.id).map(O=>Ue(O,!1));b.length&&e.hooks.nodesChange.trigger(b)},E=_=>{if(!_.length)return f(_,!1);const b=_.map(O=>O.id).map(O=>Ue(O,!1));b.length&&e.hooks.edgesChange.trigger(b)},N=_=>{if(!_||!_.length)return h([],!1);const{changedNodes:b,changedEdges:O}=_.reduce((B,$)=>{const V=Ue($.id,!1);return Gt($)?B.changedNodes.push(V):B.changedEdges.push(V),B},{changedNodes:[],changedEdges:[]});b.length&&e.hooks.nodesChange.trigger(b),O.length&&e.hooks.edgesChange.trigger(O)},v=_=>{var b;(b=e.d3Zoom)==null||b.scaleExtent([_,e.maxZoom]),e.minZoom=_},M=_=>{var b;(b=e.d3Zoom)==null||b.scaleExtent([e.minZoom,_]),e.maxZoom=_},m=_=>{var b;(b=e.d3Zoom)==null||b.translateExtent(_),e.translateExtent=_},D=_=>{e.nodeExtent=_,a(n.value)},Y=_=>{e.nodesDraggable=_,e.nodesConnectable=_,e.elementsSelectable=_},L=_=>{const b=_ instanceof Function?_(e.nodes):_;!e.initialized&&!b.length||(e.nodes=Xr(b,e.nodes,l,e.hooks.error.trigger))},z=_=>{const b=_ instanceof Function?_(e.edges):_;if(!e.initialized&&!b.length)return;const O=e.isValidConnection?b.filter(B=>e.isValidConnection(B,{edges:e.edges,sourceNode:l(B.source),targetNode:l(B.target)})):b;e.edges=O.reduce((B,$)=>{const V=l($.source),q=l($.target),re=!V||typeof V>"u",ie=!q||typeof q>"u";if(re&&ie?e.hooks.error.trigger(new $e(xe.EDGE_SOURCE_TARGET_MISSING,$.id,$.source,$.target)):(re&&e.hooks.error.trigger(new $e(xe.EDGE_SOURCE_MISSING,$.id,$.source)),ie&&e.hooks.error.trigger(new $e(xe.EDGE_TARGET_MISSING,$.id,$.target))),re||ie)return B;const Se=u($.id);return B.push({...ua($,Object.assign({},Se,e.defaultEdgeOptions)),sourceNode:V,targetNode:q}),B},[])},Q=_=>{const b=_ instanceof Function?_([...e.nodes,...e.edges]):_;!e.initialized&&!b.length||(L(b.filter(Gt)),z(b.filter(Ct)))},J=_=>{let b=_ instanceof Function?_(e.nodes):_;b=Array.isArray(b)?b:[b];const O=Xr(b,e.nodes,l,e.hooks.error.trigger).map(Vr);O.length&&e.hooks.nodesChange.trigger(O)},ne=_=>{let b=_ instanceof Function?_(e.edges):_;b=Array.isArray(b)?b:[b];const O=(e.isValidConnection?b.filter(B=>e.isValidConnection(B,{edges:e.edges,sourceNode:l(B.source),targetNode:l(B.target)})):b).reduce((B,$)=>{const V=Qd({...$,...e.defaultEdgeOptions},e.edges,e.hooks.error.trigger);if(V){const q=l(V.source),re=l(V.target),ie=!q||typeof q>"u",Se=!re||typeof re>"u";if(ie&&Se?e.hooks.error.trigger(new $e(xe.EDGE_SOURCE_TARGET_MISSING,V.id,V.source,V.target)):(ie&&e.hooks.error.trigger(new $e(xe.EDGE_SOURCE_MISSING,V.id,V.source)),Se&&e.hooks.error.trigger(new $e(xe.EDGE_TARGET_MISSING,V.id,V.target))),ie||Se)return B;B.push(Vr({...V,sourceNode:q,targetNode:re}))}return B},[]);O.length&&e.hooks.edgesChange.trigger(O)},y=(_,b=!0)=>{let O=_ instanceof Function?_(e.nodes):_;O=Array.isArray(O)?O:[O];const B=[],$=[];O.forEach(V=>{const q=typeof V=="string"?l(V):V;if(q&&!(ge(q.deletable)&&!q.deletable)&&(B.push(ho(q.id)),b)){const re=qn([q],e.edges).filter(ie=>ge(ie.deletable)?ie.deletable:!0);$.push(...re.map(ie=>ho(ie.id)))}}),$.length&&e.hooks.edgesChange.trigger($),B.length&&e.hooks.nodesChange.trigger(B)},C=_=>{let b=_ instanceof Function?_(e.edges):_;b=Array.isArray(b)?b:[b];const O=[];b.forEach(B=>{const $=typeof B=="string"?u(B):B;$&&(ge($.deletable)&&!$.deletable||O.push(ho(typeof B=="string"?B:B.id)))}),e.hooks.edgesChange.trigger(O)},k=(_,b,O=!0)=>eh(_,b,e.edges,u,O,e.hooks.error.trigger),P=_=>Rr(_,e.nodes),H=_=>Rr(_,e.edges),U=(_,b,O,B=!1)=>{B?e.connectionClickStartHandle=_:e.connectionStartHandle=_,e.connectionEndHandle=null,e.connectionStatus=null,b&&(e.connectionPosition=b)},A=(_,b=null,O=null)=>{e.connectionStartHandle&&(e.connectionPosition=_,e.connectionEndHandle=b,e.connectionStatus=O)},j=(_,b)=>{e.connectionPosition={x:NaN,y:NaN},e.connectionEndHandle=null,e.connectionStatus=null,b?e.connectionClickStartHandle=null:e.connectionStartHandle=null},T=_=>{const b=Od(_),O=b?null:l(_.id);return!b&&!O?[null,null,b]:[b?_:Or(O),O,b]},W=(_,b=!0,O)=>{const[B,$,V]=T(_);return B?(O||e.nodes).filter(q=>{if(!V&&(q.id===$.id||!q.computedPosition))return!1;const re=Or(q),ie=Ao(re,B);return b&&ie>0||ie>=Number(_.width)*Number(_.height)}):[]},ee=(_,b,O=!0)=>{const[B]=T(_);if(!B)return!1;const $=Ao(B,b);return O&&$>0||$>=Number(_.width)*Number(_.height)},I=_=>{const{viewport:b,dimensions:O,d3Zoom:B,d3Selection:$,translateExtent:V}=e;if(!B||!$||!_.x&&!_.y)return!1;const q=Mt.translate(b.x+_.x,b.y+_.y).scale(b.zoom),re=[[0,0],[O.width,O.height]],ie=B.constrain()(q,re,V),Se=e.viewport.x!==ie.x||e.viewport.y!==ie.y||e.viewport.zoom!==ie.k;return B.transform($,ie),Se},X=_=>{const b=_ instanceof Function?_(e):_,O=["modelValue","nodes","edges","maxZoom","minZoom","translateExtent","nodeExtent","hooks","defaultEdgeOptions"],B=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];ge(b.defaultEdgeOptions)&&(e.defaultEdgeOptions=b.defaultEdgeOptions);const $=b.modelValue||b.nodes||b.edges?[]:void 0;$&&(b.modelValue&&$.push(...b.modelValue),b.nodes&&$.push(...b.nodes),b.edges&&$.push(...b.edges),Q($));const V=()=>{ge(b.maxZoom)&&M(b.maxZoom),ge(b.minZoom)&&v(b.minZoom),ge(b.translateExtent)&&m(b.translateExtent),ge(b.nodeExtent)&&D(b.nodeExtent)};Object.keys(b).forEach(q=>{const re=q,ie=b[re];![...O,...B].includes(re)&&ge(ie)&&(e[re]=ie)}),e.d3Zoom?V():Me(()=>e.d3Zoom).not.toBeUndefined().then(V),e.initialized||(e.initialized=!0)},R=async(_={padding:.1})=>{await Me(()=>i.value.initialized).toBe(!0),i.value.fitView(_)},Z=async _=>{await Me(()=>i.value.initialized).toBe(!0),i.value.zoomIn(_)},ue=async _=>{await Me(()=>i.value.initialized).toBe(!0),i.value.zoomOut(_)},ve=async(_,b)=>{await Me(()=>i.value.initialized).toBe(!0),i.value.zoomTo(_,b)},be=async(_,b)=>{await Me(()=>i.value.initialized).toBe(!0),i.value.setTransform(_,b)};return{updateNodePositions:s,updateNodeDimensions:c,setElements:Q,setNodes:L,setEdges:z,addNodes:J,addEdges:ne,removeNodes:y,removeEdges:C,findNode:l,findEdge:u,updateEdge:k,applyEdgeChanges:H,applyNodeChanges:P,addSelectedElements:w,addSelectedNodes:p,addSelectedEdges:g,setMinZoom:v,setMaxZoom:M,setTranslateExtent:m,setNodeExtent:D,removeSelectedElements:N,removeSelectedNodes:x,removeSelectedEdges:E,startConnection:U,updateConnection:A,endConnection:j,setInteractive:Y,setState:X,getIntersectingNodes:W,isNodeIntersecting:ee,panBy:I,fitView:R,zoomIn:Z,zoomOut:ue,zoomTo:ve,setTransform:be,getTransform:()=>i.value.getTransform(),setCenter:async(_,b,O)=>{await Me(()=>i.value.initialized).toBe(!0),i.value.setCenter(_,b,O)},fitBounds:async(_,b)=>{await Me(()=>i.value.initialized).toBe(!0),i.value.fitBounds(_,b)},project:_=>i.value.project(_),toObject:()=>JSON.parse(JSON.stringify({nodes:e.nodes.map(_=>{const{computedPosition:b,handleBounds:O,selected:B,dimensions:$,isParent:V,resizing:q,dragging:re,initialized:ie,...Se}=_;return Se}),edges:e.edges.map(_=>{const{selected:b,sourceNode:O,targetNode:B,...$}=_;return $}),position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom})),fromObject:_=>{const{nodes:b,edges:O,position:B,zoom:$}=_;b&&L(b),O&&z(O),B&&be({x:B[0],y:B[1],zoom:$||1})},updateNodeInternals:a,$reset:()=>{const _=Ma();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const b=Mt.translate(_.defaultViewport.x??0,_.defaultViewport.y??0).scale(ht(_.defaultViewport.zoom??1,_.minZoom,_.maxZoom)),O=e.viewportRef.getBoundingClientRect(),B=[[0,0],[O.width,O.height]],$=e.d3Zoom.constrain()(b,B,_.translateExtent);e.d3Zoom.transform(e.d3Selection,$)}X(_)},$destroy:()=>{}}}function Kh(e,t,n){const o=oe(()=>g=>e.nodes&&!t.value.length?e.nodes.find(w=>w.id===g):e.nodes[t.value.indexOf(g)]),r=oe(()=>g=>e.edges&&!n.value.length?e.edges.find(w=>w.id===g):e.edges[n.value.indexOf(g)]),i=oe(()=>{var g;const w={...Zh,...e.edgeTypes},x=Object.keys(w);return(g=e.edges)==null||g.forEach(E=>E.type&&!x.includes(E.type)&&(w[E.type]=E.type)),w}),a=oe(()=>{var g;const w={...Xh,...e.nodeTypes},x=Object.keys(w);return(g=e.nodes)==null||g.forEach(E=>E.type&&!x.includes(E.type)&&(w[E.type]=E.type)),w}),l=oe(()=>{const g=e.nodes.filter(w=>!w.hidden);return e.onlyRenderVisibleElements?g&&fa(g,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):g??[]}),u=(g,w,x)=>{if(w=w??o.value(g.source),x=x??o.value(g.target),!w||!x){e.hooks.error.trigger(new $e(xe.EDGE_ORPHANED,g.id));return}return!g.hidden&&!x.hidden&&!w.hidden},s=oe(()=>e.onlyRenderVisibleElements?e.edges.filter(g=>{const w=o.value(g.source),x=o.value(g.target);return u(g,w,x)&&Ud({sourcePos:w.computedPosition||{x:0,y:0},targetPos:x.computedPosition||{x:0,y:0},sourceWidth:w.dimensions.width,sourceHeight:w.dimensions.height,targetWidth:x.dimensions.width,targetHeight:x.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})}):e.edges.filter(g=>u(g))),c=oe(()=>[...l.value,...s.value]),d=oe(()=>e.nodes.filter(g=>g.selected)),f=oe(()=>e.edges.filter(g=>g.selected)),h=oe(()=>[...d.value??[],...f.value??[]]),p=oe(()=>l.value.filter(g=>g.initialized&&g.handleBounds!==void 0));return{getNode:o,getEdge:r,getElements:c,getEdgeTypes:i,getNodeTypes:a,getEdges:s,getNodes:l,getSelectedElements:h,getSelectedNodes:d,getSelectedEdges:f,getNodesInitialized:p}}class mt{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){return mt.instance||(mt.instance=new mt),mt.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=Ma(n),r=bi(o),i=oe(()=>r.nodes.map(f=>f.id)),a=oe(()=>r.edges.map(f=>f.id)),l=Kh(r,i,a),u=Wh(r,l,i,a),s={};Object.entries(r.hooks).forEach(([f,h])=>{const p=`on${f.charAt(0).toUpperCase()+f.slice(1)}`;s[p]=h.on});const c={};Object.entries(r.hooks).forEach(([f,h])=>{c[f]=h.trigger}),u.setState(r);const d={...s,...l,...u,...zl(r),emits:c,id:t,vueFlowVersion:"1.21.1",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function _e(e){const t=mt.getInstance(),n=yi(),o=e==null?void 0:e.id,r=(n==null?void 0:n.vueFlowId)||o;let i,a=!1;if(n){const l=Et(Zr,null);typeof l<"u"&&l!==null&&(i=l)}if(i||r&&(i=t.get(r)),!i||i&&o&&o!==i.id){const l=o??t.getId();i=t.create(l,e),n&&(a=!0)}else e&&i.setState(e);return n&&(St(Zr,i),n.vueFlowId=i.id,a&&tn(()=>{if(i){const l=t.get(i.id);l?l.$destroy():ya(`No store instance found for id ${i.id} in storage.`)}})),i}function Jh(){return{doubleClick:F(),click:F(),mouseEnter:F(),mouseMove:F(),mouseLeave:F(),contextMenu:F(),updateStart:F(),update:F(),updateEnd:F()}}function Qh(e,t){const n=Jh();return n.doubleClick.on(o=>{var r,i;t.edgeDoubleClick(o),(i=(r=e.events)==null?void 0:r.doubleClick)==null||i.call(r,o)}),n.click.on(o=>{var r,i;t.edgeClick(o),(i=(r=e.events)==null?void 0:r.click)==null||i.call(r,o)}),n.mouseEnter.on(o=>{var r,i;t.edgeMouseEnter(o),(i=(r=e.events)==null?void 0:r.mouseEnter)==null||i.call(r,o)}),n.mouseMove.on(o=>{var r,i;t.edgeMouseMove(o),(i=(r=e.events)==null?void 0:r.mouseMove)==null||i.call(r,o)}),n.mouseLeave.on(o=>{var r,i;t.edgeMouseLeave(o),(i=(r=e.events)==null?void 0:r.mouseLeave)==null||i.call(r,o)}),n.contextMenu.on(o=>{var r,i;t.edgeContextMenu(o),(i=(r=e.events)==null?void 0:r.contextMenu)==null||i.call(r,o)}),n.updateStart.on(o=>{var r,i;t.edgeUpdateStart(o),(i=(r=e.events)==null?void 0:r.updateStart)==null||i.call(r,o)}),n.update.on(o=>{var r,i;t.edgeUpdate(o),(i=(r=e.events)==null?void 0:r.update)==null||i.call(r,o)}),n.updateEnd.on(o=>{var r,i;t.edgeUpdateEnd(o),(i=(r=e.events)==null?void 0:r.updateEnd)==null||i.call(r,o)}),Object.entries(n).reduce((o,[r,i])=>(o.emit[r]=i.trigger,o.on[r]=i.on,o),{emit:{},on:{}})}function ef(){const{viewport:e,snapGrid:t,snapToGrid:n}=_e();return({sourceEvent:o})=>{const r=o.touches?o.touches[0].clientX:o.clientX,i=o.touches?o.touches[0].clientY:o.clientY,a={x:(r-e.value.x)/e.value.zoom,y:(i-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(a.x/t.value[0]):a.x,ySnapped:n.value?t.value[1]*Math.round(a.y/t.value[1]):a.y,...a}}}function pn(){return!0}function Ca({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:r,onEdgeUpdate:i,onEdgeUpdateEnd:a}){const{vueFlowRef:l,connectionMode:u,connectionRadius:s,connectOnClick:c,connectionClickStartHandle:d,nodesConnectable:f,autoPanOnConnect:h,findNode:p,panBy:g,getNodes:w,startConnection:x,updateConnection:E,endConnection:N,emits:v,viewport:M,edges:m,isValidConnection:D}=_e();let Y=null,L=!1,z=null;function Q(ne){var y;const C=ae(n)==="target",k=Ko(ne),P=zr(ne.target);if(k&&ne.button===0||!k){let H=function(O){ve=ut(O,Z);const{handle:B,validHandleResult:$}=qd(O,P,ca(ve,M.value,!1,[1,1]),s.value,_,V=>jr(O,V,u.value,ae(t),ae(e),C?"target":"source",j,P,m.value,p));if(T=B,be||(b(),be=!0),Y=$.connection,L=$.isValid,z=$.handleDomNode,E(T&&L?Dd({x:T.x,y:T.y},M.value):ve,$.endHandle,Kd(!!T,L)),!T&&!L&&!z)return go(ue);Y&&Y.source!==Y.target&&z&&(go(ue),ue=z,z.classList.add("connecting","vue-flow__handle-connecting"),z.classList.toggle("valid",L),z.classList.toggle("vue-flow__handle-valid",L))},U=function(O){(T||z)&&Y&&L&&(i?i(O,Y):v.connect(Y)),v.connectEnd(O),r&&(a==null||a(O)),go(ue),cancelAnimationFrame(W),N(O),be=!1,L=!1,Y=null,z=null,P.removeEventListener("mousemove",H),P.removeEventListener("mouseup",U),P.removeEventListener("touchmove",H),P.removeEventListener("touchend",U)};const A=p(ae(t));let j=ae(o)||D.value||pn;!j&&A&&(j=(C?A.isValidSourcePos:A.isValidTargetPos)||pn);let T,W=0;const{x:ee,y:I}=ut(ne),X=P==null?void 0:P.elementFromPoint(ee,I),R=Jo(ae(r),X),Z=(y=l.value)==null?void 0:y.getBoundingClientRect();if(!Z||!R)return;let ue,ve=ut(ne,Z),be=!1;const _=Wd({nodes:w.value,nodeId:ae(t),handleId:ae(e),handleType:R}),b=()=>{if(!h)return;const[O,B]=ga(ve,Z);g({x:O,y:B}),W=requestAnimationFrame(b)};x({nodeId:ae(t),handleId:ae(e),type:R},{x:ee-Z.left,y:I-Z.top},ne),v.connectStart({event:ne,nodeId:ae(t),handleId:ae(e),handleType:R}),P.addEventListener("mousemove",H),P.addEventListener("mouseup",U),P.addEventListener("touchmove",H),P.addEventListener("touchend",U)}}function J(ne){if(!c.value)return;const y=ae(n)==="target";if(!d.value)v.clickConnectStart({event:ne,nodeId:ae(t),handleId:ae(e)}),x({nodeId:ae(t),type:ae(n),handleId:ae(e)},void 0,ne,!0);else{let C=ae(o)||D.value||pn;const k=p(ae(t));if(!C&&k&&(C=(y?k.isValidSourcePos:k.isValidTargetPos)||pn),k&&(typeof k.connectable>"u"?f.value:k.connectable)===!1)return;const P=zr(ne.target),{connection:H,isValid:U}=jr(ne,{nodeId:ae(t),id:ae(e),type:ae(n)},u.value,d.value.nodeId,d.value.handleId||null,d.value.type,C,P,m.value,p),A=H.source===H.target;U&&!A&&v.connect(H),v.clickConnectEnd(ne),N(ne,!0)}}return{handlePointerDown:Q,handleClick:J}}function er(){return typeof window<"u"?window:{chrome:!1}}function To(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,r=At(o.hasAttribute)?o.hasAttribute("contenteditable"):!1,i=At(o.closest)?o.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(o==null?void 0:o.nodeName)||r||!!i}function tf(e){return e.ctrlKey||e.metaKey||e.shiftKey}function nf(e,t){return n=>e.some(o=>{const r=o.split("+").map(i=>i.trim().toLowerCase());return r.length===1?n.key===o:(t.add(n.key.toLowerCase()),r.every(i=>t.has(i)))})}function Yt(e,t){const n=er(),o=le(ae(e)===!0);let r=!1;const i=new Set;return pe(o,()=>{t==null||t(o.value)}),pe(()=>ae(e),a=>{if(n&&typeof n.addEventListener<"u"&&Fo(n,"blur",()=>{o.value=!1}),Zd(a)){o.value=a;return}Array.isArray(a)&&(a=nf(a,i)),a&&(pr(a,l=>{r=tf(l),!(!r&&To(l))&&(l.preventDefault(),o.value=!0)},{eventName:"keydown"}),pr(a,l=>{if(o.value){if(!r&&To(l))return;r=!1,i.clear(),o.value=!1}},{eventName:"keyup"}))},{immediate:!0}),o}function of(e){const t=e??Et(ba,""),n=Et(xa,le(null)),{findNode:o,edges:r,emits:i}=_e(),a=o(t);return a||i.error(new $e(xe.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:a,parentNode:oe(()=>o(a.parentNode)),connectedEdges:oe(()=>qn([a],r.value))}}function rf(){return{doubleClick:F(),click:F(),mouseEnter:F(),mouseMove:F(),mouseLeave:F(),contextMenu:F(),dragStart:F(),drag:F(),dragStop:F()}}function af(e,t){const n=rf();return n.doubleClick.on(o=>{var r,i;t.nodeDoubleClick(o),(i=(r=e.events)==null?void 0:r.doubleClick)==null||i.call(r,o)}),n.click.on(o=>{var r,i;t.nodeClick(o),(i=(r=e.events)==null?void 0:r.click)==null||i.call(r,o)}),n.mouseEnter.on(o=>{var r,i;t.nodeMouseEnter(o),(i=(r=e.events)==null?void 0:r.mouseEnter)==null||i.call(r,o)}),n.mouseMove.on(o=>{var r,i;t.nodeMouseMove(o),(i=(r=e.events)==null?void 0:r.mouseMove)==null||i.call(r,o)}),n.mouseLeave.on(o=>{var r,i;t.nodeMouseLeave(o),(i=(r=e.events)==null?void 0:r.mouseLeave)==null||i.call(r,o)}),n.contextMenu.on(o=>{var r,i;t.nodeContextMenu(o),(i=(r=e.events)==null?void 0:r.contextMenu)==null||i.call(r,o)}),n.dragStart.on(o=>{var r,i;t.nodeDragStart(o),(i=(r=e.events)==null?void 0:r.dragStart)==null||i.call(r,o)}),n.drag.on(o=>{var r,i;t.nodeDrag(o),(i=(r=e.events)==null?void 0:r.drag)==null||i.call(r,o)}),n.dragStop.on(o=>{var r,i;t.nodeDragStop(o),(i=(r=e.events)==null?void 0:r.dragStop)==null||i.call(r,o)}),Object.entries(n).reduce((o,[r,i])=>(o.emit[r]=i.trigger,o.on[r]=i.on,o),{emit:{},on:{}})}function Aa(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:r,snapToGrid:i,nodesDraggable:a,emits:l}=_e();return(u,s=!1)=>{const c=i.value?r.value[0]:5,d=i.value?r.value[1]:5,f=s?4:1,h=u.x*c*f,p=u.y*d*f,g=e.value.filter(w=>w.draggable||a&&typeof w.draggable>"u").map(w=>{const x={x:w.computedPosition.x+h,y:w.computedPosition.y+p},{computedPosition:E}=Wo(w,x,l.error,t.value,w.parentNode?o(w.parentNode):void 0);return{id:w.id,position:E,from:w.position,distance:{x:u.x,y:u.y},dimensions:w.dimensions}});n(g,!0,!1)}}const vo=.1;function ot(){}const lf={zoomIn:ot,zoomOut:ot,zoomTo:ot,fitView:ot,setCenter:ot,fitBounds:ot,project:e=>e,setTransform:ot,getTransform:()=>({x:0,y:0,zoom:1}),initialized:!1};function uf(e,t){const n=e,o=de(n,"nodes"),r=de(n,"d3Zoom"),i=de(n,"d3Selection"),a=de(n,"dimensions"),l=de(n,"translateExtent"),u=de(n,"minZoom"),s=de(n,"maxZoom"),c=de(n,"viewport"),d=de(n,"snapToGrid"),f=de(n,"snapGrid"),h=de(n,"hooks"),{getNodes:p}=t,g=le(!1);h.value.nodesInitialized.on(()=>{g.value=!0});const w=oe(()=>!!r.value&&!!i.value&&!!a.value.width&&!!a.value.height&&(p.value.length?g.value:!0));function x(N,v){i.value&&r.value&&r.value.scaleBy(mo(i.value,v),N)}function E(N,v,M,m){const{x:D,y:Y}=la({x:-N,y:-v},l.value),L=Mt.translate(-D,-Y).scale(M);i.value&&r.value&&r.value.transform(mo(i.value,m),L)}return oe(()=>w.value?{initialized:!0,zoomIn:N=>{x(1.2,N==null?void 0:N.duration)},zoomOut:N=>{x(1/1.2,N==null?void 0:N.duration)},zoomTo:(N,v)=>{i.value&&r.value&&r.value.scaleTo(mo(i.value,v==null?void 0:v.duration),N)},setTransform:(N,v)=>{E(N.x,N.y,N.zoom,v==null?void 0:v.duration)},getTransform:()=>({x:c.value.x,y:c.value.y,zoom:c.value.zoom}),fitView:(N={padding:vo,includeHiddenNodes:!1,duration:0})=>{if(!o.value.length)return;const v=(N.includeHiddenNodes?o.value:p.value).filter(L=>{var z;const Q=L.initialized&&L.dimensions.width&&L.dimensions.height;let J=!0;return(z=N.nodes)!=null&&z.length&&(J=N.nodes.includes(L.id)),Q&&J}),M=ha(v),{x:m,y:D,zoom:Y}=Br(M,a.value.width,a.value.height,N.minZoom??u.value,N.maxZoom??s.value,N.padding??vo,N.offset);E(m,D,Y,N==null?void 0:N.duration)},setCenter:(N,v,M)=>{const m=typeof(M==null?void 0:M.zoom)<"u"?M.zoom:s.value,D=a.value.width/2-N*m,Y=a.value.height/2-v*m;E(D,Y,m,M==null?void 0:M.duration)},fitBounds:(N,v={padding:vo})=>{const{x:M,y:m,zoom:D}=Br(N,a.value.width,a.value.height,u.value,s.value,v.padding);E(M,m,D,v==null?void 0:v.duration)},project:N=>ca(N,c.value,d.value,f.value)}:lf)}function mo(e,t=0){return e.transition().duration(t)}function sf(e,t,n){const o=ul();return o.run(()=>{[()=>{o.run(()=>{let r,i,a=!!(n.nodes.value.length||n.edges.value.length);r=pt([e.modelValue,()=>{var l,u;return(u=(l=e.modelValue)==null?void 0:l.value)==null?void 0:u.length}],([l])=>{l&&Array.isArray(l)&&(i==null||i.pause(),n.setElements(l),!i&&!a&&l.length?a=!0:i==null||i.resume())}),i=pt([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([l,u])=>{var s;(s=e.modelValue)!=null&&s.value&&Array.isArray(e.modelValue.value)&&(r==null||r.pause(),e.modelValue.value=[...l,...u],yt(()=>{r==null||r.resume()}))},{immediate:a}),wn(()=>{r==null||r.stop(),i==null||i.stop()})})},()=>{o.run(()=>{let r,i,a=!!n.nodes.value.length;r=pt([e.nodes,()=>{var l,u;return(u=(l=e.nodes)==null?void 0:l.value)==null?void 0:u.length}],([l])=>{l&&Array.isArray(l)&&(i==null||i.pause(),n.setNodes(l),!i&&!a&&l.length?a=!0:i==null||i.resume())}),i=pt([n.nodes,()=>n.nodes.value.length],([l])=>{var u;(u=e.nodes)!=null&&u.value&&Array.isArray(e.nodes.value)&&(r==null||r.pause(),e.nodes.value=[...l],yt(()=>{r==null||r.resume()}))},{immediate:a}),wn(()=>{r==null||r.stop(),i==null||i.stop()})})},()=>{o.run(()=>{let r,i,a=!!n.edges.value.length;r=pt([e.edges,()=>{var l,u;return(u=(l=e.edges)==null?void 0:l.value)==null?void 0:u.length}],([l])=>{l&&Array.isArray(l)&&(i==null||i.pause(),n.setEdges(l),!i&&!a&&l.length?a=!0:i==null||i.resume())}),i=pt([n.edges,()=>n.edges.value.length],([l])=>{var u;(u=e.edges)!=null&&u.value&&Array.isArray(e.edges.value)&&(r==null||r.pause(),e.edges.value=[...l],yt(()=>{r==null||r.resume()}))},{immediate:a}),wn(()=>{r==null||r.stop(),i==null||i.stop()})})},()=>{o.run(()=>{pe(()=>t.minZoom,()=>{t.minZoom&&ge(t.minZoom)&&n.setMinZoom(t.minZoom)})})},()=>{o.run(()=>{pe(()=>t.maxZoom,()=>{t.maxZoom&&ge(t.maxZoom)&&n.setMaxZoom(t.maxZoom)})})},()=>{o.run(()=>{pe(()=>t.translateExtent,()=>{t.translateExtent&&ge(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)})})},()=>{o.run(()=>{pe(()=>t.nodeExtent,()=>{t.nodeExtent&&ge(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)})})},()=>{o.run(()=>{pe(()=>t.applyDefault,()=>{ge(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)}),pe(n.applyDefault,(r,i,a)=>{n.applyDefault.value?(n.onNodesChange(n.applyNodeChanges),n.onEdgesChange(n.applyEdgeChanges)):(n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)),a(()=>{n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)})},{immediate:!0})})},()=>{o.run(()=>{const r=async i=>{let a=i;At(t.autoConnect)&&(a=await t.autoConnect(i)),a!==!1&&n.addEdges([a])};pe(()=>t.autoConnect,()=>{ge(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)}),pe(n.autoConnect,(i,a,l)=>{i?n.onConnect(r):n.hooks.value.connect.off(r),l(()=>{n.hooks.value.connect.off(r)})},{immediate:!0})})},()=>{const r=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];Object.keys(t).forEach(i=>{if(!r.includes(i)){const a=Nn(t,i),l=n[i];o.run(()=>{pe(a,u=>{ge(u)&&(l.value=u)},{flush:"pre"})})}})}].forEach(r=>r())}),()=>o.stop()}function ei(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const cf={name:"Pane",compatConfig:{MODE:3}},df=ce({...cf,props:{isSelecting:{type:Boolean}},setup(e){const{id:t,vueFlowRef:n,getNodes:o,getEdges:r,viewport:i,emits:a,userSelectionActive:l,removeSelectedElements:u,panOnDrag:s,userSelectionRect:c,elementsSelectable:d,nodesSelectionActive:f,addSelectedElements:h,getSelectedEdges:p,getSelectedNodes:g,removeNodes:w,removeEdges:x,selectionMode:E,deleteKeyCode:N,multiSelectionKeyCode:v,multiSelectionActive:M}=_e(),m=le(null),D=le(0),Y=le(0),L=le(),z=oe(()=>d.value&&(e.isSelecting||l.value));Yt(N,A=>{if(!A)return;const j=o.value.reduce((T,W)=>((!W.selected&&W.parentNode&&T.find(ee=>ee.id===W.parentNode)||W.selected)&&T.push(W),T),[]);(j||p.value)&&(p.value.length>0&&x(p.value),j.length>0&&w(j),f.value=!1,u())}),Yt(v,A=>{M.value=A});function Q(){l.value=!1,c.value=null,D.value=0,Y.value=0}function J(A){A.target!==m.value||z.value||(a.paneClick(A),u(),f.value=!1)}function ne(A){var j;if(A.target===m.value){if(Array.isArray(s.value)&&(j=s.value)!=null&&j.includes(2)){A.preventDefault();return}a.paneContextMenu(A)}}function y(A){A.target===m.value&&a.paneScroll(A)}function C(A){if(L.value=n.value.getBoundingClientRect(),!z.value||!d||!e.isSelecting||A.button!==0||A.target!==m.value||!L.value)return;const{x:j,y:T}=ei(A,L.value);u(),c.value={width:0,height:0,startX:j,startY:T,x:j,y:T},l.value=!0,a.selectionStart(A)}function k(A){if(!z.value)return a.paneMouseMove(A);if(!e.isSelecting||!L.value||!c.value)return;l.value||(l.value=!0),f.value&&(f.value=!1);const j=ei(A,L.value),T=c.value.startX??0,W=c.value.startY??0,ee={...c.value,x:j.x<T?j.x:T,y:j.y<W?j.y:W,width:Math.abs(j.x-T),height:Math.abs(j.y-W)},I=fa(o.value,c.value,i.value,E.value===qo.Partial),X=qn(I,r.value);D.value=I.length,Y.value=X.length,c.value=ee,h([...I,...X])}function P(A){z.value&&A.button===0&&(!l.value&&c.value&&A.target===m.value&&J(A),f.value=D.value>0,Q(),a.selectionEnd(A))}function H(A){var j;if(!z.value)return a.paneMouseLeave(A);l.value&&(f.value=D.value>0,(j=a.selectionEnd)==null||j.call(a,A)),Q()}function U(A){z.value||a.paneMouseEnter(A)}return(A,j)=>(G(),te("div",{ref_key:"container",ref:m,key:`pane-${S(t)}`,class:qe(["vue-flow__pane vue-flow__container",{selection:e.isSelecting}]),onClick:J,onContextmenu:ne,onWheelPassive:y,onMouseenter:U,onMousedown:C,onMousemove:k,onMouseup:P,onMouseleave:H},[he(A.$slots,"default"),S(l)&&S(c)?(G(),ye(Uh,{key:0,"user-selection-rect":S(c)},null,8,["user-selection-rect"])):me("",!0),S(f)&&S(g).length?(G(),ye(Yh,{key:1})):me("",!0)],34))}}),hf={class:"vue-flow__nodes vue-flow__container"},ff={name:"Nodes",compatConfig:{MODE:3}},pf=ce({...ff,setup(e){const t=Et(Qn),{nodesDraggable:n,nodesFocusable:o,elementsSelectable:r,nodesConnectable:i,getNodes:a,getNodesInitialized:l,getNodeTypes:u,updateNodeDimensions:s,emits:c}=_e(),d=le(),f=Gn();Me(()=>a.value.length>0&&l.value.length===a.value.length).toBe(!0).then(()=>{yt(()=>{c.nodesInitialized(l.value)})}),nt(()=>{d.value=new ResizeObserver(E=>{const N=E.map(v=>({id:v.target.getAttribute("data-id"),nodeElement:v.target,forceUpdate:!0}));s(N)})}),$i(()=>{var E;return(E=d.value)==null?void 0:E.disconnect()});function h(E){return typeof E>"u"?n.value:E}function p(E){return typeof E>"u"?r.value:E}function g(E){return typeof E>"u"?i.value:E}function w(E){return typeof E>"u"?o.value:E}function x(E,N){const v=E||"default",M=t==null?void 0:t[`node-${v}`];if(M)return M;let m=N??u.value[v];if(typeof m=="string"&&f){const D=Object.keys(f.appContext.components);D&&D.includes(v)&&(m=Ei(v,!1))}return m&&typeof m!="string"?m:(c.error(new $e(xe.NODE_TYPE_MISSING,m)),!1)}return(E,N)=>(G(),te("div",hf,[d.value?(G(!0),te(Te,{key:0},jt(S(a),v=>(G(),ye(S(dh),{id:v.id,key:v.id,"resize-observer":d.value,type:x(v.type,v.template),name:v.type||"default",draggable:h(v.draggable),selectable:p(v.selectable),connectable:g(v.connectable),focusable:w(v.focusable),node:v},null,8,["id","resize-observer","type","name","draggable","selectable","connectable","focusable","node"]))),128)):me("",!0)]))}}),gf=["id","markerWidth","markerHeight","markerUnits","orient"],vf=["stroke","stroke-width","fill"],mf=["stroke","stroke-width"],yf={name:"MarkerType",compatConfig:{MODE:3}},wf=ce({...yf,props:{id:null,type:null,color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(G(),te("marker",{id:e.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},[e.type===S(Co).ArrowClosed?(G(),te("polyline",{key:0,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:e.color,points:"-5,-4 0,0 -5,4 -5,-4"},null,8,vf)):me("",!0),e.type===S(Co).Arrow?(G(),te("polyline",{key:1,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:"none",points:"-5,-4 0,0 -5,4"},null,8,mf)):me("",!0)],8,gf))}}),_f={name:"MarkerDefinitions",compatConfig:{MODE:3}},bf=ce({..._f,setup(e){const t=_e(),n=de(t,"id"),o=de(t,"edges"),r=de(t,"connectionLineOptions"),i=de(t,"defaultMarkerColor"),a=oe(()=>{const l=[],u=[],s=c=>{if(c){const d=it(c,n.value);l.includes(d)||(typeof c=="object"?u.push({...c,id:d,color:c.color||i.value}):u.push({id:d,color:i.value,type:c}),l.push(d))}};return[r.value.markerEnd,r.value.markerStart].forEach(s),o.value.reduce((c,d)=>([d.markerStart,d.markerEnd].forEach(s),c.sort((f,h)=>f.id.localeCompare(h.id))),u),u});return(l,u)=>(G(),te("defs",null,[(G(!0),te(Te,null,jt(S(a),s=>(G(),ye(wf,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,"stroke-width":s.strokeWidth,orient:s.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))]))}}),xf={class:"vue-flow__edges vue-flow__container"},$f={name:"Edges",compatConfig:{MODE:3}},Ef=ce({...$f,setup(e){const t=Et(Qn),{edgesUpdatable:n,edgesFocusable:o,elementsSelectable:r,findNode:i,getEdges:a,getEdgeTypes:l,elevateEdgesOnSelect:u,dimensions:s,emits:c}=_e(),d=Gn();function f(w){return typeof w>"u"?r.value:w}function h(w){return typeof w>"u"?n.value:w}function p(w){return typeof w>"u"?o.value:w}function g(w,x){const E=w||"default",N=t==null?void 0:t[`edge-${E}`];if(N)return N;let v=x??l.value[E];if(typeof v=="string"&&d){const M=Object.keys(d.appContext.components);M&&M.includes(E)&&(v=Ei(E,!1))}return v&&typeof v!="string"?v:(c.error(new $e(xe.EDGE_TYPE_MISSING,v)),!1)}return(w,x)=>S(s).width&&S(s).height?(G(),te(Te,{key:0},[(G(),te("svg",xf,[we(bf)])),(G(!0),te(Te,null,jt(S(a),E=>(G(),te("svg",{key:E.id,class:"vue-flow__edges vue-flow__container",style:Le({zIndex:S(Xd)(E,S(i),S(u))})},[we(S(Bh),{id:E.id,edge:E,type:g(E.type,E.template),name:E.type||"default",selectable:f(E.selectable),updatable:h(E.updatable),focusable:p(E.focusable)},null,8,["id","edge","type","name","selectable","updatable","focusable"])],4))),128)),we(S(Lh))],64)):me("",!0)}}),Sf=se("div",{class:"vue-flow__edge-labels"},null,-1),kf={name:"Transform",compatConfig:{MODE:3}},Nf=ce({...kf,setup(e){const{id:t,viewport:n,emits:o,d3Zoom:r,d3Selection:i,dimensions:a,...l}=_e(),u=le(!Si);return Me(()=>r.value&&i.value&&a.value.width>0&&a.value.height>0).toBeTruthy().then(()=>{o.paneReady({id:t,viewport:n,emits:o,d3Zoom:r,d3Selection:i,dimensions:a,...l}),setTimeout(()=>{u.value=!0},0)}),(s,c)=>(G(),te("div",{key:`transform-${S(t)}`,class:"vue-flow__transformationpane vue-flow__container",style:Le({transform:`translate(${S(n).x}px,${S(n).y}px) scale(${S(n).zoom})`,opacity:u.value?void 0:0})},[we(Ef),Sf,we(pf),he(s.$slots,"default")],4))}}),Mf={name:"Viewport",compatConfig:{MODE:3}},Cf=ce({...Mf,setup(e){const{id:t,minZoom:n,maxZoom:o,defaultViewport:r,translateExtent:i,dimensions:a,zoomActivationKeyCode:l,selectionKeyCode:u,panActivationKeyCode:s,panOnScroll:c,panOnScrollMode:d,panOnScrollSpeed:f,panOnDrag:h,zoomOnDoubleClick:p,zoomOnPinch:g,zoomOnScroll:w,preventScrolling:x,noWheelClassName:E,noPanClassName:N,emits:v,connectionStartHandle:M,userSelectionActive:m,paneDragging:D,d3Zoom:Y,d3Selection:L,d3ZoomHandler:z,viewport:Q,viewportRef:J}=_e(),ne=le(),y=le(!1),C=le(!1);let k=!1,P=0,H={x:0,y:0,zoom:0};const U=Yt(s),A=oe(()=>!y.value&&h.value&&U.value),j=oe(()=>u.value!==!0&&y.value||u.value===!0&&!A.value);nt(()=>{Ql(ne,I);const R=er();Fo(R,"resize",I)}),nt(()=>{const R=ne.value,Z=R.getBoundingClientRect(),ue=Pd().scaleExtent([n.value,o.value]).translateExtent(i.value),ve=Ae(R).call(ue),be=ve.on("wheel.zoom"),_=Mt.translate(r.value.x??0,r.value.y??0).scale(ht(r.value.zoom??1,n.value,o.value)),b=[[0,0],[Z.width,Z.height]],O=ue.constrain()(_,b,i.value);ue.transform(ve,O),Y.value=ue,L.value=ve,z.value=be,Q.value={x:O.x,y:O.y,zoom:O.k},J.value=R,Yt(u,$=>{y.value=$});const B=Yt(l);lr(()=>{y.value&&m.value&&!C.value?ue.on("zoom",null):!y.value&&!m.value&&ue.on("zoom",$=>{Q.value={x:$.transform.x,y:$.transform.y,zoom:$.transform.k};const V=ee($.transform);k=T(h.value,P??0),v.viewportChange(V),v.move({event:$,flowTransform:V})})}),ue.on("start",$=>{var V;if(!$.sourceEvent)return null;P=$.sourceEvent.button,C.value=!0;const q=ee($.transform);((V=$.sourceEvent)==null?void 0:V.type)==="mousedown"&&(D.value=!0),H=q,v.viewportChangeStart(q),v.moveStart({event:$,flowTransform:q})}),ue.on("end",$=>{if(!$.sourceEvent)return null;if(C.value=!1,D.value=!1,T(h.value,P??0)&&!k&&v.paneContextMenu($.sourceEvent),k=!1,W(H,$.transform)){const V=ee($.transform);H=V,v.viewportChangeEnd(V),v.moveEnd({event:$,flowTransform:V})}}),lr(()=>{c.value&&!B.value&&!m.value?ve.on("wheel.zoom",$=>{if(X($,E.value))return!1;$.preventDefault(),$.stopImmediatePropagation();const V=ve.property("__zoom").k||1;if($.ctrlKey&&g.value){const Se=De($),ln=-$.deltaY*($.deltaMode===1?.05:$.deltaMode?1:.002)*10,ol=V*2**ln;ue.scaleTo(ve,ol,Se);return}const q=$.deltaMode===1?20:1,re=d.value===zn.Vertical?0:$.deltaX*q,ie=d.value===zn.Horizontal?0:$.deltaY*q;ue.translateBy(ve,-(re/V)*f.value,-(ie/V)*f.value)},{passive:!1}):typeof be<"u"&&ve.on("wheel.zoom",function($,V){if(!x.value||X($,E.value))return null;$.preventDefault(),be.call(this,$,V)},{passive:!1})}),ue.filter($=>{var V,q;const re=B.value||w.value,ie=g.value&&$.ctrlKey;if($.button===1&&$.type==="mousedown"&&((V=$.target)!=null&&V.closest(".vue-flow__node")||(q=$.target)!=null&&q.closest(".vue-flow__edge")))return!0;if(!h.value&&!re&&!c.value&&!p.value&&!g.value||m.value||!p.value&&$.type==="dblclick"||X($,E.value)&&$.type==="wheel"||X($,N.value)&&$.type!=="wheel"||!g.value&&$.ctrlKey&&$.type==="wheel"||!re&&!c.value&&!ie&&$.type==="wheel"||!h.value&&($.type==="mousedown"||$.type==="touchstart")||Array.isArray(h.value)&&!h.value.includes($.button)&&($.type==="mousedown"||$.type==="touchstart"))return!1;const Se=Array.isArray(h.value)&&h.value.includes($.button)||!$.button||$.button<=1;return(!$.ctrlKey||$.type==="wheel")&&Se})});function T(R,Z){return Z===2&&Array.isArray(R)&&R.includes(2)}function W(R,Z){return R.x!==Z.x&&!isNaN(Z.x)||R.y!==Z.y&&!isNaN(Z.y)||R.zoom!==Z.k&&!isNaN(Z.k)}function ee(R){return{x:R.x,y:R.y,zoom:R.k}}function I(){if(!ne.value)return;const{width:R,height:Z}=Zn(ne.value);(R===0||Z===0)&&v.error(new $e(xe.MISSING_VIEWPORT_DIMENSIONS)),a.value.width=R||500,a.value.height=Z||500}function X(R,Z){return R.target.closest(`.${Z}`)}return(R,Z)=>(G(),te(Te,null,[(G(),te("div",{ref_key:"viewportEl",ref:ne,key:`viewport-${S(t)}`,class:"vue-flow__viewport vue-flow__container"},[we(df,{"is-selecting":S(j),class:qe({connecting:!!S(M),dragging:S(D),draggable:!!S(h)})},{default:Ee(()=>[we(Nf,null,{default:Ee(()=>[he(R.$slots,"zoom-pane")]),_:3})]),_:3},8,["is-selecting","class"])])),he(R.$slots,"default")],64))}}),Af=["id"],Pf=["id"],If=["id"],Tf={name:"A11yDescriptions",compatConfig:{MODE:3}},Of=ce({...Tf,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=_e(),r={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"};return(i,a)=>(G(),te(Te,null,[se("div",{id:`${S(ra)}-${S(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+Re(S(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Af),se("div",{id:`${S(ia)}-${S(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Pf),S(n)?me("",!0):(G(),te("div",{key:0,id:`${S(Id)}-${S(t)}`,"aria-live":"assertive","aria-atomic":"true",style:r},Re(S(o)),9,If))],64))}}),zf={name:"VueFlow",compatConfig:{MODE:3}},x0=ce({...zf,props:{id:null,modelValue:null,nodes:null,edges:null,edgeTypes:null,nodeTypes:null,connectionMode:null,connectionLineType:null,connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:null,isValidConnection:{type:Function,default:void 0},deleteKeyCode:{type:[Boolean,String,Function],default:void 0},selectionKeyCode:{type:[Boolean,String,Function],default:void 0},multiSelectionKeyCode:{type:[Boolean,String,Function],default:void 0},zoomActivationKeyCode:{type:[Boolean,String,Function],default:void 0},panActivationKeyCode:{type:[Boolean,String,Function],default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:null,onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:Boolean,default:void 0},minZoom:null,maxZoom:null,defaultViewport:null,translateExtent:null,nodeExtent:null,defaultMarkerColor:null,zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:null,panOnScrollMode:null,zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:null,edgeUpdaterRadius:null,fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:null,noWheelClassName:null,noPanClassName:null,defaultEdgeOptions:null,elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},__experimentalFeatures:null},emits:["nodesChange","edgesChange","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","nodesInitialized","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneReady","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","updateNodeInternals","error","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,r=Ft(o,"modelValue",n),i=Ft(o,"nodes",n),a=Ft(o,"edges",n),{vueFlowRef:l,hooks:u,getNodeTypes:s,getEdgeTypes:c,...d}=_e(o),f=sf({modelValue:r,nodes:i,edges:a},o,{vueFlowRef:l,hooks:u,getNodeTypes:s,getEdgeTypes:c,...d});nh(n,u);const h=le();return St(Qn,il()),al(()=>{f()}),nt(()=>{l.value=h.value}),t({vueFlowRef:l,hooks:u,getNodeTypes:s,getEdgeTypes:c,...d}),(p,g)=>(G(),te("div",{ref_key:"el",ref:h,class:"vue-flow"},[we(Cf,null,{nodes:Ee(()=>[(G(!0),te(Te,null,jt(Object.keys(S(s)),w=>he(p.$slots,`node-${w}`)),256))]),edges:Ee(()=>[(G(!0),te(Te,null,jt(Object.keys(S(c)),w=>he(p.$slots,`edge-${w}`)),256))]),"connection-name":Ee(()=>[he(p.$slots,"connection-line")]),"zoom-pane":Ee(()=>[he(p.$slots,"zoom-pane")]),default:Ee(()=>[he(p.$slots,"default")]),_:3}),we(Of)],512))}}),Bf=["x","y","width","height"],Df=["stroke","stroke-width","d"],Rf=["cx","cy","r","fill"],Vf={key:2,height:"100",width:"100"},Hf=["fill"],Lf=["x","y","fill"],Ff={name:"Background"},$0=ce({...Ff,props:{variant:{default:()=>"dots"},gap:{default:10},size:{default:.4},patternColor:null,bgColor:null,height:{default:100},width:{default:100},x:{default:0},y:{default:0}},setup(e){const t={dots:"#81818a",lines:"#eee"},{id:n,viewport:o}=_e(),r=oe(()=>{const u=e.gap&&e.gap*o.value.zoom,s=u&&o.value.x%u,c=u&&o.value.y%u,d=e.size*o.value.zoom;return{scaledGap:u,xOffset:s,yOffset:c,size:d}}),i=`pattern-${n}`,a=oe(()=>e.patternColor||t[e.variant||"dots"]),l=oe(()=>`M${r.value.scaledGap/2} 0 V${r.value.scaledGap} M0 ${r.value.scaledGap/2} H${r.value.scaledGap}`);return(u,s)=>(G(),te("svg",{class:"vue-flow__background",style:Le({height:`${e.height>100?100:e.height}%`,width:`${e.width>100?100:e.width}%`})},[he(u.$slots,"pattern-container",{id:i},()=>[se("pattern",{id:i,x:r.value.xOffset,y:r.value.yOffset,width:r.value.scaledGap,height:r.value.scaledGap,patternUnits:"userSpaceOnUse"},[he(u.$slots,"pattern",{},()=>[e.variant==="lines"?(G(),te("path",{key:0,stroke:S(a),"stroke-width":e.size,d:S(l)},null,8,Df)):e.variant==="dots"?(G(),te("circle",{key:1,cx:r.value.size,cy:r.value.size,r:r.value.size,fill:S(a)},null,8,Rf)):me("",!0),e.bgColor?(G(),te("svg",Vf,[se("rect",{width:"100%",height:"100%",fill:e.bgColor},null,8,Hf)])):me("",!0)])],8,Bf)]),se("rect",{x:e.x,y:e.y,width:"100%",height:"100%",fill:`url(#${i})`},null,8,Lf),he(u.$slots,"default",{id:i})],4))}}),to=ce({__name:"Panel",props:{position:null},setup(e){const t=e,{userSelectionActive:n}=_e(),o=oe(()=>`${t.position}`.split("-"));return(r,i)=>(G(),te("div",{class:qe(["vue-flow__panel",S(o)]),style:Le({pointerEvents:S(n)?"none":"all"})},[he(r.$slots,"default")],6))}});var no=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(no||{});const Gf={name:"ControlButton"},Yf=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n},jf={class:"vue-flow__controls-button"};function Uf(e,t,n,o,r,i){return G(),te("button",jf,[he(e.$slots,"default")])}const gn=Yf(Gf,[["render",Uf]]),Xf={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},Zf=se("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),qf=[Zf];function Wf(e,t){return G(),te("svg",Xf,qf)}const Kf={render:Wf},Jf={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},Qf=se("path",{d:"M0 0h32v4.2H0z"},null,-1),ep=[Qf];function tp(e,t){return G(),te("svg",Jf,ep)}const np={render:tp},op={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},rp=se("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),ip=[rp];function ap(e,t){return G(),te("svg",op,ip)}const lp={render:ap},up={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},sp=se("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),cp=[sp];function dp(e,t){return G(),te("svg",up,cp)}const hp={render:dp},fp={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},pp=se("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),gp=[pp];function vp(e,t){return G(),te("svg",fp,gp)}const mp={render:vp},yp={name:"Controls"},E0=ce({...yp,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:null,position:{default:()=>"bottom-left"}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const n=_e(),o=de(n,"nodesDraggable"),r=de(n,"nodesConnectable"),i=de(n,"elementsSelectable"),a=de(n,"setInteractive"),l=de(n,"zoomIn"),u=de(n,"zoomOut"),s=de(n,"fitView"),c=oe(()=>o.value&&r.value&&i.value),d=()=>{l.value(),t("zoomIn")},f=()=>{u.value(),t("zoomOut")},h=()=>{s.value(e.fitViewParams),t("fitView")},p=()=>{a.value(!c.value),t("interactionChange",!c.value)};return(g,w)=>(G(),ye(S(to),{class:"vue-flow__controls",position:e.position},{default:Ee(()=>[he(g.$slots,"top"),e.showZoom?(G(),te(Te,{key:0},[he(g.$slots,"control-zoom-in",{},()=>[we(gn,{class:"vue-flow__controls-zoomin",onClick:d},{default:Ee(()=>[he(g.$slots,"icon-zoom-in",{},()=>[(G(),ye(et(S(Kf))))])]),_:3})]),he(g.$slots,"control-zoom-out",{},()=>[we(gn,{class:"vue-flow__controls-zoomout",onClick:f},{default:Ee(()=>[he(g.$slots,"icon-zoom-out",{},()=>[(G(),ye(et(S(np))))])]),_:3})])],64)):me("",!0),e.showFitView?he(g.$slots,"control-fit-view",{key:1},()=>[we(gn,{class:"vue-flow__controls-fitview",onClick:h},{default:Ee(()=>[he(g.$slots,"icon-fit-view",{},()=>[(G(),ye(et(S(lp))))])]),_:3})]):me("",!0),e.showInteractive?he(g.$slots,"control-interactive",{key:2},()=>[e.showInteractive?(G(),ye(gn,{key:0,class:"vue-flow__controls-interactive",onClick:p},{default:Ee(()=>[S(c)?he(g.$slots,"icon-unlock",{key:0},()=>[(G(),ye(et(S(mp))))]):me("",!0),S(c)?me("",!0):he(g.$slots,"icon-lock",{key:1},()=>[(G(),ye(et(S(hp))))])]),_:3})):me("",!0)]):me("",!0),he(g.$slots,"default")]),_:3},8,["position"]))}});var wp={value:()=>{}};function Pa(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new En(n)}function En(e){this._=e}function _p(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}En.prototype=Pa.prototype={constructor:En,on:function(e,t){var n=this._,o=_p(e+"",n),r,i=-1,a=o.length;if(arguments.length<2){for(;++i<a;)if((r=(e=o[i]).type)&&(r=bp(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(r=(e=o[i]).type)n[r]=ti(n[r],e.name,t);else if(t==null)for(r in n)n[r]=ti(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new En(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function bp(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function ti(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=wp,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Oo="http://www.w3.org/1999/xhtml";const ni={svg:"http://www.w3.org/2000/svg",xhtml:Oo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function oo(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ni.hasOwnProperty(t)?{space:ni[t],local:e}:e}function xp(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Oo&&t.documentElement.namespaceURI===Oo?t.createElement(e):t.createElementNS(n,e)}}function $p(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ia(e){var t=oo(e);return(t.local?$p:xp)(t)}function Ep(){}function tr(e){return e==null?Ep:function(){return this.querySelector(e)}}function Sp(e){typeof e!="function"&&(e=tr(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,l=o[r]=new Array(a),u,s,c=0;c<a;++c)(u=i[c])&&(s=e.call(u,u.__data__,c,i))&&("__data__"in u&&(s.__data__=u.__data__),l[c]=s);return new Oe(o,this._parents)}function kp(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Np(){return[]}function Ta(e){return e==null?Np:function(){return this.querySelectorAll(e)}}function Mp(e){return function(){return kp(e.apply(this,arguments))}}function Cp(e){typeof e=="function"?e=Mp(e):e=Ta(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a=t[i],l=a.length,u,s=0;s<l;++s)(u=a[s])&&(o.push(e.call(u,u.__data__,s,a)),r.push(u));return new Oe(o,r)}function Oa(e){return function(){return this.matches(e)}}function za(e){return function(t){return t.matches(e)}}var Ap=Array.prototype.find;function Pp(e){return function(){return Ap.call(this.children,e)}}function Ip(){return this.firstElementChild}function Tp(e){return this.select(e==null?Ip:Pp(typeof e=="function"?e:za(e)))}var Op=Array.prototype.filter;function zp(){return Array.from(this.children)}function Bp(e){return function(){return Op.call(this.children,e)}}function Dp(e){return this.selectAll(e==null?zp:Bp(typeof e=="function"?e:za(e)))}function Rp(e){typeof e!="function"&&(e=Oa(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,l=o[r]=[],u,s=0;s<a;++s)(u=i[s])&&e.call(u,u.__data__,s,i)&&l.push(u);return new Oe(o,this._parents)}function Ba(e){return new Array(e.length)}function Vp(){return new Oe(this._enter||this._groups.map(Ba),this._parents)}function Dn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Dn.prototype={constructor:Dn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Hp(e){return function(){return e}}function Lp(e,t,n,o,r,i){for(var a=0,l,u=t.length,s=i.length;a<s;++a)(l=t[a])?(l.__data__=i[a],o[a]=l):n[a]=new Dn(e,i[a]);for(;a<u;++a)(l=t[a])&&(r[a]=l)}function Fp(e,t,n,o,r,i,a){var l,u,s=new Map,c=t.length,d=i.length,f=new Array(c),h;for(l=0;l<c;++l)(u=t[l])&&(f[l]=h=a.call(u,u.__data__,l,t)+"",s.has(h)?r[l]=u:s.set(h,u));for(l=0;l<d;++l)h=a.call(e,i[l],l,i)+"",(u=s.get(h))?(o[l]=u,u.__data__=i[l],s.delete(h)):n[l]=new Dn(e,i[l]);for(l=0;l<c;++l)(u=t[l])&&s.get(f[l])===u&&(r[l]=u)}function Gp(e){return e.__data__}function Yp(e,t){if(!arguments.length)return Array.from(this,Gp);var n=t?Fp:Lp,o=this._parents,r=this._groups;typeof e!="function"&&(e=Hp(e));for(var i=r.length,a=new Array(i),l=new Array(i),u=new Array(i),s=0;s<i;++s){var c=o[s],d=r[s],f=d.length,h=jp(e.call(c,c&&c.__data__,s,o)),p=h.length,g=l[s]=new Array(p),w=a[s]=new Array(p),x=u[s]=new Array(f);n(c,d,g,w,x,h,t);for(var E=0,N=0,v,M;E<p;++E)if(v=g[E]){for(E>=N&&(N=E+1);!(M=w[N])&&++N<p;);v._next=M||null}}return a=new Oe(a,o),a._enter=l,a._exit=u,a}function jp(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Up(){return new Oe(this._exit||this._groups.map(Ba),this._parents)}function Xp(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function Zp(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),l=new Array(r),u=0;u<a;++u)for(var s=n[u],c=o[u],d=s.length,f=l[u]=new Array(d),h,p=0;p<d;++p)(h=s[p]||c[p])&&(f[p]=h);for(;u<r;++u)l[u]=n[u];return new Oe(l,this._parents)}function qp(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],a;--r>=0;)(a=o[r])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function Wp(e){e||(e=Kp);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a=n[i],l=a.length,u=r[i]=new Array(l),s,c=0;c<l;++c)(s=a[c])&&(u[c]=s);u.sort(t)}return new Oe(r,this._parents).order()}function Kp(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Jp(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Qp(){return Array.from(this)}function eg(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null}function tg(){let e=0;for(const t of this)++e;return e}function ng(){return!this.node()}function og(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,a=r.length,l;i<a;++i)(l=r[i])&&e.call(l,l.__data__,i,r);return this}function rg(e){return function(){this.removeAttribute(e)}}function ig(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ag(e,t){return function(){this.setAttribute(e,t)}}function lg(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ug(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function sg(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function cg(e,t){var n=oo(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?ig:rg:typeof t=="function"?n.local?sg:ug:n.local?lg:ag)(n,t))}function Da(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function dg(e){return function(){this.style.removeProperty(e)}}function hg(e,t,n){return function(){this.style.setProperty(e,t,n)}}function fg(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function pg(e,t,n){return arguments.length>1?this.each((t==null?dg:typeof t=="function"?fg:hg)(e,t,n??"")):Pt(this.node(),e)}function Pt(e,t){return e.style.getPropertyValue(t)||Da(e).getComputedStyle(e,null).getPropertyValue(t)}function gg(e){return function(){delete this[e]}}function vg(e,t){return function(){this[e]=t}}function mg(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function yg(e,t){return arguments.length>1?this.each((t==null?gg:typeof t=="function"?mg:vg)(e,t)):this.node()[e]}function Ra(e){return e.trim().split(/^|\s+/)}function nr(e){return e.classList||new Va(e)}function Va(e){this._node=e,this._names=Ra(e.getAttribute("class")||"")}Va.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ha(e,t){for(var n=nr(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function La(e,t){for(var n=nr(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function wg(e){return function(){Ha(this,e)}}function _g(e){return function(){La(this,e)}}function bg(e,t){return function(){(t.apply(this,arguments)?Ha:La)(this,e)}}function xg(e,t){var n=Ra(e+"");if(arguments.length<2){for(var o=nr(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?bg:t?wg:_g)(n,t))}function $g(){this.textContent=""}function Eg(e){return function(){this.textContent=e}}function Sg(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function kg(e){return arguments.length?this.each(e==null?$g:(typeof e=="function"?Sg:Eg)(e)):this.node().textContent}function Ng(){this.innerHTML=""}function Mg(e){return function(){this.innerHTML=e}}function Cg(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ag(e){return arguments.length?this.each(e==null?Ng:(typeof e=="function"?Cg:Mg)(e)):this.node().innerHTML}function Pg(){this.nextSibling&&this.parentNode.appendChild(this)}function Ig(){return this.each(Pg)}function Tg(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Og(){return this.each(Tg)}function zg(e){var t=typeof e=="function"?e:Ia(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Bg(){return null}function Dg(e,t){var n=typeof e=="function"?e:Ia(e),o=t==null?Bg:typeof t=="function"?t:tr(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Rg(){var e=this.parentNode;e&&e.removeChild(this)}function Vg(){return this.each(Rg)}function Hg(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Lg(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Fg(e){return this.select(e?Lg:Hg)}function Gg(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Yg(e){return function(t){e.call(this,t,this.__data__)}}function jg(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Ug(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function Xg(e,t,n){return function(){var o=this.__on,r,i=Yg(t);if(o){for(var a=0,l=o.length;a<l;++a)if((r=o[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function Zg(e,t,n){var o=jg(e+""),r,i=o.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,s=l.length,c;u<s;++u)for(r=0,c=l[u];r<i;++r)if((a=o[r]).type===c.type&&a.name===c.name)return c.value}return}for(l=t?Xg:Ug,r=0;r<i;++r)this.each(l(o[r],t,n));return this}function Fa(e,t,n){var o=Da(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function qg(e,t){return function(){return Fa(this,e,t)}}function Wg(e,t){return function(){return Fa(this,e,t.apply(this,arguments))}}function Kg(e,t){return this.each((typeof t=="function"?Wg:qg)(e,t))}function*Jg(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,a;r<i;++r)(a=o[r])&&(yield a)}var Qg=[null];function Oe(e,t){this._groups=e,this._parents=t}function rn(){return new Oe([[document.documentElement]],Qg)}function ev(){return this}Oe.prototype=rn.prototype={constructor:Oe,select:Sp,selectAll:Cp,selectChild:Tp,selectChildren:Dp,filter:Rp,data:Yp,enter:Vp,exit:Up,join:Xp,merge:Zp,selection:ev,order:qp,sort:Wp,call:Jp,nodes:Qp,node:eg,size:tg,empty:ng,each:og,attr:cg,style:pg,property:yg,classed:xg,text:kg,html:Ag,raise:Ig,lower:Og,append:zg,insert:Dg,remove:Vg,clone:Fg,datum:Gg,on:Zg,dispatch:Kg,[Symbol.iterator]:Jg};function or(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ga(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function an(){}var Kt=.7,Rn=1/Kt,$t="\\s*([+-]?\\d+)\\s*",Jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",He="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tv=/^#([0-9a-f]{3,8})$/,nv=new RegExp(`^rgb\\(${$t},${$t},${$t}\\)$`),ov=new RegExp(`^rgb\\(${He},${He},${He}\\)$`),rv=new RegExp(`^rgba\\(${$t},${$t},${$t},${Jt}\\)$`),iv=new RegExp(`^rgba\\(${He},${He},${He},${Jt}\\)$`),av=new RegExp(`^hsl\\(${Jt},${He},${He}\\)$`),lv=new RegExp(`^hsla\\(${Jt},${He},${He},${Jt}\\)$`),oi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};or(an,Qt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ri,formatHex:ri,formatHex8:uv,formatHsl:sv,formatRgb:ii,toString:ii});function ri(){return this.rgb().formatHex()}function uv(){return this.rgb().formatHex8()}function sv(){return Ya(this).formatHsl()}function ii(){return this.rgb().formatRgb()}function Qt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=tv.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ai(t):n===3?new Ne(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?vn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?vn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=nv.exec(e))?new Ne(t[1],t[2],t[3],1):(t=ov.exec(e))?new Ne(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=rv.exec(e))?vn(t[1],t[2],t[3],t[4]):(t=iv.exec(e))?vn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=av.exec(e))?si(t[1],t[2]/100,t[3]/100,1):(t=lv.exec(e))?si(t[1],t[2]/100,t[3]/100,t[4]):oi.hasOwnProperty(e)?ai(oi[e]):e==="transparent"?new Ne(NaN,NaN,NaN,0):null}function ai(e){return new Ne(e>>16&255,e>>8&255,e&255,1)}function vn(e,t,n,o){return o<=0&&(e=t=n=NaN),new Ne(e,t,n,o)}function cv(e){return e instanceof an||(e=Qt(e)),e?(e=e.rgb(),new Ne(e.r,e.g,e.b,e.opacity)):new Ne}function zo(e,t,n,o){return arguments.length===1?cv(e):new Ne(e,t,n,o??1)}function Ne(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}or(Ne,zo,Ga(an,{brighter(e){return e=e==null?Rn:Math.pow(Rn,e),new Ne(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Kt:Math.pow(Kt,e),new Ne(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ne(st(this.r),st(this.g),st(this.b),Vn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:li,formatHex:li,formatHex8:dv,formatRgb:ui,toString:ui}));function li(){return`#${at(this.r)}${at(this.g)}${at(this.b)}`}function dv(){return`#${at(this.r)}${at(this.g)}${at(this.b)}${at((isNaN(this.opacity)?1:this.opacity)*255)}`}function ui(){const e=Vn(this.opacity);return`${e===1?"rgb(":"rgba("}${st(this.r)}, ${st(this.g)}, ${st(this.b)}${e===1?")":`, ${e})`}`}function Vn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function st(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function at(e){return e=st(e),(e<16?"0":"")+e.toString(16)}function si(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ie(e,t,n,o)}function Ya(e){if(e instanceof Ie)return new Ie(e.h,e.s,e.l,e.opacity);if(e instanceof an||(e=Qt(e)),!e)return new Ie;if(e instanceof Ie)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,l=i-r,u=(i+r)/2;return l?(t===i?a=(n-o)/l+(n<o)*6:n===i?a=(o-t)/l+2:a=(t-n)/l+4,l/=u<.5?i+r:2-i-r,a*=60):l=u>0&&u<1?0:a,new Ie(a,l,u,e.opacity)}function hv(e,t,n,o){return arguments.length===1?Ya(e):new Ie(e,t,n,o??1)}function Ie(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}or(Ie,hv,Ga(an,{brighter(e){return e=e==null?Rn:Math.pow(Rn,e),new Ie(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Kt:Math.pow(Kt,e),new Ie(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new Ne(yo(e>=240?e-240:e+120,r,o),yo(e,r,o),yo(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new Ie(ci(this.h),mn(this.s),mn(this.l),Vn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Vn(this.opacity);return`${e===1?"hsl(":"hsla("}${ci(this.h)}, ${mn(this.s)*100}%, ${mn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ci(e){return e=(e||0)%360,e<0?e+360:e}function mn(e){return Math.max(0,Math.min(1,e||0))}function yo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ja=e=>()=>e;function fv(e,t){return function(n){return e+n*t}}function pv(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function gv(e){return(e=+e)==1?Ua:function(t,n){return n-t?pv(t,n,e):ja(isNaN(t)?n:t)}}function Ua(e,t){var n=t-e;return n?fv(e,n):ja(isNaN(e)?t:e)}const di=function e(t){var n=gv(t);function o(r,i){var a=n((r=zo(r)).r,(i=zo(i)).r),l=n(r.g,i.g),u=n(r.b,i.b),s=Ua(r.opacity,i.opacity);return function(c){return r.r=a(c),r.g=l(c),r.b=u(c),r.opacity=s(c),r+""}}return o.gamma=e,o}(1);function Qe(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Bo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wo=new RegExp(Bo.source,"g");function vv(e){return function(){return e}}function mv(e){return function(t){return e(t)+""}}function yv(e,t){var n=Bo.lastIndex=wo.lastIndex=0,o,r,i,a=-1,l=[],u=[];for(e=e+"",t=t+"";(o=Bo.exec(e))&&(r=wo.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),l[a]?l[a]+=i:l[++a]=i),(o=o[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,u.push({i:a,x:Qe(o,r)})),n=wo.lastIndex;return n<t.length&&(i=t.slice(n),l[a]?l[a]+=i:l[++a]=i),l.length<2?u[0]?mv(u[0].x):vv(t):(t=u.length,function(s){for(var c=0,d;c<t;++c)l[(d=u[c]).i]=d.x(s);return l.join("")})}var hi=180/Math.PI,Xa={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Za(e,t,n,o,r,i){var a,l,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),e*o<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*hi,skewX:Math.atan(u)*hi,scaleX:a,scaleY:l}}var yn;function wv(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Xa:Za(t.a,t.b,t.c,t.d,t.e,t.f)}function _v(e){return e==null||(yn||(yn=document.createElementNS("http://www.w3.org/2000/svg","g")),yn.setAttribute("transform",e),!(e=yn.transform.baseVal.consolidate()))?Xa:(e=e.matrix,Za(e.a,e.b,e.c,e.d,e.e,e.f))}function qa(e,t,n,o){function r(s){return s.length?s.pop()+" ":""}function i(s,c,d,f,h,p){if(s!==d||c!==f){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:Qe(s,d)},{i:g-2,x:Qe(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function a(s,c,d,f){s!==c?(s-c>180?c+=360:c-s>180&&(s+=360),f.push({i:d.push(r(d)+"rotate(",null,o)-2,x:Qe(s,c)})):c&&d.push(r(d)+"rotate("+c+o)}function l(s,c,d,f){s!==c?f.push({i:d.push(r(d)+"skewX(",null,o)-2,x:Qe(s,c)}):c&&d.push(r(d)+"skewX("+c+o)}function u(s,c,d,f,h,p){if(s!==d||c!==f){var g=h.push(r(h)+"scale(",null,",",null,")");p.push({i:g-4,x:Qe(s,d)},{i:g-2,x:Qe(c,f)})}else(d!==1||f!==1)&&h.push(r(h)+"scale("+d+","+f+")")}return function(s,c){var d=[],f=[];return s=e(s),c=e(c),i(s.translateX,s.translateY,c.translateX,c.translateY,d,f),a(s.rotate,c.rotate,d,f),l(s.skewX,c.skewX,d,f),u(s.scaleX,s.scaleY,c.scaleX,c.scaleY,d,f),s=c=null,function(h){for(var p=-1,g=f.length,w;++p<g;)d[(w=f[p]).i]=w.x(h);return d.join("")}}}var bv=qa(wv,"px, ","px)","deg)"),xv=qa(_v,", ",")",")"),$v=1e-12;function fi(e){return((e=Math.exp(e))+1/e)/2}function Ev(e){return((e=Math.exp(e))-1/e)/2}function Sv(e){return((e=Math.exp(2*e))-1)/(e+1)}(function e(t,n,o){function r(i,a){var l=i[0],u=i[1],s=i[2],c=a[0],d=a[1],f=a[2],h=c-l,p=d-u,g=h*h+p*p,w,x;if(g<$v)x=Math.log(f/s)/t,w=function(D){return[l+D*h,u+D*p,s*Math.exp(t*D*x)]};else{var E=Math.sqrt(g),N=(f*f-s*s+o*g)/(2*s*n*E),v=(f*f-s*s-o*g)/(2*f*n*E),M=Math.log(Math.sqrt(N*N+1)-N),m=Math.log(Math.sqrt(v*v+1)-v);x=(m-M)/t,w=function(D){var Y=D*x,L=fi(M),z=s/(n*E)*(L*Sv(t*Y+M)-Ev(M));return[l+z*h,u+z*p,s*L/fi(t*Y+M)]}}return w.duration=x*1e3*t/Math.SQRT2,w}return r.rho=function(i){var a=Math.max(.001,+i),l=a*a,u=l*l;return e(a,l,u)},r})(Math.SQRT2,2,4);var It=0,Vt=0,Bt=0,Wa=1e3,Hn,Ht,Ln=0,ft=0,ro=0,en=typeof performance=="object"&&performance.now?performance:Date,Ka=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function rr(){return ft||(Ka(kv),ft=en.now()+ro)}function kv(){ft=0}function Fn(){this._call=this._time=this._next=null}Fn.prototype=Ja.prototype={constructor:Fn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?rr():+n)+(t==null?0:+t),!this._next&&Ht!==this&&(Ht?Ht._next=this:Hn=this,Ht=this),this._call=e,this._time=n,Do()},stop:function(){this._call&&(this._call=null,this._time=1/0,Do())}};function Ja(e,t,n){var o=new Fn;return o.restart(e,t,n),o}function Nv(){rr(),++It;for(var e=Hn,t;e;)(t=ft-e._time)>=0&&e._call.call(void 0,t),e=e._next;--It}function pi(){ft=(Ln=en.now())+ro,It=Vt=0;try{Nv()}finally{It=0,Cv(),ft=0}}function Mv(){var e=en.now(),t=e-Ln;t>Wa&&(ro-=t,Ln=e)}function Cv(){for(var e,t=Hn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Hn=n);Ht=e,Do(o)}function Do(e){if(!It){Vt&&(Vt=clearTimeout(Vt));var t=e-ft;t>24?(e<1/0&&(Vt=setTimeout(pi,e-en.now()-ro)),Bt&&(Bt=clearInterval(Bt))):(Bt||(Ln=en.now(),Bt=setInterval(Mv,Wa)),It=1,Ka(pi))}}function gi(e,t,n){var o=new Fn;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var Av=Pa("start","end","cancel","interrupt"),Pv=[],Qa=0,vi=1,Ro=2,Sn=3,mi=4,Vo=5,kn=6;function io(e,t,n,o,r,i){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Iv(e,n,{name:t,index:o,group:r,on:Av,tween:Pv,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Qa})}function ir(e,t){var n=Be(e,t);if(n.state>Qa)throw new Error("too late; already scheduled");return n}function Ge(e,t){var n=Be(e,t);if(n.state>Sn)throw new Error("too late; already running");return n}function Be(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Iv(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=Ja(i,0,n.time);function i(s){n.state=vi,n.timer.restart(a,n.delay,n.time),n.delay<=s&&a(s-n.delay)}function a(s){var c,d,f,h;if(n.state!==vi)return u();for(c in o)if(h=o[c],h.name===n.name){if(h.state===Sn)return gi(a);h.state===mi?(h.state=kn,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=kn,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(gi(function(){n.state===Sn&&(n.state=mi,n.timer.restart(l,n.delay,n.time),l(s))}),n.state=Ro,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ro){for(n.state=Sn,r=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=h);r.length=d+1}}function l(s){for(var c=s<n.duration?n.ease.call(null,s/n.duration):(n.timer.restart(u),n.state=Vo,1),d=-1,f=r.length;++d<f;)r[d].call(e,c);n.state===Vo&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=kn,n.timer.stop(),delete o[t];for(var s in o)return;delete e.__transition}}function Tv(e,t){var n=e.__transition,o,r,i=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((o=n[a]).name!==t){i=!1;continue}r=o.state>Ro&&o.state<Vo,o.state=kn,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[a]}i&&delete e.__transition}}function Ov(e){return this.each(function(){Tv(this,e)})}function zv(e,t){var n,o;return function(){var r=Ge(this,e),i=r.tween;if(i!==n){o=n=i;for(var a=0,l=o.length;a<l;++a)if(o[a].name===t){o=o.slice(),o.splice(a,1);break}}r.tween=o}}function Bv(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=Ge(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var l={name:t,value:n},u=0,s=r.length;u<s;++u)if(r[u].name===t){r[u]=l;break}u===s&&r.push(l)}i.tween=r}}function Dv(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Be(this.node(),n).tween,r=0,i=o.length,a;r<i;++r)if((a=o[r]).name===e)return a.value;return null}return this.each((t==null?zv:Bv)(n,e,t))}function ar(e,t,n){var o=e._id;return e.each(function(){var r=Ge(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Be(r,o).value[t]}}function el(e,t){var n;return(typeof t=="number"?Qe:t instanceof Qt?di:(n=Qt(t))?(t=n,di):yv)(e,t)}function Rv(e){return function(){this.removeAttribute(e)}}function Vv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Hv(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttribute(e);return a===r?null:a===o?i:i=t(o=a,n)}}function Lv(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===o?i:i=t(o=a,n)}}function Fv(e,t,n){var o,r,i;return function(){var a,l=n(this),u;return l==null?void this.removeAttribute(e):(a=this.getAttribute(e),u=l+"",a===u?null:a===o&&u===r?i:(r=u,i=t(o=a,l)))}}function Gv(e,t,n){var o,r,i;return function(){var a,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),u=l+"",a===u?null:a===o&&u===r?i:(r=u,i=t(o=a,l)))}}function Yv(e,t){var n=oo(e),o=n==="transform"?xv:el;return this.attrTween(e,typeof t=="function"?(n.local?Gv:Fv)(n,o,ar(this,"attr."+e,t)):t==null?(n.local?Vv:Rv)(n):(n.local?Lv:Hv)(n,o,t))}function jv(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Uv(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Xv(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&Uv(e,i)),n}return r._value=t,r}function Zv(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&jv(e,i)),n}return r._value=t,r}function qv(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=oo(e);return this.tween(n,(o.local?Xv:Zv)(o,t))}function Wv(e,t){return function(){ir(this,e).delay=+t.apply(this,arguments)}}function Kv(e,t){return t=+t,function(){ir(this,e).delay=t}}function Jv(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Wv:Kv)(t,e)):Be(this.node(),t).delay}function Qv(e,t){return function(){Ge(this,e).duration=+t.apply(this,arguments)}}function em(e,t){return t=+t,function(){Ge(this,e).duration=t}}function tm(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Qv:em)(t,e)):Be(this.node(),t).duration}function nm(e,t){if(typeof t!="function")throw new Error;return function(){Ge(this,e).ease=t}}function om(e){var t=this._id;return arguments.length?this.each(nm(t,e)):Be(this.node(),t).ease}function rm(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ge(this,e).ease=n}}function im(e){if(typeof e!="function")throw new Error;return this.each(rm(this._id,e))}function am(e){typeof e!="function"&&(e=Oa(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,l=o[r]=[],u,s=0;s<a;++s)(u=i[s])&&e.call(u,u.__data__,s,i)&&l.push(u);return new Ke(o,this._parents,this._name,this._id)}function lm(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),l=0;l<i;++l)for(var u=t[l],s=n[l],c=u.length,d=a[l]=new Array(c),f,h=0;h<c;++h)(f=u[h]||s[h])&&(d[h]=f);for(;l<o;++l)a[l]=t[l];return new Ke(a,this._parents,this._name,this._id)}function um(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function sm(e,t,n){var o,r,i=um(t)?ir:Ge;return function(){var a=i(this,e),l=a.on;l!==o&&(r=(o=l).copy()).on(t,n),a.on=r}}function cm(e,t){var n=this._id;return arguments.length<2?Be(this.node(),n).on.on(e):this.each(sm(n,e,t))}function dm(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function hm(){return this.on("end.remove",dm(this._id))}function fm(e){var t=this._name,n=this._id;typeof e!="function"&&(e=tr(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var l=o[a],u=l.length,s=i[a]=new Array(u),c,d,f=0;f<u;++f)(c=l[f])&&(d=e.call(c,c.__data__,f,l))&&("__data__"in c&&(d.__data__=c.__data__),s[f]=d,io(s[f],t,n,f,s,Be(c,n)));return new Ke(i,this._parents,t,n)}function pm(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ta(e));for(var o=this._groups,r=o.length,i=[],a=[],l=0;l<r;++l)for(var u=o[l],s=u.length,c,d=0;d<s;++d)if(c=u[d]){for(var f=e.call(c,c.__data__,d,u),h,p=Be(c,n),g=0,w=f.length;g<w;++g)(h=f[g])&&io(h,t,n,g,f,p);i.push(f),a.push(c)}return new Ke(i,a,t,n)}var gm=rn.prototype.constructor;function vm(){return new gm(this._groups,this._parents)}function mm(e,t){var n,o,r;return function(){var i=Pt(this,e),a=(this.style.removeProperty(e),Pt(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}function tl(e){return function(){this.style.removeProperty(e)}}function ym(e,t,n){var o,r=n+"",i;return function(){var a=Pt(this,e);return a===r?null:a===o?i:i=t(o=a,n)}}function wm(e,t,n){var o,r,i;return function(){var a=Pt(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),Pt(this,e))),a===u?null:a===o&&u===r?i:(r=u,i=t(o=a,l))}}function _m(e,t){var n,o,r,i="style."+t,a="end."+i,l;return function(){var u=Ge(this,e),s=u.on,c=u.value[i]==null?l||(l=tl(t)):void 0;(s!==n||r!==c)&&(o=(n=s).copy()).on(a,r=c),u.on=o}}function bm(e,t,n){var o=(e+="")=="transform"?bv:el;return t==null?this.styleTween(e,mm(e,o)).on("end.style."+e,tl(e)):typeof t=="function"?this.styleTween(e,wm(e,o,ar(this,"style."+e,t))).each(_m(this._id,e)):this.styleTween(e,ym(e,o,t),n).on("end.style."+e,null)}function xm(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function $m(e,t,n){var o,r;function i(){var a=t.apply(this,arguments);return a!==r&&(o=(r=a)&&xm(e,a,n)),o}return i._value=t,i}function Em(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,$m(e,t,n??""))}function Sm(e){return function(){this.textContent=e}}function km(e){return function(){var t=e(this);this.textContent=t??""}}function Nm(e){return this.tween("text",typeof e=="function"?km(ar(this,"text",e)):Sm(e==null?"":e+""))}function Mm(e){return function(t){this.textContent=e.call(this,t)}}function Cm(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Mm(r)),t}return o._value=e,o}function Am(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Cm(e))}function Pm(){for(var e=this._name,t=this._id,n=nl(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],l=a.length,u,s=0;s<l;++s)if(u=a[s]){var c=Be(u,t);io(u,e,n,s,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ke(o,this._parents,e,n)}function Im(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,a){var l={value:a},u={value:function(){--r===0&&i()}};n.each(function(){var s=Ge(this,o),c=s.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),s.on=t}),r===0&&i()})}var Tm=0;function Ke(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function nl(){return++Tm}var je=rn.prototype;Ke.prototype={constructor:Ke,select:fm,selectAll:pm,selectChild:je.selectChild,selectChildren:je.selectChildren,filter:am,merge:lm,selection:vm,transition:Pm,call:je.call,nodes:je.nodes,node:je.node,size:je.size,empty:je.empty,each:je.each,on:cm,attr:Yv,attrTween:qv,style:bm,styleTween:Em,text:Nm,textTween:Am,remove:hm,tween:Dv,delay:Jv,duration:tm,ease:om,easeVarying:im,end:Im,[Symbol.iterator]:je[Symbol.iterator]};function Om(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var zm={time:null,delay:0,duration:250,ease:Om};function Bm(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Dm(e){var t,n;e instanceof Ke?(t=e._id,e=e._name):(t=nl(),(n=zm).time=rr(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],l=a.length,u,s=0;s<l;++s)(u=a[s])&&io(u,e,t,s,a,n||Bm(u,t));return new Ke(o,this._parents,e,t)}rn.prototype.interrupt=Ov;rn.prototype.transition=Dm;function Lt(e,t,n){this.k=e,this.x=t,this.y=n}Lt.prototype={constructor:Lt,scale:function(e){return e===1?this:new Lt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Lt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Lt.prototype;const Rm={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Vm=se("path",{fill:"currentColor",d:"M5 19v-5h2v3h3v2H5Zm0-9V5h5v2H7v3H5Zm9 9v-2h3v-3h2v5h-5Zm3-9V7h-3V5h5v5h-2Z"},null,-1),Hm=[Vm];function Lm(e,t){return G(),te("svg",Rm,Hm)}const Fm={name:"material-symbols-fullscreen",render:Lm},Gm={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ym=se("path",{fill:"currentColor",d:"M8 19v-3H5v-2h5v5H8Zm6 0v-5h5v2h-3v3h-2Zm-9-9V8h3V5h2v5H5Zm9 0V5h2v3h3v2h-5Z"},null,-1),jm=[Ym];function Um(e,t){return G(),te("svg",Gm,jm)}const Xm={name:"material-symbols-fullscreen-exit",render:Um},Zm={class:"flex"},qm=ce({__name:"FullScreenToggle",props:{config:{}},emits:["toggleFullScreen"],setup(e,{emit:t}){const n=e,{config:o}=xi(n),r=()=>{t("toggleFullScreen")};return(i,a)=>(G(),ye(S(to),{class:"text-xs bg-white border-1 rounded-md p-2 border-gray-200 z-50 nc-erd-histogram cursor-pointer hover:bg-gray-100 shadow-md",position:S(no).BottomRight},{default:Ee(()=>[se("div",Zm,[S(o).isFullScreen?(G(),ye(S(Xm),{key:0,class:"h-5 w-5",onClick:r})):(G(),ye(S(Fm),{key:1,class:"h-5 w-5",onClick:r}))])]),_:1},8,["position"]))}}),Wm={class:"flex items-center gap-2"},Km={class:"flex items-center gap-2"},Jm={class:"select-none nc-erd-config-option-label"},Qm={key:0,class:"flex items-center gap-2"},e0={class:"select-none nc-erd-config-option-label"},t0={key:1,class:"flex flex-row items-center"},n0={class:"ml-2 select-none nc-erd-config-option-label"},o0={key:2,class:"flex items-center gap-2"},r0={class:"select-none nc-erd-config-option-label"},i0=ce({__name:"ConfigPanel",props:{config:{}},setup(e){const t=e,{includeM2M:n}=hl(),o=fl(t,"config"),r=le(!1);return(i,a)=>{const l=_l,u=pl("e");return G(),ye(S(to),{class:"flex flex-col gap-y-1 bg-white border-1 rounded-lg border-gray-200 z-50 px-3 py-2 nc-erd-context-menu shadow-md",position:S(no).TopRight},{default:Ee(()=>[se("div",Wm,[Tt(we(l,{checked:S(o).showAllColumns,"onUpdate:checked":a[0]||(a[0]=s=>S(o).showAllColumns=s),class:"nc-erd-showColumns-checkbox"},null,8,["checked"]),[[u,["c:erd:showAllColumns"]]]),se("span",{class:"select-none nc-erd-config-option-label nc-erd-showColumns-label text-xs",onDblclick:a[1]||(a[1]=s=>r.value=!0)},Re(i.$t("activity.erd.showColumns")),33)]),se("div",Km,[Tt(we(l,{checked:S(o).showPkAndFk,"onUpdate:checked":a[2]||(a[2]=s=>S(o).showPkAndFk=s),class:qe(["nc-erd-showPkAndFk-checkbox",[`nc-erd-showPkAndFk-checkbox-${S(o).showAllColumns?"enabled":"disabled"}`,`nc-erd-showPkAndFk-checkbox-${S(o).showPkAndFk?"checked":"unchecked"}`]]),disabled:!S(o).showAllColumns},null,8,["checked","class","disabled"]),[[u,["c:erd:showPkAndFk"]]]),se("span",Jm,Re(i.$t("activity.erd.showPkAndFk")),1)]),S(o).singleTableMode?me("",!0):(G(),te("div",Qm,[Tt(we(l,{checked:S(o).showViews,"onUpdate:checked":a[3]||(a[3]=s=>S(o).showViews=s),class:"nc-erd-showViews-checkbox"},null,8,["checked"]),[[u,["c:erd:showViews"]]]),se("span",e0,Re(i.$t("activity.erd.showSqlViews")),1)])),!S(o).singleTableMode&&S(r)&&S(n)?(G(),te("div",t0,[Tt(we(l,{checked:S(o).showMMTables,"onUpdate:checked":a[4]||(a[4]=s=>S(o).showMMTables=s),class:"nc-erd-showMMTables-checkbox"},null,8,["checked"]),[[u,["c:erd:showMMTables"]]]),se("span",n0,Re(i.$t("activity.erd.showMMTables")),1)])):me("",!0),S(r)&&S(n)?(G(),te("div",o0,[Tt(we(l,{checked:S(o).showJunctionTableNames,"onUpdate:checked":a[5]||(a[5]=s=>S(o).showJunctionTableNames=s),class:"nc-erd-showJunctionTableNames-checkbox"},null,8,["checked"]),[[u,["c:erd:showJunctionTableNames"]]]),se("span",r0,Re(i.$t("activity.erd.showJunctionTableNames")),1)])):me("",!0)]),_:1},8,["position"])}}});const a0=bl(i0,[["__scopeId","data-v-f7362990"]]),l0={class:"flex flex-col"},u0={class:"flex items-center gap-1.5 p-2"},s0={class:"flex items-center gap-1.5 p-2"},c0=ce({__name:"HistogramPanel",setup(e){return(t,n)=>(G(),ye(S(to),{class:"text-xs bg-white border-1 rounded border-gray-200 shadow-md p-1.5 z-50 nc-erd-histogram",position:S(no).TopLeft},{default:Ee(()=>[se("div",l0,[se("div",u0,[(G(),ye(et(S(ur).table))),se("div",null,Re(t.$t("objects.table")),1)]),se("div",s0,[(G(),ye(et(S(ur).eye))),se("div",null,Re(t.$t("objects.sqlVIew")),1)])])]),_:1},8,["position"]))}}),d0=vl(()=>ml(()=>import("./Flow.12e33b0e.js"),["./Flow.12e33b0e.js","./Icon.vue.e15b8911.js","./entry.13466615.js","./entry.0f786d51.css","./TableIcon.vue.95089890.js","./Tooltip.vue.67a657ea.js","./index.5263eb1d.js","./_plugin-vue_export-helper.c27b6911.js","./useMetas.223da623.js","./Overlay.f7b74b5f.js","./Overlay.09be8605.css","./index.2660048d.js","./Checkbox.65681aa3.js","./FormItemContext.27b2e5db.js","./createForOfIteratorHelper.37be2624.js","./index.f2e6837c.js","./debounce.dbc9bf77.js","./toNumber.7aa6a805.js","./isSymbol.b9109ae5.js","./Flow.41ab19d1.css"],import.meta.url).then(e=>e.default||e)),h0={class:"relative h-full"},f0={class:"h-full w-full flex flex-col justify-center items-center"},S0=ce({__name:"View",props:{baseId:{type:String,default:""},table:{type:Object,default:null},showAllColumns:{type:Boolean,default:!0}},setup(e){const t=e,{bases:n,tables:o}=gl(xl()),{metas:r,getMeta:i}=$l(),a=le([]),l=le(!0),u=bi({showPkAndFk:!0,showViews:!1,showAllColumns:t.showAllColumns,singleTableMode:!!t.table,showMMTables:!1,showJunctionTableNames:!1,isFullScreen:!1}),s=async h=>{await Promise.all(h.filter(p=>!r.value[p.id]).map(async p=>{await i(p.id)}))},c=async()=>{let h=[];t.table?h=o.value.filter(p=>{var g,w;return p.id===((g=t.table)==null?void 0:g.id)||((w=r.value[t.table.id].columns)==null?void 0:w.find(x=>{var E;return yl(x.uidt)&&((E=x.colOptions)==null?void 0:E.fk_related_model_id)===p.id}))}):h=o.value,await s(h),a.value=h.filter(p=>{var g;return u.showMMTables||!u.showMMTables&&!p.mm||p.id===((g=t.table)==null?void 0:g.id)}).filter(p=>u.singleTableMode||!u.showViews&&p.type!=="view"||u.showViews),l.value=!1},d=()=>{u.isFullScreen=!u.isFullScreen};pe([r,o],c,{flush:"post",immediate:!0}),pe(u,c,{flush:"post",deep:!0});const f=oe(()=>a.value.filter(h=>{var p;return t!=null&&t.baseId?h.base_id===t.baseId:h.base_id===((p=n.value)==null?void 0:p.filter(g=>g.enabled)[0].id)}));return pe(()=>u.showAllColumns,()=>{u.showPkAndFk=u.showAllColumns}),(h,p)=>{const g=El,w=wl,x=qm,E=a0,N=c0,v=d0;return G(),te("div",{class:qe(["w-full bg-white border-1 border-gray-100 rounded-lg",{"z-100 h-screen w-screen fixed top-0 left-0 right-0 bottom-0":S(u).isFullScreen,"nc-erd-vue-flow-single-table":S(u).singleTableMode,"nc-erd-vue-flow":!S(u).singleTableMode}]),style:Le(S(u).isFullScreen?"":"height: inherit")},[se("div",h0,[we(v,{tables:S(f),config:S(u)},{default:Ee(()=>[we(w,{modelValue:S(l),"onUpdate:modelValue":p[0]||(p[0]=M=>Ho(l)?l.value=M:null),inline:"",class:"bg-gray-300/50"},{default:Ee(()=>[se("div",f0,[we(g,{size:"large"})])]),_:1},8,["modelValue"]),we(x,{config:S(u),onToggleFullScreen:d},null,8,["config"]),we(E,{config:S(u)},null,8,["config"]),S(u).singleTableMode?me("",!0):(G(),ye(N,{key:0}))]),_:1},8,["tables","config"])])],6)}}});export{Ct as A,$0 as G,to as O,K as Q,no as R,E0 as W,b0 as Z,S0 as _,Bn as f,Co as j,_e as m,x0 as q,Sa as v,Gt as x};

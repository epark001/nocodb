import{o as a,c as _,a as S,h as me,A as ve,r as i,$ as C,i as W,gy as p,cI as ye,b as s,w as c,E as e,C as r,aV as g,D as y,F as f,W as u,d as D,t as R,aj as B,cp as F,I as H,H as x,Q as d,R as m,J as N,K as fe,fR as he,L as ke,M as we,c5 as ge,fw as xe,gz as Le,N as Ve,P as be,p as Te,e as Ie,f as Ce}from"./entry.51f4e399.js";import{b as De,A as Se,d as $e,M as Ee}from"./index.5263eb1d.js";import{u as ze}from"./index.f7e0da2d.js";import{a as Ae}from"./useMetas.ba7abae7.js";import{a as Pe}from"./useSmartsheetStore.1784ce8b.js";import{u as Re}from"./index.9e760c64.js";import{D as Be}from"./index.252dc7b4.js";import{_ as Ne}from"./_plugin-vue_export-helper.c27b6911.js";import"./views.28a76d89.js";import"./useSharedView.0db5f32b.js";import"./index.b9981e09.js";import"./Dropdown.dc69c0a4.js";import"./RightOutlined.90e8180f.js";const je={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Me=S("path",{fill:"currentColor",d:"M18.08 17.8c-.46.13-.87.2-1.23.2c-1.2 0-2.01-.88-2.42-2.65h-.05c-.99 1.91-2.38 2.86-4.13 2.86c-1.31 0-2.36-.49-3.15-1.48S5.92 14.5 5.92 13c0-1.75.45-3.15 1.34-4.24c.89-1.09 2.1-1.64 3.63-1.64c.82 0 1.56.23 2.2.68c.64.46 1.13 1.1 1.47 1.93h.04l.71-2.4h2.56l-2.14 5.32c.24 1.24.49 2.09.77 2.54c.24.45.58.68 1 .68c.24 0 .43-.04.6-.11l-.02 2.04m-4.26-5.24c-.21-1.13-.55-2.01-1.01-2.61c-.45-.61-1-.91-1.63-.91c-.82 0-1.48.37-1.97 1.1c-.49.74-.71 1.65-.71 2.72c0 .98.19 1.79.62 2.45c.42.66.99.98 1.7.98c.6 0 1.15-.29 1.64-.84c.5-.57.91-1.4 1.24-2.49l.12-.4Z"},null,-1),Ue=[Me];function Oe(t,j){return a(),_("svg",je,Ue)}const qe={name:"mdi-alpha",render:Oe},We=d(()=>m(()=>import("./LockType.c20bb8c0.js"),["./LockType.c20bb8c0.js","./Icon.vue.1162f18b.js","./entry.51f4e399.js","./entry.0f786d51.css","./index.5263eb1d.js","./_plugin-vue_export-helper.c27b6911.js","./LockType.d221cae6.css"],import.meta.url).then(t=>t.default||t)),Fe=d(()=>m(()=>import("./ExportSubActions.abb7c644.js"),["./ExportSubActions.abb7c644.js","./entry.51f4e399.js","./entry.0f786d51.css","./useSharedView.0db5f32b.js","./useMetas.ba7abae7.js","./index.5263eb1d.js","./useSmartsheetStore.1784ce8b.js","./views.28a76d89.js","./index.b9981e09.js"],import.meta.url).then(t=>t.default||t)),He=d(()=>m(()=>import("./QuickImport.cda09ff2.js"),["./QuickImport.cda09ff2.js","./QuickImport.vue.b0890f2c.js","./entry.51f4e399.js","./entry.0f786d51.css","./validation.6db726f3.js","./useMetas.ba7abae7.js","./index.de92142d.js","./FormItem.cda40628.js","./identity.dd5da9ba.js","./isSymbol.b53bd26f.js","./_getPrototype.ec1165af.js","./Col.88cfabc0.js","./responsiveObserve.501a6cf9.js","./toArray.06afb623.js","./toNumber.9dc54e53.js","./FormItemContext.e001cd7c.js","./useSize.3b3f469f.js","./_flatRest.ff2d3d5c.js","./debounce.7d32c110.js","./isPlainObject.ecf52d25.js","./Password.d493e47a.js","./Input.7cb175ff.js","./antInputDirective.8ac36ea7.js","./CheckOutlined.ef30fafc.js","./useRefs.154aa2be.js","./useMergedState.5e6500b1.js","./index.c4aafe5c.js","./Dropdown.dc69c0a4.js","./useState.6010d8b6.js","./isMobile.e2e89480.js","./index.e760d172.js","./SearchOutlined.dec109ce.js","./TextArea.442a25cb.js","./index.2b3cfde3.js","./index.181e79e4.js","./DownOutlined.db6f6406.js","./index.0d6d8ba8.js","./Checkbox.a529f1e6.js","./createForOfIteratorHelper.12419aa5.js","./index.0db47614.js"],import.meta.url).then(t=>t.default||t)),Qe=d(()=>m(()=>import("./Drawer.e243c9f6.js"),["./Drawer.e243c9f6.js","./entry.51f4e399.js","./entry.0f786d51.css","./index.69bbd6c7.js","./isNumeric.3f69e2aa.js","./RightOutlined.90e8180f.js","./LeftOutlined.3bb8aa17.js","./index.af5eff28.js"],import.meta.url).then(t=>t.default||t)),Je=d(()=>m(()=>import("./Erd.e4b70804.js"),["./Erd.e4b70804.js","./entry.51f4e399.js","./entry.0f786d51.css","./useMetas.ba7abae7.js","./Erd.50704106.css"],import.meta.url).then(t=>t.default||t)),Ke=d(()=>m(()=>import("./SharedViewList.763ac82d.js"),["./SharedViewList.763ac82d.js","./ViewIcon.vue.9fe867dc.js","./entry.51f4e399.js","./entry.0f786d51.css","./ViewIcon.fd2d300a.css","./nuxt-link.b37e7c69.js","./useMetas.ba7abae7.js","./useCopy.3e897b55.js","./useDashboard.fc1e1c09.js","./useSmartsheetStore.1784ce8b.js","./views.28a76d89.js","./useSharedView.0db5f32b.js","./index.5263eb1d.js","./index.b9981e09.js","./index.714e2a51.js","./eagerComputed.6062ac13.js","./useState.6010d8b6.js","./index.0db47614.js","./debounce.7d32c110.js","./toNumber.9dc54e53.js","./isSymbol.b53bd26f.js","./index.09b19c06.js","./LeftOutlined.3bb8aa17.js","./RightOutlined.90e8180f.js","./index.5e746f62.js","./toArray.06afb623.js","./antInputDirective.8ac36ea7.js","./isMobile.e2e89480.js","./useMemo.b13a9257.js","./useMergedState.5e6500b1.js","./DownOutlined.db6f6406.js","./CheckOutlined.ef30fafc.js","./SearchOutlined.dec109ce.js","./FormItemContext.e001cd7c.js","./useBreakpoint.a91853f1.js","./responsiveObserve.501a6cf9.js","./index.a3117839.js","./index.0d6d8ba8.js","./Checkbox.a529f1e6.js","./createForOfIteratorHelper.12419aa5.js","./index.252dc7b4.js","./Dropdown.dc69c0a4.js","./index.2a1a64ce.js","./index.e760d172.js","./Input.7cb175ff.js","./isPlainObject.ecf52d25.js","./_getPrototype.ec1165af.js","./TextArea.442a25cb.js","./Password.d493e47a.js","./_plugin-vue_export-helper.c27b6911.js","./SharedViewList.d53188fa.css"],import.meta.url).then(t=>t.default||t)),Ze=d(()=>m(()=>import("./ApiSnippet.fca4a470.js"),["./ApiSnippet.fca4a470.js","./entry.51f4e399.js","./entry.0f786d51.css","./index.5263eb1d.js","./useCopy.3e897b55.js","./useMetas.ba7abae7.js","./useSmartsheetStore.1784ce8b.js","./views.28a76d89.js","./useSharedView.0db5f32b.js","./index.b9981e09.js","./useViewData.d5cf5dca.js","./virtualCell.4dce1393.js","./dataUtils.edecace3.js","./index.9e760c64.js","./index.4089f0b3.js","./index.c4aafe5c.js","./Dropdown.dc69c0a4.js","./useState.6010d8b6.js","./useRefs.154aa2be.js","./identity.dd5da9ba.js","./isSymbol.b53bd26f.js","./_flatRest.ff2d3d5c.js","./isMobile.e2e89480.js","./useMergedState.5e6500b1.js","./Title.e76f8bdd.js","./TextArea.442a25cb.js","./Input.7cb175ff.js","./antInputDirective.8ac36ea7.js","./FormItemContext.e001cd7c.js","./CheckOutlined.ef30fafc.js","./index.5e746f62.js","./toArray.06afb623.js","./useMemo.b13a9257.js","./DownOutlined.db6f6406.js","./SearchOutlined.dec109ce.js","./index.af5eff28.js","./_plugin-vue_export-helper.c27b6911.js","./ApiSnippet.4e384237.css"],import.meta.url).then(t=>t.default||t)),J=t=>(Te("data-v-310ef246"),t=t(),Ie(),t);const Ge={class:"nc-project-menu-item group"},Xe=J(()=>S("div",{class:"flex-1"},null,-1)),Ye={class:"nc-project-menu-item group"},et=J(()=>S("div",{class:"flex-1"},null,-1)),tt=["onClick"],ot={class:"flex items-center text-gray-400"},nt={class:"nc-project-menu-item group px-0 !py-0"},Q=!1,at=me({__name:"ViewActions",setup(t){const{t:j}=ve(),h=i(!1),M=C(De,i(!1)),{$api:K,$e:Z}=Ce(),{isSqlView:G}=Pe(),L=C(Se,i()),U=C($e,i(!1)),V=i(!1),$=i(!1),E=i(!1),O=["csv","excel"],z=O.reduce((l,n)=>(l[n]=i(!1),l),{}),{isUIAllowed:b}=Re();Ae();const X=C(Ee,i()),q=W(()=>{var l;return(l=X.value)==null?void 0:l.base_id}),Y=W(()=>{var l;return((l=L.value)==null?void 0:l.lock_type)||p.Collaborative});async function A(l){if(Z("a:grid:lockmenu",{lockType:l}),!!L.value){if(l==="personal")return N.info(j("msg.toast.futureRelease"));try{L.value.lock_type=l,await K.dbView.update(L.value.id,{lock_type:l}),N.success(`Successfully Switched to ${l} view`)}catch(n){N.error(await fe(n))}}}const k=i(!1);return ze(k),(l,n)=>{const ee=he,te=ke,T=We,I=we,P=ge,oe=xe,ne=Fe,ae=qe,le=Le,se=Ve,ce=Be,re=He,ie=Qe,_e=Je,pe=Ke,ue=be,de=Ze,w=ye("e");return a(),_("div",null,[s(ce,{visible:e(k),"onUpdate:visible":n[7]||(n[7]=o=>x(k)?k.value=o:null),trigger:["click"],"overlay-class-name":"nc-dropdown-actions-menu",placement:"bottomLeft"},{overlay:c(()=>[s(se,{class:"ml-6 !text-sm !px-0 !py-2 !rounded","data-testid":"toolbar-actions",onClick:n[6]||(n[6]=o=>k.value=!1)},{default:c(()=>[s(le,null,{default:c(()=>[(e(b)("view-type"),u("",!0)),s(oe),s(P,{key:"download"},{title:c(()=>[g((a(),_("div",Ge,[(a(),r(y(e(f).cloudDownload),{class:"text-gray-500 group-hover:text-accent"})),D(" "+R(l.$t("general.download"))+" ",1),Xe,(a(),r(y(e(f).arrowRight),{class:"transform group-hover:scale-115 text-gray-400"}))])),[[w,["c:navdraw:preview-as"]]])]),expandIcon:c(()=>[]),default:c(()=>[s(ne)]),_:1}),e(b)("csvImport")&&!Q&&!e(M)&&!e(G)?(a(),r(P,{key:"upload"},{title:c(()=>[g((a(),_("div",Ye,[(a(),r(y(e(f).upload),{class:"text-gray-500 group-hover:text-accent"})),D(" "+R(l.$t("general.upload"))+" ",1),et,(a(),r(y(e(f).arrowRight),{class:"transform group-hover:scale-115 text-gray-400"}))])),[[w,["c:navdraw:preview-as"]]])]),expandIcon:c(()=>[]),default:c(()=>[(a(!0),_(B,null,F(e(z),(o,v)=>(a(),_(B,null,[e(b)(`${v}Import`)&&!Q&&!e(M)?(a(),r(I,{key:v},{default:c(()=>[g((a(),_("div",{class:H(["nc-project-menu-item",{disabled:e(U)}]),onClick:lt=>e(U)?{}:o.value=!0},[(a(),r(y(e(f).upload),{class:"text-gray-500"})),D(" "+R(`${l.$t("general.upload")} ${v.toUpperCase()}`)+" ",1),S("div",ot,[s(ae),D("version")])],10,tt)),[[w,[`a:actions:upload-${v}`]]])]),_:2},1024)):u("",!0)],64))),256))]),_:1})):u("",!0)]),_:1}),e(b)("view-type")?(a(),r(P,{key:"lock-type",class:"scrollbar-thin-dull min-w-50 max-h-90vh overflow-auto !py-0"},{title:c(()=>[g((a(),_("div",nt,[s(T,{"hide-tick":"",type:e(Y)},null,8,["type"]),(a(),r(y(e(f).arrowRight),{class:"transform group-hover:scale-115 group-hover:text-accent text-gray-400"}))])),[[w,["c:navdraw:preview-as"]]])]),expandIcon:c(()=>[]),default:c(()=>[s(I,{onClick:n[3]||(n[3]=o=>A(e(p).Collaborative))},{default:c(()=>[s(T,{type:e(p).Collaborative},null,8,["type"])]),_:1}),s(I,{onClick:n[4]||(n[4]=o=>A(e(p).Locked))},{default:c(()=>[s(T,{type:e(p).Locked},null,8,["type"])]),_:1}),s(I,{onClick:n[5]||(n[5]=o=>A(e(p).Personal))},{default:c(()=>[s(T,{type:e(p).Personal},null,8,["type"])]),_:1})]),_:1})):u("",!0)]),_:1})]),default:c(()=>[g((a(),r(te,{class:"nc-actions-menu-btn nc-toolbar-btn !border-0 !rounded-md !py-1 !px-2"},{default:c(()=>[s(ee,{class:"!w-4 !h-4"})]),_:1})),[[w,["c:actions"]]])]),_:1},8,["visible"]),e(q)?(a(),_(B,{key:0},F(O,o=>s(re,{key:o,modelValue:e(z)[o].value,"onUpdate:modelValue":v=>e(z)[o].value=v,"import-type":o,"base-id":e(q),"import-data-only":!0},null,8,["modelValue","onUpdate:modelValue","import-type","base-id"])),64)):u("",!0),e(V)?(a(),r(ie,{key:1,modelValue:e(V),"onUpdate:modelValue":n[8]||(n[8]=o=>x(V)?V.value=o:null)},null,8,["modelValue"])):u("",!0),s(_e,{modelValue:e(E),"onUpdate:modelValue":n[9]||(n[9]=o=>x(E)?E.value=o:null)},null,8,["modelValue"]),s(ue,{visible:e(h),"onUpdate:visible":n[10]||(n[10]=o=>x(h)?h.value=o:null),class:H({active:e(h)}),title:l.$t("activity.listSharedView"),width:"max(900px,60vw)",footer:null,"wrap-class-name":"nc-modal-shared-view-list"},{default:c(()=>[e(h)?(a(),r(pe,{key:0})):u("",!0)]),_:1},8,["visible","class","title"]),s(de,{modelValue:e($),"onUpdate:modelValue":n[11]||(n[11]=o=>x($)?$.value=o:null)},null,8,["modelValue"])])}}});const kt=Ne(at,[["__scopeId","data-v-310ef246"]]);export{kt as default};

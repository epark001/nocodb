import{_ as V}from"./Icon.vue.e15b8911.js";import{a as B,f as M}from"./useMetas.223da623.js";import{A as N,b as S,d as T}from"./index.5263eb1d.js";import{h as U,cb as A,$ as u,r as h,cI as E,o as f,C as m,w as _,a as i,cF as L,t as c,I as w,E as a,b as v,d as g,aV as P,D as F,F as z,H as G,J,L as O,f as q}from"./entry.13466615.js";import{u as K}from"./index.f13259f4.js";import{D as Q}from"./index.82f05b6c.js";import{_ as W}from"./_plugin-vue_export-helper.c27b6911.js";import"./Dropdown.a78be736.js";import"./RightOutlined.2c092523.js";const X={class:"flex items-center gap-0.5"},Y={class:"w-full bg-white shadow-lg menu-filter-dropdown border-1 border-gray-50 rounded-md overflow-hidden","data-testid":"nc-height-menu"},Z={class:"text-xs text-gray-500 px-3 pt-2 pb-1 select-none"},ee=U({__name:"RowHeight",setup(oe){const{isSharedBase:$}=A(B()),o=u(N,h()),y=u(S,h(!1)),j=u(T,h(!1)),{$api:k}=q(),{addUndo:I,defineViewScope:D}=M(),r=h(!1),n=async(t,e=!1)=>{var l;if((l=o.value)!=null&&l.id){if(t===o.value.view.row_height)return;e||I({redo:{fn:s=>n(s,!0),args:[t]},undo:{fn:s=>n(s,!0),args:[o.value.view.row_height||0]},scope:D({view:o.value})});try{!y.value&&!$.value&&await k.dbView.gridUpdate(o.value.id,{row_height:t}),o.value.view.row_height=t,r.value=!1}catch{J.error("There was an error while updating view!")}}};return K(r),(t,e)=>{const l=O,s=V,H=Q,R=E("e");return f(),m(H,{visible:a(r),"onUpdate:visible":e[5]||(e[5]=d=>G(r)?r.value=d:null),"offset-y":"",class:"",trigger:["click"],"overlay-class-name":"nc-dropdown-height-menu"},{overlay:_(()=>{var d,b,C,x;return[i("div",Y,[i("div",{class:"flex flex-col w-full text-sm",onClick:e[4]||(e[4]=L(()=>{},["stop"]))},[i("div",Z,c(t.$t("objects.rowHeight")),1),i("div",{class:w(["nc-row-height-option",{active:((d=a(o))==null?void 0:d.view).row_height===0}]),onClick:e[0]||(e[0]=p=>n(0))},[v(s,{icon:"heightShort",class:"nc-row-height-icon"}),g(" "+c(t.$t("objects.heightClass.short")),1)],2),i("div",{class:w(["nc-row-height-option",{active:((b=a(o))==null?void 0:b.view).row_height===1}]),onClick:e[1]||(e[1]=p=>n(1))},[v(s,{icon:"heightMedium",class:"nc-row-height-icon"}),g(" "+c(t.$t("objects.heightClass.medium")),1)],2),i("div",{class:w(["nc-row-height-option",{active:((C=a(o))==null?void 0:C.view).row_height===2}]),onClick:e[2]||(e[2]=p=>n(2))},[v(s,{icon:"heightTall",class:"nc-row-height-icon"}),g(" "+c(t.$t("objects.heightClass.tall")),1)],2),i("div",{class:w(["nc-row-height-option",{active:((x=a(o))==null?void 0:x.view).row_height===3}]),onClick:e[3]||(e[3]=p=>n(3))},[v(s,{icon:"heightExtra",class:"nc-row-height-icon"}),g(" "+c(t.$t("objects.heightClass.extra")),1)],2)])])]}),default:_(()=>[i("div",null,[P((f(),m(l,{class:"nc-height-menu-btn nc-toolbar-btn",disabled:a(j)},{default:_(()=>[i("div",X,[(f(),m(F(a(z).rowHeight),{class:"!h-3.75 !w-3.75"}))])]),_:1},8,["disabled"])),[[R,["c:row-height"]]])])]),_:1},8,["visible"])}}});const he=W(ee,[["__scopeId","data-v-c0937e2a"]]);export{he as default};

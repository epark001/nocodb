import{o as n,c as i,a as s,h as ee,T as ke,r as q,t as T,E as t,b as l,I as Q,C as Z,aj as X,d as I,i as k,fb as L,J as Y,K as se,H as E,w as P,W as U,bP as ce,fS as $e,f as Ce,fI as Se,Q as _e,R as pe,cp as Ve,cA as Le,L as me,p as ve,e as fe,g as Me,cb as ae,m as je,b2 as Te,aq as Ue,D as Pe,eV as de,b5 as Ae,P as Re}from"./entry.13466615.js";import{_ as ne}from"./_plugin-vue_export-helper.c27b6911.js";import{a as he}from"./useSmartsheetStore.9bdf3b91.js";import{u as we}from"./useDashboard.34dd8f64.js";import{u as ye}from"./views.3cd4bcb9.js";import{u as Be,a as Ie}from"./useMetas.223da623.js";import{_ as Ne}from"./index.7677ce8f.js";import{_ as Oe}from"./Password.d7b16461.js";import{_ as De}from"./ProjectIcon.05001560.js";import{_ as Ee}from"./Button.vue.a83cab3b.js";import{u as ze}from"./useCopy.a0671815.js";import{K as We,u as ue}from"./v3-infinite-loading.e93e94ab.js";import{u as He}from"./index.d22afba1.js";import{A as Fe}from"./index.395ba25b.js";import{S as ge}from"./index.f2e6837c.js";import{_ as Ze}from"./index.4385a501.js";const Ge={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Je=s("path",{fill:"currentColor",d:"M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1Z"},null,-1),Ke=[Je];function Ye(r,u){return n(),i("svg",Ge,Ke)}const xe={name:"mdi-content-copy",render:Ye},qe={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Qe=s("path",{fill:"currentColor",d:"M21 7L9 19l-5.5-5.5l1.41-1.41L9 16.17L19.59 5.59L21 7Z"},null,-1),Xe=[Qe];function et(r,u){return n(),i("svg",qe,Xe)}const be={name:"mdi-check",render:et},tt={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ot=s("path",{fill:"currentColor",d:"m14.6 16.6l4.6-4.6l-4.6-4.6L16 6l6 6l-6 6l-1.4-1.4m-5.2 0L4.8 12l4.6-4.6L8 6l-6 6l6 6l1.4-1.4Z"},null,-1),st=[ot];function at(r,u){return n(),i("svg",tt,st)}const nt={name:"mdi-code-tags",render:at},lt={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},it=s("path",{fill:"currentColor",d:"M10 6v2H5v11h11v-5h2v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6Zm11-3v8h-2V6.413l-7.793 7.794l-1.414-1.414L17.585 5H13V3h8Z"},null,-1),rt=[it];function ct(r,u){return n(),i("svg",lt,rt)}const dt={name:"ri-external-link-line",render:ct},ut={class:"flex flex-row items-center justify-end text-gray-600 gap-x-1.5 py-1.5 px-1.5 bg-gray-50 rounded-md border-1 border-gray-200"},_t={class:"overflow-hidden whitespace-nowrap text-gray-500"},pt={class:"flex flex-row gap-x-1"},mt={class:"flex text-xs",style:{fontWeight:500}},vt=ee({__name:"CopyUrl",props:{url:{}},emits:["update:url"],setup(r,{emit:u}){const y=ke(r,"url",u),h=q({link:!1,embed:!1}),A=async()=>{window.open(y.value,"_blank")},N=async()=>{await navigator.clipboard.writeText(`<iframe src="${y.value}" width="100%" height="100%" style="border: none;"></iframe>`),h.value.embed=!0},d=async()=>{h.value.link=!1,await navigator.clipboard.writeText(y.value),setTimeout(()=>{h.value.link=!0},100)};return(e,m)=>{const f=dt,g=nt,M=be,j=xe;return n(),i("div",ut,[s("div",{class:"flex flex-row block flex-1 overflow-hidden pl-3 cursor-pointer",onClick:d},[s("div",_t,T(t(y)),1)]),s("div",pt,[s("div",{class:"button",onClick:A},[l(f,{class:"h-3.75"})]),s("div",{class:Q(["button",{"!text-gray-300 !border-gray-200 !cursor-not-allowed":t(h).embed}]),onClick:N},[l(g,{class:"h-4"})],2),s("div",{class:"button","data-testid":"docs-share-page-copy-link",onClick:d},[t(h).link?(n(),Z(M,{key:0,class:"h-3.5"})):(n(),Z(j,{key:1,class:"h-3.5"})),s("div",mt,[t(h).link?(n(),i(X,{key:0},[I(" Link Copied ")],64)):(n(),i(X,{key:1},[I(" Copy Link ")],64))])])])])}}});const ft=ne(vt,[["__scopeId","data-v-ad6b0ce8"]]),ht=_e(()=>pe(()=>import("./ColorPicker.513026a6.js"),["./ColorPicker.513026a6.js","./entry.13466615.js","./entry.0f786d51.css","./Icon.vue.e15b8911.js","./Tooltip.vue.67a657ea.js","./index.3cc83813.js","./index.62e3d60f.js","./Dropdown.a78be736.js","./useState.a6853ebd.js","./useRefs.6ea70d5c.js","./identity.b813b76e.js","./isSymbol.b9109ae5.js","./_flatRest.037bf8e3.js","./isMobile.e2e89480.js","./useMergedState.1cc2a884.js","./index.638acbb4.js","./Col.23d910dc.js","./responsiveObserve.9209e727.js","./index.89133b21.js","./isPlainObject.4c0f42f1.js","./_getPrototype.00be30f0.js","./_plugin-vue_export-helper.c27b6911.js","./ColorPicker.effd5480.css"],import.meta.url).then(r=>r.default||r)),wt={class:"flex flex-col py-2 px-3 mb-1"},yt={class:"flex flex-col w-full mt-2.5 px-3 py-2.5 border-gray-200 border-1 rounded-md gap-y-2"},gt={class:"flex flex-row w-full justify-between py-0.5"},xt=s("div",{class:"flex",style:{fontWeight:500}},"Enable public viewing",-1),bt={class:"mt-0.5 border-t-1 border-gray-100 pt-3"},kt={class:"flex flex-col justify-between mt-1 py-2 px-3 bg-gray-50 rounded-md"},$t={class:"flex flex-row justify-between"},Ct=s("div",{class:"flex text-black"},"Restrict access with password",-1),St={key:0,class:"flex gap-2 mt-2 w-2/3"},Vt={class:"flex flex-col justify-between gap-y-3 mt-1 py-2 px-3 bg-gray-50 rounded-md"},Lt={key:0,class:"flex flex-row justify-between"},Mt=s("div",{class:"flex text-black"},"Allow Download",-1),jt={key:1,class:"flex flex-row justify-between"},Tt=s("div",{class:"text-black"},"Survey Mode",-1),Ut={key:2,class:"flex flex-row justify-between"},Pt=s("div",{class:"text-black"},"RTL Orientation",-1),At={key:3,class:"flex flex-col justify-between gap-y-1 bg-gray-50 rounded-md"},Rt={class:"flex flex-row justify-between"},Bt=s("div",{class:"text-black"},"Use Theme",-1),It={key:0,class:"flex -ml-1"},Nt=ee({__name:"SharePage",setup(r){const{view:u,$api:$}=he(),{$e:y}=Ce(),{dashboardUrl:h}=we(),A=ye(),{metas:N}=Be(),d=q({public:!1,password:!1,download:!1}),e=k({get:()=>{var o;return typeof((o=u.value)==null?void 0:o.meta)=="string"&&(u.value.meta=JSON.parse(u.value.meta)),u.value},set:o=>{var a;typeof((a=u.value)==null?void 0:a.meta)=="string"&&(u.value.meta=JSON.parse(u.value.meta)),typeof(o==null?void 0:o.meta)=="string"&&(o.meta=JSON.parse(o.meta)),u.value=o}}),m=k(()=>B()??""),f=q(!1),g=k(()=>{var o;return!!((o=e.value)!=null&&o.password)||f.value}),M=k({get:()=>{var o;return g.value?((o=e.value)==null?void 0:o.password)??"":""},set:async o=>{e.value&&(e.value={...e.value,password:g.value?o:null},R())}}),j=k({get:()=>{var o;return!!((o=e.value)!=null&&o.meta.withTheme)},set:o=>{var a;(a=e.value)!=null&&a.meta&&(e.value.meta={...e.value.meta,withTheme:o},V())}}),O=async()=>{if(f.value=!g.value,!!e.value&&!d.value.password){d.value.password=!0;try{g.value?e.value={...e.value,password:null}:e.value={...e.value,password:""},await R()}finally{d.value.password=!1}}},c=k({get:()=>{var o,a,p,x;return(o=e.value)!=null&&o.meta?(typeof((a=e.value)==null?void 0:a.meta)=="string"&&(e.value.meta=JSON.parse(e.value.meta)),!!((x=(p=e.value)==null?void 0:p.meta)!=null&&x.rtl)):!1},set:o=>{var a,p;(a=e.value)!=null&&a.meta&&(typeof((p=e.value)==null?void 0:p.meta)=="string"&&(e.value.meta=JSON.parse(e.value.meta)),e.value.meta={...e.value.meta,rtl:o},R())}}),w=k({get:()=>{var o,a;return!!((a=(o=e.value)==null?void 0:o.meta)!=null&&a.allowCSVDownload)},set:async o=>{var a;if((a=e.value)!=null&&a.meta){d.value.download=!0;try{e.value.meta={...e.value.meta,allowCSVDownload:o},await W()}finally{d.value.download=!1}}}}),v=k({get:()=>{var o;return!!((o=e.value)!=null&&o.meta.surveyMode)},set:o=>{var a;(a=e.value)!=null&&a.meta&&(e.value.meta={...e.value.meta,surveyMode:o},S())}});function B(){if(!e.value)return;let o;switch(e.value.type){case L.FORM:o="form";break;case L.KANBAN:o="kanban";break;case L.GALLERY:o="gallery";break;case L.MAP:o="map";break;default:o="view"}return encodeURI(`${h==null?void 0:h.value}#/nc/${o}/${e.value.uuid}`)}const _=async()=>{var o,a;if((o=e.value)!=null&&o.id)if((a=e.value)!=null&&a.uuid)await $.dbViewShare.delete(e.value.id),e.value={...e.value,uuid:void 0,password:void 0};else{const p=await $.dbViewShare.create(e.value.id);if(e.value={...e.value,...p},e.value.type===L.KANBAN){const x=N.value[A.activeView.fk_model_id].columns.find(D=>D.id===A.activeView.view.fk_grp_col_id);e.value.meta={...e.value.meta,groupingFieldColumn:x},await R()}}},C=async()=>{if(!d.value.public){d.value.public=!0;try{return await _()}catch(o){Y.error(await se(o))}finally{d.value.public=!1}}};async function W(){d.value.download=!0;try{await R(),y(`a:view:share:${w.value?"enable":"disable"}-csv-download`)}catch(o){Y.error(await se(o))}d.value.download=!1}async function S(){await R(),y(`a:view:share:${v.value?"enable":"disable"}-survey-mode`)}async function V(){await R(),y(`a:view:share:${j.value?"enable":"disable"}-theme`)}async function R(){var o;try{if(!((o=e.value)!=null&&o.meta))return;const a=e.value.meta;await $.dbViewShare.update(e.value.id,{meta:a,password:e.value.password})}catch(a){Y.error(await se(a))}return!0}function te(o){var p;if(!((p=e.value)!=null&&p.meta))return;const a=Se(o);if(a.isValid()){const x=a.complement();e.value.meta.theme={primaryColor:o,accentColor:x.toHex8String()},V()}}const J=k(()=>{var o;return!!((o=e.value)!=null&&o.uuid)}),oe=k(()=>!1);return(o,a)=>{var H,F,le;const p=Ne,x=ft,D=Oe,K=ht;return n(),i("div",wt,[s("div",yt,[s("div",gt,[xt,l(p,{"data-testid":"share-view-toggle",checked:t(J),loading:t(d).public,class:"share-view-toggle !mt-0.25",disabled:t(oe),onClick:C},null,8,["checked","loading","disabled"])]),t(J)?(n(),i(X,{key:0},[s("div",bt,[l(x,{url:t(m),"onUpdate:url":a[0]||(a[0]=b=>E(m)?m.value=b:null)},null,8,["url"])]),s("div",kt,[s("div",$t,[Ct,l(p,{"data-testid":"share-password-toggle",checked:t(g),loading:t(d).password,class:"share-password-toggle !mt-0.25",onClick:O},null,8,["checked","loading"])]),l(ce,{name:"layout",mode:"out-in"},{default:P(()=>[t(g)?(n(),i("div",St,[l(D,{value:t(M),"onUpdate:value":a[1]||(a[1]=b=>E(M)?M.value=b:null),"data-testid":"nc-modal-share-view__password",class:"!rounded-lg !py-1 !bg-white",size:"small",type:"password",placeholder:o.$t("placeholder.password.enter")},null,8,["value","placeholder"])])):U("",!0)]),_:1})]),s("div",Vt,[t(e)&&(t(e).type===t(L).GRID||t(e).type===t(L).KANBAN||t(e).type===t(L).GALLERY||t(e).type===t(L).MAP)?(n(),i("div",Lt,[Mt,l(p,{checked:t(w),"onUpdate:checked":a[2]||(a[2]=b=>E(w)?w.value=b:null),"data-testid":"share-download-toggle",loading:t(d).download,class:"public-password-toggle !mt-0.25"},null,8,["checked","loading"])])):U("",!0),((H=t(e))==null?void 0:H.type)===t(L).FORM?(n(),i("div",jt,[Tt,l(p,{checked:t(v),"onUpdate:checked":a[3]||(a[3]=b=>E(v)?v.value=b:null),"data-testid":"nc-modal-share-view__surveyMode"},null,8,["checked"])])):U("",!0),((F=t(e))==null?void 0:F.type)===t(L).FORM?(n(),i("div",Ut,[Pt,l(p,{checked:t(c),"onUpdate:checked":a[4]||(a[4]=b=>E(c)?c.value=b:null),"data-testid":"nc-modal-share-view__RTL"},null,8,["checked"])])):U("",!0),((le=t(e))==null?void 0:le.type)===t(L).FORM?(n(),i("div",At,[s("div",Rt,[Bt,l(p,{"data-testid":"share-theme-toggle",checked:t(j),loading:t(d).password,class:"share-theme-toggle !mt-0.25",onClick:a[5]||(a[5]=b=>j.value=!t(j))},null,8,["checked","loading"])]),l(ce,{name:"layout",mode:"out-in"},{default:P(()=>{var b,ie,re;return[t(j)?(n(),i("div",It,[l(K,{"data-testid":"nc-modal-share-view__theme-picker",class:"!p-0 !bg-inherit","model-value":(re=(ie=(b=t(e))==null?void 0:b.meta)==null?void 0:ie.theme)==null?void 0:re.primaryColor,colors:"projectThemeColors"in o?o.projectThemeColors:t($e),"row-size":9,advanced:!1,onInput:te},null,8,["model-value","colors"])])):U("",!0)]}),_:1})])):U("",!0)])],64)):U("",!0)])])}}});const Ot={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Dt=s("path",{fill:"currentColor",d:"M21 7L9 19l-5.5-5.5l1.41-1.41L9 16.17L19.59 5.59L21 7Z"},null,-1),Et=[Dt];function zt(r,u){return n(),i("svg",Ot,Et)}const Wt={name:"mdi-tick",render:zt},Ht={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ft=s("path",{fill:"currentColor",d:"M20 11v2H8l5.5 5.5l-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5L8 11h12Z"},null,-1),Zt=[Ft];function Gt(r,u){return n(),i("svg",Ht,Zt)}const Jt={name:"mdi-arrow-left",render:Gt},z=r=>(ve("data-v-bf879839"),r=r(),fe(),r),Kt={class:"flex flex-col mx-4 h-112"},Yt=z(()=>s("div",{class:"flex mt-2.5 mb-2.5 border-b-1 border-gray-50 pb-1.5",style:{fontWeight:500}},"Manage Collaborators",-1)),qt=z(()=>s("div",{class:"flex mt-2.5 mb-2.5 text-xs",style:{fontWeight:500}},"Project Owner",-1)),Qt={key:0,class:"flex flex-row px-2 py-2 items-center gap-x-2 border-1 border-gray-100 rounded-md"},Xt={class:"flex flex-col justify-center"},eo={class:"flex",style:{fontWeight:500}},to=z(()=>s("div",{class:"flex flex-grow"},null,-1)),oo={class:"flex flex-row mt-4 mb-2 pt-3 border-gray-100 border-t-1 gap-x-3 items-center text-xs"},so=z(()=>s("div",{style:{fontWeight:500}},"People with access",-1)),ao={class:"bg-gray-50 border-gray-100 border-1 py-0.5 px-1.5 rounded-md","data-testid":"nc-manage-user-user-count"},no={class:"flex flex-col mb-2 pr-0.5 h-96 overflow-y-auto users-list border-b-1 border-gray-100"},lo={key:0,class:"text-xs mt-2"},io=["data-testid"],ro={class:"flex flex-row items-center gap-x-2"},co={class:"flex flex-col justify-center"},uo={class:"flex",style:{fontWeight:500}},_o=["data-testid"],po={key:0,class:"flex"},mo={key:1,class:"flex text-red-500",style:{fontWeight:500}},vo={class:"flex flex-row w-full justify-center mt-2"},fo=z(()=>s("span",null,null,-1)),ho={class:"flex flex-row justify-between pt-3 pb-2"},wo=z(()=>s("div",null,"Back to Share",-1)),yo=ee({__name:"ManageUsers",emits:["close"],setup(r,{emit:u}){const{users:$,totalUsers:y,editedUsers:h,currentPage:A,loadUsers:N,updateEditedUsers:d,isBatchUpdating:e}=He(),m=k(()=>{var c;return(c=$.value)==null?void 0:c.find(w=>{var v;return(v=w.roles)==null?void 0:v.includes("owner")})}),f=k(()=>{var c;return((c=$.value)==null?void 0:c.filter(w=>{var v;return!((v=w.roles)!=null&&v.includes("owner"))}))||[]}),g=()=>{u("close",!1)},M=c=>!c.firstname&&!c.lastname,j=async c=>{var v,B,_;const w=((v=$.value)==null?void 0:v.length)||0;if(((B=$.value)==null?void 0:B.length)===y.value){c.complete();return}if(c.loading(),await N(),A.value+=1,w===((_=$.value)==null?void 0:_.length)){c.complete();return}c.loaded()},O=[{id:"Creator",name:"Creator",value:"creator"},{id:"Editor",name:"Editor",value:"editor"},{id:"Commenter",name:"Commenter",value:"commenter"},{id:"Viewer",name:"Viewer",value:"viewer"},{id:"None",name:"Remove",value:"No access"}];return(c,w)=>{const v=Fe,B=Ze,_=ge,C=Jt,W=me;return n(),i("div",Kt,[Yt,qt,t(m)?(n(),i("div",Qt,[l(v),s("div",Xt,[s("div",eo,T(t(m).firstname)+" "+T(t(m).lastname),1),s("div",{class:Q(["flex text-xs",{"text-gray-500":!M(t(m))}])},T(t(m).email),3)])])):U("",!0),to,s("div",oo,[so,s("div",ao,T(t(y)-1)+" users ",1)]),s("div",no,[t(f).length===0?(n(),i("div",lo,"No users have access to this project")):U("",!0),(n(!0),i(X,null,Ve(t(f),S=>(n(),i("div",{key:S.id,class:"flex flex-row mb-1.5 px-2 py-1.5 items-center border-1 border-gray-100 rounded-md justify-between","data-testid":`nc-manage-users-${S.email}`},[s("div",ro,[l(v),s("div",co,[s("div",uo,T(S.firstname)+" "+T(S.lastname),1),s("div",{class:Q(["flex text-xs",{"text-gray-500":!M(S)}])},T(S.email),3)])]),l(B,{value:S.roles,"onUpdate:value":V=>S.roles=V,class:"flex !rounded-md p-0.5 !bg-white capitalize nc-dropdown-user-role-container !min-w-26","dropdown-class-name":"nc-dropdown-user-role !rounded-md",placeholder:"Select role",options:O},{option:P(V=>[s("div",{class:"flex flex-row items-center gap-x-2","data-testid":`nc-manage-users-role-${V.id!=="None"?V.name:"Remove"}`},[V.id!=="None"?(n(),i("div",po,T(V.name),1)):(n(),i("div",mo,"Remove"))],8,_o)]),_:2},1032,["value","onUpdate:value"])],8,io))),128)),l(t(We),Le(c.$attrs,{onInfinite:j}),{spinner:P(()=>[s("div",vo,[l(_)])]),complete:P(()=>[fo]),_:1},16)]),s("div",ho,[s("div",{class:"flex flex-row items-center gap-x-2 px-2 rounded-md cursor-pointer hover:bg-gray-50",onClick:g},[l(C),wo]),l(W,{type:"primary",class:"!rounded-md",disabled:t(h).length===0,loading:t(e),"data-testid":"nc-manage-users-submit",onClick:w[0]||(w[0]=()=>t(d)())},{default:P(()=>[I(" Save Changes ")]),_:1},8,["disabled","loading"])])])}}});const go=ne(yo,[["__scopeId","data-v-bf879839"]]),xo=_e(()=>pe(()=>import("./ShareBase.37d7f40d.js"),["./ShareBase.37d7f40d.js","./entry.13466615.js","./entry.0f786d51.css","./useDashboard.34dd8f64.js","./useMetas.223da623.js","./index.7677ce8f.js","./FormItemContext.27b2e5db.js","./_plugin-vue_export-helper.c27b6911.js","./useSmartsheetStore.9bdf3b91.js","./views.3cd4bcb9.js","./useSharedView.746b4f21.js","./index.5263eb1d.js","./index.2a3da6a9.js","./Password.d7b16461.js","./Input.16966097.js","./antInputDirective.8ac36ea7.js","./ProjectIcon.05001560.js","./ProjectIcon.e2bf4d92.css","./Button.vue.a83cab3b.js","./index.f2e6837c.js","./debounce.dbc9bf77.js","./toNumber.7aa6a805.js","./isSymbol.b9109ae5.js","./Button.95d2a5ed.css","./useCopy.a0671815.js","./v3-infinite-loading.e93e94ab.js","./index.d22afba1.js","./QuickImport.vue.13f30a49.js","./validation.5ed31fc1.js","./index.6f605a00.js","./FormItem.fe59dafe.js","./identity.b813b76e.js","./_getPrototype.00be30f0.js","./Col.23d910dc.js","./responsiveObserve.9209e727.js","./toArray.f6fa5a71.js","./useSize.dec45296.js","./_flatRest.037bf8e3.js","./isPlainObject.4c0f42f1.js","./CheckOutlined.80115d65.js","./useRefs.6ea70d5c.js","./useMergedState.1cc2a884.js","./index.62e3d60f.js","./Dropdown.a78be736.js","./useState.a6853ebd.js","./isMobile.e2e89480.js","./index.a8ef1b7e.js","./SearchOutlined.c1eed30a.js","./TextArea.1bd4034f.js","./index.1669d181.js","./index.7bdf0a46.js","./DownOutlined.9cfe3e0c.js","./index.2660048d.js","./Checkbox.65681aa3.js","./createForOfIteratorHelper.37be2624.js","./OpenLeftSidebarBtn.vue.55bf93c3.js","./Icon.vue.e15b8911.js","./Tooltip.vue.30df4de9.js","./Tooltip.b86f91a1.css","./sidebar.42429978.js","./plus.5f5a668e.js","./Modal.vue.7eba58e8.js","./DeleteModal.7ab6f524.css","./tab.586445bb.js","./index.638acbb4.js","./index.3cc83813.js","./index.89133b21.js","./plus.c191ad20.css","./Modal.vue.fe6a4790.js","./index.18c65772.js","./index.e7cf7635.js","./domUtils.b0dc23e8.js","./Select.vue.140b59a5.js","./index.4385a501.js","./useMemo.4991ab9d.js","./Select.6ec8848b.css","./chevron-down.166de573.js","./send-outline.95d535cb.js","./index.2c1df8bc.js","./index.2ae12d3e.js","./DeleteModal.vue.55101b0a.js","./vuedraggable.umd.8d33c631.js","./Editor.vue.2426816e.js","./deepCompare.d32ec333.js","./fileUtils.43128440.js","./index.8edf0358.js","./RightOutlined.2c092523.js","./TableIcon.vue.95089890.js","./index.66af8095.js","./eagerComputed.9d79768b.js","./index.bc4f5185.js","./LeftOutlined.b2689280.js","./useBreakpoint.66a79637.js","./index.9d81d9da.js","./index.82f05b6c.js","./index.1041b981.js","./TruncateText.vue.454bbb27.js","./ViewIcon.vue.8aa1efd9.js","./ViewIcon.fd2d300a.css","./View.vue.d0d00de4.js","./Overlay.f7b74b5f.js","./Overlay.09be8605.css","./View.5176b468.css","./index.06e4d9f4.css","./index.395ba25b.js","./index.ff7d18e2.js"],import.meta.url).then(r=>r.default||r)),G=r=>(ve("data-v-a38f6446"),r=r(),fe(),r),bo={key:0,class:"flex flex-row w-full px-5 justify-between items-center py-1"},ko=G(()=>s("div",{class:"flex text-base",style:{fontWeight:500}},"Adding Collaborators",-1)),$o={key:1,class:"flex flex-col py-1.5"},Co={class:"flex flex-row w-full px-5 justify-between items-center py-0.5"},So=G(()=>s("div",{class:"flex text-base",style:{fontWeight:500}},"Collaborators added",-1)),Vo={class:"flex"},Lo={class:"flex flex-row mx-3 mt-2.5 pt-3.5 border-t-1 border-gray-100 justify-end gap-x-2"},Mo={key:0,class:"flex flex-row items-center gap-x-1"},jo={key:1,class:"flex flex-row items-center gap-x-1"},To={key:2},Uo={key:3,class:"flex flex-col px-1"},Po=G(()=>s("div",{class:"flex flex-row justify-between items-center pb-1 mx-4 mt-3"},[s("div",{class:"flex text-base font-medium"},"Share")],-1)),Ao={key:0,class:"share-view"},Ro={class:"flex flex-row items-center gap-x-2 px-4 pt-3 pb-3 select-none"},Bo=G(()=>s("div",null,"Share View",-1)),Io={class:"max-w-79/100 ml-2 px-2 py-0.5 rounded-md bg-gray-100 capitalize text-ellipsis overflow-hidden",style:{wordBreak:"keep-all",whiteSpace:"nowrap"}},No={class:"share-base"},Oo={class:"flex flex-row items-center gap-x-2 px-4 pt-3 pb-3 select-none"},Do=G(()=>s("div",null,"Share Base",-1)),Eo={class:"max-w-79/100 ml-2 px-2 py-0.5 rounded-md bg-gray-100 capitalize text-ellipsis overflow-hidden",style:{wordBreak:"keep-all",whiteSpace:"nowrap"}},zo={class:"flex flex-row justify-end mx-3 mt-1 mb-2 pt-4 gap-x-2"},Wo=ee({__name:"View",props:{isViewToolbar:{type:Boolean}},setup(r){Me().currentRoute;const{copy:$}=ze(),{dashboardUrl:y}=we(),h=Ie(),{project:A}=ae(h),{navigateToProjectPage:N}=h,{activeView:d}=ae(ye());let e;if(r.isViewToolbar)try{e=he().view}catch(_){console.error(_)}const{formStatus:m,showShareModal:f,invitationUsersData:g,isInvitationLinkCopied:M}=ae(ue()),{resetData:j}=ue(),O=q(!1),c=k(()=>g.value.invitationToken?`${y.value}#/signup/${g.value.invitationToken}`:null),w=je(Te,{style:{fontSize:"24px"},spin:!0}),v=async()=>{await $(c.value),M.value=!0},B=async()=>{O.value=!0;try{await N({page:"collaborator"}),f.value=!1}catch(_){console.error(_),Y.error("Failed to open manage access")}finally{O.value=!1}};return Ue(f,_=>{_||setTimeout(()=>{j()},500)}),(_,C)=>{const W=ge,S=be,V=me,R=Wt,te=xe,J=Nt,oe=De,o=xo,a=Ee,p=Re;return n(),Z(p,{visible:t(f),"onUpdate:visible":C[3]||(C[3]=x=>E(f)?f.value=x:null),class:Q(["!top-[55%]",{active:t(f)}]),"wrap-class-name":"nc-modal-share-collaborate",closable:!1,"mask-closable":t(m)!=="project-collaborateSaving","ok-button-props":{hidden:!0},"cancel-button-props":{hidden:!0},footer:null,width:t(m)==="manageCollaborators"?"60rem":"40rem"},{default:P(()=>{var x,D,K,H;return[t(m)==="project-collaborateSaving"?(n(),i("div",bo,[ko,l(W,{indicator:t(w)},null,8,["indicator"])])):t(m)==="project-collaborateSaved"?(n(),i("div",$o,[s("div",Co,[So,s("div",Vo,[l(S)])]),s("div",Lo,[l(V,{type:"text",class:"!border-1 !border-gray-200 !rounded-md",onClick:C[0]||(C[0]=F=>f.value=!1)},{default:P(()=>[I("Close ")]),_:1}),l(V,{type:"text",class:"!border-1 !border-gray-200 !rounded-md","data-testid":"docs-share-invitation-copy","data-invite-link":t(c),onClick:v},{default:P(()=>[t(M)?(n(),i("div",Mo,[l(R,{class:"h-3.5"}),I(" Copied invite link ")])):(n(),i("div",jo,[l(te,{class:"h-3.3"}),I(" Copy invite link ")]))]),_:1},8,["data-invite-link"])])])):t(m)==="manageCollaborators"?(n(),i("div",To,[t(m)==="manageCollaborators"?(n(),Z(go,{key:0,onClose:C[1]||(C[1]=F=>m.value="collaborate")})):U("",!0)])):(n(),i("div",Uo,[Po,_.isViewToolbar?(n(),i("div",Ao,[s("div",Ro,[(n(),Z(Pe((D=("viewIcons"in _?_.viewIcons:t(de))[(x=t(e))==null?void 0:x.type])==null?void 0:D.icon),{class:"nc-view-icon group-hover",style:Ae({color:(H=("viewIcons"in _?_.viewIcons:t(de))[(K=t(e))==null?void 0:K.type])==null?void 0:H.color})},null,8,["style"])),Bo,s("div",Io,T(t(d).title),1)]),l(J)])):U("",!0),s("div",No,[s("div",Oo,[l(oe,{type:t(A).type,class:"nc-view-icon group-hover"},null,8,["type"]),Do,s("div",Eo,T(t(A).title),1)]),l(o)]),s("div",zo,[l(a,{type:"secondary","data-testid":"docs-cancel-btn",onClick:C[2]||(C[2]=F=>f.value=!1)},{default:P(()=>[I(" Close ")]),_:1}),l(a,{"data-testid":"docs-share-manage-access",type:"secondary",loading:t(O),onClick:B},{default:P(()=>[I("Manage project access")]),_:1},8,["loading"])])]))]}),_:1},8,["visible","class","mask-closable","width"])}}});const Ho=ne(Wo,[["__scopeId","data-v-a38f6446"]]),is=Object.freeze(Object.defineProperty({__proto__:null,default:Ho},Symbol.toStringTag,{value:"Module"}));export{is as V,ft as _};

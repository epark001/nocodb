import{h as rt,T as ct,$ as g,r as m,aq as j,i as A,m as mt,P as dt,o as e,C as l,w,a as i,E as t,D as _,F as C,W as d,d as U,b as O,t as pt,c as b,aj as q,cp as ut,cF as G,d6 as _t,H,Q as ft,R as vt,L as ht}from"./entry.51f4e399.js";import{_ as yt}from"./TableIcon.vue.27fb2d8a.js";import{_ as kt}from"./ItemChip.14d602dd.js";import{c as xt,b as gt,C as wt,f as Ct}from"./index.5263eb1d.js";import{a as bt}from"./useLTARStore.3d98e502.js";import{a as Rt}from"./useSmartsheetRowStore.aafbb4bb.js";import{C as It}from"./index.680937e8.js";import{_ as Vt}from"./index.09b19c06.js";import{_ as Lt}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.9e760c64.js";import"./cell.1732684e.js";import"./index.8b8de496.js";import"./index.b9981e09.js";import"./useMetas.ba7abae7.js";import"./useSharedView.0db5f32b.js";import"./deepCompare.d32ec333.js";import"./dataUtils.edecace3.js";import"./virtualCell.4dce1393.js";import"./index.c4aafe5c.js";import"./Dropdown.dc69c0a4.js";import"./useState.6010d8b6.js";import"./useRefs.154aa2be.js";import"./identity.dd5da9ba.js";import"./isSymbol.b53bd26f.js";import"./_flatRest.ff2d3d5c.js";import"./isMobile.e2e89480.js";import"./useMergedState.5e6500b1.js";import"./index.529d8b39.js";import"./Col.88cfabc0.js";import"./responsiveObserve.501a6cf9.js";import"./index.fbcca285.js";import"./isPlainObject.ecf52d25.js";import"./_getPrototype.ec1165af.js";import"./LeftOutlined.3bb8aa17.js";import"./RightOutlined.90e8180f.js";import"./index.5e746f62.js";import"./toArray.06afb623.js";import"./antInputDirective.8ac36ea7.js";import"./useMemo.b13a9257.js";import"./DownOutlined.db6f6406.js";import"./CheckOutlined.ef30fafc.js";import"./SearchOutlined.dec109ce.js";import"./FormItemContext.e001cd7c.js";import"./useBreakpoint.a91853f1.js";const Tt=ft(()=>vt(()=>import("./index.a350d282.js").then(r=>r.i),["./index.a350d282.js","./entry.51f4e399.js","./entry.0f786d51.css","./TableIcon.vue.27fb2d8a.js","./Button.vue.793bcd1d.js","./index.0db47614.js","./debounce.7d32c110.js","./toNumber.9dc54e53.js","./isSymbol.b53bd26f.js","./_plugin-vue_export-helper.c27b6911.js","./Button.95d2a5ed.css","./Modal.vue.b59a28af.js","./DeleteModal.7ab6f524.css","./useDashboard.fc1e1c09.js","./useViewData.d5cf5dca.js","./useMetas.ba7abae7.js","./virtualCell.4dce1393.js","./dataUtils.edecace3.js","./index.5263eb1d.js","./useSharedView.0db5f32b.js","./useSmartsheetStore.1784ce8b.js","./views.28a76d89.js","./index.b9981e09.js","./index.9e760c64.js","./useCopy.3e897b55.js","./useKanbanViewStore.7f9b2a7a.js","./deepCompare.d32ec333.js","./useSmartsheetRowStore.aafbb4bb.js","./index.252dc7b4.js","./Dropdown.dc69c0a4.js","./RightOutlined.90e8180f.js","./Icon.vue.1162f18b.js","./index.82c42c24.js","./chevron-down.b89ef60a.js","./index.af5eff28.js","./index.883a1693.css"],import.meta.url).then(r=>r.default||r)),zt={class:"py-6 nc-scrollbar-md"},Ft={class:"flex mb-4 items-center gap-2 px-12"},Mt={class:"flex items-center gap-1"},Nt={class:"nc-scrollbar-md"},Pt={class:"flex flex-col"},St={class:"px-12 cursor-pointer"},Bt={class:"flex items-center"},Dt={class:"flex-1 overflow-hidden min-w-0"},$t={key:0,class:"flex gap-2"},Et={class:"flex justify-center mt-6"},jt={key:1,class:"ml-12 text-gray-500"},At=rt({__name:"ListChildItems",props:{modelValue:{type:Boolean},cellValue:{},column:{}},emits:["update:modelValue","attachRecord"],setup(r,{emit:L}){const R=r,p=ct(R,"modelValue",L),I=g(xt,m(!1)),Q=g(gt,m(!1)),n=g(wt,m()),f=g(Ct,m(!1)),{childrenList:v,deleteRelatedRow:W,loadChildrenList:h,childrenListPagination:y,relatedTableDisplayValueProp:J,unlink:K,relatedTableMeta:V}=bt(),{isNew:c,state:T,removeLTARRef:z}=Rt();j([p,I],o=>{(o[0]||o[1])&&!c.value&&h()},{immediate:!0});const X=async o=>{c.value?await z(o,n==null?void 0:n.value):(await K(o),await h())},Y=async o=>{c.value&&await z(o,n==null?void 0:n.value)},Z=A(()=>I.value?mt("div",{class:"w-full p-2"}):dt),u=m(!1),k=m(),F=A(()=>{var o;return((o=n.value)==null?void 0:o.title)||""});j(()=>R.cellValue,()=>{!c.value&&p.value&&h()});const tt=o=>{f.value||(k.value=o,u.value=!0)};return(o,a)=>{const et=yt,ot=ht,st=kt,at=It,lt=Vt,it=Tt;return e(),l(_(t(Z)),{visible:t(p),"onUpdate:visible":a[4]||(a[4]=x=>H(p)?p.value=x:null),footer:null,title:"Child list","body-style":{padding:0},"wrap-class-name":"nc-modal-child-list"},{default:w(()=>{var x,M,N,P,S,B,D,$;return[i("div",zt,[i("div",Ft,[t(I)?d("",!0):(e(),l(_(t(C).reload),{key:0,class:"cursor-pointer text-gray-500","data-testid":"nc-child-list-reload",onClick:t(h)},null,8,["onClick"])),t(f)?d("",!0):(e(),l(ot,{key:1,type:"primary",ghost:"","data-testid":"nc-child-list-button-link-to",onClick:a[0]||(a[0]=s=>L("attachRecord"))},{default:w(()=>[i("div",Mt,[(e(),l(_(t(C).link),{type:"primary"})),U(" Link to ' "),O(et,{meta:t(V),class:"-mx-1 w-5"},null,8,["meta"]),U(" "+pt(t(V).title)+"' ",1)])]),_:1}))]),t(c)&&((M=(x=t(T))==null?void 0:x[t(F)])!=null&&M.length)||(P=(N=t(v))==null?void 0:N.pageInfo)!=null&&P.totalRows?(e(),b(q,{key:0},[i("div",Nt,[i("div",Pt,[i("div",St,[(e(!0),b(q,null,ut(((S=t(v))==null?void 0:S.list)??((B=t(T))==null?void 0:B[t(F)])??[],(s,nt)=>(e(),l(at,{key:nt,class:"nc-nested-list-item !my-2 !hover:bg-gray-200/50 hover:shadow-md",onClick:E=>tt(s)},{default:w(()=>[i("div",Bt,[i("div",Dt,[O(st,{border:!1,item:s,value:s[t(J)],column:R.column},null,8,["item","value","column"])]),t(f)?d("",!0):(e(),b("div",$t,[(e(),l(_(t(C).linkRemove),{class:"!text-base text-grey !hover:text-red-500 cursor-pointer nc-icon-transition","data-testid":"nc-child-list-icon-unlink",onClick:G(E=>X(s),["stop"])},null,8,["onClick"])),!t(f)&&!t(Q)?(e(),l(_(t(C).delete),{key:0,class:"!text-base text-grey !hover:text-red-500 cursor-pointer nc-icon-transition","data-testid":"nc-child-list-icon-delete",onClick:G(E=>t(W)(s,Y),["stop"])},null,8,["onClick"])):d("",!0)]))])]),_:2},1032,["onClick"]))),128))])])]),i("div",Et,[!t(c)&&((D=t(v))!=null&&D.pageInfo)?(e(),l(lt,{key:0,current:t(y).page,"onUpdate:current":a[1]||(a[1]=s=>t(y).page=s),"page-size":t(y).size,"onUpdate:pageSize":a[2]||(a[2]=s=>t(y).size=s),class:"mt-2 mx-auto",size:"small",total:+(($=t(v))==null?void 0:$.pageInfo.totalRows),"show-less-items":""},null,8,["current","page-size","total"])):d("",!0)])],64)):(e(),b("div",jt,"No Links"))]),(e(),l(_t,null,{default:w(()=>[t(k)&&t(u)?(e(),l(it,{key:0,modelValue:t(u),"onUpdate:modelValue":a[3]||(a[3]=s=>H(u)?u.value=s:null),row:{row:t(k),oldRow:t(k),rowMeta:{}},meta:t(V),"load-row":"","use-meta-fields":""},null,8,["modelValue","row","meta"])):d("",!0)]),_:1}))]}),_:1},40,["visible"])}}});const Me=Lt(At,[["__scopeId","data-v-8fddcb3b"]]);export{Me as default};

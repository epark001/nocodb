import{h as G,T as Q,$ as W,r as R,cb as X,i as E,gu as J,cd as K,o as s,c as r,a as u,b as n,w as o,cA as x,E as t,d,aj as c,cp as U,C as b,t as y,D as Y,H as Z,W as I,Q as ee,R as te}from"./entry.13466615.js";import{_ as ae}from"./TableIcon.vue.95089890.js";import{a as le,M as oe,b as ne}from"./EditOrAddProvider.vue.9fbafb18.js";import{M as se}from"./index.5263eb1d.js";import{a as ie,S as re,M as ue}from"./useMetas.223da623.js";import{R as de,_ as pe}from"./index.1041b981.js";import{C as me}from"./index.2660048d.js";import{_ as ce}from"./FormItem.fe59dafe.js";import{S as ve,_ as _e}from"./index.4385a501.js";import"./Icon.vue.e15b8911.js";import"./Button.vue.a83cab3b.js";import"./index.f2e6837c.js";import"./debounce.dbc9bf77.js";import"./toNumber.7aa6a805.js";import"./isSymbol.b9109ae5.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./useBetaFeatureToggle.52c326cd.js";import"./index.2ae12d3e.js";import"./validation.5ed31fc1.js";import"./index.6f605a00.js";import"./useSize.dec45296.js";import"./identity.b813b76e.js";import"./_flatRest.037bf8e3.js";import"./isPlainObject.4c0f42f1.js";import"./_getPrototype.00be30f0.js";import"./FormItemContext.27b2e5db.js";import"./index.a8ef1b7e.js";import"./Input.16966097.js";import"./antInputDirective.8ac36ea7.js";import"./SearchOutlined.c1eed30a.js";import"./TextArea.1bd4034f.js";import"./Password.d7b16461.js";import"./Checkbox.65681aa3.js";import"./createForOfIteratorHelper.37be2624.js";import"./Col.23d910dc.js";import"./responsiveObserve.9209e727.js";import"./toArray.f6fa5a71.js";import"./isMobile.e2e89480.js";import"./useMemo.4991ab9d.js";import"./useMergedState.1cc2a884.js";import"./useState.a6853ebd.js";import"./DownOutlined.9cfe3e0c.js";import"./CheckOutlined.80115d65.js";const fe=ee(()=>te(()=>import("./LinkOptions.0e417700.js"),["./LinkOptions.0e417700.js","./EditOrAddProvider.vue.9fbafb18.js","./entry.13466615.js","./entry.0f786d51.css","./Icon.vue.e15b8911.js","./Button.vue.a83cab3b.js","./index.f2e6837c.js","./debounce.dbc9bf77.js","./toNumber.7aa6a805.js","./isSymbol.b9109ae5.js","./_plugin-vue_export-helper.c27b6911.js","./Button.95d2a5ed.css","./useBetaFeatureToggle.52c326cd.js","./index.5263eb1d.js","./index.2ae12d3e.js","./validation.5ed31fc1.js","./useMetas.223da623.js","./index.6f605a00.js","./FormItem.fe59dafe.js","./identity.b813b76e.js","./_getPrototype.00be30f0.js","./Col.23d910dc.js","./responsiveObserve.9209e727.js","./toArray.f6fa5a71.js","./FormItemContext.27b2e5db.js","./useSize.dec45296.js","./_flatRest.037bf8e3.js","./isPlainObject.4c0f42f1.js","./index.a8ef1b7e.js","./Input.16966097.js","./antInputDirective.8ac36ea7.js","./SearchOutlined.c1eed30a.js","./TextArea.1bd4034f.js","./Password.d7b16461.js","./index.2660048d.js","./Checkbox.65681aa3.js","./createForOfIteratorHelper.37be2624.js","./index.4385a501.js","./isMobile.e2e89480.js","./useMemo.4991ab9d.js","./useMergedState.1cc2a884.js","./useState.a6853ebd.js","./DownOutlined.9cfe3e0c.js","./CheckOutlined.80115d65.js","./EditOrAddProvider.44ca9c5b.css","./index.89133b21.js","./index.638acbb4.js"],import.meta.url).then(v=>v.default||v)),he={class:"w-full flex flex-col mb-2 mt-4"},be={class:"border-2 p-6"},ye={class:"flex items-center gap-2"},Ce={class:"min-w-5 flex items-center justify-center"},ge={class:"overflow-ellipsis min-w-0 shrink-1"},Te={key:0,class:"flex flex-col p-6 gap-4 border-2 mt-2"},we={class:"flex flex-row space-x-2"},ke={class:"flex flex-row"},_t=G({__name:"LinkedToAnotherRecordOptions",props:{value:{}},emits:["update:value"],setup(v,{emit:$}){var L,A,O;const e=Q(v,"value",$),_=W(se,R()),{setAdditionalValidations:N,validateInfos:C,onDataTypeChange:f,sqlUi:M,isXcdbBase:D}=le(),V=ie(),{tables:g}=X(V);N({childId:[{required:!0,message:"Required"}]});const h=M===ue?["NO ACTION"]:["NO ACTION","CASCADE","RESTRICT","SET NULL","SET DEFAULT"];e.value.parentId||(e.value.parentId=(L=_.value)==null?void 0:L.id),e.value.childId||(e.value.childId=null),e.value.childColumn||(e.value.childColumn=`${(A=_.value)==null?void 0:A.table_name}_id`),e.value.childTable||(e.value.childTable=(O=_.value)==null?void 0:O.table_name),e.value.parentTable||(e.value.parentTable=e.value.rtn||""),e.value.parentColumn||(e.value.parentColumn=e.value.rcn||""),e.value.type||(e.value.type="mm"),e.value.onUpdate||(e.value.onUpdate=h[0]),e.value.onDelete||(e.value.onDelete=h[0]),e.value.virtual||(e.value.virtual=M===re),e.value.alias||(e.value.alias=e.value.column_name);const p=R(!1),j=E(()=>!g.value||!g.value.length?[]:g.value.filter(i=>{var l;return i.type===J.TABLE&&i.base_id===((l=_.value)==null?void 0:l.base_id)})),B=(i,l)=>l.key.toLowerCase().includes(i.toLowerCase()),q=E(()=>e.value.uidt===K.Links);return(i,l)=>{const S=de,P=pe,m=ce,z=ae,T=ve,w=_e,F=fe,H=me;return s(),r("div",he,[u("div",be,[n(m,x(t(C).type,{class:"nc-ltar-relation-type"}),{default:o(()=>[n(P,x({value:t(e).type,"onUpdate:value":l[0]||(l[0]=a=>t(e).type=a),name:"type"},t(C).type),{default:o(()=>[n(S,{value:"hm"},{default:o(()=>[d("Has Many")]),_:1}),n(S,{value:"mm"},{default:o(()=>[d("Many To Many")]),_:1})]),_:1},16,["value"])]),_:1},16),n(m,x({class:"flex w-full pb-2 mt-4 nc-ltar-child-table",label:i.$t("labels.childTable")},t(C).childId),{default:o(()=>[n(w,{value:t(e).childId,"onUpdate:value":l[1]||(l[1]=a=>t(e).childId=a),"show-search":"","filter-option":B,"dropdown-class-name":"nc-dropdown-ltar-child-table",onChange:t(f)},{default:o(()=>[(s(!0),r(c,null,U(t(j),a=>(s(),b(T,{key:a.title,value:a.id},{default:o(()=>[u("div",ye,[u("div",Ce,[n(z,{meta:a,class:"text-gray-500"},null,8,["meta"])]),u("span",ge,y(a.title),1)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","onChange"])]),_:1},16,["label"])]),!t(D)||t(q)?(s(),r(c,{key:0},[u("div",{class:"text-xs cursor-pointer text-grey nc-more-options my-2 flex items-center gap-1 justify-end",onClick:l[2]||(l[2]=a=>p.value=!t(p))},[d(y(t(p)?i.$t("general.hideAll"):i.$t("general.showMore"))+" ",1),(s(),b(Y(t(p)?t(oe):t(ne))))]),t(p)?(s(),r("div",Te,[n(F,{value:t(e),"onUpdate:value":l[3]||(l[3]=a=>Z(e)?e.value=a:null),class:"-my-2"},null,8,["value"]),t(D)?I("",!0):(s(),r(c,{key:0},[u("div",we,[n(m,{class:"flex w-1/2",label:i.$t("labels.onUpdate")},{default:o(()=>[n(w,{value:t(e).onUpdate,"onUpdate:value":l[4]||(l[4]=a=>t(e).onUpdate=a),disabled:t(e).virtual,name:"onUpdate","dropdown-class-name":"nc-dropdown-on-update",onChange:t(f)},{default:o(()=>[(s(!0),r(c,null,U(t(h),(a,k)=>(s(),b(T,{key:k,value:a},{default:o(()=>[d(y(a),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled","onChange"])]),_:1},8,["label"]),n(m,{class:"flex w-1/2",label:i.$t("labels.onDelete")},{default:o(()=>[n(w,{value:t(e).onDelete,"onUpdate:value":l[5]||(l[5]=a=>t(e).onDelete=a),disabled:t(e).virtual,name:"onDelete","dropdown-class-name":"nc-dropdown-on-delete",onChange:t(f)},{default:o(()=>[(s(!0),r(c,null,U(t(h),(a,k)=>(s(),b(T,{key:k,value:a},{default:o(()=>[d(y(a),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled","onChange"])]),_:1},8,["label"])]),u("div",ke,[n(m,null,{default:o(()=>[n(H,{checked:t(e).virtual,"onUpdate:checked":l[6]||(l[6]=a=>t(e).virtual=a),name:"virtual",onChange:t(f)},{default:o(()=>[d("Virtual Relation")]),_:1},8,["checked","onChange"])]),_:1})])],64))])):I("",!0)],64)):I("",!0)])}}});export{_t as default};

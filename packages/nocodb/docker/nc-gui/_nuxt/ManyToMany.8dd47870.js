import{h as q,$ as a,cg as J,r as _,eI as X,i as C,o as s,c,E as o,aj as I,a as Y,cp as Z,C as T,cF as w,W as d,b as g,H as A,Q as E,R as M}from"./entry.13466615.js";import{_ as ee}from"./ItemChip.28e6239c.js";import{_ as te}from"./Icon.vue.e15b8911.js";import{C as oe,i as ne,j as ae,w as se,c as le,f as re,d as ie,y as ue,h as me}from"./index.5263eb1d.js";import{u as ce}from"./useLTARStore.0002d56d.js";import{u as pe}from"./index.a6329415.js";import{a as _e}from"./useSmartsheetRowStore.ef2cd001.js";import{u as de}from"./index.e7cf7635.js";import{_ as ve}from"./_plugin-vue_export-helper.c27b6911.js";import"./cell.b6c2deed.js";import"./index.8d89c37a.js";import"./index.2a3da6a9.js";import"./useMetas.223da623.js";import"./useSharedView.746b4f21.js";import"./deepCompare.d32ec333.js";import"./dataUtils.31dbfaee.js";import"./virtualCell.88c63e03.js";const fe=E(()=>M(()=>import("./ListItems.fe545f38.js"),["./ListItems.fe545f38.js","./entry.13466615.js","./entry.0f786d51.css","./ItemChip.28e6239c.js","./index.e7cf7635.js","./index.5263eb1d.js","./cell.b6c2deed.js","./index.8d89c37a.js","./index.2a3da6a9.js","./useLTARStore.0002d56d.js","./useMetas.223da623.js","./useSharedView.746b4f21.js","./_plugin-vue_export-helper.c27b6911.js","./ItemChip.06f0b072.css","./index.a6329415.js","./useSmartsheetRowStore.ef2cd001.js","./deepCompare.d32ec333.js","./dataUtils.31dbfaee.js","./virtualCell.88c63e03.js","./index.a8ef1b7e.js","./Input.16966097.js","./antInputDirective.8ac36ea7.js","./FormItemContext.27b2e5db.js","./SearchOutlined.c1eed30a.js","./isPlainObject.4c0f42f1.js","./_getPrototype.00be30f0.js","./TextArea.1bd4034f.js","./Password.d7b16461.js","./index.3cc83813.js","./index.62e3d60f.js","./Dropdown.a78be736.js","./useState.a6853ebd.js","./useRefs.6ea70d5c.js","./identity.b813b76e.js","./isSymbol.b9109ae5.js","./_flatRest.037bf8e3.js","./isMobile.e2e89480.js","./useMergedState.1cc2a884.js","./index.638acbb4.js","./Col.23d910dc.js","./responsiveObserve.9209e727.js","./index.89133b21.js","./index.bc4f5185.js","./LeftOutlined.b2689280.js","./RightOutlined.2c092523.js","./index.4385a501.js","./toArray.f6fa5a71.js","./useMemo.4991ab9d.js","./DownOutlined.9cfe3e0c.js","./CheckOutlined.80115d65.js","./useBreakpoint.66a79637.js","./ListItems.edf42c5a.css"],import.meta.url).then(l=>l.default||l)),ye=E(()=>M(()=>import("./ListChildItems.9829d31b.js"),["./ListChildItems.9829d31b.js","./entry.13466615.js","./entry.0f786d51.css","./TableIcon.vue.95089890.js","./ItemChip.28e6239c.js","./index.e7cf7635.js","./index.5263eb1d.js","./cell.b6c2deed.js","./index.8d89c37a.js","./index.2a3da6a9.js","./useLTARStore.0002d56d.js","./useMetas.223da623.js","./useSharedView.746b4f21.js","./_plugin-vue_export-helper.c27b6911.js","./ItemChip.06f0b072.css","./useSmartsheetRowStore.ef2cd001.js","./deepCompare.d32ec333.js","./dataUtils.31dbfaee.js","./virtualCell.88c63e03.js","./index.3cc83813.js","./index.62e3d60f.js","./Dropdown.a78be736.js","./useState.a6853ebd.js","./useRefs.6ea70d5c.js","./identity.b813b76e.js","./isSymbol.b9109ae5.js","./_flatRest.037bf8e3.js","./isMobile.e2e89480.js","./useMergedState.1cc2a884.js","./index.638acbb4.js","./Col.23d910dc.js","./responsiveObserve.9209e727.js","./index.89133b21.js","./isPlainObject.4c0f42f1.js","./_getPrototype.00be30f0.js","./index.bc4f5185.js","./LeftOutlined.b2689280.js","./RightOutlined.2c092523.js","./index.4385a501.js","./toArray.f6fa5a71.js","./antInputDirective.8ac36ea7.js","./useMemo.4991ab9d.js","./DownOutlined.9cfe3e0c.js","./CheckOutlined.80115d65.js","./SearchOutlined.c1eed30a.js","./FormItemContext.27b2e5db.js","./useBreakpoint.66a79637.js","./ListChildItems.4acf4bce.css"],import.meta.url).then(l=>l.default||l)),ke={class:"flex items-center gap-1 w-full chips-wrapper"},xe={class:"chips flex items-center img-container flex-1 hm-items flex-nowrap min-w-0 overflow-hidden"},Ce={key:0,class:"flex justify-end gap-1 min-h-[30px] items-center"},Ie=q({__name:"ManyToMany",async setup(l){let h,R;const p=a(oe),b=a(ne),r=a(ae),U=a(se,J()),D=a(le),P=a(re,_(!1)),$=a(ie),z=a(ue,_(!1)),i=_(!1),u=_(!1),{isUIAllowed:B}=de(),{state:v,isNew:f,removeLTARRef:F}=_e(),{relatedTableMeta:N,loadRelatedTableMeta:O,relatedTableDisplayValueProp:y,unlink:S}=ce(p,b,f,U.trigger);[h,R]=X(()=>O()),await h,R();const L=C(()=>{var e;return r!=null&&r.value?(r==null?void 0:r.value)??[]:f.value?((e=v==null?void 0:v.value)==null?void 0:e[p==null?void 0:p.value.title])??[]:[]}),k=C(()=>L.value.reduce((e,t)=>{if(!y.value)return e;const m=t[y.value];return m?[...e,{value:m,item:t}]:e},[])),H=async e=>{f.value?await F(e,p.value):await S(e)},G=()=>{u.value=!1,i.value=!0};pe(a(me,_(!1)),e=>{switch(e.key){case"Enter":i.value=!0,e.stopPropagation();break}});const x=C(()=>{var e,t;return(t=(e=N.value)==null?void 0:e.columns)==null?void 0:t.find(m=>m.title===y.value)});return(e,t)=>{var j;const m=ee,V=te,K=fe,Q=ye;return s(),c("div",ke,[o(D)?d("",!0):(s(),c(I,{key:0},[Y("div",xe,[o(k)?(s(),c(I,{key:0},[(s(!0),c(I,null,Z(o(k),(n,W)=>(s(),T(m,{key:W,item:n.item,value:n.value,column:o(x),"show-unlink-button":!0,onUnlink:we=>H(n.item)},null,8,["item","value","column","onUnlink"]))),128)),((j=o(k))==null?void 0:j.length)===10?(s(),c("span",{key:0,class:"caption pointer ml-1 grey--text",onClick:t[0]||(t[0]=w(n=>u.value=!0,["stop"]))}," more... ")):d("",!0)],64)):d("",!0)]),!o($)&&!o(z)?(s(),c("div",Ce,[g(V,{icon:"expand",class:"text-sm nc-action-icon text-gray-500/50 hover:text-gray-500 nc-arrow-expand",onClick:t[1]||(t[1]=w(n=>u.value=!0,["stop"]))}),!o(P)&&o(B)("xcDatatableEditable")?(s(),T(V,{key:0,icon:"plus",class:"text-sm nc-action-icon text-gray-500/50 hover:text-gray-500 nc-plus",onClick:t[2]||(t[2]=w(n=>i.value=!0,["stop"]))})):d("",!0)])):d("",!0)],64)),g(K,{modelValue:o(i),"onUpdate:modelValue":t[3]||(t[3]=n=>A(i)?i.value=n:null),column:o(x)},null,8,["modelValue","column"]),g(Q,{modelValue:o(u),"onUpdate:modelValue":t[4]||(t[4]=n=>A(u)?u.value=n:null),"cell-value":o(L),column:o(x),onAttachRecord:G},null,8,["modelValue","cell-value","column"])])}}});const Fe=ve(Ie,[["__scopeId","data-v-6377a3a8"]]);export{Fe as default};

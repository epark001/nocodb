import{h as U,aB as ee,eO as F,a5 as le,b as m,a6 as Q,aJ as H,a3 as ce,aP as be,a0 as ye,br as ge,a8 as ae,N as X,ak as he,S as ke,cb as we,$ as Ce,i as W,aq as ue,r as q,k as xe,cI as ie,o as p,c as T,a as w,aV as G,C as k,w as b,d as P,t as N,E as s,H as A,J as je,T as Z,al as Se,Z as $e,F as J,D as B,aj as se,cp as ne,W as z,cJ as Ne,I as oe,f as Pe,L as Ie,M as Ae,P as Re,p as Me,e as Be}from"./entry.51f4e399.js";import{a as Te,c as Ee}from"./useMetas.ba7abae7.js";import{P as de}from"./index.5263eb1d.js";import{C as De}from"./index.0d6d8ba8.js";import{D as Oe}from"./index.252dc7b4.js";import{D as Fe}from"./DownOutlined.db6f6406.js";import{_ as Ke}from"./Title.e76f8bdd.js";import{L as Ue,a as Ve,_ as Le}from"./index.69bbd6c7.js";import{_ as Je}from"./index.2b3cfde3.js";import{_ as ze}from"./_plugin-vue_export-helper.c27b6911.js";import"./Checkbox.a529f1e6.js";import"./FormItemContext.e001cd7c.js";import"./createForOfIteratorHelper.12419aa5.js";import"./Dropdown.dc69c0a4.js";import"./RightOutlined.90e8180f.js";import"./TextArea.442a25cb.js";import"./Input.7cb175ff.js";import"./antInputDirective.8ac36ea7.js";import"./CheckOutlined.ef30fafc.js";import"./useMergedState.5e6500b1.js";import"./isNumeric.3f69e2aa.js";import"./LeftOutlined.3bb8aa17.js";var We=["class","style"],qe=function(){return{prefixCls:String,href:String,separator:H.any,overlay:H.any,onClick:Function}};const K=U({compatConfig:{MODE:3},name:"ABreadcrumbItem",inheritAttrs:!1,__ANT_BREADCRUMB_ITEM:!0,props:qe(),slots:["separator","overlay"],setup:function(t,_){var u=_.slots,d=_.attrs,i=ee("breadcrumb",t),h=i.prefixCls,x=function(v,n){var o=F(u,t,"overlay");return o?m(Oe,{overlay:o,placement:"bottom"},{default:function(){return[m("span",{class:"".concat(n,"-overlay-link")},[v,m(Fe,null,null)])]}}):v};return function(){var y,v=(y=F(u,t,"separator"))!==null&&y!==void 0?y:"/",n=F(u,t),o=d.class,e=d.style,a=le(d,We),r;return t.href!==void 0?r=m("a",Q({class:"".concat(h.value,"-link"),onClick:t.onClick},a),[n]):r=m("span",Q({class:"".concat(h.value,"-link"),onClick:t.onClick},a),[n]),r=x(r,h.value),n?m("span",{class:o,style:e},[r,v&&m("span",{class:"".concat(h.value,"-separator")},[v])]):null}}});var Ge=function(){return{prefixCls:String,routes:{type:Array},params:H.any,separator:H.any,itemRender:{type:Function}}};function He(c,t){if(!c.breadcrumbName)return null;var _=Object.keys(t).join("|"),u=c.breadcrumbName.replace(new RegExp(":(".concat(_,")"),"g"),function(d,i){return t[i]||d});return u}function re(c){var t=c.route,_=c.params,u=c.routes,d=c.paths,i=u.indexOf(t)===u.length-1,h=He(t,_);return i?m("span",null,[h]):m("a",{href:"#/".concat(d.join("/"))},[h])}const E=U({compatConfig:{MODE:3},name:"ABreadcrumb",props:Ge(),slots:["separator","itemRender"],setup:function(t,_){var u=_.slots,d=ee("breadcrumb",t),i=d.prefixCls,h=d.direction,x=function(o,e){return o=(o||"").replace(/^\//,""),Object.keys(e).forEach(function(a){o=o.replace(":".concat(a),e[a])}),o},y=function(o,e,a){var r=he(o),f=x(e||"",a);return f&&r.push(f),r},v=function(o){var e=o.routes,a=e===void 0?[]:e,r=o.params,f=r===void 0?{}:r,j=o.separator,g=o.itemRender,l=g===void 0?re:g,R=[];return a.map(function(C){var I=x(C.path,f);I&&R.push(I);var D=[].concat(R),V=null;return C.children&&C.children.length&&(V=m(X,null,{default:function(){return[C.children.map(function(M){return m(X.Item,{key:M.path||M.breadcrumbName},{default:function(){return[l({route:M,params:f,routes:a,paths:y(D,M.path,f)})]}})})]}})),m(K,{overlay:V,separator:j,key:I||C.breadcrumbName},{default:function(){return[l({route:C,params:f,routes:a,paths:D})]}})})};return function(){var n,o,e,a=t.routes,r=t.params,f=r===void 0?{}:r,j=ce(F(u,t)),g=(n=F(u,t,"separator"))!==null&&n!==void 0?n:"/",l=t.itemRender||u.itemRender||re;a&&a.length>0?e=v({routes:a,params:f,separator:g,itemRender:l}):j.length&&(e=j.map(function(C,I){return be(ye(C.type)==="object"&&(C.type.__ANT_BREADCRUMB_ITEM||C.type.__ANT_BREADCRUMB_SEPARATOR),"Breadcrumb","Only accepts Breadcrumb.Item and Breadcrumb.Separator as it's children"),ge(C,{separator:g,key:I})}));var R=(o={},ae(o,i.value,!0),ae(o,"".concat(i.value,"-rtl"),h.value==="rtl"),o);return m("div",{class:R},[e])}}});var Ze=["separator","class"],Qe=function(){return{prefixCls:String}};const Y=U({compatConfig:{MODE:3},name:"ABreadcrumbSeparator",__ANT_BREADCRUMB_SEPARATOR:!0,inheritAttrs:!1,props:Qe(),setup:function(t,_){var u=_.slots,d=_.attrs,i=ee("breadcrumb",t),h=i.prefixCls;return function(){var x;d.separator;var y=d.class,v=le(d,Ze),n=ce((x=u.default)===null||x===void 0?void 0:x.call(u));return m("span",Q({class:["".concat(h.value,"-separator"),y]},v),[n.length>0?n:"/"])}}});E.Item=K;E.Separator=Y;E.install=function(c){return c.component(E.name,E),c.component(K.name,K),c.component(Y.name,Y),c};const Xe={class:"flex flex-row w-full"},Ye={class:"flex flex-col w-full"},et={class:"flex flex-row items-center w-full mb-4 gap-2"},tt=w("br",null,null,-1),at={class:"text-gray-500"},st={class:"flex flex-row items-center w-full mb-4 gap-2"},nt=w("br",null,null,-1),ot={class:"text-gray-500"},rt={class:"flex flex-row items-center w-full mb-4 gap-2"},lt=w("br",null,null,-1),ct={class:"text-gray-500"},ut=U({__name:"Misc",setup(c){const{includeM2M:t,showNull:_}=ke(),u=Te(),d=Ee(),{loadTables:i,hasEmptyOrNullFilters:h}=u,{project:x}=we(u),y=Ce(de,void 0),v=W(()=>{var e;return(y==null?void 0:y.value)??((e=x.value)==null?void 0:e.id)});ue(t,async()=>await i());const n=q();xe(async()=>{var e;await d.loadProject(v.value,!0),n.value=(e=d.getProjectMeta(v.value))==null?void 0:e.showNullAndEmptyInFilter});async function o(e){const a=d.projects.get(v.value);if(!a)throw new Error(`Project ${v.value} not found`);const r=d.getProjectMeta(v.value)??{};e.target.checked||await h()&&(n.value=!0,je.warning("Null / Empty filters exist. Please remove them first."));const f={...r,showNullAndEmptyInFilter:n.value};a.meta=f,await d.updateProject(v.value,{meta:JSON.stringify(f)})}return(e,a)=>{const r=De,f=ie("e");return p(),T("div",Xe,[w("div",Ye,[w("div",et,[G((p(),k(r,{checked:s(t),"onUpdate:checked":a[0]||(a[0]=j=>A(t)?t.value=j:null),class:"nc-settings-meta-misc"},{default:b(()=>[P(N(e.$t("msg.info.showM2mTables"))+" ",1),tt,w("span",at,N(e.$t("msg.info.showM2mTablesDesc")),1)]),_:1},8,["checked"])),[[f,["c:themes:show-m2m-tables"]]])]),w("div",st,[G((p(),k(r,{checked:s(_),"onUpdate:checked":a[1]||(a[1]=j=>A(_)?_.value=j:null),class:"nc-settings-show-null"},{default:b(()=>[P(N(e.$t("msg.info.showNullInCells"))+" ",1),nt,w("span",ot,N(e.$t("msg.info.showNullInCellsDesc")),1)]),_:1},8,["checked"])),[[f,["c:settings:show-null"]]])]),w("div",rt,[G((p(),k(r,{checked:s(n),"onUpdate:checked":a[2]||(a[2]=j=>A(n)?n.value=j:null),class:"nc-settings-show-null-and-empty-in-filter",onChange:o},{default:b(()=>[P(N(e.$t("msg.info.showNullAndEmptyInFilter"))+" ",1),lt,w("span",ct,N(e.$t("msg.info.showNullAndEmptyInFilterDesc")),1)]),_:1},8,["checked"])),[[f,["c:settings:show-null-and-empty-in-filter"]]])])])])}}}),it=c=>(Me("data-v-a36ef780"),c=c(),Be(),c),dt={class:"flex flex-row justify-between w-full items-center mb-1"},pt=["onClick"],mt={class:"select-none"},ft={key:1},_t={class:"flex items-center"},vt=it(()=>w("a",{class:"!no-underline"},"Data Sources",-1)),bt={key:0,class:"flex flex-row justify-end items-center w-full gap-1"},yt={key:0,class:"flex items-center gap-2 font-light"},gt={class:"flex items-center gap-2 text-gray-600 font-light"},ht={class:"h-[600px]"},kt=U({__name:"Modal",props:{modelValue:{type:Boolean},openKey:{},dataSourcesState:{},projectId:{}},emits:["update:modelValue","update:openKey","update:dataSourcesState"],setup(c,{emit:t}){const _=c,u=Z(_,"modelValue",t),d=Z(_,"openKey",t),i=Z(_,"dataSourcesState",t),h=Se(_,"projectId");$e(de,h);const{$e:x}=Pe(),y=q(!1),v=q(!1),n={projectSettings:{title:"Project Settings",icon:J.settings,subTabs:{misc:{title:"Misc",body:ut}},onClick:()=>{x("c:settings:project-settings")}}},o=g=>Object.keys(g)[0],e=W({get:()=>[Object.keys(n).find(g=>g===d.value)||o(n)],set:g=>{d.value=g[0]}}),a=W(()=>n[e.value[0]]),r=q([o(a.value.subTabs)]),f=W(()=>a.value.subTabs[r.value[0]]),j=g=>{v.value=g};return ue(()=>e.value[0],g=>{r.value=[o(n[g].subTabs)]}),(g,l)=>{const R=Ke,C=Ie,I=Ae,D=X,V=Ue,O=K,M=E,te=Je,pe=Ve,me=Le,fe=Re,_e=ie("e");return p(),k(fe,{visible:s(u),"onUpdate:visible":l[9]||(l[9]=S=>A(u)?u.value=S:null),class:oe({active:s(u)}),footer:null,width:"max(90vw, 600px)",closable:!1,"wrap-class-name":"nc-modal-settings",onCancel:l[10]||(l[10]=S=>t("update:modelValue",!1))},{default:b(()=>[w("div",dt,[m(R,{class:"ml-4 select-none",type:"secondary",level:5},{default:b(()=>[P(N(g.$t("activity.settings")),1)]),_:1}),m(C,{type:"text",class:"!rounded-md border-none !px-1.5","data-testid":"settings-modal-close-button",onClick:l[0]||(l[0]=S=>u.value=!1)},{default:b(()=>[(p(),k(B(s(J).close),{class:"cursor-pointer nc-modal-close w-4"}))]),_:1})]),m(me,{class:"mt-3 h-[75vh] overflow-y-auto flex"},{default:b(()=>[m(V,null,{default:b(()=>[m(D,{"selected-keys":s(e),"onUpdate:selectedKeys":l[1]||(l[1]=S=>A(e)?e.value=S:null),class:"tabs-menu h-full","open-keys":[]},{default:b(()=>[(p(),T(se,null,ne(n,(S,L)=>m(I,{key:L,class:"!active:ring-0 !hover:bg-primary !hover:bg-opacity-25"},{default:b(()=>[w("div",{class:"flex items-center space-x-2",onClick:S.onClick},[(p(),k(B(S.icon))),w("div",mt,N(S.title),1)],8,pt)]),_:2},1024)),64))]),_:1},8,["selected-keys"])]),_:1}),m(pe,{class:"h-auto px-4 scrollbar-thumb-gray-500"},{default:b(()=>{var S,L;return[s(e)[0]!=="dataSources"?(p(),k(D,{key:0,selectedKeys:s(r),"onUpdate:selectedKeys":l[2]||(l[2]=$=>A(r)?r.value=$:null),"open-keys":[],mode:"horizontal"},{default:b(()=>[(p(!0),T(se,null,ne(s(a).subTabs,($,ve)=>(p(),k(I,{key:ve,class:"!active:ring-0 select-none",onClick:$.onClick},{default:b(()=>[P(N($.title),1)]),_:2},1032,["onClick"]))),128))]),_:1},8,["selectedKeys"])):(p(),T("div",ft,[w("div",_t,[m(M,{class:"w-full cursor-pointer"},{default:b(()=>[s(i)!==""?(p(),k(O,{key:0,onClick:l[3]||(l[3]=$=>i.value="")},{default:b(()=>[vt]),_:1})):(p(),k(O,{key:1,onClick:l[4]||(l[4]=$=>i.value="")},{default:b(()=>[P("Data Sources")]),_:1})),s(i)!==""?(p(),k(O,{key:2},{default:b(()=>[P(N(s(i)),1)]),_:1})):z("",!0)]),_:1}),s(i)===""?(p(),T("div",bt,[s(v)?(p(),k(C,{key:0,type:"primary",class:"self-start !rounded-md nc-btn-new-datasource",onClick:l[5]||(l[5]=$=>i.value=s(Ne).New)},{default:b(()=>[s(i)===""?(p(),T("div",yt,[(p(),k(B(s(J).plusCircle),{class:"group-hover:text-accent"})),P(" New ")])):z("",!0)]),_:1})):z("",!0),G((p(),k(C,{type:"text",class:"self-start !rounded-md nc-btn-metasync-reload",onClick:l[6]||(l[6]=$=>y.value=!0)},{default:b(()=>[w("div",gt,[(p(),k(B(s(J).reload),{class:oe({"animate-infinite animate-spin !text-success":s(y)})},null,8,["class"])),P(" "+N(g.$t("general.reload")),1)])]),_:1})),[[_e,["a:proj-meta:data-sources:reload"]]])])):z("",!0)]),m(te,{style:{margin:"10px 0"}})])),w("div",ht,[s(r)[0]==="dataSources"?(p(),k(B((S=s(f))==null?void 0:S.body),{key:0,state:s(i),"onUpdate:state":l[7]||(l[7]=$=>A(i)?i.value=$:null),reload:s(y),"onUpdate:reload":l[8]||(l[8]=$=>A(y)?y.value=$:null),class:"px-2 pb-2","data-testid":`nc-settings-subtab-${s(f).title}`,"project-id":s(h),onAwaken:j},null,40,["state","reload","data-testid","project-id"])):(p(),k(B((L=s(f))==null?void 0:L.body),{key:1,class:"px-2 py-6","project-id":s(h),"data-testid":`nc-settings-subtab-${s(f).title}`},null,8,["project-id","data-testid"]))])]}),_:1})]),_:1})]),_:1},8,["visible","class"])}}});const Jt=ze(kt,[["__scopeId","data-v-a36ef780"]]);export{Jt as default};

import{h as F,$ as a,r as l,cg as O,fk as k,o as u,c as y,E as t,aj as M,a as D,C as g,w as H,d as G,t as K,I as Q,cF as C,D as W,W as x,b as j,Q as R,R as b}from"./entry.51f4e399.js";import{_ as q}from"./Icon.vue.1162f18b.js";import{j as J,C as X,i as Y,w as Z,c as ee,f as te,d as oe,y as ae,h as le}from"./index.5263eb1d.js";import{u as se}from"./index.9e760c64.js";import{a as ne}from"./useSmartsheetRowStore.aafbb4bb.js";import{u as re}from"./useLTARStore.3d98e502.js";import{u as ie}from"./index.82c42c24.js";import"./deepCompare.d32ec333.js";import"./dataUtils.edecace3.js";import"./virtualCell.4dce1393.js";import"./index.b9981e09.js";import"./useMetas.ba7abae7.js";import"./useSharedView.0db5f32b.js";const ce=R(()=>b(()=>import("./ListItems.d6480b5e.js"),["./ListItems.d6480b5e.js","./entry.51f4e399.js","./entry.0f786d51.css","./ItemChip.14d602dd.js","./index.9e760c64.js","./index.5263eb1d.js","./cell.1732684e.js","./index.8b8de496.js","./index.b9981e09.js","./useLTARStore.3d98e502.js","./useMetas.ba7abae7.js","./useSharedView.0db5f32b.js","./_plugin-vue_export-helper.c27b6911.js","./ItemChip.06f0b072.css","./index.82c42c24.js","./useSmartsheetRowStore.aafbb4bb.js","./deepCompare.d32ec333.js","./dataUtils.edecace3.js","./virtualCell.4dce1393.js","./index.e760d172.js","./Input.7cb175ff.js","./antInputDirective.8ac36ea7.js","./FormItemContext.e001cd7c.js","./SearchOutlined.dec109ce.js","./isPlainObject.ecf52d25.js","./_getPrototype.ec1165af.js","./TextArea.442a25cb.js","./Password.d493e47a.js","./index.680937e8.js","./index.c4aafe5c.js","./Dropdown.dc69c0a4.js","./useState.6010d8b6.js","./useRefs.154aa2be.js","./identity.dd5da9ba.js","./isSymbol.b53bd26f.js","./_flatRest.ff2d3d5c.js","./isMobile.e2e89480.js","./useMergedState.5e6500b1.js","./index.529d8b39.js","./Col.88cfabc0.js","./responsiveObserve.501a6cf9.js","./index.fbcca285.js","./index.09b19c06.js","./LeftOutlined.3bb8aa17.js","./RightOutlined.90e8180f.js","./index.5e746f62.js","./toArray.06afb623.js","./useMemo.b13a9257.js","./DownOutlined.db6f6406.js","./CheckOutlined.ef30fafc.js","./useBreakpoint.a91853f1.js","./ListItems.edf42c5a.css"],import.meta.url).then(s=>s.default||s)),ue=R(()=>b(()=>import("./ListChildItems.173ac842.js"),["./ListChildItems.173ac842.js","./entry.51f4e399.js","./entry.0f786d51.css","./TableIcon.vue.27fb2d8a.js","./ItemChip.14d602dd.js","./index.9e760c64.js","./index.5263eb1d.js","./cell.1732684e.js","./index.8b8de496.js","./index.b9981e09.js","./useLTARStore.3d98e502.js","./useMetas.ba7abae7.js","./useSharedView.0db5f32b.js","./_plugin-vue_export-helper.c27b6911.js","./ItemChip.06f0b072.css","./useSmartsheetRowStore.aafbb4bb.js","./deepCompare.d32ec333.js","./dataUtils.edecace3.js","./virtualCell.4dce1393.js","./index.680937e8.js","./index.c4aafe5c.js","./Dropdown.dc69c0a4.js","./useState.6010d8b6.js","./useRefs.154aa2be.js","./identity.dd5da9ba.js","./isSymbol.b53bd26f.js","./_flatRest.ff2d3d5c.js","./isMobile.e2e89480.js","./useMergedState.5e6500b1.js","./index.529d8b39.js","./Col.88cfabc0.js","./responsiveObserve.501a6cf9.js","./index.fbcca285.js","./isPlainObject.ecf52d25.js","./_getPrototype.ec1165af.js","./index.09b19c06.js","./LeftOutlined.3bb8aa17.js","./RightOutlined.90e8180f.js","./index.5e746f62.js","./toArray.06afb623.js","./antInputDirective.8ac36ea7.js","./useMemo.b13a9257.js","./DownOutlined.db6f6406.js","./CheckOutlined.ef30fafc.js","./SearchOutlined.dec109ce.js","./FormItemContext.e001cd7c.js","./useBreakpoint.a91853f1.js","./ListChildItems.4acf4bce.css"],import.meta.url).then(s=>s.default||s)),me=["onDblclick"],pe={class:"block flex-shrink truncate"},de=D("div",{class:"flex-grow"},null,-1),_e={key:0,class:"flex justify-end gap-1 min-h-[30px] items-center"},De=F({__name:"Links",setup(s){const m=a(J,l(0)),n=a(X),E=a(Y),T=a(Z,O()),A=a(ee),P=a(te,l(!1)),p=a(oe,l(!1)),I=a(ae,l(!1)),i=l(!1),c=l(!1),{isUIAllowed:U}=se(),{state:v,isNew:V}=ne(),{relatedTableMeta:$,loadRelatedTableMeta:z,relatedTableDisplayValueProp:N}=re(n,E,V,T.trigger),h=k(()=>{var e,o;return(o=(e=$.value)==null?void 0:e.columns)==null?void 0:o.find(r=>r.title===N.value)});z();const w=k(()=>{var o,r,d,_;const e=+(m==null?void 0:m.value)||0;return e?e===1?`1 ${((r=(o=n.value)==null?void 0:o.meta)==null?void 0:r.singular)||"Link"}`:`${e} ${((_=(d=n.value)==null?void 0:d.meta)==null?void 0:_.plural)||"Links"}`:"Empty"}),S=()=>{c.value=!1,i.value=!0},L=()=>{p.value||(c.value=!0)};ie(a(le,l(!1)),e=>{switch(e.key){case"Enter":if(p.value||i.value)return;c.value=!0,e.stopPropagation();break}});const B=k(()=>{var e;return V.value?((e=v==null?void 0:v.value)==null?void 0:e[n==null?void 0:n.value.title])??[]:[]});return(e,o)=>{const r=q,d=ce,_=ue;return u(),y("div",{class:"flex w-full items-center nc-links-wrapper",onDblclick:C(L,["stop"])},[t(A)?x("",!0):(u(),y(M,{key:0},[D("div",pe,[(u(),g(W(t(p)||t(I)?"span":"a"),{title:t(w),class:Q(["text-center pl-3 nc-datatype-link underline-transparent",{"!text-gray-300":!t(m)}]),onClick:C(L,["stop","prevent"])},{default:H(()=>[G(K(t(w)),1)]),_:1},8,["title","class","onClick"]))]),de,!t(p)&&!t(I)?(u(),y("div",_e,[!t(P)&&t(U)("xcDatatableEditable")?(u(),g(r,{key:0,icon:"plus",class:"nc-icon-transition select-none !text-xxl nc-action-icon text-gray-500/50 hover:text-gray-500 nc-plus hover:text-shadow-md",onClick:o[0]||(o[0]=C(f=>i.value=!0,["stop"]))})):x("",!0)])):x("",!0)],64)),j(d,{modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=f=>i.value=f),column:t(h)},null,8,["modelValue","column"]),j(_,{modelValue:c.value,"onUpdate:modelValue":o[2]||(o[2]=f=>c.value=f),column:t(h),"cell-value":t(B),onAttachRecord:S},null,8,["modelValue","column","cell-value"])],40,me)}}});export{De as default};

import B from"./VirtualCellIcon.f17eeb0a.js";import{_ as b}from"./CellIcon.8a6080fd.js";import{_ as F}from"./Select.vue.e482f984.js";import{M as O,A as g}from"./index.5263eb1d.js";import{u as D}from"./useViewColumns.96f2a704.js";import{h as E,cZ as A,al as R,$ as f,r as _,i as v,cd as i,dg as j,eW as T,f4 as I,m as M,f3 as N,o as r,C as m,w,c as P,aj as $,cp as U,E as y,a as h,D as G,t as H,H as Q}from"./entry.51f4e399.js";import{S as W}from"./index.5e746f62.js";const Z={class:"flex gap-2 items-center items-center h-full"},q={class:"min-w-0 text-ellipsis overflow-hidden select-none",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},se=E({__name:"FieldListAutoCompleteDropdown",props:{modelValue:{},isSort:{type:Boolean},columns:{},allowEmpty:{type:Boolean}},emits:["update:modelValue"],setup(n,{emit:S}){var p;const V=A(n,["modelValue","isSort","allowEmpty"]),C=R(V,"columns"),c=f(O,_()),a=v({get:()=>n.modelValue,set:l=>S("update:modelValue",l)}),x=f(g,_()),{showSystemFields:L,metaColumnById:u}=D(x,c),d=v(()=>{var l,s,o;return(o=C.value||((s=(l=c.value)==null?void 0:l.columns)==null?void 0:s.filter(e=>{var t;return e.uidt===i.Links?!0:j((t=u==null?void 0:u.value)==null?void 0:t[e.id])?a.value===e.id||L.value:e.uidt===i.QrCode||e.uidt===i.Barcode||e.uidt===i.ID?!1:n.isSort?!(T(e)&&e.colOptions.type!==I.BELONGS_TO):!(e.colOptions&&e.system)})))==null?void 0:o.map(e=>({value:e.id,label:e.title,icon:M(N(e)?B:b,{columnMeta:e}),c:e}))}),k=(l,s)=>{var o;return(o=s.label.toLowerCase())==null?void 0:o.includes(l.toLowerCase())};return!a.value&&n.allowEmpty!==!0&&(a.value=((p=d.value)==null?void 0:p[0].value)||""),(l,s)=>{const o=W,e=F;return r(),m(e,{value:y(a),"onUpdate:value":s[0]||(s[0]=t=>Q(a)?a.value=t:null),"dropdown-match-select-width":!1,"show-search":"",placeholder:l.$t("placeholder.selectField"),"filter-option":k,"dropdown-class-name":"nc-dropdown-toolbar-field-list"},{default:w(()=>[(r(!0),P($,null,U(y(d),t=>(r(),m(o,{key:t.value,label:t.label,value:t.value},{default:w(()=>[h("div",Z,[(r(),m(G(t.icon),{class:"min-w-5 !mx-0"})),h("div",q,H(t.label),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["value","placeholder"])}}});export{se as _};

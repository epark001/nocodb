import{h as q,$ as a,cg as J,r as d,eI as X,i as x,o as s,c,E as o,aj as C,a as Y,cp as Z,C as j,W as _,b as I,cF as A,H as E,Q as T,R as b}from"./entry.13466615.js";import{_ as ee}from"./ItemChip.28e6239c.js";import{_ as te}from"./Icon.vue.e15b8911.js";import{C as oe,j as ne,i as ae,w as se,c as le,f as re,d as ie,y as ue,h as me}from"./index.5263eb1d.js";import{u as ce}from"./useLTARStore.0002d56d.js";import{u as pe}from"./index.a6329415.js";import{a as de}from"./useSmartsheetRowStore.ef2cd001.js";import{u as _e}from"./index.e7cf7635.js";import{_ as ve}from"./_plugin-vue_export-helper.c27b6911.js";import"./cell.b6c2deed.js";import"./index.8d89c37a.js";import"./index.2a3da6a9.js";import"./useMetas.223da623.js";import"./useSharedView.746b4f21.js";import"./deepCompare.d32ec333.js";import"./dataUtils.31dbfaee.js";import"./virtualCell.88c63e03.js";const fe=T(()=>b(()=>import("./ListItems.fe545f38.js"),["./ListItems.fe545f38.js","./entry.13466615.js","./entry.0f786d51.css","./ItemChip.28e6239c.js","./index.e7cf7635.js","./index.5263eb1d.js","./cell.b6c2deed.js","./index.8d89c37a.js","./index.2a3da6a9.js","./useLTARStore.0002d56d.js","./useMetas.223da623.js","./useSharedView.746b4f21.js","./_plugin-vue_export-helper.c27b6911.js","./ItemChip.06f0b072.css","./index.a6329415.js","./useSmartsheetRowStore.ef2cd001.js","./deepCompare.d32ec333.js","./dataUtils.31dbfaee.js","./virtualCell.88c63e03.js","./index.a8ef1b7e.js","./Input.16966097.js","./antInputDirective.8ac36ea7.js","./FormItemContext.27b2e5db.js","./SearchOutlined.c1eed30a.js","./isPlainObject.4c0f42f1.js","./_getPrototype.00be30f0.js","./TextArea.1bd4034f.js","./Password.d7b16461.js","./index.3cc83813.js","./index.62e3d60f.js","./Dropdown.a78be736.js","./useState.a6853ebd.js","./useRefs.6ea70d5c.js","./identity.b813b76e.js","./isSymbol.b9109ae5.js","./_flatRest.037bf8e3.js","./isMobile.e2e89480.js","./useMergedState.1cc2a884.js","./index.638acbb4.js","./Col.23d910dc.js","./responsiveObserve.9209e727.js","./index.89133b21.js","./index.bc4f5185.js","./LeftOutlined.b2689280.js","./RightOutlined.2c092523.js","./index.4385a501.js","./toArray.f6fa5a71.js","./useMemo.4991ab9d.js","./DownOutlined.9cfe3e0c.js","./CheckOutlined.80115d65.js","./useBreakpoint.66a79637.js","./ListItems.edf42c5a.css"],import.meta.url).then(r=>r.default||r)),ye=T(()=>b(()=>import("./ListChildItems.9829d31b.js"),["./ListChildItems.9829d31b.js","./entry.13466615.js","./entry.0f786d51.css","./TableIcon.vue.95089890.js","./ItemChip.28e6239c.js","./index.e7cf7635.js","./index.5263eb1d.js","./cell.b6c2deed.js","./index.8d89c37a.js","./index.2a3da6a9.js","./useLTARStore.0002d56d.js","./useMetas.223da623.js","./useSharedView.746b4f21.js","./_plugin-vue_export-helper.c27b6911.js","./ItemChip.06f0b072.css","./useSmartsheetRowStore.ef2cd001.js","./deepCompare.d32ec333.js","./dataUtils.31dbfaee.js","./virtualCell.88c63e03.js","./index.3cc83813.js","./index.62e3d60f.js","./Dropdown.a78be736.js","./useState.a6853ebd.js","./useRefs.6ea70d5c.js","./identity.b813b76e.js","./isSymbol.b9109ae5.js","./_flatRest.037bf8e3.js","./isMobile.e2e89480.js","./useMergedState.1cc2a884.js","./index.638acbb4.js","./Col.23d910dc.js","./responsiveObserve.9209e727.js","./index.89133b21.js","./isPlainObject.4c0f42f1.js","./_getPrototype.00be30f0.js","./index.bc4f5185.js","./LeftOutlined.b2689280.js","./RightOutlined.2c092523.js","./index.4385a501.js","./toArray.f6fa5a71.js","./antInputDirective.8ac36ea7.js","./useMemo.4991ab9d.js","./DownOutlined.9cfe3e0c.js","./CheckOutlined.80115d65.js","./SearchOutlined.c1eed30a.js","./FormItemContext.27b2e5db.js","./useBreakpoint.66a79637.js","./ListChildItems.4acf4bce.css"],import.meta.url).then(r=>r.default||r)),ke={class:"flex items-center gap-1 w-full chips-wrapper"},xe={class:"chips flex items-center img-container flex-1 hm-items flex-nowrap min-w-0 overflow-hidden"},Ce={key:0,class:"flex justify-end gap-1 min-h-[30px] items-center"},Ie=q({__name:"HasMany",async setup(r){let w,g;const p=a(oe),l=a(ne),U=a(ae),D=a(se,J()),M=a(le),P=a(re,d(!1)),H=a(ie),$=a(ue,d(!1)),i=d(!1),u=d(!1),{isUIAllowed:z}=_e(),{state:v,isNew:f,removeLTARRef:B}=de(),{relatedTableMeta:F,loadRelatedTableMeta:N,relatedTableDisplayValueProp:y,unlink:O}=ce(p,U,f,D.trigger);[w,g]=X(()=>N()),await w,g();const h=x(()=>{var e;return l!=null&&l.value?(l==null?void 0:l.value)??[]:f.value?((e=v==null?void 0:v.value)==null?void 0:e[p==null?void 0:p.value.title])??[]:[]}),R=x(()=>h.value.reduce((e,t)=>{if(!y.value)return e;const m=t[y.value];return m?[...e,{value:m,item:t}]:e},[])),S=async e=>{f.value?await B(e,p.value):await O(e)},k=x(()=>{var e,t;return(t=(e=F.value)==null?void 0:e.columns)==null?void 0:t.find(m=>m.title===y.value)}),G=()=>{u.value=!1,i.value=!0};return pe(a(me,d(!1)),e=>{switch(e.key){case"Enter":i.value=!0,e.stopPropagation();break}}),(e,t)=>{var V;const m=ee,L=te,K=fe,Q=ye;return s(),c("div",ke,[o(M)?_("",!0):(s(),c(C,{key:0},[Y("div",xe,[o(R)?(s(),c(C,{key:0},[(s(!0),c(C,null,Z(o(R),(n,W)=>(s(),j(m,{key:W,item:n.item,value:n.value,column:o(k),"show-unlink-button":!0,onUnlink:we=>S(n.item)},null,8,["item","value","column","onUnlink"]))),128)),((V=o(l))==null?void 0:V.length)===10?(s(),c("span",{key:0,class:"caption pointer ml-1 grey--text",onClick:t[0]||(t[0]=n=>u.value=!0)}," more... ")):_("",!0)],64)):_("",!0)]),!o(H)&&!o($)?(s(),c("div",Ce,[I(L,{icon:"expand",class:"select-none transform text-sm nc-action-icon text-gray-500/50 hover:text-gray-500 nc-arrow-expand",onClick:t[1]||(t[1]=A(n=>u.value=!0,["stop"]))}),!o(P)&&o(z)("xcDatatableEditable")?(s(),j(L,{key:0,icon:"plus",class:"select-none text-sm nc-action-icon text-gray-500/50 hover:text-gray-500 nc-plus",onClick:t[2]||(t[2]=A(n=>i.value=!0,["stop"]))})):_("",!0)])):_("",!0)],64)),I(K,{modelValue:o(i),"onUpdate:modelValue":t[3]||(t[3]=n=>E(i)?i.value=n:null),column:o(k)},null,8,["modelValue","column"]),I(Q,{modelValue:o(u),"onUpdate:modelValue":t[4]||(t[4]=n=>E(u)?u.value=n:null),"cell-value":o(h),column:o(k),onAttachRecord:G},null,8,["modelValue","cell-value","column"])])}}});const Be=ve(Ie,[["__scopeId","data-v-d5a585ed"]]);export{Be as default};

import{h as L,$ as m,r as u,S,T as F,i as O,aq as U,fp as K,o as i,C as c,w as x,a as b,E as t,c as d,b as g,t as V,W as E,H as y,cF as o,b6 as n,I as _,aV as W,b5 as P,eD as q,d as G,D as Q,F as h,Q as J,R as X}from"./entry.51f4e399.js";import{_ as Y}from"./Tooltip.vue.f55045dc.js";import{_ as Z}from"./CellIcon.8a6080fd.js";import{_ as ee}from"./Dropdown.vue.97a9d1a0.js";import{C as te,E as oe,v as se,x as ne,h as le}from"./index.5263eb1d.js";import{_ as re}from"./TextArea.442a25cb.js";import"./cell.1732684e.js";import"./useMetas.ba7abae7.js";import"./index.252dc7b4.js";import"./Dropdown.dc69c0a4.js";import"./RightOutlined.90e8180f.js";import"./Input.7cb175ff.js";import"./antInputDirective.8ac36ea7.js";import"./FormItemContext.e001cd7c.js";const ae=J(()=>X(()=>import("./ClampedText.55597ca8.js"),["./ClampedText.55597ca8.js","./entry.51f4e399.js","./entry.0f786d51.css"],import.meta.url).then(f=>f.default||f)),ie={key:1,class:"nc-null"},pe={key:3},ue={key:0,class:"flex flex-row gap-x-1 items-center font-medium pb-2.5 mb-1 py-1 mr-3 ml-1 border-b-1 border-gray-100"},me={class:"flex"},Re=L({__name:"TextArea",props:{modelValue:{}},emits:["update:modelValue"],setup(f,{emit:R}){const I=f,w=m(te),v=m(oe),p=m(se,u(void 0)),{showNull:N}=S(),l=F(I,"modelValue",R,{defaultValue:""}),T=m(ne,u(!1)),$=r=>!T.value&&(r==null?void 0:r.focus()),j=O(()=>p.value?p.value*60:60),s=u(!1),k=u(null),C=u(null),z=m(le,u(!1));return U(s,()=>{s.value&&setTimeout(()=>{var r;(r=C.value)==null||r.focus()},100)}),K(k,r=>{var e;(e=r.target)!=null&&e.className.includes("nc-long-text-toggle-expand")||(s.value=!1)}),(r,e)=>{const D=ae,M=Y,A=Z,B=re,H=ee;return i(),c(H,{visible:t(s),"onUpdate:visible":e[17]||(e[17]=a=>y(s)?s.value=a:null),class:"overflow-visible",trigger:[],placement:"bottomLeft"},{overlay:x(()=>[b("div",{ref_key:"inputWrapperRef",ref:k,class:"flex flex-col min-w-120 min-h-70 py-3 pl-3 pr-1 expanded-cell-input"},[t(w)?(i(),d("div",ue,[g(A,{class:"flex"}),b("div",me,V(t(w).title),1)])):E("",!0),g(B,{ref_key:"inputRef",ref:C,value:t(l),"onUpdate:value":e[14]||(e[14]=a=>y(l)?l.value=a:null),placeholder:"Enter text",class:"p-1 !pt-1 !pr-3 !border-0 !border-r-0 !focus:outline-transparent nc-scrollbar-md",bordered:!1,"auto-size":{minRows:20,maxRows:20},onKeydown:[e[15]||(e[15]=o(()=>{},["stop"])),e[16]||(e[16]=n(a=>s.value=!1,["escape"]))]},null,8,["value"])],512)]),default:x(()=>[b("div",{class:_(["flex flex-row pt-0.5",{"min-h-10":t(p)!==1,"min-h-6.5":t(p)===1}])},[t(v)&&!t(s)?W((i(),d("textarea",{key:0,ref:$,"onUpdate:modelValue":e[0]||(e[0]=a=>y(l)?l.value=a:null),rows:"4",class:_(["h-full w-full outline-none border-none",`${t(v)?"p-2":""}`]),style:P({minHeight:`${t(j)}px`}),onBlur:e[1]||(e[1]=a=>v.value=!1),onKeydown:[e[2]||(e[2]=n(o(()=>{},["alt","stop"]),["enter"])),e[3]||(e[3]=n(o(()=>{},["shift","stop"]),["enter"])),e[4]||(e[4]=n(o(()=>{},["stop"]),["down"])),e[5]||(e[5]=n(o(()=>{},["stop"]),["left"])),e[6]||(e[6]=n(o(()=>{},["stop"]),["right"])),e[7]||(e[7]=n(o(()=>{},["stop"]),["up"])),e[8]||(e[8]=n(o(()=>{},["stop"]),["delete"])),e[9]||(e[9]=n(o(()=>{},["ctrl","stop"]),["z"])),e[10]||(e[10]=n(o(()=>{},["meta","stop"]),["z"]))],onSelectstartCapture:e[11]||(e[11]=o(()=>{},["stop"])),onMousedown:e[12]||(e[12]=o(()=>{},["stop"]))},null,38)),[[q,t(l)]]):t(l)===null&&t(N)?(i(),d("span",ie,"NULL")):t(p)?(i(),c(D,{key:2,value:t(l),lines:t(p),class:"mr-7"},null,8,["value","lines"])):(i(),d("span",pe,V(t(l)),1)),t(z)?(i(),d("div",{key:4,class:_(["!absolute right-0 bottom-0 h-6 w-5 group cursor-pointer flex justify-end gap-1 items-center active:ring active:ring-accent active:ring-opacity-100 rounded border-none p-1 hover:bg-primary hover:bg-opacity-10 !dark:bg-slate-500",{"right-2 bottom-2":t(v)}]),"data-testid":"attachment-cell-file-picker-button",onClick:e[13]||(e[13]=o(a=>s.value=!t(s),["stop"]))},[g(M,{placement:"bottom"},{title:x(()=>[G("Expand")]),default:x(()=>[(i(),c(Q(t(h).expand),{class:"transform !dark:text-white !group-hover:text-grey-800 group-hover:scale-120 text-gray-500 text-xs"}))]),_:1})],2)):E("",!0)],2)]),_:1},8,["visible"])}}});export{Re as default};

import{h as ne,cb as H,o,c as f,b as i,E as e,Q as N,R as U,A as Ve,S as Oe,$ as ve,r as w,i as W,aq as ee,cI as $e,w as l,aj as ie,cp as fe,a as n,t as F,C as y,H as de,d as se,W as V,aV as ce,J as ue,g as je,ap as Ae,I as J,D as Pe,F as Me,cB as We,p as Ee,e as ze,k as He,l as Ne,V as we,b5 as Ue,fA as Be,al as Ge,c4 as qe,Z as B,bP as Fe,cF as Je,cg as me,eW as Ke,cd as xe}from"./entry.13466615.js";import{_ as he}from"./Icon.vue.e15b8911.js";import{b as be,a as Xe,u as Qe,c as Ze}from"./useMetas.223da623.js";import{_ as Ye}from"./Select.vue.140b59a5.js";import{_ as Ie}from"./Button.vue.a83cab3b.js";import{_ as Te,u as ke,a as et}from"./Editor.0f343865.js";import{M as De,A as Ce,b as tt,d as ot,R as at,e as st,O as nt,F as it,c as lt,T as rt,f as ct}from"./index.5263eb1d.js";import{u as dt}from"./useCopy.a0671815.js";import{a as ut,u as _t}from"./useSmartsheetStore.9bdf3b91.js";import{u as pt}from"./useViewData.c2e6f1c7.js";import{H as mt}from"./index.f1457320.js";import{S as vt}from"./index.4385a501.js";import{_ as Le}from"./index.62e3d60f.js";import{_ as pe}from"./_plugin-vue_export-helper.c27b6911.js";import{_ as ft}from"./nuxt-link.d273ea3b.js";import{_ as ht}from"./Dropdown.vue.be6ede75.js";import{_ as bt}from"./DeleteModal.vue.55101b0a.js";import{u as _e}from"./views.3cd4bcb9.js";import{_ as yt}from"./index.7677ce8f.js";import{u as Re}from"./index.e7cf7635.js";import{u as ge}from"./sidebar.42429978.js";import{g as Se,M as wt}from"./splitpanes.3e504b54.js";import{u as xt}from"./index.c41a4e8f.js";import{u as kt}from"./useMapViewDataStore.2005cfda.js";import{u as gt}from"./useGridViewColumn.2d62f858.js";import{u as St}from"./useKanbanViewStore.d73f4042.js";import"./index.f2e6837c.js";import"./debounce.dbc9bf77.js";import"./toNumber.7aa6a805.js";import"./isSymbol.b9109ae5.js";import"./validation.5ed31fc1.js";import"./index.6f605a00.js";import"./FormItem.fe59dafe.js";import"./identity.b813b76e.js";import"./_getPrototype.00be30f0.js";import"./Col.23d910dc.js";import"./responsiveObserve.9209e727.js";import"./toArray.f6fa5a71.js";import"./FormItemContext.27b2e5db.js";import"./useSize.dec45296.js";import"./_flatRest.037bf8e3.js";import"./isPlainObject.4c0f42f1.js";import"./index.89133b21.js";import"./index.a8ef1b7e.js";import"./Input.16966097.js";import"./antInputDirective.8ac36ea7.js";import"./SearchOutlined.c1eed30a.js";import"./TextArea.1bd4034f.js";import"./Password.d7b16461.js";import"./index.2660048d.js";import"./Checkbox.65681aa3.js";import"./createForOfIteratorHelper.37be2624.js";import"./index.638acbb4.js";import"./index.2a3da6a9.js";import"./virtualCell.88c63e03.js";import"./dataUtils.31dbfaee.js";import"./useSharedView.746b4f21.js";import"./isMobile.e2e89480.js";import"./useMemo.4991ab9d.js";import"./useMergedState.1cc2a884.js";import"./useState.a6853ebd.js";import"./DownOutlined.9cfe3e0c.js";import"./CheckOutlined.80115d65.js";import"./Dropdown.a78be736.js";import"./useRefs.6ea70d5c.js";import"./index.82f05b6c.js";import"./RightOutlined.2c092523.js";import"./Modal.vue.fe6a4790.js";import"./deepCompare.d32ec333.js";const $t=N(()=>U(()=>import("./View.fea8a318.js"),["./View.fea8a318.js","./View.vue.d0d00de4.js","./entry.13466615.js","./entry.0f786d51.css","./Overlay.f7b74b5f.js","./_plugin-vue_export-helper.c27b6911.js","./Overlay.09be8605.css","./index.2660048d.js","./Checkbox.65681aa3.js","./FormItemContext.27b2e5db.js","./createForOfIteratorHelper.37be2624.js","./useMetas.223da623.js","./index.f2e6837c.js","./debounce.dbc9bf77.js","./toNumber.7aa6a805.js","./isSymbol.b9109ae5.js","./View.5176b468.css"],import.meta.url).then(t=>t.default||t)),Et={class:"flex flex-col p-4",style:{height:"calc(100vh - (var(--topbar-height) * 2))"}},zt=ne({__name:"Erd",setup(t){const{activeTable:$}=H(be());return(x,h)=>{var E;const c=$t;return o(),f("div",Et,[i(c,{table:e($),"base-id":(E=e($))==null?void 0:E.base_id,"show-all-columns":!1},null,8,["table","base-id"])])}}}),It=N(()=>U(()=>import("./Editor.8a50dde5.js"),["./Editor.8a50dde5.js","./Editor.vue.2426816e.js","./entry.13466615.js","./entry.0f786d51.css","./deepCompare.d32ec333.js"],import.meta.url).then(t=>t.default||t)),Tt={class:"flex flex-col w-full h-full px-6 mt-1"},Dt={class:"text-sm capitalize select-none"},Ct={class:"flex flex-row w-full space-x-3 my-4 items-center"},Lt={class:"flex items-center"},Rt=ne({__name:"Api",setup(t){const{t:$}=Ve(),x=Xe(),{project:h}=H(x),{appInfo:c,token:E}=Oe(),O=ve(De,w()),d=ve(Ce,w()),{xWhere:G}=ut(),{queryParams:u}=pt(O,d,G),{copy:b}=dt(),I=[{name:"shell",clients:["curl","wget"]},{name:"javascript",clients:["axios","fetch","jquery","xhr"]},{name:"node",clients:["axios","fetch","request","native","unirest"]},{name:"nocodb-sdk",clients:["javascript","node"]},{name:"php"},{name:"python",clients:["python3","requests"]},{name:"ruby"},{name:"java"},{name:"c"}],g=w(I[0].clients&&I[0].clients[0]),T=w(I[0].name),v=W(()=>{var _,p;return new URL(`/api/v1/db/data/noco/${h.value.id}/${(_=O.value)==null?void 0:_.title}/views/${(p=d.value)==null?void 0:p.title}`,c.value&&c.value.ncSiteUrl||"/").href}),j=W(()=>new mt({method:"GET",headers:[{name:"xc-auth",value:E.value,comment:"JWT Auth token"}],url:v.value,queryString:Object.entries(u.value||{}).map(([_,p])=>({name:_,value:String(p)}))})),r=W(()=>I.find(_=>_.name===T.value)),R=W(()=>{var _,p,k,K,D,P;return((_=r.value)==null?void 0:_.name)==="nocodb-sdk"?`${g.value==="node"?'const { Api } = require("nocodb-sdk");':'import { Api } from "nocodb-sdk";'}
const api = new Api({
  baseURL: "${c.value&&c.value.ncSiteUrl||"/"}",
  headers: {
    "xc-auth": ${JSON.stringify(E.value)}
  }
})

api.dbViewRow.list(
  "noco",
  ${JSON.stringify(h.value.title)},
  ${JSON.stringify((p=O.value)==null?void 0:p.title)},
  ${JSON.stringify((k=d.value)==null?void 0:k.title)}, ${JSON.stringify(u.value,null,4)}).then(function (data) {
  console.log(data);
}).catch(function (error) {
  console.error(error);
});
    `:j.value.convert((K=r.value)==null?void 0:K.name,g.value||((D=r.value)==null?void 0:D.clients)&&((P=r.value)==null?void 0:P.clients[0]),{})}),A=async()=>{try{await b(R.value),ue.info($("msg.info.copiedToClipboard"))}catch(_){ue.error(_.message)}};return ee(r,_=>{var p;g.value=(p=_==null?void 0:_.clients)==null?void 0:p[0]}),(_,p)=>{const k=vt,K=Ye,D=he,P=Ie,X=It,Q=Le,q=Te,Z=$e("e");return o(),f("div",Tt,[i(q,{activeKey:e(T),"onUpdate:activeKey":p[1]||(p[1]=a=>de(T)?T.value=a:null),class:"!h-full"},{default:l(()=>[(o(),f(ie,null,fe(I,a=>i(Q,{key:a.name,class:"!h-full"},{tab:l(()=>[n("div",Dt,F(a.name),1)]),default:l(()=>{var m,z,C,L;return[n("div",Ct,[(m=e(r))!=null&&m.clients?(o(),y(K,{key:0,value:e(g),"onUpdate:value":p[0]||(p[0]=S=>de(g)?g.value=S:null),style:{width:"10rem"},class:"capitalize","dropdown-class-name":"nc-dropdown-snippet-active-lang"},{default:l(()=>{var S;return[(o(!0),f(ie,null,fe((S=e(r))==null?void 0:S.clients,(M,te)=>(o(),y(k,{key:te,class:"!w-full capitalize",value:M},{default:l(()=>[se(F(M),1)]),_:2},1032,["value"]))),128))]}),_:1},8,["value"])):V("",!0),ce((o(),y(P,{type:"secondary",size:"small",onClick:A},{default:l(()=>[n("div",Lt,[i(D,{icon:"copy",class:"mr-1"}),se(" "+F(_.$t("general.copy"))+" code ",1)])]),_:1})),[[Z,["c:snippet:copy",{client:((z=e(r))==null?void 0:z.clients)&&(e(g)||((C=e(r))==null?void 0:C.clients[0])),lang:(L=e(r))==null?void 0:L.name}]]])]),i(X,{class:"border-1 border-gray-200 py-4 rounded-lg",style:{height:"calc(100vh - (var(--topbar-height) * 2) - 8rem)"},"model-value":e(R),"read-only":!0,lang:"typescript",validate:!1,"disable-deep-compare":!0,"hide-minimap":""},null,8,["model-value"])]}),_:2},1024)),64))]),_:1},8,["activeKey"])])}}});const Vt=pe(Rt,[["__scopeId","data-v-ad4a8395"]]),le=t=>(Ee("data-v-014b0eee"),t=t(),ze(),t),Ot={class:"flex flex-row items-center gap-x-1"},jt={class:"flex flex-row ml-2"},At=le(()=>n("div",{class:"flex text-gray-400"},"/",-1)),Pt={class:"flex link"},Mt={class:"flex flex-row items-center justify-between w-full text-brand-500"},Wt=le(()=>n("span",{class:"ml-1"},"New Webhook",-1)),Ht={key:0,class:"flex flex-col h-full w-full items-center"},Nt={key:0,class:"flex flex-col px-1.5 py-2.5 ml-1 h-full justify-center items-center gap-y-6"},Ut=le(()=>n("div",{class:"flex text-gray-600 font-medium text-lg"},"Get started with web-hooks!",-1)),Bt=le(()=>n("div",{class:"flex flex-col items-center"},[n("div",{class:"flex"},"Create web-hooks to power you automations,"),n("div",{class:"flex"},"Get notified as soon as there are changes in your data")],-1)),Gt={class:"flex flex-row items-center justify-between w-full"},qt=le(()=>n("span",{class:"ml-1"},"New Webhook",-1)),Ft={key:1,class:"flex flex-col pb-2 mt-3 mb-2.5 w-full max-w-200"},Jt=We('<div class="flex flex-row nc-view-sidebar-webhook-header pl-3 pr-2 !py-2.5" data-v-014b0eee><div class="nc-view-sidebar-webhook-item-toggle header" data-v-014b0eee>Activate</div><div class="nc-view-sidebar-webhook-item-title header" data-v-014b0eee>Title</div><div class="nc-view-sidebar-webhook-item-event header" data-v-014b0eee>Event</div><div class="nc-view-sidebar-webhook-item-action header" data-v-014b0eee>Action</div></div>',1),Kt={class:"nc-view-sidebar-webhook-item-toggle"},Xt=["onClick"],Qt={class:"text-inherit group-hover:text-black capitalize"},Zt={class:"nc-view-sidebar-webhook-item-event capitalize"},Yt={class:"nc-view-sidebar-webhook-item-action !"},eo={class:"flex flex-col p-0 items-start"},to={class:"flex items-center gap-x-1"},oo={class:"flex items-center justify-start gap-x-1 !text-red-500"},ao={key:1,class:"flex w-full pr-4 justify-center"},so={class:"flex flex-col mt-4 p-8 mb-4 border-1 rounded-2xl w-full max-w-200",style:{height:"fit-content"}},no={key:0,class:"flex flex-row items-center py-2 px-3 bg-gray-50 rounded-lg text-gray-700 mb-4"},io={class:"capitalize text-ellipsis overflow-hidden select-none w-full pl-2.5",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},lo=ne({__name:"Webhooks",setup(t){const x=je().currentRoute,{hooks:h,webhookMainUrl:c,isHooksLoading:E}=H(ke()),{loadHooksList:O,deleteHook:d,copyHook:G,saveHooks:u,navigateToWebhook:b}=ke(),{activeView:I}=H(_e()),g=w(null),{activeTable:T}=H(be()),v=w(""),j=W(()=>h.value.find(a=>a.id===v.value)),r=w(void 0),R=W(()=>{if(r.value)return h.value.find(a=>a.id===r.value)}),A=w(!1),_=w(!1),p=w(!1),k=w(!1),K=async a=>{if(!p.value){p.value=!0;try{await G(a)}finally{p.value=!1}}},D=a=>{v.value=a,A.value=!0},P=async()=>{if(_.value=!0,!!v.value)try{await d(v.value)}finally{_.value=!1,A.value=!1,v.value=""}},X=a=>{b({hookId:a})};ee(A,()=>{A.value&&Ae(()=>{var a,m;(m=(a=g.value)==null?void 0:a.$el)==null||m.focus()})}),ee(()=>{var a;return(a=T.value)==null?void 0:a.id},async()=>{var a;(a=T.value)!=null&&a.id&&(r.value=void 0,await O())},{immediate:!0});const Q=async a=>{a.active=!a.active,await u({hook:a})},q=async()=>{b({openCreatePage:!0})},Z=()=>{b({openMainPage:!0})};return ee(()=>x.value.params.slugs,async()=>{if(!x.value.params.slugs){k.value=!1,r.value=void 0;return}x.value.params.slugs[1]==="create"?k.value=!0:k.value=!1,r.value=x.value.params.slugs&&x.value.params.slugs[1]||void 0},{immediate:!0}),(a,m)=>{const z=he,C=Ie,L=ft,S=yt,M=ht,te=et,oe=bt,ae=$e("e");return o(),f(ie,null,[e(I)&&!e(E)?(o(),f("div",{key:e(r),class:"flex flex-col pt-3 pb-12 border-gray-50 pl-3 pr-0 nc-view-sidebar-webhook nc-scrollbar-md",style:{height:"calc(100vh - (var(--topbar-height) * 2))"}},[n("div",{class:J(["flex flex-row justify-between w-full min-h-8 mb-8",{"!items-start mt-1":!e(r)&&!e(k)}])},[n("div",Ot,[e(k)||e(r)?(o(),y(C,{key:0,type:"text",size:"xsmall",onClick:m[0]||(m[0]=s=>e(b)({openMainPage:!0}))},{default:l(()=>[i(z,{icon:"arrowLeft"})]),_:1})):V("",!0),n("div",jt,[i(L,{class:"link",to:e(c)},{default:l(()=>[se("Webhooks")]),_:1},8,["to"])]),e(R)||e(k)?(o(),f(ie,{key:1},[At,n("div",Pt,F(e(R)?e(R).title:"Create"),1)],64)):V("",!0),e(R)?(o(),f("div",{key:2,class:J(["flex text-xs px-1.5 py-1 rounded-md ml-1",{"bg-green-200 text-green-800":e(R).active,"bg-gray-100 text-gray-500":!e(R).active}])},F(e(R).active?"Active":"Inactive"),3)):V("",!0)]),!e(r)&&!e(k)?ce((o(),y(C,{key:0,class:"mr-4 max-w-40",type:"secondary",size:"small",onClick:m[1]||(m[1]=s=>q())},{default:l(()=>[n("div",Mt,[Wt,i(z,{icon:"plus"})])]),_:1})),[[ae,["c:actions:webhook"]]]):V("",!0)],2),!e(r)&&!e(k)?(o(),f("div",Ht,[e(h).length===0?(o(),f("div",Nt,[i(z,{icon:"webhook",class:"flex text-5xl h-10",style:{"-webkit-text-stroke":"0.5px"}}),Ut,Bt,ce((o(),y(C,{class:"flex max-w-40",type:"primary",onClick:m[2]||(m[2]=s=>q())},{default:l(()=>[n("div",Gt,[qt,i(z,{icon:"plus"})])]),_:1})),[[ae,["c:actions:webhook"]]])])):(o(),f("div",Ft,[Jt,(o(!0),f(ie,null,fe(e(h),s=>(o(),f("div",{key:s.id,class:"nc-view-sidebar-webhook-item"},[n("div",{class:J(["flex flex-row w-full items-center pl-3 pr-2 py-2 hover:bg-gray-50 rounded-lg cursor-pointer group text-gray-600",{"bg-brand-50 !text-brand-500 hover:bg-brand-50":s.id===e(r)}])},[n("div",Kt,[ce(i(S,{size:"small",checked:!!s.active,class:"min-w-4",onChange:Y=>Q(s)},null,8,["checked","onChange"]),[[ae,["c:actions:webhook"]]])]),n("div",{class:"nc-view-sidebar-webhook-item-title font-medium flex flex-row items-center",onClick:Y=>X(s.id)},[n("div",Qt,F(s==null?void 0:s.title),1)],8,Xt),n("div",Zt,F(s==null?void 0:s.event)+" "+F(s==null?void 0:s.operation),1),n("div",Yt,[i(M,{trigger:["click"],"overlay-class-name":"!rounded-md"},{overlay:l(()=>[n("div",eo,[i(C,{type:"text",class:"w-full !rounded-none",loading:e(p),centered:!1,onClick:Y=>K(s)},{loading:l(()=>[se(" Duplicating ")]),default:l(()=>[n("div",to,[i(z,{icon:"copy"}),se(" Duplicate")])]),_:2},1032,["loading","onClick"]),i(C,{type:"text",class:"w-full !rounded-none",centered:!1,onClick:Y=>D(s.id)},{default:l(()=>[n("div",oo,[i(z,{icon:"delete"}),se(" Delete ")])]),_:2},1032,["onClick"])])]),default:l(()=>[i(C,{size:"xsmall",type:"text",class:J(["nc-btn-webhook-more !text-gray-500 !hover:text-gray-800",{"!hover:bg-brand-100":s.id===e(r),"!hover:bg-gray-200":s.id!==e(r)}])},{default:l(()=>[i(z,{icon:"threeDotVertical",class:"text-inherit"})]),_:2},1032,["class"])]),_:2},1024)])],2)]))),128))]))])):(o(),f("div",ao,[n("div",so,[(o(),y(te,{key:e(r),hook:e(R),onClose:Z,onDelete:m[3]||(m[3]=s=>A.value=!0)},null,8,["hook"]))])]))])):V("",!0),i(oe,{visible:e(A),"onUpdate:visible":m[4]||(m[4]=s=>de(A)?A.value=s:null),"entity-name":a.$t("objects.webhook"),"on-delete":P},{"entity-preview":l(()=>[e(j)?(o(),f("div",no,[(o(),y(Pe(("iconMap"in a?a.iconMap:e(Me)).hook),{class:"text-gray-600"})),n("div",io,F(e(j).title),1)])):V("",!0)]),_:1},8,["visible","entity-name"])],64)}}});const ro=pe(lo,[["__scopeId","data-v-014b0eee"]]),ye=t=>(Ee("data-v-b13821a5"),t=t(),ze(),t),co={class:"flex flex-col h-full w-full","data-testid":"nc-details-wrapper"},uo={class:"tab","data-testid":"nc-relations-tab"},_o=ye(()=>n("div",null,"Relations",-1)),po={class:"tab","data-testid":"nc-apis-tab"},mo=ye(()=>n("div",null,"APIs",-1)),vo={class:"tab","data-testid":"nc-webhooks-tab"},fo=ye(()=>n("div",null,"Webhooks",-1)),ho=ne({__name:"Details",setup(t){const{openedViewsTab:$}=H(_e()),{onViewsTabChange:x}=_e(),{isUIAllowed:h}=Re(),c=W({get(){return $.value},set(E){x(E)}});return ee(c,()=>{c.value==="webhook"&&!h("hookList")&&x("relation")},{immediate:!0}),(E,O)=>{const d=he,G=zt,u=Le,b=Vt,I=ro,g=Te;return o(),f("div",co,[i(g,{modelValue:e(c),"onUpdate:modelValue":O[0]||(O[0]=T=>de(c)?c.value=T:null)},{default:l(()=>[i(u,{key:"relation"},{tab:l(()=>[n("div",uo,[i(d,{icon:"erd",class:J(["tab-icon",{}])}),_o])]),default:l(()=>[i(G)]),_:1}),i(u,{key:"api"},{tab:l(()=>[n("div",po,[i(d,{icon:"code",class:J(["tab-icon",{}])}),mo])]),default:l(()=>[i(b)]),_:1}),e(h)("hookList")?(o(),y(u,{key:"webhook"},{tab:l(()=>[n("div",vo,[i(d,{icon:"webhook",class:J(["tab-icon",{}])}),fo])]),default:l(()=>[i(I)]),_:1})):V("",!0)]),_:1},8,["modelValue"])])}}});const bo=pe(ho,[["__scopeId","data-v-b13821a5"]]),re=250,yo=ne({__name:"SmartsheetResizable",setup(t){const{isRightSidebarOpen:$,isLeftSidebarOpen:x,leftSidebarWidthPercent:h,rightSidebarSize:c}=H(ge()),E=w(),O=w(),{rightSidebarState:d}=H(ge()),G=W(()=>100-c.value.current),u=w(window.innerWidth),b=W(()=>c.value.old*u.value/100),I=W({get:()=>c.value.current,set:v=>{c.value.current=v,c.value.old=v}});ee($,()=>{c.value.current=c.value.old,$.value?(setTimeout(()=>d.value="openStart",0),setTimeout(()=>d.value="openEnd",re)):(c.value.old=c.value.current,d.value="hiddenStart",setTimeout(()=>{c.value.current=0,d.value="hiddenEnd"},re))});function g(v){if(!E.value||d.value==="openEnd")return;const j=window.innerWidth;v.clientX>j-14&&["hiddenEnd","peekCloseEnd"].includes(d.value)?(d.value="peekOpenStart",setTimeout(()=>{d.value="peekOpenEnd"},re)):v.clientX<j-(b.value+10)&&d.value==="peekOpenEnd"&&(d.value="peekCloseOpen",setTimeout(()=>{d.value="peekCloseEnd"},re))}function T(){u.value=(100-h.value)/100*window.innerWidth}return He(()=>{document.addEventListener("mousemove",g),window.addEventListener("resize",T)}),Ne(()=>{document.removeEventListener("mousemove",g),window.removeEventListener("resize",T)}),ee([x,h],()=>{x.value?u.value=(100-h.value)/100*window.innerWidth:u.value=window.innerWidth},{immediate:!0}),(v,j)=>(o(),y(e(wt),{ref_key:"splitpaneWrapperRef",ref:O,class:J(["nc-view-sidebar-content-resizable-wrapper w-full h-full",{"hide-resize-bar":!e($)||e(d)==="openStart"}]),onResize:j[0]||(j[0]=r=>I.value=r[1].size)},{default:l(()=>[i(e(Se),{size:e(G)},{default:l(()=>[we(v.$slots,"content")]),_:3},8,["size"]),i(e(Se),{"min-size":"15%",size:e(I),"max-size":"40%",class:"nc-view-sidebar-splitpane relative !overflow-visible"},{default:l(()=>[n("div",{ref_key:"wrapperRef",ref:E,class:J(["nc-view-sidebar-wrapper relative flex flex-col h-full justify-center !min-w-32 absolute overflow-visible",{"minimized-height":!e($),"peek-sidebar":["peekOpenEnd","peekCloseOpen"].includes(e(d)),"hide-sidebar":["hiddenStart","hiddenEnd","peekCloseEnd"].includes(e(d))}]),style:Ue({width:e(d)==="hiddenEnd"?"0px":`${e(b)}px`})},[we(v.$slots,"sidebar")],6)]),_:3},8,["size"])]),_:3},8,["class"]))}});const wo=Be(()=>({sqlEditors:w(),selectBase:(...x)=>{},promptHistory:[]})),xo=N(()=>U(()=>import("./Topbar.9b337676.js"),["./Topbar.9b337676.js","./entry.13466615.js","./entry.0f786d51.css","./OpenLeftSidebarBtn.vue.55bf93c3.js","./Icon.vue.e15b8911.js","./Button.vue.a83cab3b.js","./index.f2e6837c.js","./debounce.dbc9bf77.js","./toNumber.7aa6a805.js","./isSymbol.b9109ae5.js","./_plugin-vue_export-helper.c27b6911.js","./Button.95d2a5ed.css","./Tooltip.vue.30df4de9.js","./Tooltip.b86f91a1.css","./sidebar.42429978.js","./ViewIcon.vue.8aa1efd9.js","./ViewIcon.fd2d300a.css","./views.3cd4bcb9.js","./useMetas.223da623.js","./useSharedView.746b4f21.js","./index.5263eb1d.js","./index.2ae12d3e.js","./useSmartsheetStore.9bdf3b91.js","./index.2a3da6a9.js","./index.e7cf7635.js","./Input.2c73684e.js","./Topbar.5caf477f.css"],import.meta.url).then(t=>t.default||t)),ko=N(()=>U(()=>import("./Toolbar.2801464f.js"),["./Toolbar.2801464f.js","./entry.13466615.js","./entry.0f786d51.css","./index.5263eb1d.js","./useSharedView.746b4f21.js","./useMetas.223da623.js","./useSmartsheetStore.9bdf3b91.js","./views.3cd4bcb9.js","./index.2a3da6a9.js","./index.e7cf7635.js","./Input.2c73684e.js","./_plugin-vue_export-helper.c27b6911.js","./Toolbar.10ec8f83.css"],import.meta.url).then(t=>t.default||t)),go=N(()=>U(()=>import("./index.3f3cf1b5.js"),["./index.3f3cf1b5.js","./entry.13466615.js","./entry.0f786d51.css","./index.5263eb1d.js","./dataUtils.31dbfaee.js","./useSmartsheetStore.9bdf3b91.js","./views.3cd4bcb9.js","./useMetas.223da623.js","./useSharedView.746b4f21.js","./index.2a3da6a9.js","./useViewData.c2e6f1c7.js","./virtualCell.88c63e03.js","./index.e7cf7635.js","./useGridViewColumn.2d62f858.js","./Icon.vue.e15b8911.js","./EditOrAddProvider.vue.9fbafb18.js","./Button.vue.a83cab3b.js","./index.f2e6837c.js","./debounce.dbc9bf77.js","./toNumber.7aa6a805.js","./isSymbol.b9109ae5.js","./_plugin-vue_export-helper.c27b6911.js","./Button.95d2a5ed.css","./useBetaFeatureToggle.52c326cd.js","./index.2ae12d3e.js","./validation.5ed31fc1.js","./index.6f605a00.js","./FormItem.fe59dafe.js","./identity.b813b76e.js","./_getPrototype.00be30f0.js","./Col.23d910dc.js","./responsiveObserve.9209e727.js","./toArray.f6fa5a71.js","./FormItemContext.27b2e5db.js","./useSize.dec45296.js","./_flatRest.037bf8e3.js","./isPlainObject.4c0f42f1.js","./index.a8ef1b7e.js","./Input.16966097.js","./antInputDirective.8ac36ea7.js","./SearchOutlined.c1eed30a.js","./TextArea.1bd4034f.js","./Password.d7b16461.js","./index.2660048d.js","./Checkbox.65681aa3.js","./createForOfIteratorHelper.37be2624.js","./index.4385a501.js","./isMobile.e2e89480.js","./useMemo.4991ab9d.js","./useMergedState.1cc2a884.js","./useState.a6853ebd.js","./DownOutlined.9cfe3e0c.js","./CheckOutlined.80115d65.js","./EditOrAddProvider.44ca9c5b.css","./useCopy.a0671815.js","./index.3e3f609f.js","./Input.2c73684e.js","./index.82f05b6c.js","./Dropdown.a78be736.js","./RightOutlined.2c092523.js","./index.8edf0358.js","./index.a1080274.js","./index.98e58c56.css"],import.meta.url).then(t=>t.default||t)),So=N(()=>U(()=>import("./Gallery.eb04fafe.js"),["./Gallery.eb04fafe.js","./entry.13466615.js","./entry.0f786d51.css","./views.3cd4bcb9.js","./useMetas.223da623.js","./useSharedView.746b4f21.js","./index.5263eb1d.js","./useSmartsheetStore.9bdf3b91.js","./index.2a3da6a9.js","./index.e7cf7635.js","./dataUtils.31dbfaee.js","./fileUtils.43128440.js","./virtualCell.88c63e03.js","./useAttachment.e270c182.js","./urlUtils.f6dc4ebc.js","./useViewData.c2e6f1c7.js","./index.9b549237.js","./debounce.dbc9bf77.js","./toNumber.7aa6a805.js","./isSymbol.b9109ae5.js","./index.3cc83813.js","./index.62e3d60f.js","./Dropdown.a78be736.js","./useState.a6853ebd.js","./useRefs.6ea70d5c.js","./identity.b813b76e.js","./_flatRest.037bf8e3.js","./isMobile.e2e89480.js","./useMergedState.1cc2a884.js","./index.638acbb4.js","./Col.23d910dc.js","./responsiveObserve.9209e727.js","./index.89133b21.js","./isPlainObject.4c0f42f1.js","./_getPrototype.00be30f0.js","./index.82f05b6c.js","./RightOutlined.2c092523.js","./Input.2c73684e.js","./_plugin-vue_export-helper.c27b6911.js","./Gallery.56886e76.css"],import.meta.url).then(t=>t.default||t)),$o=N(()=>U(()=>import("./Form.fc6367f4.js"),["./Form.fc6367f4.js","./entry.13466615.js","./entry.0f786d51.css","./EditOrAddProvider.vue.9fbafb18.js","./Icon.vue.e15b8911.js","./Button.vue.a83cab3b.js","./index.f2e6837c.js","./debounce.dbc9bf77.js","./toNumber.7aa6a805.js","./isSymbol.b9109ae5.js","./_plugin-vue_export-helper.c27b6911.js","./Button.95d2a5ed.css","./useBetaFeatureToggle.52c326cd.js","./index.5263eb1d.js","./index.2ae12d3e.js","./validation.5ed31fc1.js","./useMetas.223da623.js","./index.6f605a00.js","./FormItem.fe59dafe.js","./identity.b813b76e.js","./_getPrototype.00be30f0.js","./Col.23d910dc.js","./responsiveObserve.9209e727.js","./toArray.f6fa5a71.js","./FormItemContext.27b2e5db.js","./useSize.dec45296.js","./_flatRest.037bf8e3.js","./isPlainObject.4c0f42f1.js","./index.a8ef1b7e.js","./Input.16966097.js","./antInputDirective.8ac36ea7.js","./SearchOutlined.c1eed30a.js","./TextArea.1bd4034f.js","./Password.d7b16461.js","./index.2660048d.js","./Checkbox.65681aa3.js","./createForOfIteratorHelper.37be2624.js","./index.4385a501.js","./isMobile.e2e89480.js","./useMemo.4991ab9d.js","./useMergedState.1cc2a884.js","./useState.a6853ebd.js","./DownOutlined.9cfe3e0c.js","./CheckOutlined.80115d65.js","./EditOrAddProvider.44ca9c5b.css","./useSmartsheetRowStore.ef2cd001.js","./deepCompare.d32ec333.js","./dataUtils.31dbfaee.js","./virtualCell.88c63e03.js","./index.2a3da6a9.js","./index.e7cf7635.js","./useViewColumns.21ea359e.js","./useViewData.c2e6f1c7.js","./useSharedView.746b4f21.js","./useSmartsheetStore.9bdf3b91.js","./views.3cd4bcb9.js","./vuedraggable.umd.8d33c631.js","./index.3cc83813.js","./index.62e3d60f.js","./Dropdown.a78be736.js","./useRefs.6ea70d5c.js","./index.638acbb4.js","./index.89133b21.js","./index.82f05b6c.js","./RightOutlined.2c092523.js","./index.2c1df8bc.js","./index.7677ce8f.js","./index.1669d181.js","./Form.d09821d5.css"],import.meta.url).then(t=>t.default||t)),Eo=N(()=>U(()=>import("./Kanban.b868c5e5.js"),["./Kanban.b868c5e5.js","./entry.13466615.js","./entry.0f786d51.css","./DeleteModal.vue.55101b0a.js","./Icon.vue.e15b8911.js","./Button.vue.a83cab3b.js","./index.f2e6837c.js","./debounce.dbc9bf77.js","./toNumber.7aa6a805.js","./isSymbol.b9109ae5.js","./_plugin-vue_export-helper.c27b6911.js","./Button.95d2a5ed.css","./Modal.vue.fe6a4790.js","./DeleteModal.7ab6f524.css","./index.5263eb1d.js","./views.3cd4bcb9.js","./useMetas.223da623.js","./useSharedView.746b4f21.js","./index.e7cf7635.js","./dataUtils.31dbfaee.js","./fileUtils.43128440.js","./virtualCell.88c63e03.js","./useAttachment.e270c182.js","./urlUtils.f6dc4ebc.js","./useKanbanViewStore.d73f4042.js","./deepCompare.d32ec333.js","./useSmartsheetStore.9bdf3b91.js","./index.2a3da6a9.js","./vuedraggable.umd.8d33c631.js","./index.82f05b6c.js","./Dropdown.a78be736.js","./RightOutlined.2c092523.js","./index.3cc83813.js","./index.62e3d60f.js","./useState.a6853ebd.js","./useRefs.6ea70d5c.js","./identity.b813b76e.js","./_flatRest.037bf8e3.js","./isMobile.e2e89480.js","./useMergedState.1cc2a884.js","./index.638acbb4.js","./Col.23d910dc.js","./responsiveObserve.9209e727.js","./index.89133b21.js","./isPlainObject.4c0f42f1.js","./_getPrototype.00be30f0.js","./Input.2c73684e.js","./index.a0a88763.js","./isNumeric.3f69e2aa.js","./LeftOutlined.b2689280.js","./index.9b549237.js","./index.1669d181.js","./Kanban.983d325a.css"],import.meta.url).then(t=>t.default||t)),zo=N(()=>U(()=>import("./Map.88334487.js"),["./Map.88334487.js","./entry.13466615.js","./entry.0f786d51.css","./index.5263eb1d.js","./useMapViewDataStore.2005cfda.js","./index.e7cf7635.js","./useSmartsheetStore.9bdf3b91.js","./views.3cd4bcb9.js","./useMetas.223da623.js","./useSharedView.746b4f21.js","./index.2a3da6a9.js","./dataUtils.31dbfaee.js","./geoDataUtils.62b1d864.js","./_plugin-vue_export-helper.c27b6911.js","./Map.1e03369a.css"],import.meta.url).then(t=>t.default||t)),Io=N(()=>U(()=>import("./index.d6cd2a63.js"),["./index.d6cd2a63.js","./entry.13466615.js","./entry.0f786d51.css","./ViewIcon.vue.8aa1efd9.js","./ViewIcon.fd2d300a.css","./Button.vue.a83cab3b.js","./index.f2e6837c.js","./debounce.dbc9bf77.js","./toNumber.7aa6a805.js","./isSymbol.b9109ae5.js","./_plugin-vue_export-helper.c27b6911.js","./Button.95d2a5ed.css","./Modal.vue.7eba58e8.js","./DeleteModal.7ab6f524.css","./index.a8ef1b7e.js","./Input.16966097.js","./antInputDirective.8ac36ea7.js","./FormItemContext.27b2e5db.js","./SearchOutlined.c1eed30a.js","./isPlainObject.4c0f42f1.js","./_getPrototype.00be30f0.js","./TextArea.1bd4034f.js","./Password.d7b16461.js","./index.6f605a00.js","./FormItem.fe59dafe.js","./identity.b813b76e.js","./Col.23d910dc.js","./responsiveObserve.9209e727.js","./toArray.f6fa5a71.js","./useSize.dec45296.js","./_flatRest.037bf8e3.js","./index.4385a501.js","./isMobile.e2e89480.js","./useMemo.4991ab9d.js","./useMergedState.1cc2a884.js","./useState.a6853ebd.js","./DownOutlined.9cfe3e0c.js","./CheckOutlined.80115d65.js","./Icon.vue.e15b8911.js","./Tooltip.vue.30df4de9.js","./Tooltip.b86f91a1.css","./tab.586445bb.js","./useMetas.223da623.js","./sidebar.42429978.js","./index.5263eb1d.js","./index.18c65772.js","./index.e7cf7635.js","./views.3cd4bcb9.js","./useSharedView.746b4f21.js","./Input.2c73684e.js","./index.31cd0071.css"],import.meta.url).then(t=>t.default||t)),To=N(()=>U(()=>import("./Detached.34f23a89.js"),["./Detached.34f23a89.js","./entry.13466615.js","./entry.0f786d51.css","./index.8d89c37a.js","./index.2a3da6a9.js"],import.meta.url).then(t=>t.default||t)),Do={key:0,class:"flex flex-col h-full flex-1 min-w-0"},Co={class:"flex flex-row w-full",style:{height:"calc(100% - var(--topbar-height))"}},Lo={key:0,class:"flex flex-1 min-h-0 w-3/4"},Ro={key:0,class:"h-full flex-1 min-w-0 min-h-0 bg-white"},Vo=ne({__name:"Smartsheet",props:{activeTab:{}},setup(t){const $=t,{isUIAllowed:x}=Re(),{metas:h,getMeta:c}=Qe();xt("nc-right-sidebar");const E=ve(tt,w(!1)),O=Ge($,"activeTab"),d=w([]),G=qe(),u=W(()=>{const D=G.params.viewId;return D&&h.value[D]}),{activeView:b,openedViewsTab:I}=H(_e()),{isGallery:g,isGrid:T,isForm:v,isKanban:j,isLocked:r,isMap:R}=_t(b,u);wo(),H(Ze()),H(be());const A=me(),_=me(),p=me();St(u,b),kt(u,b),gt(b),B(De,u),B(Ce,b),B(ot,r),B(at,A),B(st,_),B(nt,p),B(it,d),B(lt,v),B(rt,O),B(ct,W(()=>!x("xcDatatableEditable")));const k=w(),K=async D=>{var P,X,Q,q,Z,a,m,z,C;D.preventDefault();try{const L=JSON.parse(D.dataTransfer.getData("text/json"));if(L.baseId!==((P=u.value)==null?void 0:P.base_id)||L.type!=="table"||((X=u.value)==null?void 0:X.type)!=="table")return;const S=await c(L.id),M=h.value[u.value.id];if(!S||!M)return;const te=(Q=M.columns)==null?void 0:Q.find(s=>s.pk),oe=(q=S.columns)==null?void 0:q.find(s=>s.pk),ae=(Z=M.columns)==null?void 0:Z.find(s=>{if(!Ke(s))return!1;const Y=s.colOptions;return Y.type!=="mm"||s.system?!1:Y.fk_related_model_id===S.id});if(ae){const s=((a=S.columns)==null?void 0:a.find(Y=>Y.pv))??((m=S.columns)==null?void 0:m[0]);(z=k.value)==null||z.openColumnCreate({uidt:xe.Lookup,title:`${L.title} Lookup`,fk_relation_column_id:ae.id,fk_lookup_column_id:s==null?void 0:s.id})}else{if(!te){ue.error("Parent table does not have a primary key column");return}if(!oe){ue.error("Child table does not have a primary key column");return}(C=k.value)==null||C.openColumnCreate({uidt:xe.Links,title:`${L.title}List`,parentId:M.id,childId:S.id,parentTable:M.title,parentColumn:te.title,childTable:S.title,childColumn:oe==null?void 0:oe.title})}}catch(L){console.log("error",L)}};return(D,P)=>{const X=xo,Q=ko,q=go,Z=So,a=$o,m=Eo,z=zo,C=bo,L=Io,S=yo,M=To;return o(),f("div",{class:"nc-container flex flex-col h-full",onDrop:K,onDragover:P[0]||(P[0]=Je(()=>{},["prevent"]))},[i(X),i(S,{style:{height:"calc(100% - var(--topbar-height))"}},{content:l(()=>[e(I)==="view"?(o(),f("div",Do,[e(v)?V("",!0):(o(),y(Q,{key:0})),n("div",Co,[i(Fe,{name:"layout",mode:"out-in"},{default:l(()=>[e(u)?(o(),f("div",Lo,[e(b)?(o(),f("div",Ro,[e(T)?(o(),y(q,{key:0,ref_key:"grid",ref:k},null,512)):e(g)?(o(),y(Z,{key:1})):e(v)&&!D.$route.query.reload?(o(),y(a,{key:2})):e(j)?(o(),y(m,{key:3})):e(R)?(o(),y(z,{key:4})):V("",!0)])):V("",!0)])):V("",!0)]),_:1})])])):(o(),y(C,{key:1}))]),sidebar:l(()=>[e(E)?V("",!0):(o(),y(L,{key:0}))]),_:1}),i(M)],32)}}});const Xa=pe(Vo,[["__scopeId","data-v-1f98a1cd"]]);export{Xa as default};

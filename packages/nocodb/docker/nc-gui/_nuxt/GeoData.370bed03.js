import{h as R,T as q,r as b,i as O,B as T,o as i,C as m,w as a,b as s,E as e,a as r,t as d,cF as f,D as x,F as y,I as U,W as M,d as w,c as S,P as A,H,L as K}from"./entry.13466615.js";import{l as P}from"./geoDataUtils.62b1d864.js";import"./index.a8ef1b7e.js";import{I as j}from"./Input.16966097.js";import{F as z}from"./index.6f605a00.js";import{D as J}from"./index.82f05b6c.js";import{_ as W}from"./FormItem.fe59dafe.js";import{_ as Q}from"./_plugin-vue_export-helper.c27b6911.js";import"./SearchOutlined.c1eed30a.js";import"./isPlainObject.4c0f42f1.js";import"./_getPrototype.00be30f0.js";import"./TextArea.1bd4034f.js";import"./antInputDirective.8ac36ea7.js";import"./FormItemContext.27b2e5db.js";import"./Password.d7b16461.js";import"./useSize.dec45296.js";import"./identity.b813b76e.js";import"./isSymbol.b9109ae5.js";import"./_flatRest.037bf8e3.js";import"./debounce.dbc9bf77.js";import"./toNumber.7aa6a805.js";import"./Dropdown.a78be736.js";import"./RightOutlined.2c092523.js";import"./Col.23d910dc.js";import"./responsiveObserve.9209e727.js";import"./toArray.f6fa5a71.js";const X={key:0,class:"group cursor-pointer flex gap-1 items-center mx-auto max-w-64 justify-center active:ring active:ring-accent active:ring-opacity-100 rounded border-1 p-1 shadow-sm hover:bg-primary hover:bg-opacity-10 !dark:bg-slate-500"},Y={class:"flex items-center gap-2","data-testid":"nc-geo-data-set-location-button"},Z={class:"group-hover:text-primary text-gray-500 dark:text-gray-200 dark:group-hover:!text-white text-xs"},tt={key:1,"data-testid":"nc-geo-data-lat-long-set"},et={class:"flex mt-4 items-center mx-2"},ot={class:"mr-2"},at={class:"flex items-center mx-2"},st={class:"mr-2"},nt={class:"mr-2 flex flex-col items-end gap-1 text-left"},lt={class:"mr-2 flex flex-row items-end gap-1 text-left"},it={class:"ml-auto mr-2 w-auto"},rt=R({__name:"GeoData",props:{modelValue:{}},emits:["update:modelValue"],setup(I,{emit:D}){const c=q(I,"modelValue",D),g=b(!1),v=b(!1),k=b(!1),[$,C]=(c.value||"").split(";"),h=O(()=>{const[o,t]=(c.value||"").split(";");return o&&(k.value=!0),o&&t?`${o}; ${t}`:"Set location"}),n=T({latitude:$,longitude:C}),F=()=>{c.value=P(parseFloat(n.latitude),parseFloat(n.longitude)),g.value=!1},L=()=>{g.value=!1,n.latitude=$,n.longitude=C},V=()=>{v.value=!0;const o=l=>{const u=l.coords;n.latitude=`${u.latitude}`,n.longitude=`${u.longitude}`,v.value=!1},t=l=>{console.error(`ERROR(${l.code}): ${l.message}`),v.value=!1},p={enableHighAccuracy:!0,timeout:2e4,maximumAge:2e3};navigator.geolocation.getCurrentPosition(o,t,p)},B=()=>{const[o,t]=(c.value||"").split(";"),p=`https://www.google.com/maps/search/?api=1&query=${o},${t}`;window.open(p,"_blank")},N=()=>{const[o,t]=(c.value||"").split(";"),p=`https://www.openstreetmap.org/?mlat=${o}&mlon=${t}#map=15/${o}/${t}`;window.open(p,"_blank")};return(o,t)=>{const p=j,l=W,u=K,E=z,G=J;return i(),m(G,{is:e(g)?e(A):"div",visible:e(g),"onUpdate:visible":t[8]||(t[8]=_=>H(g)?g.value=_:null),trigger:"click"},{overlay:a(()=>[s(E,{model:e(n),class:"flex flex-col w-max-64",onFinish:F},{default:a(()=>[s(l,null,{default:a(()=>[r("div",et,[r("div",ot,d(o.$t("labels.lat"))+":",1),s(p,{value:e(n).latitude,"onUpdate:value":t[0]||(t[0]=_=>e(n).latitude=_),"data-testid":"nc-geo-data-latitude",type:"number",step:"0.0000001",min:-90,required:"",max:90,onKeydown:t[1]||(t[1]=f(()=>{},["stop"])),onSelectstartCapture:t[2]||(t[2]=f(()=>{},["stop"])),onMousedown:t[3]||(t[3]=f(()=>{},["stop"]))},null,8,["value"])])]),_:1}),s(l,null,{default:a(()=>[r("div",at,[r("div",st,d(o.$t("labels.lng"))+":",1),s(p,{value:e(n).longitude,"onUpdate:value":t[4]||(t[4]=_=>e(n).longitude=_),"data-testid":"nc-geo-data-longitude",type:"number",step:"0.0000001",required:"",min:-180,max:180,onKeydown:t[5]||(t[5]=f(()=>{},["stop"])),onSelectstartCapture:t[6]||(t[6]=f(()=>{},["stop"])),onMousedown:t[7]||(t[7]=f(()=>{},["stop"]))},null,8,["value"])])]),_:1}),s(l,null,{default:a(()=>[r("div",nt,[e(v)?(i(),m(x(e(y).reload),{key:0,class:U({"animate-infinite animate-spin text-gray-500":e(v)})},null,8,["class"])):M("",!0),s(u,{class:"ml-2",onClick:V},{default:a(()=>[(i(),m(x(e(y).currentLocation),{class:"mr-2"})),w(d(o.$t("labels.currentLocation")),1)]),_:1})])]),_:1}),e(c)?(i(),m(l,{key:0},{default:a(()=>[r("div",lt,[s(u,{onClick:N},{default:a(()=>[(i(),m(x(e(y).openInNew),{class:"mr-2"})),w(d(o.$t("activity.map.openInOpenStreetMap")),1)]),_:1}),s(u,{onClick:B},{default:a(()=>[(i(),m(x(e(y).openInNew),{class:"mr-2"})),w(d(o.$t("activity.map.openInGoogleMaps")),1)]),_:1})])]),_:1})):M("",!0),s(l,null,{default:a(()=>[r("div",it,[s(u,{type:"text",onClick:L},{default:a(()=>[w(d(o.$t("general.cancel")),1)]),_:1}),s(u,{type:"primary","html-type":"submit","data-testid":"nc-geo-data-save"},{default:a(()=>[w(d(o.$t("general.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])]),default:a(()=>[e(k)?(i(),S("div",tt,d(e(h)),1)):(i(),S("div",X,[r("div",Y,[(i(),m(x(e(y).mapMarker),{class:"transform !dark:text-white !group-hover:text-accent group-hover:scale-120 text-gray-500 text-[0.75rem]"})),r("div",Z,d(e(h)),1)])]))]),_:1},8,["is","visible"])}}});const Gt=Q(rt,[["__scopeId","data-v-62b614c9"]]);export{Gt as default};

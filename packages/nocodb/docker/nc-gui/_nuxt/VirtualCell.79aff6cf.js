import{h as ee,A as te,al as R,r as y,Z as oe,$ as S,i as d,fJ as le,o as c,c as x,E as l,C as M,W as C,b as B,w as I,d as ne,t as j,a as V,I as z,fK as ie,aj as ae,H as L,cF as g,Q as K,R as W,_ as se,p as re,e as ue}from"./entry.13466615.js";import{_ as me}from"./EditOrAddProvider.vue.9fbafb18.js";import{C as pe,M as de,c as ce}from"./index.5263eb1d.js";import{a as N,i as P,b as H,c as U,d as q,e as _e}from"./virtualCell.88c63e03.js";import{u as ve}from"./useMetas.223da623.js";import{u as fe}from"./index.e7cf7635.js";import{D as ye}from"./index.82f05b6c.js";import{_ as Ce}from"./_plugin-vue_export-helper.c27b6911.js";import"./Icon.vue.e15b8911.js";import"./Button.vue.a83cab3b.js";import"./index.f2e6837c.js";import"./debounce.dbc9bf77.js";import"./toNumber.7aa6a805.js";import"./isSymbol.b9109ae5.js";import"./useBetaFeatureToggle.52c326cd.js";import"./index.2ae12d3e.js";import"./validation.5ed31fc1.js";import"./index.6f605a00.js";import"./FormItem.fe59dafe.js";import"./identity.b813b76e.js";import"./_getPrototype.00be30f0.js";import"./Col.23d910dc.js";import"./responsiveObserve.9209e727.js";import"./toArray.f6fa5a71.js";import"./FormItemContext.27b2e5db.js";import"./useSize.dec45296.js";import"./_flatRest.037bf8e3.js";import"./isPlainObject.4c0f42f1.js";import"./index.a8ef1b7e.js";import"./Input.16966097.js";import"./antInputDirective.8ac36ea7.js";import"./SearchOutlined.c1eed30a.js";import"./TextArea.1bd4034f.js";import"./Password.d7b16461.js";import"./index.2660048d.js";import"./Checkbox.65681aa3.js";import"./createForOfIteratorHelper.37be2624.js";import"./index.4385a501.js";import"./isMobile.e2e89480.js";import"./useMemo.4991ab9d.js";import"./useMergedState.1cc2a884.js";import"./useState.a6853ebd.js";import"./DownOutlined.9cfe3e0c.js";import"./CheckOutlined.80115d65.js";import"./Dropdown.a78be736.js";import"./RightOutlined.2c092523.js";const be=K(()=>W(()=>import("./VirtualCellIcon.52ec82ec.js"),["./VirtualCellIcon.52ec82ec.js","./index.5263eb1d.js","./entry.13466615.js","./entry.0f786d51.css","./virtualCell.88c63e03.js"],import.meta.url).then(i=>i.default||i)),$e=K(()=>W(()=>import("./Menu.02a6a941.js"),["./Menu.02a6a941.js","./Icon.vue.e15b8911.js","./entry.13466615.js","./entry.0f786d51.css","./CellIcon.8e3c7692.js","./index.5263eb1d.js","./cell.b6c2deed.js","./useMetas.223da623.js","./DeleteModal.vue.55101b0a.js","./Button.vue.a83cab3b.js","./index.f2e6837c.js","./debounce.dbc9bf77.js","./toNumber.7aa6a805.js","./isSymbol.b9109ae5.js","./_plugin-vue_export-helper.c27b6911.js","./Button.95d2a5ed.css","./Modal.vue.fe6a4790.js","./DeleteModal.7ab6f524.css","./useViewSorts.b3ae049e.js","./useSharedView.746b4f21.js","./useSmartsheetStore.9bdf3b91.js","./views.3cd4bcb9.js","./index.2a3da6a9.js","./index.e7cf7635.js","./index.82f05b6c.js","./Dropdown.a78be736.js","./RightOutlined.2c092523.js","./index.1669d181.js","./Menu.57d81e36.css"],import.meta.url).then(i=>i.default||i)),J=i=>(re("data-v-66efba1c"),i=i(),ue(),i),ke=["title"],we={key:1,class:"text-red-500"},Ie=J(()=>V("div",{class:"flex-1"},null,-1)),he=J(()=>V("div",null,null,-1)),Oe=ee({__name:"VirtualCell",props:{column:{},hideMenu:{type:Boolean},required:{type:[Boolean,Number]}},setup(i){const A=i,{t:h}=te(),e=R(A,"column"),Q=R(A,"hideMenu"),u=y(!1),_=y(!1);oe(pe,e);const{metas:Z}=ve(),{isUIAllowed:G}=fe(),s=S(de,y()),O=S(ce,y(!1)),D=d(()=>{var t;return(t=e.value)==null?void 0:t.colOptions}),T=d(()=>{var t;return(t=s==null?void 0:s.value)==null?void 0:t.title}),E=d(()=>{var t,o,n,a,m,p;return N(e.value)||P(e.value)||H(e.value)?(t=e.value)==null?void 0:t.colOptions:(n=(o=e==null?void 0:e.value)==null?void 0:o.colOptions)!=null&&n.fk_relation_column_id?(p=(m=(a=s==null?void 0:s.value)==null?void 0:a.columns)==null?void 0:m.find(w=>{var f,r;return w.id===((r=(f=e==null?void 0:e.value)==null?void 0:f.colOptions)==null?void 0:r.fk_relation_column_id)}))==null?void 0:p.colOptions:null}),b=d(()=>{var t,o,n;return((t=E.value)==null?void 0:t.fk_related_model_id)&&((n=Z.value)==null?void 0:n[(o=E.value)==null?void 0:o.fk_related_model_id])}),v=d(()=>{var t;return(t=b.value)==null?void 0:t.title}),$=d(()=>{var t,o,n;if((t=b.value)!=null&&t.columns){if(U(e.value))return(o=b.value)==null?void 0:o.columns.find(a=>a.id===D.value.fk_rollup_column_id);if(q(e.value))return(n=b.value)==null?void 0:n.columns.find(a=>a.id===D.value.fk_lookup_column_id)}return""}),X=d(()=>{var t,o,n,a,m,p;return e.value?P(e.value)?`'${T.value}' ${h("labels.hasMany")} '${v.value}'`:N(e.value)?`'${T.value}' & '${v.value}' ${h("labels.manyToMany")}`:H(e.value)?`'${(t=e==null?void 0:e.value)==null?void 0:t.title}' ${h("labels.belongsTo")} '${v.value}'`:q(e.value)?`'${$.value.title}' from '${v.value}' (${$.value.uidt})`:_e(e.value)?`Formula - ${le((n=(o=e.value)==null?void 0:o.colOptions)==null?void 0:n.formula,(a=s==null?void 0:s.value)==null?void 0:a.columns,(p=(m=e.value)==null?void 0:m.colOptions)==null?void 0:p.formula_raw)}`:U(e.value)?`'${$.value.title}' of '${v.value}' (${$.value.uidt})`:"":""}),k=y(null),Y=async t=>{k.value=t,u.value=!0},F=()=>{k.value=null,u.value=!1};return(t,o)=>{var f;const n=be,a=se,m=$e,p=me,w=ye;return c(),x("div",{class:z(["flex items-center w-full text-xs text-gray-500 font-weight-medium",{"h-full":l(e)}]),onContextmenu:o[5]||(o[5]=g(r=>_.value=!l(_),["right"]))},[l(e)?(c(),M(n,{key:0})):C("",!0),B(a,{placement:"bottom"},{title:I(()=>[ne(j(l(X)),1)]),default:I(()=>[V("span",{class:z(["name pl-1",{truncate:!l(O),"whitespace-pre-line":l(O)}]),title:l(e).title},j(l(e).title),11,ke)]),_:1}),l(ie)(l(e),((f=l(s))==null?void 0:f.columns)||[])||t.required?(c(),x("span",we,"Â *")):C("",!0),l(Q)?C("",!0):(c(),x(ae,{key:2},[Ie,!l(O)&&l(G)("edit-column")?(c(),M(m,{key:0,"is-open":l(_),"onUpdate:isOpen":o[0]||(o[0]=r=>L(_)?_.value=r:null),virtual:!0,onAddColumn:Y,onEdit:o[1]||(o[1]=r=>u.value=!0)},null,8,["is-open"])):C("",!0)],64)),B(w,{visible:l(u),"onUpdate:visible":o[4]||(o[4]=r=>L(u)?u.value=r:null),class:"h-full",trigger:["click"],placement:"bottomRight","overlay-class-name":"nc-dropdown-edit-column"},{overlay:I(()=>[l(u)?(c(),M(p,{key:0,column:l(k)?null:l(e),"column-position":l(k),class:"w-full",onSubmit:F,onCancel:F,onClick:o[2]||(o[2]=g(()=>{},["stop"])),onKeydown:o[3]||(o[3]=g(()=>{},["stop"]))},null,8,["column","column-position"])):C("",!0)]),default:I(()=>[he]),_:1},8,["visible"])],34)}}});const Ct=Ce(Oe,[["__scopeId","data-v-66efba1c"]]);export{Ct as default};

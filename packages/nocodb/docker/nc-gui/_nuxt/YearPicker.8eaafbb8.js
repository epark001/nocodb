import{h as Y,S as w,$ as d,r as t,i as k,cq as C,aq as V,fp as P,o as h,C as I,w as b,E as a,H as $,I as g}from"./entry.13466615.js";import{f as j,h as E,E as S}from"./index.5263eb1d.js";import{u as x}from"./index.a6329415.js";import{D as q}from"./dayjs.cc1f81b7.js";import{_ as B}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.93e75123.js";import"./createForOfIteratorHelper.37be2624.js";import"./index.a1080274.js";import"./useMergedState.1cc2a884.js";import"./useMemo.4991ab9d.js";import"./useState.a6853ebd.js";import"./FormItemContext.27b2e5db.js";const D=Y({__name:"YearPicker",props:{modelValue:{},isPk:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(i,{emit:c}){const{showNull:p}=w(),f=d(j,t(!1)),r=d(E,t(!1)),n=d(S,t(!1)),m=t(!1),s=k({get(){if(!i.modelValue)return;const e=C(i.modelValue.toString(),"YYYY");if(!e.isValid()){m.value=!0;return}return e},set(e){if(!e){c("update:modelValue",null);return}e!=null&&e.isValid()&&c("update:modelValue",Number(e.format("YYYY")))}}),l=t(!1),v=`picker_${Math.floor(Math.random()*99999)}`;V(l,e=>{e?P(document.querySelector(`.${v}`),()=>l.value=!1):n.value=!1},{flush:"post"});const y=k(()=>i.modelValue===null&&p.value?"NULL":m.value?"Invalid year":"");return x(r,e=>{switch(e.key){case"Enter":e.stopPropagation(),l.value=!0;break;case"Escape":l.value&&(e.stopPropagation(),l.value=!1);break}}),(e,o)=>{const _=q;return h(),I(_,{value:a(s),"onUpdate:value":o[0]||(o[0]=u=>$(s)?s.value=u:null),picker:"year",bordered:!1,class:g(["!w-full !px-0 !border-none",{"nc-null":e.modelValue===null&&a(p)}]),placeholder:a(y),"allow-clear":!a(f)&&!a(s)&&!e.isPk,"input-read-only":!0,open:(a(f)||a(s)&&e.isPk)&&!a(r)&&!a(n)?!1:a(l),"dropdown-class-name":`${v} nc-picker-year ${a(l)?"active":""}`,onClick:o[1]||(o[1]=u=>l.value=(a(r)||a(n))&&!a(l)),onChange:o[2]||(o[2]=u=>l.value=(a(r)||a(n))&&!a(l))},{suffixIcon:b(()=>[]),_:1},8,["value","class","placeholder","allow-clear","open","dropdown-class-name"])}}});const J=B(D,[["__scopeId","data-v-75335d1d"]]);export{J as default};

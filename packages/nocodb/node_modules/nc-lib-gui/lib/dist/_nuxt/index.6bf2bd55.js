import{h as le,r as C,o as l,c,a as s,E as o,aj as S,t as _,W as p,C as m,b as u,w as x,cp as R,Q as k,L as ne,P as ae,d as B,aV as se,bN as re,f3 as A,I,D as ce,F as ie,R as g,cd as q,f4 as ue}from"./entry.51f4e399.js";import{_ as me}from"./Overlay.8132102a.js";import{_ as de}from"./PoweredBy.vue.52c368af.js";import{u as _e}from"./useSharedFormViewStore.b1e9bc79.js";import{S as pe}from"./StreamBarcodeReader.1af98aa0.js";import{S as fe}from"./index.0db47614.js";import{_ as ve}from"./index.7230021b.js";import{_ as ye}from"./_plugin-vue_export-helper.c27b6911.js";import"./NocoIcon.vue.6ea1cae5.js";import"./256x256-trans.2cd7e00a.js";import"./256x256.3b34edca.js";import"./urlUtils.a77f6d4a.js";import"./index.5263eb1d.js";import"./index.b9981e09.js";import"./useMetas.ba7abae7.js";import"./useSmartsheetRowStore.aafbb4bb.js";import"./deepCompare.d32ec333.js";import"./dataUtils.edecace3.js";import"./virtualCell.4dce1393.js";import"./views.28a76d89.js";import"./useSharedView.0db5f32b.js";import"./debounce.7d32c110.js";import"./toNumber.9dc54e53.js";import"./isSymbol.b53bd26f.js";const be=k(()=>g(()=>import("./VirtualCell.44092918.js"),["./VirtualCell.44092918.js","./entry.51f4e399.js","./entry.0f786d51.css","./EditOrAddProvider.vue.09b12d8b.js","./Icon.vue.1162f18b.js","./Button.vue.793bcd1d.js","./index.0db47614.js","./debounce.7d32c110.js","./toNumber.9dc54e53.js","./isSymbol.b53bd26f.js","./_plugin-vue_export-helper.c27b6911.js","./Button.95d2a5ed.css","./useBetaFeatureToggle.5dbba600.js","./index.5263eb1d.js","./index.e5ddde08.js","./validation.6db726f3.js","./useMetas.ba7abae7.js","./index.de92142d.js","./FormItem.cda40628.js","./identity.dd5da9ba.js","./_getPrototype.ec1165af.js","./Col.88cfabc0.js","./responsiveObserve.501a6cf9.js","./toArray.06afb623.js","./FormItemContext.e001cd7c.js","./useSize.3b3f469f.js","./_flatRest.ff2d3d5c.js","./isPlainObject.ecf52d25.js","./index.e760d172.js","./Input.7cb175ff.js","./antInputDirective.8ac36ea7.js","./SearchOutlined.dec109ce.js","./TextArea.442a25cb.js","./Password.d493e47a.js","./index.0d6d8ba8.js","./Checkbox.a529f1e6.js","./createForOfIteratorHelper.12419aa5.js","./index.5e746f62.js","./isMobile.e2e89480.js","./useMemo.b13a9257.js","./useMergedState.5e6500b1.js","./useState.6010d8b6.js","./DownOutlined.db6f6406.js","./CheckOutlined.ef30fafc.js","./EditOrAddProvider.44ca9c5b.css","./virtualCell.4dce1393.js","./index.9e760c64.js","./index.252dc7b4.js","./Dropdown.dc69c0a4.js","./RightOutlined.90e8180f.js","./VirtualCell.23f24363.css"],import.meta.url).then(n=>n.default||n)),he=k(()=>g(()=>import("./Cell.aa14ce01.js"),["./Cell.aa14ce01.js","./entry.51f4e399.js","./entry.0f786d51.css","./CellIcon.8a6080fd.js","./index.5263eb1d.js","./cell.1732684e.js","./useMetas.ba7abae7.js","./EditOrAddProvider.vue.09b12d8b.js","./Icon.vue.1162f18b.js","./Button.vue.793bcd1d.js","./index.0db47614.js","./debounce.7d32c110.js","./toNumber.9dc54e53.js","./isSymbol.b53bd26f.js","./_plugin-vue_export-helper.c27b6911.js","./Button.95d2a5ed.css","./useBetaFeatureToggle.5dbba600.js","./index.e5ddde08.js","./validation.6db726f3.js","./index.de92142d.js","./FormItem.cda40628.js","./identity.dd5da9ba.js","./_getPrototype.ec1165af.js","./Col.88cfabc0.js","./responsiveObserve.501a6cf9.js","./toArray.06afb623.js","./FormItemContext.e001cd7c.js","./useSize.3b3f469f.js","./_flatRest.ff2d3d5c.js","./isPlainObject.ecf52d25.js","./index.e760d172.js","./Input.7cb175ff.js","./antInputDirective.8ac36ea7.js","./SearchOutlined.dec109ce.js","./TextArea.442a25cb.js","./Password.d493e47a.js","./index.0d6d8ba8.js","./Checkbox.a529f1e6.js","./createForOfIteratorHelper.12419aa5.js","./index.5e746f62.js","./isMobile.e2e89480.js","./useMemo.b13a9257.js","./useMergedState.5e6500b1.js","./useState.6010d8b6.js","./DownOutlined.db6f6406.js","./CheckOutlined.ef30fafc.js","./EditOrAddProvider.44ca9c5b.css","./index.9e760c64.js","./index.252dc7b4.js","./Dropdown.dc69c0a4.js","./RightOutlined.90e8180f.js","./Cell.c77dfd55.css"],import.meta.url).then(n=>n.default||n)),xe=k(()=>g(()=>import("./VirtualCell.4b63c3ca.js"),["./VirtualCell.4b63c3ca.js","./entry.51f4e399.js","./entry.0f786d51.css","./index.5263eb1d.js","./virtualCell.4dce1393.js"],import.meta.url).then(n=>n.default||n)),ke=k(()=>g(()=>import("./Cell.4f83cd62.js"),["./Cell.4f83cd62.js","./entry.51f4e399.js","./entry.0f786d51.css","./index.5263eb1d.js","./cell.1732684e.js","./useMetas.ba7abae7.js","./useSmartsheetRowStore.aafbb4bb.js","./deepCompare.d32ec333.js","./dataUtils.edecace3.js","./virtualCell.4dce1393.js","./index.b9981e09.js","./_plugin-vue_export-helper.c27b6911.js","./Cell.69966cf7.css"],import.meta.url).then(n=>n.default||n)),ge=k(()=>g(()=>import("./DivDataCell.806c1c42.js"),["./DivDataCell.806c1c42.js","./index.5263eb1d.js","./entry.51f4e399.js","./entry.0f786d51.css"],import.meta.url).then(n=>n.default||n)),we={class:"h-full flex flex-col items-center"},Ce={class:"color-transition relative flex flex-col justify-center gap-2 w-full max-w-[max(33%,600px)] m-auto py-4 pb-8 px-16 md:bg-white md:dark:bg-slate-700 md:rounded-lg md:border-1 md:border-gray-200 md:shadow-xl"},Se={class:"prose-2xl font-bold self-center my-4",style:{"word-break":"break-all"}},Ve={key:0,class:"prose-lg text-slate-500 dark:text-slate-300 self-center mb-4 leading-6",style:{"word-break":"break-all"}},Ee={key:2,class:"flex justify-center"},Le={key:0,class:"min-w-350px mt-3"},Te={key:0,class:"text-xs text-slate-500 dark:text-slate-300 text-center my-4"},$e={key:1,class:"text-center"},Oe={class:"relative flex flex-col h-full"},Fe={class:"w-full h-full flex items-center justify-center"},ze={class:"nc-form-wrapper"},De={class:"nc-form h-full"},Re={class:"flex flex-col gap-6"},Be={class:"flex nc-form-column-label"},Ae={class:"flex items-center gap-1"},Ie={class:"flex flex-col gap-2 text-slate-500 dark:text-slate-300 text-[0.75rem] my-2 px-1",style:{"word-break":"break-all"}},qe={class:"text-center mt-4"},Ne={class:"flex items-end"},Pe=le({__name:"index",setup(n){const{sharedFormView:i,submitForm:$,v$:N,formState:V,notFound:P,formColumns:E,submitted:O,secondsRemain:U,isLoading:j}=_e();function F(r,t=!1){var y;let a=r;return a.uidt===q.LinkToAnotherRecord&&a.colOptions&&a.colOptions.type===ue.BELONGS_TO&&(a=(y=E.value)==null?void 0:y.find(T=>T.id===a.colOptions.fk_child_column_id)),!!(t||a&&a.rqd&&!a.cdf)}const f=C(""),L=C(!1),v=C(!1),w=C([]),G=async()=>{L.value=!0},H=r=>{v.value=!0,f.value=r},M=r=>{var t;return(t=E.value)==null?void 0:t.find(a=>a.title===r)},Q=r=>{switch(r){case q.Number:return t=>parseInt(t);default:return t=>t}},W=async r=>{if(v.value)try{const t=M(f.value);if(t==null)throw new Error(`Field with title ${f.value} not found`);const a=Q(t.uidt)(r)||r;V.value[f.value]=a,f.value="",v.value=!1}catch(t){console.error(t)}};return(r,t)=>{const a=ve,y=ne,T=ae,J=fe,K=me,X=be,Y=he,Z=xe,ee=ke,te=ge,oe=de;return l(),c("div",we,[s("div",Ce,[o(i)?(l(),c(S,{key:0},[s("h1",Se,_(o(i).heading),1),o(i).subheading?(l(),c("h2",Ve,_(o(i).subheading),1)):p("",!0),o(P)?(l(),m(a,{key:1,type:"warning",class:"my-4 text-center",message:"Not found"})):o(O)?(l(),c("div",Ee,[o(i)?(l(),c("div",Le,[u(a,{type:"success",class:"my-4 text-center",outlined:"",message:o(i).success_msg||"Successfully submitted form data"},null,8,["message"]),o(i).show_blank_form?(l(),c("p",Te," New form will be loaded after "+_(o(U))+" seconds ",1)):p("",!0),o(i).submit_another_form?(l(),c("div",$e,[u(y,{type:"primary",onClick:t[0]||(t[0]=e=>O.value=!1)},{default:x(()=>[B(" Submit Another Form")]),_:1})])):p("",!0)])):p("",!0)])):(l(),c(S,{key:3},[u(T,{visible:v.value,"onUpdate:visible":t[1]||(t[1]=e=>v.value=e),closable:!1,width:"28rem",centered:"",footer:null,"wrap-class-name":"nc-modal-generate-token","destroy-on-close":"",onCancel:t[2]||(t[2]=e=>L.value=!1)},{default:x(()=>[s("div",Oe,[se(u(o(pe),{onDecode:W,onLoaded:G},null,512),[[re,L.value]])])]),_:1},8,["visible"]),u(K,{class:"bg-gray-400/75","model-value":o(j),inline:"",transition:""},{default:x(()=>[s("div",Fe,[u(J,{size:"large"})])]),_:1},8,["model-value"]),s("div",ze,[s("div",De,[s("div",Re,[(l(!0),c(S,null,R(o(E),(e,b)=>{var z;return l(),c("div",{key:b,class:"flex flex-col gap-2"},[s("div",Be,[o(A)(e)?(l(),m(X,{key:0,column:{...e,title:e.label||e.title},required:F(e,e.required),"hide-menu":!0},null,8,["column","required"])):(l(),m(Y,{key:1,column:{...e,title:e.label||e.title},required:F(e,e.required),"hide-menu":!0},null,8,["column","required"]))]),s("div",null,[u(te,{class:"flex relative"},{default:x(()=>{var h,D;return[o(A)(e)?(l(),m(Z,{key:0,"model-value":null,class:I(["mt-0 nc-input nc-cell",`nc-form-input-${(h=e.title)==null?void 0:h.replaceAll(" ","")}`]),"data-testid":`nc-form-input-cell-${e.label||e.title}`,column:e},null,8,["data-testid","class","column"])):(l(),m(ee,{key:1,modelValue:o(V)[e.title],"onUpdate:modelValue":d=>o(V)[e.title]=d,class:I(["nc-input truncate",`nc-form-input-${(D=e.title)==null?void 0:D.replaceAll(" ","")}`]),"data-testid":`nc-form-input-cell-${e.label||e.title}`,column:e,"edit-enabled":w.value[b],onClick:d=>w.value[b]=!0,onCancel:d=>w.value[b]=!1,"onUpdate:editEnabled":d=>w.value[b]=d},null,8,["modelValue","onUpdate:modelValue","data-testid","class","column","edit-enabled","onClick","onCancel","onUpdate:editEnabled"])),e.enable_scanner?(l(),m(y,{key:2,class:"nc-btn-fill-form-column-by-scan nc-toolbar-btn",alt:r.$t("activity.fillByCodeScan"),onClick:d=>H(e.title)},{default:x(()=>[s("div",Ae,[(l(),m(ce(o(ie).qrCodeScan),{class:"h-5 w-5"}))])]),_:2},1032,["alt","onClick"])):p("",!0)]}),_:2},1024),s("div",Ie,[(l(!0),c(S,null,R((z=o(N).localState[e.title])==null?void 0:z.$errors,h=>(l(),c("div",{key:h,class:"text-red-500"},_(h.$message),1))),128)),B(" "+_(e.description),1)])])])}),128))]),s("div",qe,[s("button",{type:"submit",class:"uppercase scaling-btn prose-sm","data-testid":"shared-form-submit-button",onClick:t[3]||(t[3]=(...e)=>o($)&&o($)(...e))},_(r.$t("general.submit")),1)])])])],64))],64)):p("",!0)]),s("div",Ne,[u(oe)])])}}});const dt=ye(Pe,[["__scopeId","data-v-c3ce4dfb"]]);export{dt as default};

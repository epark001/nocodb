import{u as g}from"./views.3cd4bcb9.js";import{cm as q,cb as F,r as p,fj as B,i as s,E as A,f as L,fb as i}from"./entry.13466615.js";import{u as N}from"./index.2a3da6a9.js";import{a as I}from"./useMetas.223da623.js";function K(){const a={field:"",query:""},t=q("field-query-search-map",()=>({})),l=q("field-query-search",()=>({...a}));return{search:l,loadFieldQuery:u=>{u&&(u in t.value||(t.value[u]={...a}),l.value=t.value[u])}}}const[C,U]=N((a,t,l=!1,f,u)=>{var h;const{$api:j}=L(),{activeView:o}=F(g()),k=I(),{sqlUis:m}=F(k),y=p((h=t.value)!=null&&h.base_id?m.value[t.value.base_id]:Object.values(m.value)[0]),{search:n}=K(),P=B(Symbol("SmartsheetStore")),$=s(()=>{var e;return((e=o.value)==null?void 0:e.lock_type)==="locked"}),x=s(()=>{var e,r;return(r=(e=t.value)==null?void 0:e.columns)==null?void 0:r.some(c=>c.pk)}),E=s(()=>{var e;return((e=o.value)==null?void 0:e.type)===i.GRID}),d=s(()=>{var e;return((e=o.value)==null?void 0:e.type)===i.FORM}),G=s(()=>{var e;return((e=o.value)==null?void 0:e.type)===i.GALLERY}),M=s(()=>{var e;return((e=o.value)==null?void 0:e.type)===i.KANBAN}),O=s(()=>{var e;return((e=o.value)==null?void 0:e.type)===i.MAP}),Q=s(()=>d.value&&l),R=s(()=>{var c,S,b,w;let e;const r=((S=(c=t.value)==null?void 0:c.columns)==null?void 0:S.find(({id:v})=>v===n.value.field))||((w=(b=t.value)==null?void 0:b.columns)==null?void 0:w.find(v=>v.pv));if(r&&n.value.query.trim())return["text","string"].includes(y.value.getAbstractType(r))&&r.dt!=="bigint"?e=`(${r.title},like,%${n.value.query.trim()}%)`:e=`(${r.title},eq,${n.value.query.trim()})`,e}),T=s(()=>{var e;return((e=t.value)==null?void 0:e.type)==="view"}),V=p(A(f)??[]),_=p(A(u)??[]);return{view:o,meta:t,isLocked:$,$api:j,xWhere:R,isPkAvail:x,isForm:d,isGrid:E,isGallery:G,isKanban:M,isMap:O,isSharedForm:Q,sorts:V,nestedFilters:_,isSqlView:T,eventBus:P,sqlUi:y}},"smartsheet-store");function H(){const a=U();if(!a)throw new Error("Please call `useProvideSmartsheetStore` on the appropriate parent component");return a}export{H as a,K as b,C as u};

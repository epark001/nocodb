import{_ as B}from"./Icon.vue.1162f18b.js";import{_ as j}from"./Icon.vue.b79d4fb6.js";import{h as z,$ as h,r as p,fp as O,i as g,dg as E,cd as L,aq as w,cu as N,o as d,c as x,a as m,b as u,t as b,E as o,C as D,D as T,F as U,w as k,aj as A,cp as H,d as Q,I as S}from"./entry.51f4e399.js";import{R,A as G}from"./index.5263eb1d.js";import{a as M,b as P}from"./useSmartsheetStore.1784ce8b.js";import"./index.e760d172.js";import{I as W}from"./Input.7cb175ff.js";import{S as J,_ as K}from"./index.5e746f62.js";import{_ as X}from"./_plugin-vue_export-helper.c27b6911.js";import"./VirtualCellIcon.f17eeb0a.js";import"./virtualCell.4dce1393.js";import"./CellIcon.8a6080fd.js";import"./cell.1732684e.js";import"./useMetas.ba7abae7.js";import"./views.28a76d89.js";import"./useSharedView.0db5f32b.js";import"./index.b9981e09.js";import"./SearchOutlined.dec109ce.js";import"./isPlainObject.ecf52d25.js";import"./_getPrototype.ec1165af.js";import"./TextArea.442a25cb.js";import"./antInputDirective.8ac36ea7.js";import"./FormItemContext.e001cd7c.js";import"./Password.d493e47a.js";import"./toArray.06afb623.js";import"./isMobile.e2e89480.js";import"./useMemo.b13a9257.js";import"./useMergedState.5e6500b1.js";import"./useState.6010d8b6.js";import"./DownOutlined.db6f6406.js";import"./CheckOutlined.ef30fafc.js";const Y={class:"w-16 group-hover:w-12 text-[0.75rem] font-medium text-gray-400 truncate"},Z={class:"hidden group-hover:block"},ee={class:"text-[0.75rem] flex items-center -ml-1 gap-2"},te=z({__name:"SearchData",setup(ae){const C=h(R),{meta:I}=M(),v=h(G,p()),{search:l,loadFieldQuery:V}=P(),n=p(!1),c=p(!1),y=p(null);O(y,()=>n.value=!1);const _=g(()=>{var a,e,s;return(s=(e=(a=I.value)==null?void 0:a.columns)==null?void 0:e.filter(t=>!E(t)&&(t==null?void 0:t.uidt)!==L.Links))==null?void 0:s.map(t=>({value:t.id,label:t.title,column:t,primaryValue:t.pv}))});w(()=>{var a;return(a=v.value)==null?void 0:a.id},(a,e)=>{var s;a!==e&&V((s=v.value)==null?void 0:s.id)},{immediate:!0});function f(){C.trigger()}const $=g(()=>{var a,e,s,t;return l.value.field?(e=(a=_.value)==null?void 0:a.find(i=>i.value===l.value.field))==null?void 0:e.label:(t=(s=_.value)==null?void 0:s.find(i=>i.primaryValue))==null?void 0:t.label});return w(()=>l.value.field,()=>{f()}),N(()=>l.value.query,()=>{f()},{debounce:500,maxWait:600}),(a,e)=>{const s=B,t=j,i=J,F=K,q=W;return d(),x("div",{class:S(["flex flex-row border-1 rounded-lg h-8 ml-1 border-gray-200 overflow-hidden",{"border-primary":o(l).query.length!==0||o(c)}])},[m("div",{ref_key:"searchDropdown",ref:y,class:S(["flex items-center group relative px-2 cursor-pointer border-r-1 border-gray-200 hover:bg-gray-100",{"bg-gray-50 ":o(n)}]),onClick:e[1]||(e[1]=r=>n.value=!o(n))},[u(s,{icon:"search",class:"ml-1 mr-2 h-3.5 w-3.5 text-gray-500 group-hover:text-black"}),m("div",Y,b(o($)),1),m("div",Z,[(d(),D(T(o(U).arrowDown),{class:"text-gray-400 text-sm"}))]),u(F,{value:o(l).field,"onUpdate:value":e[0]||(e[0]=r=>o(l).field=r),open:o(n),size:"small","dropdown-match-select-width":!1,"dropdown-class-name":"!rounded-lg nc-dropdown-toolbar-search-field-option w-48",class:"py-1 !absolute top-0 left-0 w-full h-full z-10 text-xs opacity-0"},{default:k(()=>[(d(!0),x(A,null,H(o(_),r=>(d(),D(i,{key:r.value,value:r.value},{default:k(()=>[m("div",ee,[u(t,{class:"text-sm",column:r.column},null,8,["column"]),Q(" "+b(r.label),1)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","open"])],2),u(q,{value:o(l).query,"onUpdate:value":e[2]||(e[2]=r=>o(l).query=r),size:"small",class:"text-xs",style:{width:"10rem"},placeholder:a.$t("general.search"),bordered:!1,"data-testid":"search-data-input",onPressEnter:f,onFocus:e[3]||(e[3]=r=>c.value=!0),onBlur:e[4]||(e[4]=r=>c.value=!1)},null,8,["value","placeholder"])],2)}}});const ze=X(te,[["__scopeId","data-v-2277b20a"]]);export{ze as default};

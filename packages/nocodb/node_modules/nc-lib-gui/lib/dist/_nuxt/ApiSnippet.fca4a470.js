import{h as se,A as ie,cb as le,S as re,$ as E,r as g,T as ce,i as w,aq as pe,cI as ue,o as i,C as j,w as n,a as A,b as c,d as S,t as p,E as a,H as C,c as x,aj as M,cp as D,aV as P,W as me,cF as de,Q as _e,R as ve,J as H,L as fe}from"./entry.51f4e399.js";import{M as ye,A as he}from"./index.5263eb1d.js";import{u as be}from"./useCopy.3e897b55.js";import{a as ge}from"./useMetas.ba7abae7.js";import{a as we}from"./useSmartsheetStore.1784ce8b.js";import{u as Se}from"./useViewData.d5cf5dca.js";import{H as xe}from"./index.4089f0b3.js";import{_ as ke,T as Ve}from"./index.c4aafe5c.js";import{_ as je}from"./Title.e76f8bdd.js";import{S as Ae,_ as Ce}from"./index.5e746f62.js";import{_ as $e}from"./index.af5eff28.js";import{_ as Te}from"./_plugin-vue_export-helper.c27b6911.js";import"./views.28a76d89.js";import"./useSharedView.0db5f32b.js";import"./index.b9981e09.js";import"./virtualCell.4dce1393.js";import"./dataUtils.edecace3.js";import"./index.9e760c64.js";import"./Dropdown.dc69c0a4.js";import"./useState.6010d8b6.js";import"./useRefs.154aa2be.js";import"./identity.dd5da9ba.js";import"./isSymbol.b53bd26f.js";import"./_flatRest.ff2d3d5c.js";import"./isMobile.e2e89480.js";import"./useMergedState.5e6500b1.js";import"./TextArea.442a25cb.js";import"./Input.7cb175ff.js";import"./antInputDirective.8ac36ea7.js";import"./FormItemContext.e001cd7c.js";import"./CheckOutlined.ef30fafc.js";import"./toArray.06afb623.js";import"./useMemo.b13a9257.js";import"./DownOutlined.db6f6406.js";import"./SearchOutlined.dec109ce.js";const Ne=_e(()=>ve(()=>import("./Editor.32022328.js"),["./Editor.32022328.js","./Editor.vue.08021a9c.js","./entry.51f4e399.js","./entry.0f786d51.css","./deepCompare.d32ec333.js"],import.meta.url).then(u=>u.default||u)),Oe={class:"flex flex-col w-full h-full p-4"},Ue={class:"uppercase !text-xs select-none"},qe={key:0,class:"flex flex-row w-full justify-end space-x-3 mt-4 uppercase"},Ie={class:"absolute bottom-4 flex flex-row justify-center w-[95%]"},Je=se({__name:"ApiSnippet",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(u,{emit:L}){const z=u,{t:K}=ie(),W=ge(),{project:$}=le(W),{appInfo:m,token:T}=re(),k=E(ye,g()),V=E(he,g()),{xWhere:F}=we(),{queryParams:N}=Se(k,V,F),{copy:G}=be(),d=ce(z,"modelValue",L),r=[{name:"shell",clients:["curl","wget"]},{name:"javascript",clients:["axios","fetch","jquery","xhr"]},{name:"node",clients:["axios","fetch","request","native","unirest"]},{name:"nocodb-sdk",clients:["javascript","node"]},{name:"php"},{name:"python",clients:["python3","requests"]},{name:"ruby"},{name:"java"},{name:"c"}],s=g(r[0].clients&&r[0].clients[0]),_=g(r[0].name),Q=w(()=>{var e,t;return new URL(`/api/v1/db/data/noco/${$.value.id}/${(e=k.value)==null?void 0:e.title}/views/${(t=V.value)==null?void 0:t.title}`,m.value&&m.value.ncSiteUrl||"/").href}),X=w(()=>new xe({method:"GET",headers:[{name:"xc-auth",value:T.value,comment:"JWT Auth token"}],url:Q.value,queryString:Object.entries(N.value||{}).map(([e,t])=>({name:e,value:String(t)}))})),o=w(()=>r.find(e=>e.name===_.value)),O=w(()=>{var e,t,v,f,y,h;return((e=o.value)==null?void 0:e.name)==="nocodb-sdk"?`${s.value==="node"?'const { Api } = require("nocodb-sdk");':'import { Api } from "nocodb-sdk";'}
const api = new Api({
  baseURL: "${m.value&&m.value.ncSiteUrl||"/"}",
  headers: {
    "xc-auth": ${JSON.stringify(T.value)}
  }
})

api.dbViewRow.list(
  "noco",
  ${JSON.stringify($.value.title)},
  ${JSON.stringify((t=k.value)==null?void 0:t.title)},
  ${JSON.stringify((v=V.value)==null?void 0:v.title)}, ${JSON.stringify(N.value,null,4)}).then(function (data) {
  console.log(data);
}).catch(function (error) {
  console.error(error);
});
    `:X.value.convert((f=o.value)==null?void 0:f.name,s.value||((y=o.value)==null?void 0:y.clients)&&((h=o.value)==null?void 0:h.clients[0]),{})}),Y=async()=>{try{await G(O.value),H.info(K("msg.info.copiedToClipboard"))}catch(e){H.error(e.message)}},Z=e=>{d.value=e};return pe(o,e=>{var t;s.value=(t=e==null?void 0:e.clients)==null?void 0:t[0]}),(e,t)=>{const v=je,f=Ne,y=Ae,h=Ce,ee=fe,te=ke,oe=Ve,ae=$e,U=ue("e");return i(),j(ae,{visible:a(d),"onUpdate:visible":t[3]||(t[3]=l=>C(d)?d.value=l:null),class:"h-full relative nc-drawer-api-snippet",placement:"right",size:"large",closable:!1,onAfterVisibleChange:Z},{default:n(()=>[A("div",Oe,[c(v,{level:4,class:"pb-1"},{default:n(()=>[S(p(e.$t("title.codeSnippet")),1)]),_:1}),c(oe,{activeKey:a(_),"onUpdate:activeKey":t[2]||(t[2]=l=>C(_)?_.value=l:null),class:"!h-full"},{default:n(()=>[(i(),x(M,null,D(r,l=>c(te,{key:l.name,class:"!h-full"},{tab:n(()=>[A("div",Ue,p(l.name),1)]),default:n(()=>{var q,I,J,R;return[c(f,{class:"h-[60vh] border-1 border-gray-100 py-4 rounded-sm","model-value":a(O),"read-only":!0,lang:"typescript",validate:!1,"disable-deep-compare":!0,"hide-minimap":""},null,8,["model-value"]),(q=a(o))!=null&&q.clients?(i(),x("div",qe,[c(h,{value:a(s),"onUpdate:value":t[0]||(t[0]=b=>C(s)?s.value=b:null),style:{width:"6rem"},"dropdown-class-name":"nc-dropdown-snippet-active-lang"},{default:n(()=>{var b;return[(i(!0),x(M,null,D((b=a(o))==null?void 0:b.clients,(B,ne)=>(i(),j(y,{key:ne,class:"!w-full uppercase",value:B},{default:n(()=>[S(p(B),1)]),_:2},1032,["value"]))),128))]}),_:1},8,["value"]),P((i(),j(ee,{type:"primary",onClick:Y},{default:n(()=>[S(p(e.$t("general.copy")),1)]),_:1})),[[U,["c:snippet:copy",{client:((I=a(o))==null?void 0:I.clients)&&(a(s)||((J=a(o))==null?void 0:J.clients[0])),lang:(R=a(o))==null?void 0:R.name}]]])])):me("",!0),A("div",Ie,[P((i(),x("a",{class:"px-4 py-2 ! rounded shadow",href:"https://angel.co/company/nocodb",target:"_blank",onClick:t[1]||(t[1]=de(()=>{},["stop"]))},[S(" ðŸš€ "+p(e.$t("labels.weAreHiring"))+"! ðŸš€ ",1)])),[[U,["e:hiring"]]])])]}),_:2},1024)),64))]),_:1},8,["activeKey"])])]),_:1},8,["visible"])}}});const ht=Te(Je,[["__scopeId","data-v-4693dec1"]]);export{ht as default};

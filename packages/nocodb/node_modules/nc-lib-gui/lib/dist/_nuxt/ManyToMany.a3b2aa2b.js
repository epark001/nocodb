import{h as q,$ as a,cg as J,r as _,eI as X,i as C,o as s,c,E as o,aj as I,a as Y,cp as Z,C as T,cF as w,W as d,b as g,H as A,Q as E,R as M}from"./entry.51f4e399.js";import{_ as ee}from"./ItemChip.14d602dd.js";import{_ as te}from"./Icon.vue.1162f18b.js";import{C as oe,i as ne,j as ae,w as se,c as le,f as re,d as ie,y as ue,h as me}from"./index.5263eb1d.js";import{u as ce}from"./useLTARStore.3d98e502.js";import{u as pe}from"./index.82c42c24.js";import{a as _e}from"./useSmartsheetRowStore.aafbb4bb.js";import{u as de}from"./index.9e760c64.js";import{_ as ve}from"./_plugin-vue_export-helper.c27b6911.js";import"./cell.1732684e.js";import"./index.8b8de496.js";import"./index.b9981e09.js";import"./useMetas.ba7abae7.js";import"./useSharedView.0db5f32b.js";import"./deepCompare.d32ec333.js";import"./dataUtils.edecace3.js";import"./virtualCell.4dce1393.js";const fe=E(()=>M(()=>import("./ListItems.d6480b5e.js"),["./ListItems.d6480b5e.js","./entry.51f4e399.js","./entry.0f786d51.css","./ItemChip.14d602dd.js","./index.9e760c64.js","./index.5263eb1d.js","./cell.1732684e.js","./index.8b8de496.js","./index.b9981e09.js","./useLTARStore.3d98e502.js","./useMetas.ba7abae7.js","./useSharedView.0db5f32b.js","./_plugin-vue_export-helper.c27b6911.js","./ItemChip.06f0b072.css","./index.82c42c24.js","./useSmartsheetRowStore.aafbb4bb.js","./deepCompare.d32ec333.js","./dataUtils.edecace3.js","./virtualCell.4dce1393.js","./index.e760d172.js","./Input.7cb175ff.js","./antInputDirective.8ac36ea7.js","./FormItemContext.e001cd7c.js","./SearchOutlined.dec109ce.js","./isPlainObject.ecf52d25.js","./_getPrototype.ec1165af.js","./TextArea.442a25cb.js","./Password.d493e47a.js","./index.680937e8.js","./index.c4aafe5c.js","./Dropdown.dc69c0a4.js","./useState.6010d8b6.js","./useRefs.154aa2be.js","./identity.dd5da9ba.js","./isSymbol.b53bd26f.js","./_flatRest.ff2d3d5c.js","./isMobile.e2e89480.js","./useMergedState.5e6500b1.js","./index.529d8b39.js","./Col.88cfabc0.js","./responsiveObserve.501a6cf9.js","./index.fbcca285.js","./index.09b19c06.js","./LeftOutlined.3bb8aa17.js","./RightOutlined.90e8180f.js","./index.5e746f62.js","./toArray.06afb623.js","./useMemo.b13a9257.js","./DownOutlined.db6f6406.js","./CheckOutlined.ef30fafc.js","./useBreakpoint.a91853f1.js","./ListItems.edf42c5a.css"],import.meta.url).then(l=>l.default||l)),ye=E(()=>M(()=>import("./ListChildItems.173ac842.js"),["./ListChildItems.173ac842.js","./entry.51f4e399.js","./entry.0f786d51.css","./TableIcon.vue.27fb2d8a.js","./ItemChip.14d602dd.js","./index.9e760c64.js","./index.5263eb1d.js","./cell.1732684e.js","./index.8b8de496.js","./index.b9981e09.js","./useLTARStore.3d98e502.js","./useMetas.ba7abae7.js","./useSharedView.0db5f32b.js","./_plugin-vue_export-helper.c27b6911.js","./ItemChip.06f0b072.css","./useSmartsheetRowStore.aafbb4bb.js","./deepCompare.d32ec333.js","./dataUtils.edecace3.js","./virtualCell.4dce1393.js","./index.680937e8.js","./index.c4aafe5c.js","./Dropdown.dc69c0a4.js","./useState.6010d8b6.js","./useRefs.154aa2be.js","./identity.dd5da9ba.js","./isSymbol.b53bd26f.js","./_flatRest.ff2d3d5c.js","./isMobile.e2e89480.js","./useMergedState.5e6500b1.js","./index.529d8b39.js","./Col.88cfabc0.js","./responsiveObserve.501a6cf9.js","./index.fbcca285.js","./isPlainObject.ecf52d25.js","./_getPrototype.ec1165af.js","./index.09b19c06.js","./LeftOutlined.3bb8aa17.js","./RightOutlined.90e8180f.js","./index.5e746f62.js","./toArray.06afb623.js","./antInputDirective.8ac36ea7.js","./useMemo.b13a9257.js","./DownOutlined.db6f6406.js","./CheckOutlined.ef30fafc.js","./SearchOutlined.dec109ce.js","./FormItemContext.e001cd7c.js","./useBreakpoint.a91853f1.js","./ListChildItems.4acf4bce.css"],import.meta.url).then(l=>l.default||l)),ke={class:"flex items-center gap-1 w-full chips-wrapper"},xe={class:"chips flex items-center img-container flex-1 hm-items flex-nowrap min-w-0 overflow-hidden"},Ce={key:0,class:"flex justify-end gap-1 min-h-[30px] items-center"},Ie=q({__name:"ManyToMany",async setup(l){let h,R;const p=a(oe),b=a(ne),r=a(ae),U=a(se,J()),D=a(le),P=a(re,_(!1)),$=a(ie),z=a(ue,_(!1)),i=_(!1),u=_(!1),{isUIAllowed:B}=de(),{state:v,isNew:f,removeLTARRef:F}=_e(),{relatedTableMeta:N,loadRelatedTableMeta:O,relatedTableDisplayValueProp:y,unlink:S}=ce(p,b,f,U.trigger);[h,R]=X(()=>O()),await h,R();const L=C(()=>{var e;return r!=null&&r.value?(r==null?void 0:r.value)??[]:f.value?((e=v==null?void 0:v.value)==null?void 0:e[p==null?void 0:p.value.title])??[]:[]}),k=C(()=>L.value.reduce((e,t)=>{if(!y.value)return e;const m=t[y.value];return m?[...e,{value:m,item:t}]:e},[])),H=async e=>{f.value?await F(e,p.value):await S(e)},G=()=>{u.value=!1,i.value=!0};pe(a(me,_(!1)),e=>{switch(e.key){case"Enter":i.value=!0,e.stopPropagation();break}});const x=C(()=>{var e,t;return(t=(e=N.value)==null?void 0:e.columns)==null?void 0:t.find(m=>m.title===y.value)});return(e,t)=>{var j;const m=ee,V=te,K=fe,Q=ye;return s(),c("div",ke,[o(D)?d("",!0):(s(),c(I,{key:0},[Y("div",xe,[o(k)?(s(),c(I,{key:0},[(s(!0),c(I,null,Z(o(k),(n,W)=>(s(),T(m,{key:W,item:n.item,value:n.value,column:o(x),"show-unlink-button":!0,onUnlink:we=>H(n.item)},null,8,["item","value","column","onUnlink"]))),128)),((j=o(k))==null?void 0:j.length)===10?(s(),c("span",{key:0,class:"caption pointer ml-1 grey--text",onClick:t[0]||(t[0]=w(n=>u.value=!0,["stop"]))}," more... ")):d("",!0)],64)):d("",!0)]),!o($)&&!o(z)?(s(),c("div",Ce,[g(V,{icon:"expand",class:"text-sm nc-action-icon text-gray-500/50 hover:text-gray-500 nc-arrow-expand",onClick:t[1]||(t[1]=w(n=>u.value=!0,["stop"]))}),!o(P)&&o(B)("xcDatatableEditable")?(s(),T(V,{key:0,icon:"plus",class:"text-sm nc-action-icon text-gray-500/50 hover:text-gray-500 nc-plus",onClick:t[2]||(t[2]=w(n=>i.value=!0,["stop"]))})):d("",!0)])):d("",!0)],64)),g(K,{modelValue:o(i),"onUpdate:modelValue":t[3]||(t[3]=n=>A(i)?i.value=n:null),column:o(x)},null,8,["modelValue","column"]),g(Q,{modelValue:o(u),"onUpdate:modelValue":t[4]||(t[4]=n=>A(u)?u.value=n:null),"cell-value":o(L),column:o(x),onAttachRecord:G},null,8,["modelValue","cell-value","column"])])}}});const Fe=ve(Ie,[["__scopeId","data-v-6377a3a8"]]);export{Fe as default};

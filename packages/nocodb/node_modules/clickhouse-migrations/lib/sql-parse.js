"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.sql_sets = exports.sql_queries = void 0;
// Extract sql queries from migrations.
var sql_queries = function (content) {
    var queries = content
        .replace(/(--|#!|#\s).*(\n|\r\n|\r|$)/gm, '\n')
        .replace(/^\s*(SET\s).*(\n|\r\n|\r|$)/gm, '')
        .replace(/(\n|\r\n|\r)/gm, ' ')
        .replace(/\s+/g, ' ')
        .split(';')
        .map(function (el) { return el.trim(); })
        .filter(function (el) { return el.length != 0; });
    return queries;
};
exports.sql_queries = sql_queries;
// Extract query settings from migrations.
var sql_sets = function (content) {
    var sets = {};
    var sets_arr = content
        .replace(/(--|#!|#\s).*(\n|\r\n|\r|$)/gm, '\n')
        .replace(/^\s*(?!SET\s).*(\n|\r\n|\r|$)/gm, '')
        .replace(/^\s*(SET\s)/gm, '')
        .replace(/(\n|\r\n|\r)/gm, ' ')
        .replace(/\s+/g, '')
        .split(';');
    sets_arr.forEach(function (set_full) {
        var set = set_full.split('=');
        if (set[0]) {
            sets[set[0]] = set[1];
        }
    });
    return sets;
};
exports.sql_sets = sql_sets;
// -- any
// SET allow_experimental_object_type = 1; --set option
// SET allow_experimental_object_new = 1;
// SELECT * FROM events
// sdfsfdsd
// -- asssss
//  --asdf
// sdfsdf
//   sdfsfs
// SET a=1
//   asdf
//   SET f=22
//   sdf

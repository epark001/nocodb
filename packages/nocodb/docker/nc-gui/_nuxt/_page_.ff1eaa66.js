import{_ as ie}from"./Icon.vue.e15b8911.js";import{_ as re}from"./DeleteModal.vue.55101b0a.js";import{h as L,z as ce,A as pe,r as p,B as me,o as l,c as m,a,t as r,C as _,D as T,E as i,F as M,b as o,w as n,d as h,G as R,H as V,I as _e,J as w,K as E,L as de,_ as ue,M as fe,N as ye,O as ve,P as ke,f as ge,Q as he,R as we,S as xe,n as be}from"./entry.13466615.js";import{u as $e}from"./useCopy.a0671815.js";import{_ as Ce}from"./baseline-more-vert.e69a9b42.js";import{_ as Te,a as Me}from"./visibility-off.123f869e.js";import{_ as Se,a as Ae}from"./index.66af8095.js";import{D as De}from"./index.82f05b6c.js";import{_ as Ie}from"./Title.f7235aba.js";import"./index.a8ef1b7e.js";import{I as Ee}from"./Input.16966097.js";import{F as ze}from"./index.6f605a00.js";import{_ as Be}from"./_plugin-vue_export-helper.c27b6911.js";import"./Button.vue.a83cab3b.js";import"./index.f2e6837c.js";import"./debounce.dbc9bf77.js";import"./toNumber.7aa6a805.js";import"./isSymbol.b9109ae5.js";import"./Modal.vue.fe6a4790.js";import"./eagerComputed.9d79768b.js";import"./useState.a6853ebd.js";import"./index.bc4f5185.js";import"./LeftOutlined.b2689280.js";import"./RightOutlined.2c092523.js";import"./index.4385a501.js";import"./toArray.f6fa5a71.js";import"./antInputDirective.8ac36ea7.js";import"./isMobile.e2e89480.js";import"./useMemo.4991ab9d.js";import"./useMergedState.1cc2a884.js";import"./DownOutlined.9cfe3e0c.js";import"./CheckOutlined.80115d65.js";import"./SearchOutlined.c1eed30a.js";import"./FormItemContext.27b2e5db.js";import"./useBreakpoint.66a79637.js";import"./responsiveObserve.9209e727.js";import"./index.9d81d9da.js";import"./index.2660048d.js";import"./Checkbox.65681aa3.js";import"./createForOfIteratorHelper.37be2624.js";import"./index.1041b981.js";import"./Dropdown.a78be736.js";import"./TextArea.1bd4034f.js";import"./isPlainObject.4c0f42f1.js";import"./_getPrototype.00be30f0.js";import"./Password.d7b16461.js";import"./FormItem.fe59dafe.js";import"./identity.b813b76e.js";import"./Col.23d910dc.js";import"./useSize.dec45296.js";import"./_flatRest.037bf8e3.js";const Ne={class:"h-full overflow-y-scroll scrollbar-thin-dull pt-2"},Re={class:"max-w-[900px] mx-auto p-4","data-testid":"nc-token-list"},Ve={class:"text-xl my-4 text-left font-weight-bold"},Le={class:"py-2 flex gap-4 items-center"},Pe=a("div",{class:"flex-grow"},null,-1),Ge={class:"flex items-center gap-1"},Ue={key:0},Fe={key:1,class:"text-gray-400"},Oe={class:"w-[320px]"},je={key:0},qe={key:1},He={class:"flex items-center gap-2"},Je={key:0},Ke={key:1},Qe={class:"flex flex-row items-center"},We={class:"flex flex-row items-center h-[1.2rem]"},Xe=["onClick"],Ye={class:"text-sm pl-2"},Ze={class:"flex flex-row items-center py-2.25 px-2.5 bg-gray-50 rounded-lg text-gray-700 mb-4"},et={class:"capitalize text-ellipsis overflow-hidden select-none w-full pl-1.75",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},tt={class:"relative flex flex-col h-full"},ot={class:"flex flex-row w-full -mt-1 mb-3"},nt={class:"flex flex-row justify-end"},st=L({__name:"Token",setup(f){const{api:y,isLoading:d}=ce(),{$e:x}=ge(),{copy:S}=$e(),{t:A}=pe(),b=p([]),z=p(1),u=p(!1),P=p(10),v=p({}),G=p(""),B=me({total:0,pageSize:10}),k=async(e=z.value,s=P.value)=>{z.value=e;try{const c=await y.orgTokens.list({query:{limit:s,offset:G.value.length===0?(e-1)*s:0}});if(!c)return;B.total=c.pageInfo.totalRows??0,B.pageSize=10,b.value=c.list}catch(c){w.error(await E(c))}};k();const g=p(!1),D=p(""),I=p(""),U=(e,s)=>{g.value=!0,I.value=e,D.value=s},F=async e=>{try{await y.orgTokens.delete(e),await k()}catch(s){w.error(await E(s))}x("a:account:token:delete"),g.value=!1,I.value="",D.value=""},O=async()=>{try{await y.orgTokens.create(v.value),u.value=!1,v.value={},await k()}catch(e){w.error(await E(e))}x("a:api-token:generate")},j=async e=>{if(e)try{await S(e),w.info(A("msg.info.copiedToClipboard")),x("c:api-token:copy")}catch(s){w.error(s.message)}},q=e=>e==null?void 0:e.focus();return(e,s)=>{const c=de,H=R,$=Se,J=Te,K=Me,N=ue,Q=Ce,W=fe,X=ye,Y=De,Z=Ae,ee=ie,te=re,oe=ve,ne=Ie,se=Ee,ae=ze,le=ke;return l(),m("div",Ne,[a("div",Re,[a("div",Ve,r(e.$t("title.tokenManagement")),1),a("div",Le,[Pe,(l(),_(T(i(M).reload),{class:"cursor-pointer",onClick:s[0]||(s[0]=()=>k())})),o(c,{class:"!rounded-md","data-testid":"nc-token-create",size:"middle",type:"primary",onClick:s[1]||(s[1]=t=>u.value=!0)},{default:n(()=>[a("div",Ge,[(l(),_(T(i(M).plus))),h(" "+r(e.$t("title.addNewToken")),1)])]),_:1})]),o(Z,{"row-key":t=>t.id,"data-source":i(b),pagination:{position:["bottomCenter"]},loading:i(d),size:"small",onChange:s[2]||(s[2]=t=>k(t.current))},{emptyText:n(()=>[o(H,{image:i(R).PRESENTED_IMAGE_SIMPLE,description:e.$t("labels.noData")},null,8,["image","description"])]),default:n(()=>[o($,{key:"created_by",title:e.$t("labels.createdBy"),"data-index":"created_by"},{default:n(({text:t})=>[t?(l(),m("div",Ue,r(t),1)):(l(),m("div",Fe,"N/A"))]),_:1},8,["title"]),o($,{key:"description",title:e.$t("labels.description"),"data-index":"description"},{default:n(({text:t})=>[h(r(t),1)]),_:1},8,["title"]),o($,{key:"token",title:e.$t("labels.token"),"data-index":"token"},{default:n(({text:t,record:C})=>[a("div",Oe,[C.show?(l(),m("span",je,r(t),1)):(l(),m("span",qe,"*******************************************"))])]),_:1},8,["title"]),o($,{key:"actions",title:e.$t("labels.actions"),"data-index":"token"},{default:n(({record:t})=>[a("div",He,[o(N,{placement:"bottom"},{title:n(()=>[t.show?(l(),m("span",Je,r(e.$t("general.hide")),1)):(l(),m("span",Ke,r(e.$t("general.show")),1))]),default:n(()=>[o(c,{type:"text",class:"!rounded-md nc-toggle-token-visibility",onClick:C=>t.show=!t.show},{icon:n(()=>[t.show?(l(),_(J,{key:0,class:"flex mx-auto h-[1.1rem]"})):(l(),_(K,{key:1,class:"flex mx-auto h-[1rem]"}))]),_:2},1032,["onClick"])]),_:2},1024),o(N,{placement:"bottom"},{title:n(()=>[h(r(e.$t("general.copy")),1)]),default:n(()=>[o(c,{type:"text",class:"!rounded-md",onClick:C=>j(t.token)},{icon:n(()=>[(l(),_(T(i(M).copy),{class:"flex mx-auto h-[1rem]"}))]),_:2},1032,["onClick"])]),_:2},1024),o(Y,{trigger:["click"],class:"flex",placement:"bottomRight","overlay-class-name":"nc-dropdown-api-token-mgmt"},{overlay:n(()=>[o(X,{"data-testid":"nc-token-row-action-icon"},{default:n(()=>[o(W,null,{default:n(()=>[a("div",{class:"flex flex-row items-center py-3 h-[2rem] nc-delete-token",onClick:C=>U(t.token,t.description)},[(l(),_(T(i(M).delete),{class:"flex"})),a("div",Ye,r(e.$t("general.remove")),1)],8,Xe)]),_:2},1024)]),_:2},1024)]),default:n(()=>[a("div",Qe,[o(c,{type:"text",class:"!px-0"},{default:n(()=>[a("div",We,[o(Q,{class:"nc-token-menu"})])]),_:1})])]),_:2},1024)])]),_:1},8,["title"])]),_:1},8,["row-key","data-source","loading"])]),o(te,{visible:i(g),"onUpdate:visible":s[3]||(s[3]=t=>V(g)?g.value=t:null),"entity-name":"Token","on-delete":()=>F(i(I))},{"entity-preview":n(()=>[a("span",null,[a("div",Ze,[o(ee,{icon:"key",class:"nc-view-icon"}),a("div",et,r(i(D)),1)])])]),_:1},8,["visible","on-delete"]),o(le,{visible:i(u),"onUpdate:visible":s[6]||(s[6]=t=>V(u)?u.value=t:null),class:_e({active:i(u)}),closable:!1,width:"28rem",centered:"",footer:null,"wrap-class-name":"nc-modal-generate-token"},{default:n(()=>[a("div",tt,[o(c,{type:"text",class:"!absolute top-0 right-0 rounded-md -mt-2 -mr-3",onClick:s[4]||(s[4]=t=>u.value=!1)},{icon:n(()=>[o(oe,{class:"flex mx-auto"})]),_:1}),a("div",ot,[o(ne,{level:5},{default:n(()=>[h(r(e.$t("title.generateToken")),1)]),_:1})]),o(ae,{ref:"form",model:i(v),name:"basic",layout:"vertical",class:"flex flex-col justify-center space-y-6","no-style":"",autocomplete:"off",onFinish:O},{default:n(()=>[o(se,{ref:q,value:i(v).description,"onUpdate:value":s[5]||(s[5]=t=>i(v).description=t),"data-testid":"nc-token-modal-description",placeholder:e.$t("labels.description"),class:"h-9 rounded-md"},null,8,["value","placeholder"]),a("div",nt,[o(c,{size:"middle",class:"!rounded-md",type:"primary","html-type":"submit","data-testid":"nc-token-modal-save"},{default:n(()=>[h(r(e.$t("general.generate")),1)]),_:1})])]),_:1},8,["model"])])]),_:1},8,["visible","class"])])}}}),at=he(()=>we(()=>import("./AppStore.1a5cd103.js"),["./AppStore.1a5cd103.js","./entry.13466615.js","./entry.0f786d51.css","./round-edit.0a696304.js","./index.3cc83813.js","./index.62e3d60f.js","./Dropdown.a78be736.js","./useState.a6853ebd.js","./useRefs.6ea70d5c.js","./identity.b813b76e.js","./isSymbol.b9109ae5.js","./_flatRest.037bf8e3.js","./isMobile.e2e89480.js","./useMergedState.1cc2a884.js","./index.638acbb4.js","./Col.23d910dc.js","./responsiveObserve.9209e727.js","./index.89133b21.js","./isPlainObject.4c0f42f1.js","./_getPrototype.00be30f0.js","./Title.f7235aba.js","./TextArea.1bd4034f.js","./Input.16966097.js","./antInputDirective.8ac36ea7.js","./FormItemContext.27b2e5db.js","./CheckOutlined.80115d65.js","./_plugin-vue_export-helper.c27b6911.js","./AppStore.37e10f8c.css"],import.meta.url).then(f=>f.default||f)),lt={},it={class:"h-full overflow-y-scroll scrollbar-thin-dull pt-2"},rt={class:"text-xl mt-4 mb-8 text-left font-weight-bold"};function ct(f,y){const d=at;return l(),m("div",it,[a("div",rt,r(f.$t("title.appStore")),1),a("div",null,[o(d)])])}const pt=Be(lt,[["render",ct]]),mt={key:3},co=L({__name:"[page]",setup(f){const{appInfo:y}=xe();return(d,x)=>{const S=be("AccountUserManagement"),A=st,b=pt;return d.$route.params.page==="users"?(l(),_(S,{key:0})):d.$route.params.page==="tokens"?(l(),_(A,{key:1})):d.$route.params.page==="apps"&&!i(y).isCloud?(l(),_(b,{key:2})):(l(),m("span",mt))}}});export{co as default};

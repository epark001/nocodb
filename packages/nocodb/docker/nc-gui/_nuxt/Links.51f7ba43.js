import{h as F,$ as a,r as l,cg as O,fk as k,o as u,c as y,E as t,aj as M,a as D,C as g,w as H,d as G,t as K,I as Q,cF as C,D as W,W as x,b as j,Q as R,R as b}from"./entry.13466615.js";import{_ as q}from"./Icon.vue.e15b8911.js";import{j as J,C as X,i as Y,w as Z,c as ee,f as te,d as oe,y as ae,h as le}from"./index.5263eb1d.js";import{u as se}from"./index.e7cf7635.js";import{a as ne}from"./useSmartsheetRowStore.ef2cd001.js";import{u as re}from"./useLTARStore.0002d56d.js";import{u as ie}from"./index.a6329415.js";import"./deepCompare.d32ec333.js";import"./dataUtils.31dbfaee.js";import"./virtualCell.88c63e03.js";import"./index.2a3da6a9.js";import"./useMetas.223da623.js";import"./useSharedView.746b4f21.js";const ce=R(()=>b(()=>import("./ListItems.fe545f38.js"),["./ListItems.fe545f38.js","./entry.13466615.js","./entry.0f786d51.css","./ItemChip.28e6239c.js","./index.e7cf7635.js","./index.5263eb1d.js","./cell.b6c2deed.js","./index.8d89c37a.js","./index.2a3da6a9.js","./useLTARStore.0002d56d.js","./useMetas.223da623.js","./useSharedView.746b4f21.js","./_plugin-vue_export-helper.c27b6911.js","./ItemChip.06f0b072.css","./index.a6329415.js","./useSmartsheetRowStore.ef2cd001.js","./deepCompare.d32ec333.js","./dataUtils.31dbfaee.js","./virtualCell.88c63e03.js","./index.a8ef1b7e.js","./Input.16966097.js","./antInputDirective.8ac36ea7.js","./FormItemContext.27b2e5db.js","./SearchOutlined.c1eed30a.js","./isPlainObject.4c0f42f1.js","./_getPrototype.00be30f0.js","./TextArea.1bd4034f.js","./Password.d7b16461.js","./index.3cc83813.js","./index.62e3d60f.js","./Dropdown.a78be736.js","./useState.a6853ebd.js","./useRefs.6ea70d5c.js","./identity.b813b76e.js","./isSymbol.b9109ae5.js","./_flatRest.037bf8e3.js","./isMobile.e2e89480.js","./useMergedState.1cc2a884.js","./index.638acbb4.js","./Col.23d910dc.js","./responsiveObserve.9209e727.js","./index.89133b21.js","./index.bc4f5185.js","./LeftOutlined.b2689280.js","./RightOutlined.2c092523.js","./index.4385a501.js","./toArray.f6fa5a71.js","./useMemo.4991ab9d.js","./DownOutlined.9cfe3e0c.js","./CheckOutlined.80115d65.js","./useBreakpoint.66a79637.js","./ListItems.edf42c5a.css"],import.meta.url).then(s=>s.default||s)),ue=R(()=>b(()=>import("./ListChildItems.9829d31b.js"),["./ListChildItems.9829d31b.js","./entry.13466615.js","./entry.0f786d51.css","./TableIcon.vue.95089890.js","./ItemChip.28e6239c.js","./index.e7cf7635.js","./index.5263eb1d.js","./cell.b6c2deed.js","./index.8d89c37a.js","./index.2a3da6a9.js","./useLTARStore.0002d56d.js","./useMetas.223da623.js","./useSharedView.746b4f21.js","./_plugin-vue_export-helper.c27b6911.js","./ItemChip.06f0b072.css","./useSmartsheetRowStore.ef2cd001.js","./deepCompare.d32ec333.js","./dataUtils.31dbfaee.js","./virtualCell.88c63e03.js","./index.3cc83813.js","./index.62e3d60f.js","./Dropdown.a78be736.js","./useState.a6853ebd.js","./useRefs.6ea70d5c.js","./identity.b813b76e.js","./isSymbol.b9109ae5.js","./_flatRest.037bf8e3.js","./isMobile.e2e89480.js","./useMergedState.1cc2a884.js","./index.638acbb4.js","./Col.23d910dc.js","./responsiveObserve.9209e727.js","./index.89133b21.js","./isPlainObject.4c0f42f1.js","./_getPrototype.00be30f0.js","./index.bc4f5185.js","./LeftOutlined.b2689280.js","./RightOutlined.2c092523.js","./index.4385a501.js","./toArray.f6fa5a71.js","./antInputDirective.8ac36ea7.js","./useMemo.4991ab9d.js","./DownOutlined.9cfe3e0c.js","./CheckOutlined.80115d65.js","./SearchOutlined.c1eed30a.js","./FormItemContext.27b2e5db.js","./useBreakpoint.66a79637.js","./ListChildItems.4acf4bce.css"],import.meta.url).then(s=>s.default||s)),me=["onDblclick"],pe={class:"block flex-shrink truncate"},de=D("div",{class:"flex-grow"},null,-1),_e={key:0,class:"flex justify-end gap-1 min-h-[30px] items-center"},De=F({__name:"Links",setup(s){const m=a(J,l(0)),n=a(X),E=a(Y),T=a(Z,O()),A=a(ee),P=a(te,l(!1)),p=a(oe,l(!1)),I=a(ae,l(!1)),i=l(!1),c=l(!1),{isUIAllowed:U}=se(),{state:v,isNew:V}=ne(),{relatedTableMeta:$,loadRelatedTableMeta:z,relatedTableDisplayValueProp:N}=re(n,E,V,T.trigger),h=k(()=>{var e,o;return(o=(e=$.value)==null?void 0:e.columns)==null?void 0:o.find(r=>r.title===N.value)});z();const w=k(()=>{var o,r,d,_;const e=+(m==null?void 0:m.value)||0;return e?e===1?`1 ${((r=(o=n.value)==null?void 0:o.meta)==null?void 0:r.singular)||"Link"}`:`${e} ${((_=(d=n.value)==null?void 0:d.meta)==null?void 0:_.plural)||"Links"}`:"Empty"}),S=()=>{c.value=!1,i.value=!0},L=()=>{p.value||(c.value=!0)};ie(a(le,l(!1)),e=>{switch(e.key){case"Enter":if(p.value||i.value)return;c.value=!0,e.stopPropagation();break}});const B=k(()=>{var e;return V.value?((e=v==null?void 0:v.value)==null?void 0:e[n==null?void 0:n.value.title])??[]:[]});return(e,o)=>{const r=q,d=ce,_=ue;return u(),y("div",{class:"flex w-full items-center nc-links-wrapper",onDblclick:C(L,["stop"])},[t(A)?x("",!0):(u(),y(M,{key:0},[D("div",pe,[(u(),g(W(t(p)||t(I)?"span":"a"),{title:t(w),class:Q(["text-center pl-3 nc-datatype-link underline-transparent",{"!text-gray-300":!t(m)}]),onClick:C(L,["stop","prevent"])},{default:H(()=>[G(K(t(w)),1)]),_:1},8,["title","class","onClick"]))]),de,!t(p)&&!t(I)?(u(),y("div",_e,[!t(P)&&t(U)("xcDatatableEditable")?(u(),g(r,{key:0,icon:"plus",class:"nc-icon-transition select-none !text-xxl nc-action-icon text-gray-500/50 hover:text-gray-500 nc-plus hover:text-shadow-md",onClick:o[0]||(o[0]=C(f=>i.value=!0,["stop"]))})):x("",!0)])):x("",!0)],64)),j(d,{modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=f=>i.value=f),column:t(h)},null,8,["modelValue","column"]),j(_,{modelValue:c.value,"onUpdate:modelValue":o[2]||(o[2]=f=>c.value=f),column:t(h),"cell-value":t(B),onAttachRecord:S},null,8,["modelValue","column","cell-value"])],40,me)}}});export{De as default};

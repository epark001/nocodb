import{h as rt,T as ct,$ as g,r as m,aq as j,i as A,m as mt,P as dt,o as e,C as l,w,a as i,E as t,D as _,F as C,W as d,d as U,b as O,t as pt,c as b,aj as q,cp as ut,cF as G,d6 as _t,H,Q as ft,R as vt,L as ht}from"./entry.13466615.js";import{_ as yt}from"./TableIcon.vue.95089890.js";import{_ as kt}from"./ItemChip.28e6239c.js";import{c as xt,b as gt,C as wt,f as Ct}from"./index.5263eb1d.js";import{a as bt}from"./useLTARStore.0002d56d.js";import{a as Rt}from"./useSmartsheetRowStore.ef2cd001.js";import{C as It}from"./index.3cc83813.js";import{_ as Vt}from"./index.bc4f5185.js";import{_ as Lt}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.e7cf7635.js";import"./cell.b6c2deed.js";import"./index.8d89c37a.js";import"./index.2a3da6a9.js";import"./useMetas.223da623.js";import"./useSharedView.746b4f21.js";import"./deepCompare.d32ec333.js";import"./dataUtils.31dbfaee.js";import"./virtualCell.88c63e03.js";import"./index.62e3d60f.js";import"./Dropdown.a78be736.js";import"./useState.a6853ebd.js";import"./useRefs.6ea70d5c.js";import"./identity.b813b76e.js";import"./isSymbol.b9109ae5.js";import"./_flatRest.037bf8e3.js";import"./isMobile.e2e89480.js";import"./useMergedState.1cc2a884.js";import"./index.638acbb4.js";import"./Col.23d910dc.js";import"./responsiveObserve.9209e727.js";import"./index.89133b21.js";import"./isPlainObject.4c0f42f1.js";import"./_getPrototype.00be30f0.js";import"./LeftOutlined.b2689280.js";import"./RightOutlined.2c092523.js";import"./index.4385a501.js";import"./toArray.f6fa5a71.js";import"./antInputDirective.8ac36ea7.js";import"./useMemo.4991ab9d.js";import"./DownOutlined.9cfe3e0c.js";import"./CheckOutlined.80115d65.js";import"./SearchOutlined.c1eed30a.js";import"./FormItemContext.27b2e5db.js";import"./useBreakpoint.66a79637.js";const Tt=ft(()=>vt(()=>import("./index.90510877.js").then(r=>r.i),["./index.90510877.js","./entry.13466615.js","./entry.0f786d51.css","./TableIcon.vue.95089890.js","./Button.vue.a83cab3b.js","./index.f2e6837c.js","./debounce.dbc9bf77.js","./toNumber.7aa6a805.js","./isSymbol.b9109ae5.js","./_plugin-vue_export-helper.c27b6911.js","./Button.95d2a5ed.css","./Modal.vue.fe6a4790.js","./DeleteModal.7ab6f524.css","./useDashboard.34dd8f64.js","./useViewData.c2e6f1c7.js","./useMetas.223da623.js","./virtualCell.88c63e03.js","./dataUtils.31dbfaee.js","./index.5263eb1d.js","./useSharedView.746b4f21.js","./useSmartsheetStore.9bdf3b91.js","./views.3cd4bcb9.js","./index.2a3da6a9.js","./index.e7cf7635.js","./useCopy.a0671815.js","./useKanbanViewStore.d73f4042.js","./deepCompare.d32ec333.js","./useSmartsheetRowStore.ef2cd001.js","./index.82f05b6c.js","./Dropdown.a78be736.js","./RightOutlined.2c092523.js","./Icon.vue.e15b8911.js","./index.a6329415.js","./chevron-down.166de573.js","./index.44870401.js","./index.883a1693.css"],import.meta.url).then(r=>r.default||r)),zt={class:"py-6 nc-scrollbar-md"},Ft={class:"flex mb-4 items-center gap-2 px-12"},Mt={class:"flex items-center gap-1"},Nt={class:"nc-scrollbar-md"},Pt={class:"flex flex-col"},St={class:"px-12 cursor-pointer"},Bt={class:"flex items-center"},Dt={class:"flex-1 overflow-hidden min-w-0"},$t={key:0,class:"flex gap-2"},Et={class:"flex justify-center mt-6"},jt={key:1,class:"ml-12 text-gray-500"},At=rt({__name:"ListChildItems",props:{modelValue:{type:Boolean},cellValue:{},column:{}},emits:["update:modelValue","attachRecord"],setup(r,{emit:L}){const R=r,p=ct(R,"modelValue",L),I=g(xt,m(!1)),Q=g(gt,m(!1)),n=g(wt,m()),f=g(Ct,m(!1)),{childrenList:v,deleteRelatedRow:W,loadChildrenList:h,childrenListPagination:y,relatedTableDisplayValueProp:J,unlink:K,relatedTableMeta:V}=bt(),{isNew:c,state:T,removeLTARRef:z}=Rt();j([p,I],o=>{(o[0]||o[1])&&!c.value&&h()},{immediate:!0});const X=async o=>{c.value?await z(o,n==null?void 0:n.value):(await K(o),await h())},Y=async o=>{c.value&&await z(o,n==null?void 0:n.value)},Z=A(()=>I.value?mt("div",{class:"w-full p-2"}):dt),u=m(!1),k=m(),F=A(()=>{var o;return((o=n.value)==null?void 0:o.title)||""});j(()=>R.cellValue,()=>{!c.value&&p.value&&h()});const tt=o=>{f.value||(k.value=o,u.value=!0)};return(o,a)=>{const et=yt,ot=ht,st=kt,at=It,lt=Vt,it=Tt;return e(),l(_(t(Z)),{visible:t(p),"onUpdate:visible":a[4]||(a[4]=x=>H(p)?p.value=x:null),footer:null,title:"Child list","body-style":{padding:0},"wrap-class-name":"nc-modal-child-list"},{default:w(()=>{var x,M,N,P,S,B,D,$;return[i("div",zt,[i("div",Ft,[t(I)?d("",!0):(e(),l(_(t(C).reload),{key:0,class:"cursor-pointer text-gray-500","data-testid":"nc-child-list-reload",onClick:t(h)},null,8,["onClick"])),t(f)?d("",!0):(e(),l(ot,{key:1,type:"primary",ghost:"","data-testid":"nc-child-list-button-link-to",onClick:a[0]||(a[0]=s=>L("attachRecord"))},{default:w(()=>[i("div",Mt,[(e(),l(_(t(C).link),{type:"primary"})),U(" Link to ' "),O(et,{meta:t(V),class:"-mx-1 w-5"},null,8,["meta"]),U(" "+pt(t(V).title)+"' ",1)])]),_:1}))]),t(c)&&((M=(x=t(T))==null?void 0:x[t(F)])!=null&&M.length)||(P=(N=t(v))==null?void 0:N.pageInfo)!=null&&P.totalRows?(e(),b(q,{key:0},[i("div",Nt,[i("div",Pt,[i("div",St,[(e(!0),b(q,null,ut(((S=t(v))==null?void 0:S.list)??((B=t(T))==null?void 0:B[t(F)])??[],(s,nt)=>(e(),l(at,{key:nt,class:"nc-nested-list-item !my-2 !hover:bg-gray-200/50 hover:shadow-md",onClick:E=>tt(s)},{default:w(()=>[i("div",Bt,[i("div",Dt,[O(st,{border:!1,item:s,value:s[t(J)],column:R.column},null,8,["item","value","column"])]),t(f)?d("",!0):(e(),b("div",$t,[(e(),l(_(t(C).linkRemove),{class:"!text-base text-grey !hover:text-red-500 cursor-pointer nc-icon-transition","data-testid":"nc-child-list-icon-unlink",onClick:G(E=>X(s),["stop"])},null,8,["onClick"])),!t(f)&&!t(Q)?(e(),l(_(t(C).delete),{key:0,class:"!text-base text-grey !hover:text-red-500 cursor-pointer nc-icon-transition","data-testid":"nc-child-list-icon-delete",onClick:G(E=>t(W)(s,Y),["stop"])},null,8,["onClick"])):d("",!0)]))])]),_:2},1032,["onClick"]))),128))])])]),i("div",Et,[!t(c)&&((D=t(v))!=null&&D.pageInfo)?(e(),l(lt,{key:0,current:t(y).page,"onUpdate:current":a[1]||(a[1]=s=>t(y).page=s),"page-size":t(y).size,"onUpdate:pageSize":a[2]||(a[2]=s=>t(y).size=s),class:"mt-2 mx-auto",size:"small",total:+(($=t(v))==null?void 0:$.pageInfo.totalRows),"show-less-items":""},null,8,["current","page-size","total"])):d("",!0)])],64)):(e(),b("div",jt,"No Links"))]),(e(),l(_t,null,{default:w(()=>[t(k)&&t(u)?(e(),l(it,{key:0,modelValue:t(u),"onUpdate:modelValue":a[3]||(a[3]=s=>H(u)?u.value=s:null),row:{row:t(k),oldRow:t(k),rowMeta:{}},meta:t(V),"load-row":"","use-meta-fields":""},null,8,["modelValue","row","meta"])):d("",!0)]),_:1}))]}),_:1},40,["visible"])}}});const Me=Lt(At,[["__scopeId","data-v-8fddcb3b"]]);export{Me as default};

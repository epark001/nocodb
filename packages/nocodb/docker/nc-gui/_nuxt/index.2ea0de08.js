import{h as le,r as C,o as l,c,a as s,E as o,aj as S,t as _,W as p,C as m,b as u,w as x,cp as R,Q as k,L as ne,P as ae,d as B,aV as se,bN as re,f3 as A,I,D as ce,F as ie,R as g,cd as q,f4 as ue}from"./entry.13466615.js";import{_ as me}from"./Overlay.f7b74b5f.js";import{_ as de}from"./PoweredBy.vue.a293ad6b.js";import{u as _e}from"./useSharedFormViewStore.36596e3e.js";import{S as pe}from"./StreamBarcodeReader.6cc9d3fa.js";import{S as fe}from"./index.f2e6837c.js";import{_ as ve}from"./index.2c1df8bc.js";import{_ as ye}from"./_plugin-vue_export-helper.c27b6911.js";import"./NocoIcon.vue.b64ab60a.js";import"./256x256-trans.3b8151ad.js";import"./256x256.b96b2477.js";import"./urlUtils.f6dc4ebc.js";import"./index.5263eb1d.js";import"./index.2a3da6a9.js";import"./useMetas.223da623.js";import"./useSmartsheetRowStore.ef2cd001.js";import"./deepCompare.d32ec333.js";import"./dataUtils.31dbfaee.js";import"./virtualCell.88c63e03.js";import"./views.3cd4bcb9.js";import"./useSharedView.746b4f21.js";import"./debounce.dbc9bf77.js";import"./toNumber.7aa6a805.js";import"./isSymbol.b9109ae5.js";const be=k(()=>g(()=>import("./VirtualCell.79aff6cf.js"),["./VirtualCell.79aff6cf.js","./entry.13466615.js","./entry.0f786d51.css","./EditOrAddProvider.vue.9fbafb18.js","./Icon.vue.e15b8911.js","./Button.vue.a83cab3b.js","./index.f2e6837c.js","./debounce.dbc9bf77.js","./toNumber.7aa6a805.js","./isSymbol.b9109ae5.js","./_plugin-vue_export-helper.c27b6911.js","./Button.95d2a5ed.css","./useBetaFeatureToggle.52c326cd.js","./index.5263eb1d.js","./index.2ae12d3e.js","./validation.5ed31fc1.js","./useMetas.223da623.js","./index.6f605a00.js","./FormItem.fe59dafe.js","./identity.b813b76e.js","./_getPrototype.00be30f0.js","./Col.23d910dc.js","./responsiveObserve.9209e727.js","./toArray.f6fa5a71.js","./FormItemContext.27b2e5db.js","./useSize.dec45296.js","./_flatRest.037bf8e3.js","./isPlainObject.4c0f42f1.js","./index.a8ef1b7e.js","./Input.16966097.js","./antInputDirective.8ac36ea7.js","./SearchOutlined.c1eed30a.js","./TextArea.1bd4034f.js","./Password.d7b16461.js","./index.2660048d.js","./Checkbox.65681aa3.js","./createForOfIteratorHelper.37be2624.js","./index.4385a501.js","./isMobile.e2e89480.js","./useMemo.4991ab9d.js","./useMergedState.1cc2a884.js","./useState.a6853ebd.js","./DownOutlined.9cfe3e0c.js","./CheckOutlined.80115d65.js","./EditOrAddProvider.44ca9c5b.css","./virtualCell.88c63e03.js","./index.e7cf7635.js","./index.82f05b6c.js","./Dropdown.a78be736.js","./RightOutlined.2c092523.js","./VirtualCell.23f24363.css"],import.meta.url).then(n=>n.default||n)),he=k(()=>g(()=>import("./Cell.80a8ff87.js"),["./Cell.80a8ff87.js","./entry.13466615.js","./entry.0f786d51.css","./CellIcon.8e3c7692.js","./index.5263eb1d.js","./cell.b6c2deed.js","./useMetas.223da623.js","./EditOrAddProvider.vue.9fbafb18.js","./Icon.vue.e15b8911.js","./Button.vue.a83cab3b.js","./index.f2e6837c.js","./debounce.dbc9bf77.js","./toNumber.7aa6a805.js","./isSymbol.b9109ae5.js","./_plugin-vue_export-helper.c27b6911.js","./Button.95d2a5ed.css","./useBetaFeatureToggle.52c326cd.js","./index.2ae12d3e.js","./validation.5ed31fc1.js","./index.6f605a00.js","./FormItem.fe59dafe.js","./identity.b813b76e.js","./_getPrototype.00be30f0.js","./Col.23d910dc.js","./responsiveObserve.9209e727.js","./toArray.f6fa5a71.js","./FormItemContext.27b2e5db.js","./useSize.dec45296.js","./_flatRest.037bf8e3.js","./isPlainObject.4c0f42f1.js","./index.a8ef1b7e.js","./Input.16966097.js","./antInputDirective.8ac36ea7.js","./SearchOutlined.c1eed30a.js","./TextArea.1bd4034f.js","./Password.d7b16461.js","./index.2660048d.js","./Checkbox.65681aa3.js","./createForOfIteratorHelper.37be2624.js","./index.4385a501.js","./isMobile.e2e89480.js","./useMemo.4991ab9d.js","./useMergedState.1cc2a884.js","./useState.a6853ebd.js","./DownOutlined.9cfe3e0c.js","./CheckOutlined.80115d65.js","./EditOrAddProvider.44ca9c5b.css","./index.e7cf7635.js","./index.82f05b6c.js","./Dropdown.a78be736.js","./RightOutlined.2c092523.js","./Cell.c77dfd55.css"],import.meta.url).then(n=>n.default||n)),xe=k(()=>g(()=>import("./VirtualCell.6403155c.js"),["./VirtualCell.6403155c.js","./entry.13466615.js","./entry.0f786d51.css","./index.5263eb1d.js","./virtualCell.88c63e03.js"],import.meta.url).then(n=>n.default||n)),ke=k(()=>g(()=>import("./Cell.2ddf952b.js"),["./Cell.2ddf952b.js","./entry.13466615.js","./entry.0f786d51.css","./index.5263eb1d.js","./cell.b6c2deed.js","./useMetas.223da623.js","./useSmartsheetRowStore.ef2cd001.js","./deepCompare.d32ec333.js","./dataUtils.31dbfaee.js","./virtualCell.88c63e03.js","./index.2a3da6a9.js","./_plugin-vue_export-helper.c27b6911.js","./Cell.69966cf7.css"],import.meta.url).then(n=>n.default||n)),ge=k(()=>g(()=>import("./DivDataCell.7311abb6.js"),["./DivDataCell.7311abb6.js","./index.5263eb1d.js","./entry.13466615.js","./entry.0f786d51.css"],import.meta.url).then(n=>n.default||n)),we={class:"h-full flex flex-col items-center"},Ce={class:"color-transition relative flex flex-col justify-center gap-2 w-full max-w-[max(33%,600px)] m-auto py-4 pb-8 px-16 md:bg-white md:dark:bg-slate-700 md:rounded-lg md:border-1 md:border-gray-200 md:shadow-xl"},Se={class:"prose-2xl font-bold self-center my-4",style:{"word-break":"break-all"}},Ve={key:0,class:"prose-lg text-slate-500 dark:text-slate-300 self-center mb-4 leading-6",style:{"word-break":"break-all"}},Ee={key:2,class:"flex justify-center"},Le={key:0,class:"min-w-350px mt-3"},Te={key:0,class:"text-xs text-slate-500 dark:text-slate-300 text-center my-4"},$e={key:1,class:"text-center"},Oe={class:"relative flex flex-col h-full"},Fe={class:"w-full h-full flex items-center justify-center"},ze={class:"nc-form-wrapper"},De={class:"nc-form h-full"},Re={class:"flex flex-col gap-6"},Be={class:"flex nc-form-column-label"},Ae={class:"flex items-center gap-1"},Ie={class:"flex flex-col gap-2 text-slate-500 dark:text-slate-300 text-[0.75rem] my-2 px-1",style:{"word-break":"break-all"}},qe={class:"text-center mt-4"},Ne={class:"flex items-end"},Pe=le({__name:"index",setup(n){const{sharedFormView:i,submitForm:$,v$:N,formState:V,notFound:P,formColumns:E,submitted:O,secondsRemain:U,isLoading:j}=_e();function F(r,t=!1){var y;let a=r;return a.uidt===q.LinkToAnotherRecord&&a.colOptions&&a.colOptions.type===ue.BELONGS_TO&&(a=(y=E.value)==null?void 0:y.find(T=>T.id===a.colOptions.fk_child_column_id)),!!(t||a&&a.rqd&&!a.cdf)}const f=C(""),L=C(!1),v=C(!1),w=C([]),G=async()=>{L.value=!0},H=r=>{v.value=!0,f.value=r},M=r=>{var t;return(t=E.value)==null?void 0:t.find(a=>a.title===r)},Q=r=>{switch(r){case q.Number:return t=>parseInt(t);default:return t=>t}},W=async r=>{if(v.value)try{const t=M(f.value);if(t==null)throw new Error(`Field with title ${f.value} not found`);const a=Q(t.uidt)(r)||r;V.value[f.value]=a,f.value="",v.value=!1}catch(t){console.error(t)}};return(r,t)=>{const a=ve,y=ne,T=ae,J=fe,K=me,X=be,Y=he,Z=xe,ee=ke,te=ge,oe=de;return l(),c("div",we,[s("div",Ce,[o(i)?(l(),c(S,{key:0},[s("h1",Se,_(o(i).heading),1),o(i).subheading?(l(),c("h2",Ve,_(o(i).subheading),1)):p("",!0),o(P)?(l(),m(a,{key:1,type:"warning",class:"my-4 text-center",message:"Not found"})):o(O)?(l(),c("div",Ee,[o(i)?(l(),c("div",Le,[u(a,{type:"success",class:"my-4 text-center",outlined:"",message:o(i).success_msg||"Successfully submitted form data"},null,8,["message"]),o(i).show_blank_form?(l(),c("p",Te," New form will be loaded after "+_(o(U))+" seconds ",1)):p("",!0),o(i).submit_another_form?(l(),c("div",$e,[u(y,{type:"primary",onClick:t[0]||(t[0]=e=>O.value=!1)},{default:x(()=>[B(" Submit Another Form")]),_:1})])):p("",!0)])):p("",!0)])):(l(),c(S,{key:3},[u(T,{visible:v.value,"onUpdate:visible":t[1]||(t[1]=e=>v.value=e),closable:!1,width:"28rem",centered:"",footer:null,"wrap-class-name":"nc-modal-generate-token","destroy-on-close":"",onCancel:t[2]||(t[2]=e=>L.value=!1)},{default:x(()=>[s("div",Oe,[se(u(o(pe),{onDecode:W,onLoaded:G},null,512),[[re,L.value]])])]),_:1},8,["visible"]),u(K,{class:"bg-gray-400/75","model-value":o(j),inline:"",transition:""},{default:x(()=>[s("div",Fe,[u(J,{size:"large"})])]),_:1},8,["model-value"]),s("div",ze,[s("div",De,[s("div",Re,[(l(!0),c(S,null,R(o(E),(e,b)=>{var z;return l(),c("div",{key:b,class:"flex flex-col gap-2"},[s("div",Be,[o(A)(e)?(l(),m(X,{key:0,column:{...e,title:e.label||e.title},required:F(e,e.required),"hide-menu":!0},null,8,["column","required"])):(l(),m(Y,{key:1,column:{...e,title:e.label||e.title},required:F(e,e.required),"hide-menu":!0},null,8,["column","required"]))]),s("div",null,[u(te,{class:"flex relative"},{default:x(()=>{var h,D;return[o(A)(e)?(l(),m(Z,{key:0,"model-value":null,class:I(["mt-0 nc-input nc-cell",`nc-form-input-${(h=e.title)==null?void 0:h.replaceAll(" ","")}`]),"data-testid":`nc-form-input-cell-${e.label||e.title}`,column:e},null,8,["data-testid","class","column"])):(l(),m(ee,{key:1,modelValue:o(V)[e.title],"onUpdate:modelValue":d=>o(V)[e.title]=d,class:I(["nc-input truncate",`nc-form-input-${(D=e.title)==null?void 0:D.replaceAll(" ","")}`]),"data-testid":`nc-form-input-cell-${e.label||e.title}`,column:e,"edit-enabled":w.value[b],onClick:d=>w.value[b]=!0,onCancel:d=>w.value[b]=!1,"onUpdate:editEnabled":d=>w.value[b]=d},null,8,["modelValue","onUpdate:modelValue","data-testid","class","column","edit-enabled","onClick","onCancel","onUpdate:editEnabled"])),e.enable_scanner?(l(),m(y,{key:2,class:"nc-btn-fill-form-column-by-scan nc-toolbar-btn",alt:r.$t("activity.fillByCodeScan"),onClick:d=>H(e.title)},{default:x(()=>[s("div",Ae,[(l(),m(ce(o(ie).qrCodeScan),{class:"h-5 w-5"}))])]),_:2},1032,["alt","onClick"])):p("",!0)]}),_:2},1024),s("div",Ie,[(l(!0),c(S,null,R((z=o(N).localState[e.title])==null?void 0:z.$errors,h=>(l(),c("div",{key:h,class:"text-red-500"},_(h.$message),1))),128)),B(" "+_(e.description),1)])])])}),128))]),s("div",qe,[s("button",{type:"submit",class:"uppercase scaling-btn prose-sm","data-testid":"shared-form-submit-button",onClick:t[3]||(t[3]=(...e)=>o($)&&o($)(...e))},_(r.$t("general.submit")),1)])])])],64))],64)):p("",!0)]),s("div",Ne,[u(oe)])])}}});const dt=ye(Pe,[["__scopeId","data-v-c3ce4dfb"]]);export{dt as default};

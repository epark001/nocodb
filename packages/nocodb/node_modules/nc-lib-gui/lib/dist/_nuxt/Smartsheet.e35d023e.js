import{h as ne,cb as H,o,c as f,b as i,E as e,Q as N,R as U,A as Ve,S as Oe,$ as ve,r as w,i as W,aq as ee,cI as $e,w as l,aj as ie,cp as fe,a as n,t as F,C as y,H as de,d as se,W as V,aV as ce,J as ue,g as je,ap as Ae,I as J,D as Pe,F as Me,cB as We,p as Ee,e as ze,k as He,l as Ne,V as we,b5 as Ue,fA as Be,al as Ge,c4 as qe,Z as B,bP as Fe,cF as Je,cg as me,eW as Ke,cd as xe}from"./entry.51f4e399.js";import{_ as he}from"./Icon.vue.1162f18b.js";import{b as be,a as Xe,u as Qe,c as Ze}from"./useMetas.ba7abae7.js";import{_ as Ye}from"./Select.vue.e482f984.js";import{_ as Ie}from"./Button.vue.793bcd1d.js";import{_ as Te,u as ke,a as et}from"./Editor.134f7d8a.js";import{M as De,A as Ce,b as tt,d as ot,R as at,e as st,O as nt,F as it,c as lt,T as rt,f as ct}from"./index.5263eb1d.js";import{u as dt}from"./useCopy.3e897b55.js";import{a as ut,u as _t}from"./useSmartsheetStore.1784ce8b.js";import{u as pt}from"./useViewData.d5cf5dca.js";import{H as mt}from"./index.4089f0b3.js";import{S as vt}from"./index.5e746f62.js";import{_ as Le}from"./index.c4aafe5c.js";import{_ as pe}from"./_plugin-vue_export-helper.c27b6911.js";import{_ as ft}from"./nuxt-link.b37e7c69.js";import{_ as ht}from"./Dropdown.vue.97a9d1a0.js";import{_ as bt}from"./DeleteModal.vue.909e0964.js";import{u as _e}from"./views.28a76d89.js";import{_ as yt}from"./index.e56af360.js";import{u as Re}from"./index.9e760c64.js";import{u as ge}from"./sidebar.e289f4e1.js";import{g as Se,M as wt}from"./splitpanes.52041711.js";import{u as xt}from"./index.3c3505ee.js";import{u as kt}from"./useMapViewDataStore.30741ad6.js";import{u as gt}from"./useGridViewColumn.377be28c.js";import{u as St}from"./useKanbanViewStore.7f9b2a7a.js";import"./index.0db47614.js";import"./debounce.7d32c110.js";import"./toNumber.9dc54e53.js";import"./isSymbol.b53bd26f.js";import"./validation.6db726f3.js";import"./index.de92142d.js";import"./FormItem.cda40628.js";import"./identity.dd5da9ba.js";import"./_getPrototype.ec1165af.js";import"./Col.88cfabc0.js";import"./responsiveObserve.501a6cf9.js";import"./toArray.06afb623.js";import"./FormItemContext.e001cd7c.js";import"./useSize.3b3f469f.js";import"./_flatRest.ff2d3d5c.js";import"./isPlainObject.ecf52d25.js";import"./index.fbcca285.js";import"./index.e760d172.js";import"./Input.7cb175ff.js";import"./antInputDirective.8ac36ea7.js";import"./SearchOutlined.dec109ce.js";import"./TextArea.442a25cb.js";import"./Password.d493e47a.js";import"./index.0d6d8ba8.js";import"./Checkbox.a529f1e6.js";import"./createForOfIteratorHelper.12419aa5.js";import"./index.529d8b39.js";import"./index.b9981e09.js";import"./virtualCell.4dce1393.js";import"./dataUtils.edecace3.js";import"./useSharedView.0db5f32b.js";import"./isMobile.e2e89480.js";import"./useMemo.b13a9257.js";import"./useMergedState.5e6500b1.js";import"./useState.6010d8b6.js";import"./DownOutlined.db6f6406.js";import"./CheckOutlined.ef30fafc.js";import"./Dropdown.dc69c0a4.js";import"./useRefs.154aa2be.js";import"./index.252dc7b4.js";import"./RightOutlined.90e8180f.js";import"./Modal.vue.b59a28af.js";import"./deepCompare.d32ec333.js";const $t=N(()=>U(()=>import("./View.1516185f.js"),["./View.1516185f.js","./View.vue.877cd4d6.js","./entry.51f4e399.js","./entry.0f786d51.css","./Overlay.8132102a.js","./_plugin-vue_export-helper.c27b6911.js","./Overlay.09be8605.css","./index.0d6d8ba8.js","./Checkbox.a529f1e6.js","./FormItemContext.e001cd7c.js","./createForOfIteratorHelper.12419aa5.js","./useMetas.ba7abae7.js","./index.0db47614.js","./debounce.7d32c110.js","./toNumber.9dc54e53.js","./isSymbol.b53bd26f.js","./View.5176b468.css"],import.meta.url).then(t=>t.default||t)),Et={class:"flex flex-col p-4",style:{height:"calc(100vh - (var(--topbar-height) * 2))"}},zt=ne({__name:"Erd",setup(t){const{activeTable:$}=H(be());return(x,h)=>{var E;const c=$t;return o(),f("div",Et,[i(c,{table:e($),"base-id":(E=e($))==null?void 0:E.base_id,"show-all-columns":!1},null,8,["table","base-id"])])}}}),It=N(()=>U(()=>import("./Editor.32022328.js"),["./Editor.32022328.js","./Editor.vue.08021a9c.js","./entry.51f4e399.js","./entry.0f786d51.css","./deepCompare.d32ec333.js"],import.meta.url).then(t=>t.default||t)),Tt={class:"flex flex-col w-full h-full px-6 mt-1"},Dt={class:"text-sm capitalize select-none"},Ct={class:"flex flex-row w-full space-x-3 my-4 items-center"},Lt={class:"flex items-center"},Rt=ne({__name:"Api",setup(t){const{t:$}=Ve(),x=Xe(),{project:h}=H(x),{appInfo:c,token:E}=Oe(),O=ve(De,w()),d=ve(Ce,w()),{xWhere:G}=ut(),{queryParams:u}=pt(O,d,G),{copy:b}=dt(),I=[{name:"shell",clients:["curl","wget"]},{name:"javascript",clients:["axios","fetch","jquery","xhr"]},{name:"node",clients:["axios","fetch","request","native","unirest"]},{name:"nocodb-sdk",clients:["javascript","node"]},{name:"php"},{name:"python",clients:["python3","requests"]},{name:"ruby"},{name:"java"},{name:"c"}],g=w(I[0].clients&&I[0].clients[0]),T=w(I[0].name),v=W(()=>{var _,p;return new URL(`/api/v1/db/data/noco/${h.value.id}/${(_=O.value)==null?void 0:_.title}/views/${(p=d.value)==null?void 0:p.title}`,c.value&&c.value.ncSiteUrl||"/").href}),j=W(()=>new mt({method:"GET",headers:[{name:"xc-auth",value:E.value,comment:"JWT Auth token"}],url:v.value,queryString:Object.entries(u.value||{}).map(([_,p])=>({name:_,value:String(p)}))})),r=W(()=>I.find(_=>_.name===T.value)),R=W(()=>{var _,p,k,K,D,P;return((_=r.value)==null?void 0:_.name)==="nocodb-sdk"?`${g.value==="node"?'const { Api } = require("nocodb-sdk");':'import { Api } from "nocodb-sdk";'}
const api = new Api({
  baseURL: "${c.value&&c.value.ncSiteUrl||"/"}",
  headers: {
    "xc-auth": ${JSON.stringify(E.value)}
  }
})

api.dbViewRow.list(
  "noco",
  ${JSON.stringify(h.value.title)},
  ${JSON.stringify((p=O.value)==null?void 0:p.title)},
  ${JSON.stringify((k=d.value)==null?void 0:k.title)}, ${JSON.stringify(u.value,null,4)}).then(function (data) {
  console.log(data);
}).catch(function (error) {
  console.error(error);
});
    `:j.value.convert((K=r.value)==null?void 0:K.name,g.value||((D=r.value)==null?void 0:D.clients)&&((P=r.value)==null?void 0:P.clients[0]),{})}),A=async()=>{try{await b(R.value),ue.info($("msg.info.copiedToClipboard"))}catch(_){ue.error(_.message)}};return ee(r,_=>{var p;g.value=(p=_==null?void 0:_.clients)==null?void 0:p[0]}),(_,p)=>{const k=vt,K=Ye,D=he,P=Ie,X=It,Q=Le,q=Te,Z=$e("e");return o(),f("div",Tt,[i(q,{activeKey:e(T),"onUpdate:activeKey":p[1]||(p[1]=a=>de(T)?T.value=a:null),class:"!h-full"},{default:l(()=>[(o(),f(ie,null,fe(I,a=>i(Q,{key:a.name,class:"!h-full"},{tab:l(()=>[n("div",Dt,F(a.name),1)]),default:l(()=>{var m,z,C,L;return[n("div",Ct,[(m=e(r))!=null&&m.clients?(o(),y(K,{key:0,value:e(g),"onUpdate:value":p[0]||(p[0]=S=>de(g)?g.value=S:null),style:{width:"10rem"},class:"capitalize","dropdown-class-name":"nc-dropdown-snippet-active-lang"},{default:l(()=>{var S;return[(o(!0),f(ie,null,fe((S=e(r))==null?void 0:S.clients,(M,te)=>(o(),y(k,{key:te,class:"!w-full capitalize",value:M},{default:l(()=>[se(F(M),1)]),_:2},1032,["value"]))),128))]}),_:1},8,["value"])):V("",!0),ce((o(),y(P,{type:"secondary",size:"small",onClick:A},{default:l(()=>[n("div",Lt,[i(D,{icon:"copy",class:"mr-1"}),se(" "+F(_.$t("general.copy"))+" code ",1)])]),_:1})),[[Z,["c:snippet:copy",{client:((z=e(r))==null?void 0:z.clients)&&(e(g)||((C=e(r))==null?void 0:C.clients[0])),lang:(L=e(r))==null?void 0:L.name}]]])]),i(X,{class:"border-1 border-gray-200 py-4 rounded-lg",style:{height:"calc(100vh - (var(--topbar-height) * 2) - 8rem)"},"model-value":e(R),"read-only":!0,lang:"typescript",validate:!1,"disable-deep-compare":!0,"hide-minimap":""},null,8,["model-value"])]}),_:2},1024)),64))]),_:1},8,["activeKey"])])}}});const Vt=pe(Rt,[["__scopeId","data-v-ad4a8395"]]),le=t=>(Ee("data-v-014b0eee"),t=t(),ze(),t),Ot={class:"flex flex-row items-center gap-x-1"},jt={class:"flex flex-row ml-2"},At=le(()=>n("div",{class:"flex text-gray-400"},"/",-1)),Pt={class:"flex link"},Mt={class:"flex flex-row items-center justify-between w-full text-brand-500"},Wt=le(()=>n("span",{class:"ml-1"},"New Webhook",-1)),Ht={key:0,class:"flex flex-col h-full w-full items-center"},Nt={key:0,class:"flex flex-col px-1.5 py-2.5 ml-1 h-full justify-center items-center gap-y-6"},Ut=le(()=>n("div",{class:"flex text-gray-600 font-medium text-lg"},"Get started with web-hooks!",-1)),Bt=le(()=>n("div",{class:"flex flex-col items-center"},[n("div",{class:"flex"},"Create web-hooks to power you automations,"),n("div",{class:"flex"},"Get notified as soon as there are changes in your data")],-1)),Gt={class:"flex flex-row items-center justify-between w-full"},qt=le(()=>n("span",{class:"ml-1"},"New Webhook",-1)),Ft={key:1,class:"flex flex-col pb-2 mt-3 mb-2.5 w-full max-w-200"},Jt=We('<div class="flex flex-row nc-view-sidebar-webhook-header pl-3 pr-2 !py-2.5" data-v-014b0eee><div class="nc-view-sidebar-webhook-item-toggle header" data-v-014b0eee>Activate</div><div class="nc-view-sidebar-webhook-item-title header" data-v-014b0eee>Title</div><div class="nc-view-sidebar-webhook-item-event header" data-v-014b0eee>Event</div><div class="nc-view-sidebar-webhook-item-action header" data-v-014b0eee>Action</div></div>',1),Kt={class:"nc-view-sidebar-webhook-item-toggle"},Xt=["onClick"],Qt={class:"text-inherit group-hover:text-black capitalize"},Zt={class:"nc-view-sidebar-webhook-item-event capitalize"},Yt={class:"nc-view-sidebar-webhook-item-action !"},eo={class:"flex flex-col p-0 items-start"},to={class:"flex items-center gap-x-1"},oo={class:"flex items-center justify-start gap-x-1 !text-red-500"},ao={key:1,class:"flex w-full pr-4 justify-center"},so={class:"flex flex-col mt-4 p-8 mb-4 border-1 rounded-2xl w-full max-w-200",style:{height:"fit-content"}},no={key:0,class:"flex flex-row items-center py-2 px-3 bg-gray-50 rounded-lg text-gray-700 mb-4"},io={class:"capitalize text-ellipsis overflow-hidden select-none w-full pl-2.5",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},lo=ne({__name:"Webhooks",setup(t){const x=je().currentRoute,{hooks:h,webhookMainUrl:c,isHooksLoading:E}=H(ke()),{loadHooksList:O,deleteHook:d,copyHook:G,saveHooks:u,navigateToWebhook:b}=ke(),{activeView:I}=H(_e()),g=w(null),{activeTable:T}=H(be()),v=w(""),j=W(()=>h.value.find(a=>a.id===v.value)),r=w(void 0),R=W(()=>{if(r.value)return h.value.find(a=>a.id===r.value)}),A=w(!1),_=w(!1),p=w(!1),k=w(!1),K=async a=>{if(!p.value){p.value=!0;try{await G(a)}finally{p.value=!1}}},D=a=>{v.value=a,A.value=!0},P=async()=>{if(_.value=!0,!!v.value)try{await d(v.value)}finally{_.value=!1,A.value=!1,v.value=""}},X=a=>{b({hookId:a})};ee(A,()=>{A.value&&Ae(()=>{var a,m;(m=(a=g.value)==null?void 0:a.$el)==null||m.focus()})}),ee(()=>{var a;return(a=T.value)==null?void 0:a.id},async()=>{var a;(a=T.value)!=null&&a.id&&(r.value=void 0,await O())},{immediate:!0});const Q=async a=>{a.active=!a.active,await u({hook:a})},q=async()=>{b({openCreatePage:!0})},Z=()=>{b({openMainPage:!0})};return ee(()=>x.value.params.slugs,async()=>{if(!x.value.params.slugs){k.value=!1,r.value=void 0;return}x.value.params.slugs[1]==="create"?k.value=!0:k.value=!1,r.value=x.value.params.slugs&&x.value.params.slugs[1]||void 0},{immediate:!0}),(a,m)=>{const z=he,C=Ie,L=ft,S=yt,M=ht,te=et,oe=bt,ae=$e("e");return o(),f(ie,null,[e(I)&&!e(E)?(o(),f("div",{key:e(r),class:"flex flex-col pt-3 pb-12 border-gray-50 pl-3 pr-0 nc-view-sidebar-webhook nc-scrollbar-md",style:{height:"calc(100vh - (var(--topbar-height) * 2))"}},[n("div",{class:J(["flex flex-row justify-between w-full min-h-8 mb-8",{"!items-start mt-1":!e(r)&&!e(k)}])},[n("div",Ot,[e(k)||e(r)?(o(),y(C,{key:0,type:"text",size:"xsmall",onClick:m[0]||(m[0]=s=>e(b)({openMainPage:!0}))},{default:l(()=>[i(z,{icon:"arrowLeft"})]),_:1})):V("",!0),n("div",jt,[i(L,{class:"link",to:e(c)},{default:l(()=>[se("Webhooks")]),_:1},8,["to"])]),e(R)||e(k)?(o(),f(ie,{key:1},[At,n("div",Pt,F(e(R)?e(R).title:"Create"),1)],64)):V("",!0),e(R)?(o(),f("div",{key:2,class:J(["flex text-xs px-1.5 py-1 rounded-md ml-1",{"bg-green-200 text-green-800":e(R).active,"bg-gray-100 text-gray-500":!e(R).active}])},F(e(R).active?"Active":"Inactive"),3)):V("",!0)]),!e(r)&&!e(k)?ce((o(),y(C,{key:0,class:"mr-4 max-w-40",type:"secondary",size:"small",onClick:m[1]||(m[1]=s=>q())},{default:l(()=>[n("div",Mt,[Wt,i(z,{icon:"plus"})])]),_:1})),[[ae,["c:actions:webhook"]]]):V("",!0)],2),!e(r)&&!e(k)?(o(),f("div",Ht,[e(h).length===0?(o(),f("div",Nt,[i(z,{icon:"webhook",class:"flex text-5xl h-10",style:{"-webkit-text-stroke":"0.5px"}}),Ut,Bt,ce((o(),y(C,{class:"flex max-w-40",type:"primary",onClick:m[2]||(m[2]=s=>q())},{default:l(()=>[n("div",Gt,[qt,i(z,{icon:"plus"})])]),_:1})),[[ae,["c:actions:webhook"]]])])):(o(),f("div",Ft,[Jt,(o(!0),f(ie,null,fe(e(h),s=>(o(),f("div",{key:s.id,class:"nc-view-sidebar-webhook-item"},[n("div",{class:J(["flex flex-row w-full items-center pl-3 pr-2 py-2 hover:bg-gray-50 rounded-lg cursor-pointer group text-gray-600",{"bg-brand-50 !text-brand-500 hover:bg-brand-50":s.id===e(r)}])},[n("div",Kt,[ce(i(S,{size:"small",checked:!!s.active,class:"min-w-4",onChange:Y=>Q(s)},null,8,["checked","onChange"]),[[ae,["c:actions:webhook"]]])]),n("div",{class:"nc-view-sidebar-webhook-item-title font-medium flex flex-row items-center",onClick:Y=>X(s.id)},[n("div",Qt,F(s==null?void 0:s.title),1)],8,Xt),n("div",Zt,F(s==null?void 0:s.event)+" "+F(s==null?void 0:s.operation),1),n("div",Yt,[i(M,{trigger:["click"],"overlay-class-name":"!rounded-md"},{overlay:l(()=>[n("div",eo,[i(C,{type:"text",class:"w-full !rounded-none",loading:e(p),centered:!1,onClick:Y=>K(s)},{loading:l(()=>[se(" Duplicating ")]),default:l(()=>[n("div",to,[i(z,{icon:"copy"}),se(" Duplicate")])]),_:2},1032,["loading","onClick"]),i(C,{type:"text",class:"w-full !rounded-none",centered:!1,onClick:Y=>D(s.id)},{default:l(()=>[n("div",oo,[i(z,{icon:"delete"}),se(" Delete ")])]),_:2},1032,["onClick"])])]),default:l(()=>[i(C,{size:"xsmall",type:"text",class:J(["nc-btn-webhook-more !text-gray-500 !hover:text-gray-800",{"!hover:bg-brand-100":s.id===e(r),"!hover:bg-gray-200":s.id!==e(r)}])},{default:l(()=>[i(z,{icon:"threeDotVertical",class:"text-inherit"})]),_:2},1032,["class"])]),_:2},1024)])],2)]))),128))]))])):(o(),f("div",ao,[n("div",so,[(o(),y(te,{key:e(r),hook:e(R),onClose:Z,onDelete:m[3]||(m[3]=s=>A.value=!0)},null,8,["hook"]))])]))])):V("",!0),i(oe,{visible:e(A),"onUpdate:visible":m[4]||(m[4]=s=>de(A)?A.value=s:null),"entity-name":a.$t("objects.webhook"),"on-delete":P},{"entity-preview":l(()=>[e(j)?(o(),f("div",no,[(o(),y(Pe(("iconMap"in a?a.iconMap:e(Me)).hook),{class:"text-gray-600"})),n("div",io,F(e(j).title),1)])):V("",!0)]),_:1},8,["visible","entity-name"])],64)}}});const ro=pe(lo,[["__scopeId","data-v-014b0eee"]]),ye=t=>(Ee("data-v-b13821a5"),t=t(),ze(),t),co={class:"flex flex-col h-full w-full","data-testid":"nc-details-wrapper"},uo={class:"tab","data-testid":"nc-relations-tab"},_o=ye(()=>n("div",null,"Relations",-1)),po={class:"tab","data-testid":"nc-apis-tab"},mo=ye(()=>n("div",null,"APIs",-1)),vo={class:"tab","data-testid":"nc-webhooks-tab"},fo=ye(()=>n("div",null,"Webhooks",-1)),ho=ne({__name:"Details",setup(t){const{openedViewsTab:$}=H(_e()),{onViewsTabChange:x}=_e(),{isUIAllowed:h}=Re(),c=W({get(){return $.value},set(E){x(E)}});return ee(c,()=>{c.value==="webhook"&&!h("hookList")&&x("relation")},{immediate:!0}),(E,O)=>{const d=he,G=zt,u=Le,b=Vt,I=ro,g=Te;return o(),f("div",co,[i(g,{modelValue:e(c),"onUpdate:modelValue":O[0]||(O[0]=T=>de(c)?c.value=T:null)},{default:l(()=>[i(u,{key:"relation"},{tab:l(()=>[n("div",uo,[i(d,{icon:"erd",class:J(["tab-icon",{}])}),_o])]),default:l(()=>[i(G)]),_:1}),i(u,{key:"api"},{tab:l(()=>[n("div",po,[i(d,{icon:"code",class:J(["tab-icon",{}])}),mo])]),default:l(()=>[i(b)]),_:1}),e(h)("hookList")?(o(),y(u,{key:"webhook"},{tab:l(()=>[n("div",vo,[i(d,{icon:"webhook",class:J(["tab-icon",{}])}),fo])]),default:l(()=>[i(I)]),_:1})):V("",!0)]),_:1},8,["modelValue"])])}}});const bo=pe(ho,[["__scopeId","data-v-b13821a5"]]),re=250,yo=ne({__name:"SmartsheetResizable",setup(t){const{isRightSidebarOpen:$,isLeftSidebarOpen:x,leftSidebarWidthPercent:h,rightSidebarSize:c}=H(ge()),E=w(),O=w(),{rightSidebarState:d}=H(ge()),G=W(()=>100-c.value.current),u=w(window.innerWidth),b=W(()=>c.value.old*u.value/100),I=W({get:()=>c.value.current,set:v=>{c.value.current=v,c.value.old=v}});ee($,()=>{c.value.current=c.value.old,$.value?(setTimeout(()=>d.value="openStart",0),setTimeout(()=>d.value="openEnd",re)):(c.value.old=c.value.current,d.value="hiddenStart",setTimeout(()=>{c.value.current=0,d.value="hiddenEnd"},re))});function g(v){if(!E.value||d.value==="openEnd")return;const j=window.innerWidth;v.clientX>j-14&&["hiddenEnd","peekCloseEnd"].includes(d.value)?(d.value="peekOpenStart",setTimeout(()=>{d.value="peekOpenEnd"},re)):v.clientX<j-(b.value+10)&&d.value==="peekOpenEnd"&&(d.value="peekCloseOpen",setTimeout(()=>{d.value="peekCloseEnd"},re))}function T(){u.value=(100-h.value)/100*window.innerWidth}return He(()=>{document.addEventListener("mousemove",g),window.addEventListener("resize",T)}),Ne(()=>{document.removeEventListener("mousemove",g),window.removeEventListener("resize",T)}),ee([x,h],()=>{x.value?u.value=(100-h.value)/100*window.innerWidth:u.value=window.innerWidth},{immediate:!0}),(v,j)=>(o(),y(e(wt),{ref_key:"splitpaneWrapperRef",ref:O,class:J(["nc-view-sidebar-content-resizable-wrapper w-full h-full",{"hide-resize-bar":!e($)||e(d)==="openStart"}]),onResize:j[0]||(j[0]=r=>I.value=r[1].size)},{default:l(()=>[i(e(Se),{size:e(G)},{default:l(()=>[we(v.$slots,"content")]),_:3},8,["size"]),i(e(Se),{"min-size":"15%",size:e(I),"max-size":"40%",class:"nc-view-sidebar-splitpane relative !overflow-visible"},{default:l(()=>[n("div",{ref_key:"wrapperRef",ref:E,class:J(["nc-view-sidebar-wrapper relative flex flex-col h-full justify-center !min-w-32 absolute overflow-visible",{"minimized-height":!e($),"peek-sidebar":["peekOpenEnd","peekCloseOpen"].includes(e(d)),"hide-sidebar":["hiddenStart","hiddenEnd","peekCloseEnd"].includes(e(d))}]),style:Ue({width:e(d)==="hiddenEnd"?"0px":`${e(b)}px`})},[we(v.$slots,"sidebar")],6)]),_:3},8,["size"])]),_:3},8,["class"]))}});const wo=Be(()=>({sqlEditors:w(),selectBase:(...x)=>{},promptHistory:[]})),xo=N(()=>U(()=>import("./Topbar.14ae270a.js"),["./Topbar.14ae270a.js","./entry.51f4e399.js","./entry.0f786d51.css","./OpenLeftSidebarBtn.vue.7f8f7dc2.js","./Icon.vue.1162f18b.js","./Button.vue.793bcd1d.js","./index.0db47614.js","./debounce.7d32c110.js","./toNumber.9dc54e53.js","./isSymbol.b53bd26f.js","./_plugin-vue_export-helper.c27b6911.js","./Button.95d2a5ed.css","./Tooltip.vue.f55045dc.js","./Tooltip.b86f91a1.css","./sidebar.e289f4e1.js","./ViewIcon.vue.9fe867dc.js","./ViewIcon.fd2d300a.css","./views.28a76d89.js","./useMetas.ba7abae7.js","./useSharedView.0db5f32b.js","./index.5263eb1d.js","./index.e5ddde08.js","./useSmartsheetStore.1784ce8b.js","./index.b9981e09.js","./index.9e760c64.js","./Input.c36cd06d.js","./Topbar.5caf477f.css"],import.meta.url).then(t=>t.default||t)),ko=N(()=>U(()=>import("./Toolbar.9c3475b3.js"),["./Toolbar.9c3475b3.js","./entry.51f4e399.js","./entry.0f786d51.css","./index.5263eb1d.js","./useSharedView.0db5f32b.js","./useMetas.ba7abae7.js","./useSmartsheetStore.1784ce8b.js","./views.28a76d89.js","./index.b9981e09.js","./index.9e760c64.js","./Input.c36cd06d.js","./_plugin-vue_export-helper.c27b6911.js","./Toolbar.10ec8f83.css"],import.meta.url).then(t=>t.default||t)),go=N(()=>U(()=>import("./index.826d01f8.js"),["./index.826d01f8.js","./entry.51f4e399.js","./entry.0f786d51.css","./index.5263eb1d.js","./dataUtils.edecace3.js","./useSmartsheetStore.1784ce8b.js","./views.28a76d89.js","./useMetas.ba7abae7.js","./useSharedView.0db5f32b.js","./index.b9981e09.js","./useViewData.d5cf5dca.js","./virtualCell.4dce1393.js","./index.9e760c64.js","./useGridViewColumn.377be28c.js","./Icon.vue.1162f18b.js","./EditOrAddProvider.vue.09b12d8b.js","./Button.vue.793bcd1d.js","./index.0db47614.js","./debounce.7d32c110.js","./toNumber.9dc54e53.js","./isSymbol.b53bd26f.js","./_plugin-vue_export-helper.c27b6911.js","./Button.95d2a5ed.css","./useBetaFeatureToggle.5dbba600.js","./index.e5ddde08.js","./validation.6db726f3.js","./index.de92142d.js","./FormItem.cda40628.js","./identity.dd5da9ba.js","./_getPrototype.ec1165af.js","./Col.88cfabc0.js","./responsiveObserve.501a6cf9.js","./toArray.06afb623.js","./FormItemContext.e001cd7c.js","./useSize.3b3f469f.js","./_flatRest.ff2d3d5c.js","./isPlainObject.ecf52d25.js","./index.e760d172.js","./Input.7cb175ff.js","./antInputDirective.8ac36ea7.js","./SearchOutlined.dec109ce.js","./TextArea.442a25cb.js","./Password.d493e47a.js","./index.0d6d8ba8.js","./Checkbox.a529f1e6.js","./createForOfIteratorHelper.12419aa5.js","./index.5e746f62.js","./isMobile.e2e89480.js","./useMemo.b13a9257.js","./useMergedState.5e6500b1.js","./useState.6010d8b6.js","./DownOutlined.db6f6406.js","./CheckOutlined.ef30fafc.js","./EditOrAddProvider.44ca9c5b.css","./useCopy.3e897b55.js","./index.c7116bd2.js","./Input.c36cd06d.js","./index.252dc7b4.js","./Dropdown.dc69c0a4.js","./RightOutlined.90e8180f.js","./index.9194faf6.js","./index.d05e87a9.js","./index.98e58c56.css"],import.meta.url).then(t=>t.default||t)),So=N(()=>U(()=>import("./Gallery.edbaba56.js"),["./Gallery.edbaba56.js","./entry.51f4e399.js","./entry.0f786d51.css","./views.28a76d89.js","./useMetas.ba7abae7.js","./useSharedView.0db5f32b.js","./index.5263eb1d.js","./useSmartsheetStore.1784ce8b.js","./index.b9981e09.js","./index.9e760c64.js","./dataUtils.edecace3.js","./fileUtils.43128440.js","./virtualCell.4dce1393.js","./useAttachment.c953c895.js","./urlUtils.a77f6d4a.js","./useViewData.d5cf5dca.js","./index.8feceb04.js","./debounce.7d32c110.js","./toNumber.9dc54e53.js","./isSymbol.b53bd26f.js","./index.680937e8.js","./index.c4aafe5c.js","./Dropdown.dc69c0a4.js","./useState.6010d8b6.js","./useRefs.154aa2be.js","./identity.dd5da9ba.js","./_flatRest.ff2d3d5c.js","./isMobile.e2e89480.js","./useMergedState.5e6500b1.js","./index.529d8b39.js","./Col.88cfabc0.js","./responsiveObserve.501a6cf9.js","./index.fbcca285.js","./isPlainObject.ecf52d25.js","./_getPrototype.ec1165af.js","./index.252dc7b4.js","./RightOutlined.90e8180f.js","./Input.c36cd06d.js","./_plugin-vue_export-helper.c27b6911.js","./Gallery.56886e76.css"],import.meta.url).then(t=>t.default||t)),$o=N(()=>U(()=>import("./Form.63a4284f.js"),["./Form.63a4284f.js","./entry.51f4e399.js","./entry.0f786d51.css","./EditOrAddProvider.vue.09b12d8b.js","./Icon.vue.1162f18b.js","./Button.vue.793bcd1d.js","./index.0db47614.js","./debounce.7d32c110.js","./toNumber.9dc54e53.js","./isSymbol.b53bd26f.js","./_plugin-vue_export-helper.c27b6911.js","./Button.95d2a5ed.css","./useBetaFeatureToggle.5dbba600.js","./index.5263eb1d.js","./index.e5ddde08.js","./validation.6db726f3.js","./useMetas.ba7abae7.js","./index.de92142d.js","./FormItem.cda40628.js","./identity.dd5da9ba.js","./_getPrototype.ec1165af.js","./Col.88cfabc0.js","./responsiveObserve.501a6cf9.js","./toArray.06afb623.js","./FormItemContext.e001cd7c.js","./useSize.3b3f469f.js","./_flatRest.ff2d3d5c.js","./isPlainObject.ecf52d25.js","./index.e760d172.js","./Input.7cb175ff.js","./antInputDirective.8ac36ea7.js","./SearchOutlined.dec109ce.js","./TextArea.442a25cb.js","./Password.d493e47a.js","./index.0d6d8ba8.js","./Checkbox.a529f1e6.js","./createForOfIteratorHelper.12419aa5.js","./index.5e746f62.js","./isMobile.e2e89480.js","./useMemo.b13a9257.js","./useMergedState.5e6500b1.js","./useState.6010d8b6.js","./DownOutlined.db6f6406.js","./CheckOutlined.ef30fafc.js","./EditOrAddProvider.44ca9c5b.css","./useSmartsheetRowStore.aafbb4bb.js","./deepCompare.d32ec333.js","./dataUtils.edecace3.js","./virtualCell.4dce1393.js","./index.b9981e09.js","./index.9e760c64.js","./useViewColumns.96f2a704.js","./useViewData.d5cf5dca.js","./useSharedView.0db5f32b.js","./useSmartsheetStore.1784ce8b.js","./views.28a76d89.js","./vuedraggable.umd.f8ba38de.js","./index.680937e8.js","./index.c4aafe5c.js","./Dropdown.dc69c0a4.js","./useRefs.154aa2be.js","./index.529d8b39.js","./index.fbcca285.js","./index.252dc7b4.js","./RightOutlined.90e8180f.js","./index.7230021b.js","./index.e56af360.js","./index.2b3cfde3.js","./Form.d09821d5.css"],import.meta.url).then(t=>t.default||t)),Eo=N(()=>U(()=>import("./Kanban.18479114.js"),["./Kanban.18479114.js","./entry.51f4e399.js","./entry.0f786d51.css","./DeleteModal.vue.909e0964.js","./Icon.vue.1162f18b.js","./Button.vue.793bcd1d.js","./index.0db47614.js","./debounce.7d32c110.js","./toNumber.9dc54e53.js","./isSymbol.b53bd26f.js","./_plugin-vue_export-helper.c27b6911.js","./Button.95d2a5ed.css","./Modal.vue.b59a28af.js","./DeleteModal.7ab6f524.css","./index.5263eb1d.js","./views.28a76d89.js","./useMetas.ba7abae7.js","./useSharedView.0db5f32b.js","./index.9e760c64.js","./dataUtils.edecace3.js","./fileUtils.43128440.js","./virtualCell.4dce1393.js","./useAttachment.c953c895.js","./urlUtils.a77f6d4a.js","./useKanbanViewStore.7f9b2a7a.js","./deepCompare.d32ec333.js","./useSmartsheetStore.1784ce8b.js","./index.b9981e09.js","./vuedraggable.umd.f8ba38de.js","./index.252dc7b4.js","./Dropdown.dc69c0a4.js","./RightOutlined.90e8180f.js","./index.680937e8.js","./index.c4aafe5c.js","./useState.6010d8b6.js","./useRefs.154aa2be.js","./identity.dd5da9ba.js","./_flatRest.ff2d3d5c.js","./isMobile.e2e89480.js","./useMergedState.5e6500b1.js","./index.529d8b39.js","./Col.88cfabc0.js","./responsiveObserve.501a6cf9.js","./index.fbcca285.js","./isPlainObject.ecf52d25.js","./_getPrototype.ec1165af.js","./Input.c36cd06d.js","./index.69bbd6c7.js","./isNumeric.3f69e2aa.js","./LeftOutlined.3bb8aa17.js","./index.8feceb04.js","./index.2b3cfde3.js","./Kanban.983d325a.css"],import.meta.url).then(t=>t.default||t)),zo=N(()=>U(()=>import("./Map.674f49ee.js"),["./Map.674f49ee.js","./entry.51f4e399.js","./entry.0f786d51.css","./index.5263eb1d.js","./useMapViewDataStore.30741ad6.js","./index.9e760c64.js","./useSmartsheetStore.1784ce8b.js","./views.28a76d89.js","./useMetas.ba7abae7.js","./useSharedView.0db5f32b.js","./index.b9981e09.js","./dataUtils.edecace3.js","./geoDataUtils.62b1d864.js","./_plugin-vue_export-helper.c27b6911.js","./Map.1e03369a.css"],import.meta.url).then(t=>t.default||t)),Io=N(()=>U(()=>import("./index.cdeac92d.js"),["./index.cdeac92d.js","./entry.51f4e399.js","./entry.0f786d51.css","./ViewIcon.vue.9fe867dc.js","./ViewIcon.fd2d300a.css","./Button.vue.793bcd1d.js","./index.0db47614.js","./debounce.7d32c110.js","./toNumber.9dc54e53.js","./isSymbol.b53bd26f.js","./_plugin-vue_export-helper.c27b6911.js","./Button.95d2a5ed.css","./Modal.vue.d8394846.js","./DeleteModal.7ab6f524.css","./index.e760d172.js","./Input.7cb175ff.js","./antInputDirective.8ac36ea7.js","./FormItemContext.e001cd7c.js","./SearchOutlined.dec109ce.js","./isPlainObject.ecf52d25.js","./_getPrototype.ec1165af.js","./TextArea.442a25cb.js","./Password.d493e47a.js","./index.de92142d.js","./FormItem.cda40628.js","./identity.dd5da9ba.js","./Col.88cfabc0.js","./responsiveObserve.501a6cf9.js","./toArray.06afb623.js","./useSize.3b3f469f.js","./_flatRest.ff2d3d5c.js","./index.5e746f62.js","./isMobile.e2e89480.js","./useMemo.b13a9257.js","./useMergedState.5e6500b1.js","./useState.6010d8b6.js","./DownOutlined.db6f6406.js","./CheckOutlined.ef30fafc.js","./Icon.vue.1162f18b.js","./Tooltip.vue.f55045dc.js","./Tooltip.b86f91a1.css","./tab.da86c3fb.js","./useMetas.ba7abae7.js","./sidebar.e289f4e1.js","./index.5263eb1d.js","./index.277e21b7.js","./index.9e760c64.js","./views.28a76d89.js","./useSharedView.0db5f32b.js","./Input.c36cd06d.js","./index.31cd0071.css"],import.meta.url).then(t=>t.default||t)),To=N(()=>U(()=>import("./Detached.b5fbd810.js"),["./Detached.b5fbd810.js","./entry.51f4e399.js","./entry.0f786d51.css","./index.8b8de496.js","./index.b9981e09.js"],import.meta.url).then(t=>t.default||t)),Do={key:0,class:"flex flex-col h-full flex-1 min-w-0"},Co={class:"flex flex-row w-full",style:{height:"calc(100% - var(--topbar-height))"}},Lo={key:0,class:"flex flex-1 min-h-0 w-3/4"},Ro={key:0,class:"h-full flex-1 min-w-0 min-h-0 bg-white"},Vo=ne({__name:"Smartsheet",props:{activeTab:{}},setup(t){const $=t,{isUIAllowed:x}=Re(),{metas:h,getMeta:c}=Qe();xt("nc-right-sidebar");const E=ve(tt,w(!1)),O=Ge($,"activeTab"),d=w([]),G=qe(),u=W(()=>{const D=G.params.viewId;return D&&h.value[D]}),{activeView:b,openedViewsTab:I}=H(_e()),{isGallery:g,isGrid:T,isForm:v,isKanban:j,isLocked:r,isMap:R}=_t(b,u);wo(),H(Ze()),H(be());const A=me(),_=me(),p=me();St(u,b),kt(u,b),gt(b),B(De,u),B(Ce,b),B(ot,r),B(at,A),B(st,_),B(nt,p),B(it,d),B(lt,v),B(rt,O),B(ct,W(()=>!x("xcDatatableEditable")));const k=w(),K=async D=>{var P,X,Q,q,Z,a,m,z,C;D.preventDefault();try{const L=JSON.parse(D.dataTransfer.getData("text/json"));if(L.baseId!==((P=u.value)==null?void 0:P.base_id)||L.type!=="table"||((X=u.value)==null?void 0:X.type)!=="table")return;const S=await c(L.id),M=h.value[u.value.id];if(!S||!M)return;const te=(Q=M.columns)==null?void 0:Q.find(s=>s.pk),oe=(q=S.columns)==null?void 0:q.find(s=>s.pk),ae=(Z=M.columns)==null?void 0:Z.find(s=>{if(!Ke(s))return!1;const Y=s.colOptions;return Y.type!=="mm"||s.system?!1:Y.fk_related_model_id===S.id});if(ae){const s=((a=S.columns)==null?void 0:a.find(Y=>Y.pv))??((m=S.columns)==null?void 0:m[0]);(z=k.value)==null||z.openColumnCreate({uidt:xe.Lookup,title:`${L.title} Lookup`,fk_relation_column_id:ae.id,fk_lookup_column_id:s==null?void 0:s.id})}else{if(!te){ue.error("Parent table does not have a primary key column");return}if(!oe){ue.error("Child table does not have a primary key column");return}(C=k.value)==null||C.openColumnCreate({uidt:xe.Links,title:`${L.title}List`,parentId:M.id,childId:S.id,parentTable:M.title,parentColumn:te.title,childTable:S.title,childColumn:oe==null?void 0:oe.title})}}catch(L){console.log("error",L)}};return(D,P)=>{const X=xo,Q=ko,q=go,Z=So,a=$o,m=Eo,z=zo,C=bo,L=Io,S=yo,M=To;return o(),f("div",{class:"nc-container flex flex-col h-full",onDrop:K,onDragover:P[0]||(P[0]=Je(()=>{},["prevent"]))},[i(X),i(S,{style:{height:"calc(100% - var(--topbar-height))"}},{content:l(()=>[e(I)==="view"?(o(),f("div",Do,[e(v)?V("",!0):(o(),y(Q,{key:0})),n("div",Co,[i(Fe,{name:"layout",mode:"out-in"},{default:l(()=>[e(u)?(o(),f("div",Lo,[e(b)?(o(),f("div",Ro,[e(T)?(o(),y(q,{key:0,ref_key:"grid",ref:k},null,512)):e(g)?(o(),y(Z,{key:1})):e(v)&&!D.$route.query.reload?(o(),y(a,{key:2})):e(j)?(o(),y(m,{key:3})):e(R)?(o(),y(z,{key:4})):V("",!0)])):V("",!0)])):V("",!0)]),_:1})])])):(o(),y(C,{key:1}))]),sidebar:l(()=>[e(E)?V("",!0):(o(),y(L,{key:0}))]),_:1}),i(M)],32)}}});const Xa=pe(Vo,[["__scopeId","data-v-1f98a1cd"]]);export{Xa as default};

import{a as V}from"./useMetas.ba7abae7.js";import{ch as C,r as s,at as E,i as H,ct as S,aq as h,k as L,ac as N,o as I,c as j,V as b,b as P,W as y,a as p,t as x,ap as D,p as O,e as T}from"./entry.51f4e399.js";const Z=C("share",()=>{const e=s("none"),{project:o}=E(V()),t=H(()=>{var f,c,i,g;return typeof((f=o.value)==null?void 0:f.meta)=="string"?JSON.parse((c=o.value)==null?void 0:c.meta).isPublic:(g=(i=o.value)==null?void 0:i.meta)==null?void 0:g.isPublic}),n=s("none"),r=s(!1),a=s(!1),m=s(!1),v=s({emails:void 0,role:S.Viewer,invitationToken:void 0});return h([t],()=>{e.value=t.value?"public":"private"},{immediate:!0,deep:!0}),{visibility:e,showShareModal:m,formStatus:n,invitationValid:r,invitationUsersData:v,isProjectPublic:t,resetData:()=>{n.value="project-collaborate",r.value=!1,v.value={emails:void 0,role:S.Viewer,invitationToken:void 0},a.value=!1},isInvitationLinkCopied:a}}),q=(e,o)=>{const t=e.__vccOpts||e;for(const[n,r]of o)t[n]=r;return t},$={},M=e=>(O("data-v-259be2b2"),e=e(),T(),e),R={class:"container"},U=M(()=>p("div",{class:"spinner"},null,-1)),W=[U];function z(e,o){return I(),j("div",R,W)}const A=q($,[["render",z],["__scopeId","data-v-259be2b2"],["__file","/home/oumoussa/side-projects/infinite/src/components/Spinner.vue"]]),F=e=>({loading(){e.value="loading"},loaded(){e.value="loaded"},complete(){e.value="complete"},error(){e.value="error"}}),G=(e,o,t)=>()=>{const n=t.parentEl||document.documentElement;t.prevHeight=n.scrollHeight,o.loading(),e("infinite",o)},J=(e,o)=>{const t=e.getBoundingClientRect();if(!o)return t.top>=0&&t.bottom<=window.innerHeight;const n=o.getBoundingClientRect();return t.top>=n.top&&t.bottom<=n.bottom},w=e=>{e.parentEl=document.querySelector(e.target)||null;let o=`0px 0px ${e.distance}px 0px`;e.top&&(o=`${e.distance}px 0px 0px 0px`);const t=new IntersectionObserver(n=>{n[0].isIntersecting&&(e.firstload&&e.emit(),e.firstload=!0)},{root:e.parentEl,rootMargin:o});return t.observe(e.infiniteLoading.value),t},K={class:"state-error"},Q={__name:"InfiniteLoading",props:{top:{type:Boolean,required:!1},target:{type:[String,Boolean],required:!1},distance:{type:Number,required:!1,default:0},identifier:{required:!1},firstload:{type:Boolean,required:!1,default:!0},slots:{type:Object,required:!1}},emits:["infinite"],setup(e,{emit:o}){const t=e;let n=null;const r=s(null),a=s("ready"),{top:m,firstload:v,target:_,distance:f}=t,{identifier:c}=E(t),i={infiniteLoading:r,target:_,top:m,firstload:v,distance:f,prevHeight:0,parentEl:null};i.emit=G(o,F(a),i);const g=()=>h(a,async l=>{const d=i.parentEl||document.documentElement;await D(),l=="loaded"&&m&&(d.scrollTop=d.scrollHeight-i.prevHeight),l=="loaded"&&J(r.value,i.parentEl)&&i.emit(),l=="complete"&&n.disconnect()}),k=()=>h(c,()=>{a.value="ready",n.disconnect(),n=w(i)});return L(()=>{n=w(i),g(),c&&k()}),N(()=>{n.disconnect()}),(l,d)=>(I(),j("div",{ref_key:"infiniteLoading",ref:r},[a.value=="loading"?b(l.$slots,"spinner",{key:0},()=>[P(A)],!0):y("v-if",!0),a.value=="complete"?b(l.$slots,"complete",{key:1},()=>{var u;return[p("span",null,x(((u=e.slots)==null?void 0:u.complete)||"No more results!"),1)]},!0):y("v-if",!0),a.value=="error"?b(l.$slots,"error",{key:2,retry:i.emit},()=>{var u;return[p("span",K,[p("span",null,x(((u=e.slots)==null?void 0:u.error)||"Oops something went wrong!"),1),p("button",{class:"retry",onClick:d[0]||(d[0]=(...B)=>i.emit&&i.emit(...B))}," retry ")])]},!0):y("v-if",!0)],512))}},ee=q(Q,[["__scopeId","data-v-9d82030b"],["__file","/home/oumoussa/side-projects/infinite/src/components/InfiniteLoading.vue"]]);export{ee as K,Z as u};

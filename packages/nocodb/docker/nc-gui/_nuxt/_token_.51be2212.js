import{o as l,c,a as s,h as G,c4 as M,S as W,z as D,A as O,r as A,B as H,k as Q,C as Y,w as h,Q as J,c9 as K,b as r,E as t,t as i,W as u,bP as X,aj as q,d as _,H as ee,R as te,y as oe,f as se}from"./entry.13466615.js";import{_ as ne}from"./nuxt-link.d273ea3b.js";import{b as ae,e as re}from"./useMetas.223da623.js";import{v as ie}from"./validation.5ed31fc1.js";import{_ as le,a as ce}from"./google-gmail.a853ce33.js";import{_ as me}from"./warning.86b9a4f5.js";import"./index.a8ef1b7e.js";import{I as pe}from"./Input.16966097.js";import{F as ue}from"./index.6f605a00.js";import{_ as _e}from"./FormItem.fe59dafe.js";import{_ as de}from"./Password.d7b16461.js";import{_ as ge}from"./index.7677ce8f.js";import"./SearchOutlined.c1eed30a.js";import"./isPlainObject.4c0f42f1.js";import"./_getPrototype.00be30f0.js";import"./TextArea.1bd4034f.js";import"./antInputDirective.8ac36ea7.js";import"./FormItemContext.27b2e5db.js";import"./useSize.dec45296.js";import"./identity.b813b76e.js";import"./isSymbol.b9109ae5.js";import"./_flatRest.037bf8e3.js";import"./debounce.dbc9bf77.js";import"./toNumber.7aa6a805.js";import"./Col.23d910dc.js";import"./responsiveObserve.9209e727.js";import"./toArray.f6fa5a71.js";function fe(p){let d="",n=!0;return p?p.length>=8||(d+="At least 8 letters. ",n=!1):(d="At least 8 letters",n=!1),{error:d,valid:n,hint:null}}const he={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ye=s("path",{fill:"currentColor",d:"m5.65 10.025l1.95.825q.35-.7.725-1.35t.825-1.3l-1.4-.275l-2.1 2.1ZM9.2 12.1l2.85 2.825q1.05-.4 2.25-1.225t2.25-1.875q1.75-1.75 2.738-3.887T20.15 4q-1.8-.125-3.95.863T12.3 7.6q-1.05 1.05-1.875 2.25T9.2 12.1Zm4.45-1.625q-.575-.575-.575-1.412t.575-1.413q.575-.575 1.425-.575t1.425.575q.575.575.575 1.413t-.575 1.412q-.575.575-1.425.575t-1.425-.575Zm.475 8.025l2.1-2.1l-.275-1.4q-.65.45-1.3.812t-1.35.713l.825 1.975ZM21.95 2.175q.475 3.025-.587 5.888T17.7 13.524L18.2 16q.1.5-.05.975t-.5.825l-4.2 4.2l-2.1-4.925L7.075 12.8L2.15 10.7l4.175-4.2q.35-.35.838-.5t.987-.05l2.475.5q2.6-2.6 5.45-3.675t5.875-.6Zm-18.025 13.8q.875-.875 2.138-.887t2.137.862q.875.875.863 2.138t-.888 2.137q-.625.625-2.087 1.075t-4.038.8q.35-2.575.8-4.038t1.075-2.087Zm1.425 1.4q-.25.25-.5.913t-.35 1.337q.675-.1 1.338-.338t.912-.487q.3-.3.325-.725T6.8 17.35q-.3-.3-.725-.288t-.725.313Z"},null,-1),be=[ye];function ve(p,d){return l(),c("svg",he,be)}const we={name:"material-symbols-rocket-launch-outline",render:ve},ke=J(()=>te(()=>import("./NocoIcon.2bbe5af4.js"),["./NocoIcon.2bbe5af4.js","./NocoIcon.vue.b64ab60a.js","./entry.13466615.js","./entry.0f786d51.css","./256x256-trans.3b8151ad.js","./256x256.b96b2477.js"],import.meta.url).then(p=>p.default||p)),xe={class:"md:bg-primary bg-opacity-5 signup h-full min-h-[600px] flex flex-col justify-center items-center"},qe={class:"bg-white mt-[60px] relative flex flex-col justify-center gap-2 w-full max-w-[500px] mx-auto p-8 md:rounded-lg md:border-1 md:border-gray-200 md:shadow-xl"},$e={class:"prose-2xl font-bold self-center my-4"},Ue={key:0,class:"prose !text-primary font-semibold self-center"},Ee={key:0,class:"self-center mb-4 bg-red-500 text-white rounded-lg w-3/4 mx-auto p-1","data-testid":"nc-signup-error"},Ae={class:"flex items-center gap-2 justify-center"},Ie={class:"break-words"},Te={class:"self-center flex flex-col flex-wrap gap-4 items-center mt-4"},Re={key:0,class:"scaling-btn bg-opacity-100",type:"submit"},Pe={class:"flex items-center gap-2"},Le=["href"],Se={class:"flex items-center gap-2"},Be={key:2,class:"self-center flex flex-col flex-wrap gap-4 items-center mt-4 justify-center"},Ne=["href"],Ce={type:"button",class:"scaling-btn bg-opacity-100"},Fe={class:"flex items-center gap-2"},Ve={key:3,class:"flex items-center gap-2"},Ze=s("div",{class:"prose-xs text-gray-500"},"Subscribe to our weekly newsletter",-1),je={class:"text-end prose-sm"},ze=s("div",{class:"prose-sm mt-4 text-gray-500"},[_(" By signing up, you agree to the "),s("a",{class:"prose-sm !text-gray-500 underline",target:"_blank",href:"https://nocodb.com/policy-nocodb"},"Terms of Service")],-1),ft=G({__name:"[[token]]",setup(p){const{$e:d}=se(),$=M(),{appInfo:n,signIn:I}=W(),{api:T,isLoading:R,error:b}=D({useGlobalInstance:!0}),{t:k}=O(),{navigateToTable:P}=ae(),{clearWorkspaces:L}=re(),U=A(),v=A(!1),g=H({email:"",password:""}),E={email:[{required:!0,message:k("msg.error.signUpRules.emailReqd")},{validator:(e,o)=>new Promise((m,a)=>{if(!(o!=null&&o.length)||ie(o))return m();a(new Error(k("msg.error.signUpRules.emailInvalid")))}),message:k("msg.error.signUpRules.emailInvalid")}],password:[{validator:(e,o)=>new Promise((m,a)=>{const{error:f,valid:w}=fe(o);if(w)return m();a(new Error(f))})}]};async function S(){if(!U.value.validate())return;x();const e={...g,token:$.params.token};e.ignore_subscribe=!v.value,T.auth.signup(e).then(async o=>{var m;I(o.token),d("a:auth:sign-up");try{const a=o.createdProject,f=(m=a==null?void 0:a.tables)==null?void 0:m[0];if(a&&f)return await P({projectId:a.id,tableId:f.id,workspaceId:"nc"})}catch(a){console.error(a)}await oe("/")})}function x(){b.value&&(b.value=null)}return Q(async()=>{await L()}),(e,o)=>{const m=ke,a=me,f=pe,w=_e,B=de,N=we,C=le,F=ce,V=ge,Z=ne,j=ue,z=K;return l(),Y(z,null,{default:h(()=>[s("div",xe,[s("div",qe,[r(m,{class:"color-transition hover:ring hover:ring-accent hover:ring-opacity-100",animate:t(R)},null,8,["animate"]),s("h1",$e,i(e.$t("general.signUp"))+" "+i(e.$route.query.redirect_to==="/referral"?"& REFER":"")+" "+i(e.$route.query.redirect_to==="/pricing"?"& BUY":""),1),t(n).firstUser?(l(),c("h2",Ue,i(e.$t("msg.info.signUp.superAdmin")),1)):u("",!0),r(j,{ref_key:"formValidator",ref:U,model:t(g),layout:"vertical","no-style":"",onFinish:S},{default:h(()=>[t(n).disableEmailAuth?u("",!0):(l(),c(q,{key:0},[r(X,{name:"layout"},{default:h(()=>[t(b)?(l(),c("div",Ee,[s("div",Ae,[r(a),s("div",Ie,i(t(b)),1)])])):u("",!0)]),_:1}),r(w,{label:e.$t("labels.email"),name:"email",rules:E.email},{default:h(()=>[r(f,{value:t(g).email,"onUpdate:value":o[0]||(o[0]=y=>t(g).email=y),size:"large",placeholder:e.$t("msg.info.signUp.workEmail"),onFocus:x},null,8,["value","placeholder"])]),_:1},8,["label","rules"]),r(w,{label:e.$t("labels.password"),name:"password",rules:E.password},{default:h(()=>[r(B,{value:t(g).password,"onUpdate:value":o[1]||(o[1]=y=>t(g).password=y),size:"large",class:"password",placeholder:e.$t("msg.info.signUp.enterPassword"),onFocus:x},null,8,["value","placeholder"])]),_:1},8,["label","rules"])],64)),s("div",Te,[t(n).disableEmailAuth?u("",!0):(l(),c("button",Re,[s("span",Pe,[r(N),_(" "+i(e.$t("general.signUp")),1)])])),t(n).googleAuthEnabled?(l(),c("a",{key:1,href:`${t(n).ncSiteUrl}/auth/google`,class:"scaling-btn bg-opacity-100 !after:bg-white !text-primary !no-underline"},[s("span",Se,[r(C),_(" "+i(e.$t("labels.signUpWithProvider",{provider:"Google"})),1)])],8,Le)):u("",!0),t(n).oidcAuthEnabled?(l(),c("div",Be,[s("a",{href:`${t(n).ncSiteUrl}/auth/oidc`,class:"!text-primary !no-underline"},[s("button",Ce,[s("span",Fe,[r(F),t(n).disableEmailAuth?(l(),c(q,{key:1},[_(i(e.$t("general.signUp")),1)],64)):(l(),c(q,{key:0},[_(i(e.$t("labels.signUpWithProvider",{provider:t(n).oidcProviderName||"OpenID Connect"})),1)],64))])])],8,Ne)])):u("",!0),t(n).disableEmailAuth?u("",!0):(l(),c("div",Ve,[r(V,{checked:t(v),"onUpdate:checked":o[2]||(o[2]=y=>ee(v)?v.value=y:null),size:"small",class:"my-1 hover:ring hover:ring-accent hover:ring-opacity-100 !focus:ring !focus:ring-accent focus:ring-opacity-100"},null,8,["checked"]),Ze])),s("div",je,[_(i(e.$t("msg.info.signUp.alreadyHaveAccount"))+" ",1),r(Z,{to:"/signin"},{default:h(()=>[_(i(e.$t("general.signIn")),1)]),_:1})])])]),_:1},8,["model"])]),ze])]),_:1})}}});export{ft as default};
